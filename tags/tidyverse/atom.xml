<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>Josiah Parry - tidyverse</title>
    <link rel="self" type="application/atom+xml" href="https://josiah.rs/tags/tidyverse/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://josiah.rs"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2018-10-27T00:00:00+00:00</updated>
    <id>https://josiah.rs/tags/tidyverse/atom.xml</id>
    <entry xml:lang="en">
        <title>Reading Multiple csvs as 1 data frame</title>
        <published>2018-10-27T00:00:00+00:00</published>
        <updated>2018-10-27T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/read-chunked-csv/"/>
        <id>https://josiah.rs/posts/read-chunked-csv/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/read-chunked-csv/">&lt;p&gt;In an earlier &lt;a href=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;read-chunked-csv&#x2F;josiahparry.com&#x2F;post&#x2F;write-chunked-csv&quot;&gt;posting&lt;&#x2F;a&gt; I wrote about having to break a single csv into multiple csvs. In other scenarios one data set maybe provided as multiple a csvs.&lt;&#x2F;p&gt;
&lt;p&gt;Thankfully &lt;code&gt;purrr&lt;&#x2F;code&gt; has a beautiful function called &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which will make this into a two liner. This process has essentially 3 steps.&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Create a vector of all &lt;code&gt;.csv&lt;&#x2F;code&gt; files that should be merged together.&lt;&#x2F;li&gt;
&lt;li&gt;Read each file using &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Combine each dataframe into one.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; maps (applys) a function to each value of an object and produces a dataframe of all outputs.&lt;&#x2F;p&gt;
&lt;p&gt;For this example I will use the csvs I created in a previous tutorial utilizing a dataset from the Quantitative Social Science book.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Get all csv file names &lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;file_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&quot;&lt;&#x2F;span&gt;, pattern &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;\\.csv&quot;&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;file_names&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [1] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_1.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [2] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_10.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [3] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_11.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [4] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_12.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [5] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_13.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [6] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_2.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [7] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_3.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [8] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_4.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [9] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_5.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [10] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_6.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [11] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_7.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [12] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_8.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [13] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_9.csv&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;# apply &lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;all_csvs&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;file_names&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;5866&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# preview the data&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;utils&#x2F;head.html&#x27;&gt;head&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;all_csvs&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 6 × 6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sex    yearofbirth primary2004 messages   primary2006 hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;        &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;       &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;            &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;  &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt; male          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;941           0 Civic Duty           0      2&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;2&lt;&#x2F;span&gt; female        &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;947           0 Civic Duty           0      2&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;3&lt;&#x2F;span&gt; male          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;951           0 Hawthorne            1      3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;4&lt;&#x2F;span&gt; female        &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;950           0 Hawthorne            1      3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;5&lt;&#x2F;span&gt; female        &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;982           0 Hawthorne            1      3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;6&lt;&#x2F;span&gt; male          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;981           0 Control              0      3&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Chunking your csv</title>
        <published>2018-10-27T00:00:00+00:00</published>
        <updated>2018-10-27T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/write-chunked-csv/"/>
        <id>https://josiah.rs/posts/write-chunked-csv/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/write-chunked-csv/">&lt;p&gt;Sometimes due to limitations of software, file uploads often have a row limit. I recently encountered this while creating texting campaigns using &lt;a href=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;write-chunked-csv&#x2F;relaytxt.io&quot;&gt;Relay&lt;&#x2F;a&gt;. Relay is a peer-to-peer texting platform. It has a limitation of 20k contacts per texting campaign. This is a limitation when running a massive Get Out the Vote (GOTV) texting initiative.&lt;&#x2F;p&gt;
&lt;p&gt;In order to solve this problem, a large csv must be split into multiple csv&#x27;s for upload. Though this could be solved with excel and Google Sheets, who wants to labor over that?&lt;&#x2F;p&gt;
&lt;p&gt;Here I will go through the methodology of writing a csv into multiple. I will use data from the &lt;a href=&quot;https:&#x2F;&#x2F;www.google.com&#x2F;search?q=quantitative+social+science&amp;amp;oq=quantitative+social+science&amp;amp;aqs=chrome..69i57j69i61j69i65j69i60l2j69i59.5035j0j1&amp;amp;sourceid=chrome&amp;amp;ie=UTF-8&quot;&gt;Quantitative Social Science&lt;&#x2F;a&gt; book by Kosuke Imai.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;social&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;kosukeimai&#x2F;qss&#x2F;master&#x2F;CAUSALITY&#x2F;social.csv&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;dim.html&#x27;&gt;dim&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;social&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This dataset has 305k observations and 6 columns. For this example let&#x27;s say we wanted to split this into files of 15,000 rows or fewer. We can use the following custom funciton:&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;write_csv_chunk&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;filepath&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;output_name&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;df&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;filepath&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 1. read original file&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;n_files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Round.html&#x27;&gt;ceiling&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;nrow&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;df&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 2. identify how many files to make&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;chunk_starts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;seq.html&#x27;&gt;seq&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;*&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n_files&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;#  3. identify the rown number to start on&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;kr&#x27;&gt;for&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;in&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n_files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4. iterate through the csv to write the files&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nv&#x27;&gt;chunk_end&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;*&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4a&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nv&#x27;&gt;df_to_write&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;slice.html&#x27;&gt;slice&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;df&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;chunk_starts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;chunk_end&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4b&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nv&#x27;&gt;fpath&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste0&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;output_name&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;_&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;.csv&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4c&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;write_delim.html&#x27;&gt;write_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;df_to_write&lt;&#x2F;span&gt;,  &lt;span class=&#x27;nv&#x27;&gt;fpath&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4d&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;message.html&#x27;&gt;message&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste0&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;fpath&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot; was written.&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4e&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The function has a few steps. Let&#x27;s walk through them. The step numbers are commented above.&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Read in the csv.&lt;&#x2F;li&gt;
&lt;li&gt;Identify the number of files that will have to be created.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;ul&gt;
&lt;li&gt;This will be the number of rows of the data frame divided by the number of rows we want each file to have. This number will be rounded up to handle a remainder.&lt;&#x2F;li&gt;
&lt;li&gt;In this case &lt;code&gt;ceiling(nrow(social) &#x2F; 15000)&lt;&#x2F;code&gt; is equal to &lt;code&gt;ceiling(nrow(social) &#x2F; 15000)&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;ol&gt;
&lt;li&gt;Identify the row number to begin splitting the dataframe for each file.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;ul&gt;
&lt;li&gt;This will be a factor of our &lt;code&gt;n&lt;&#x2F;code&gt; plus 1, but will never exceed the &lt;code&gt;nrow(df)&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;ol&gt;
&lt;li&gt;This is the fun part, writing our files. The number of iterations is the number of files.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;4a&lt;&#x2F;em&gt;: The ending row number is the iteration number multiplied by the number of rows.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4b&lt;&#x2F;em&gt;: use &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;slice.html&quot;&gt;&lt;code&gt;slice()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to cute the original data frame into the chunk beginning and chunk end&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4c&lt;&#x2F;em&gt;: Creating the file paththat will be written.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4d&lt;&#x2F;em&gt;: Write the csv!&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4e&lt;&#x2F;em&gt;: Print a message about the file being printed.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;soc_fpath&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;kosukeimai&#x2F;qss&#x2F;master&#x2F;CAUSALITY&#x2F;social.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;write_csv_chunk&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;filepath &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;soc_fpath&lt;&#x2F;span&gt;, n &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;25000&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we have these files split up, it will be good to know how to get them back into one piece! Check out my blog post on reading multiple csvs in as one data frame &lt;a href=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;write-chunked-csv&#x2F;josiahparry.com&#x2F;post&#x2F;read-chunked-csv&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Coursera R-Programming: Week 2 Problems</title>
        <published>2018-04-14T00:00:00+00:00</published>
        <updated>2018-04-14T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/tidy-coursera-r-programming/"/>
        <id>https://josiah.rs/posts/tidy-coursera-r-programming/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/tidy-coursera-r-programming/">&lt;p&gt;Over the past several weeks I have been helping students, career professionals, and people of other backgrounds learn R. During this time one this has become apparent, people are teaching the old paradigm of R and avoiding the tidyverse all together.&lt;&#x2F;p&gt;
&lt;p&gt;I recently had a student reach out to me in need of help with the first programming assignment from the &lt;a href=&quot;https:&#x2F;&#x2F;www.coursera.org&#x2F;learn&#x2F;r-programming&quot;&gt;Coursera R-Programming&lt;&#x2F;a&gt; course (part of the Johns Hopkins Data Science Specialization). This particular student was struggling with combining the her new knowledge of R data types, conditional statements, looping, control statements, scoping, and functions to solve the assignment problem set. I provided her with a walk through of each question in base R, the style of the course. I couldn&#x27;t help but empathize with her as I too learned the long way first. However I thought that she shouldn&#x27;t be learning the hard way first (see David Robinson&#x27;s &lt;a href=&quot;http:&#x2F;&#x2F;varianceexplained.org&#x2F;r&#x2F;teach-hard-way&#x2F;&quot;&gt;blog post&lt;&#x2F;a&gt;, &lt;em&gt;&quot;Don&#x27;t teach students the hard way first&quot;&lt;&#x2F;em&gt;), she should be learning the effective way.&lt;&#x2F;p&gt;
&lt;p&gt;In my written response to her, I gave her solutions to her problems in base R and using the tidyverse. Here, I will go over the problems and adress them from a tidy perspective. This will not serve as a full introduction to the tidyverse. For an introduction and a reason why the tidyverse is superior to base R, I leave you with &lt;a href=&quot;http:&#x2F;&#x2F;stat545.com&#x2F;block009_dplyr-intro.html&quot;&gt;&lt;strong&gt;Stat 545&lt;&#x2F;strong&gt;: &lt;em&gt;Introduction to dplyr&lt;&#x2F;em&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The assignment utilizes a directory of data called &lt;code&gt;specdata&lt;&#x2F;code&gt; which can be downloaded &lt;a href=&quot;https:&#x2F;&#x2F;d396qusza40orc.cloudfront.net&#x2F;rprog%2Fdata%2Fspecdata.zip&quot;&gt;&lt;strong&gt;here&lt;&#x2F;strong&gt;&lt;&#x2F;a&gt;, and describes it:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;The zip file contains 332 comma-separated-value (CSV) files containing pollution monitoring data for fine particulate matter (PM) air pollution at 332 locations in the United States. Each file contains data from a single monitor and the ID number for each monitor is contained in the file name. For example, data for monitor 200 is contained in the file &quot;200.csv&quot;. Each file contains three variables:&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Date&lt;&#x2F;strong&gt;: the date of the observation in &lt;code&gt;YYYY-MM-DD&lt;&#x2F;code&gt; format (year-month-day)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;sulfate&lt;&#x2F;strong&gt;: the level of sulfate PM in the air on that date (measured in micrograms per cubic meter)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;nitrate&lt;&#x2F;strong&gt;: the level of nitrate PM in the air on that date (measured in micrograms per cubic meter)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;For this programming assignment you will need to unzip this file and create the directory &#x27;specdata&#x27;. Once you have unzipped the zip file, do not make any modifications to the files in the &#x27;specdata&#x27; directory. In each file you&#x27;ll notice that there are many days where either sulfate or nitrate (or both) are missing (coded as NA). This is common with air pollution monitoring data in the United States.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;part-i&quot;&gt;Part I&lt;&#x2F;h1&gt;
&lt;p&gt;Problem 1:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write a function named &#x27;pollutantmean&#x27; that calculates the mean of a pollutant (sulfate or nitrate) across a specified list of monitors. The function &#x27;pollutantmean&#x27; takes three arguments: &#x27;directory&#x27;, &#x27;pollutant&#x27;, and &#x27;id&#x27;. Given a vector monitor ID numbers, &#x27;pollutantmean&#x27; reads that monitors&#x27; particulate matter data from the directory specified in the &#x27;directory&#x27; argument and returns the mean of the pollutant across all of the monitors, ignoring any missing values coded as NA. A prototype of the function is as follows&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; pollutantmean &amp;lt;- function(directory, pollutant, id = 1:332){
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;directory&amp;#39; is a character vector of length 1 indicating
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## the location of the CSV files
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;pollutant&amp;#39; is a character vector of length 1 indicating
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## the name of the pollutant for which we will calculate the 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## mean; either &amp;quot;sulfate&amp;quot; or &amp;quot;nitrate&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;id&amp;#39; is an integer vector indicating the monitor ID numbers
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## to be used
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## Return the mean of the pollutant across all monitors list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## in the &amp;#39;id&amp;#39; vector (ignoring NA values)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## NOTE: Do not round the result!
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Before we tackle the function, I believe the best approach is to first solve the problem in a regular script. This problem has four clear steps:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Identify files in the directory&lt;&#x2F;li&gt;
&lt;li&gt;Subset files based on provided ID&lt;&#x2F;li&gt;
&lt;li&gt;Read the files&lt;&#x2F;li&gt;
&lt;li&gt;Calculate and return the mean on the desired column&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;This problem gives us a directory of files from which we need to read in the data based on the provided IDs. For the sake of this walk through we will randomly sample 10 values within the range designated in the problem statement (332).&lt;&#x2F;p&gt;
&lt;p&gt;We will first generate random IDs, then identify all of the files within the specified directory and obtain their file paths using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&quot;&gt;&lt;code&gt;list.files()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function. After this we will subset our file list based on the IDs, then iterate over our file list and read in each file as a csv using &lt;code&gt;purrr:map_df()&lt;&#x2F;code&gt; combined with &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Fortunately &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; returns a nice and pretty data frame which lets us avoid having to explicitly bind each unique data frame.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;identify-files&quot;&gt;Identify Files&lt;&#x2F;h4&gt;
&lt;p&gt;Here we create 10 random IDs and store them in the &lt;code&gt;ids&lt;&#x2F;code&gt; variable. Next we use &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&quot;&gt;&lt;code&gt;list.files()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to look within the &lt;code&gt;specdata&lt;&#x2F;code&gt; folder that we downloaded above. Everyone&#x27;s path will most likely be different. Be sure to obtain the correct file path---help for &lt;a href=&quot;http:&#x2F;&#x2F;osxdaily.com&#x2F;2013&#x2F;06&#x2F;19&#x2F;copy-file-folder-path-mac-os-x&#x2F;&quot;&gt;Mac&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Next we identify the files we need based on the sampled &lt;code&gt;ids&lt;&#x2F;code&gt; and store the subset in the &lt;code&gt;files_filtered&lt;&#x2F;code&gt; variable. We use the values of the &lt;code&gt;ids&lt;&#x2F;code&gt; to locate the file paths positionally. For example, ID number 1 is the first file, number 10 is the tenth, etc.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Load our handy dandy functions&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# 10 random IDs in ID range&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;ids&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;10&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# Identify all files within the directory&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# Subset the data&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ids&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# View the files to verify&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ids&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h4 id=&quot;reading-the-files&quot;&gt;Reading the Files&lt;&#x2F;h4&gt;
&lt;p&gt;Now that we have identified the files that we are going to read in, we can use &lt;code&gt;purrr:map_df()&lt;&#x2F;code&gt; to apply the &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function to each value of &lt;code&gt;files_filtered&lt;&#x2F;code&gt; and return a data frame (hence the &lt;code&gt;_df()&lt;&#x2F;code&gt; suffix). We supply additional arguments to &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to ensure that every column is read in properly.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Read in the subset of the data. Notice the brackets after files[]&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;, 
                   col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                   &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;pillar.r-lib.org&#x2F;reference&#x2F;glimpse.html&#x27;&gt;glimpse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Next, we get to utilize some &lt;code&gt;dplyr&lt;&#x2F;code&gt; magic. Here we take the &lt;code&gt;specdata&lt;&#x2F;code&gt; object we created from reading in our files, deselct the &lt;code&gt;Date&lt;&#x2F;code&gt; column, then utilize &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&quot;&gt;&lt;code&gt;summarise_if()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to apply the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;mean.html&quot;&gt;&lt;code&gt;mean()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function to our data. &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&quot;&gt;&lt;code&gt;summarise_if()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; requires that we provide a logical statement as the first argument. &lt;em&gt;If&lt;&#x2F;em&gt; (hence the &lt;code&gt;_if()&lt;&#x2F;code&gt; suffix) the logical statement evaluates to &lt;code&gt;TRUE&lt;&#x2F;code&gt; on a column then it will apply a list of functions to those columns where the statement evaluated to &lt;code&gt;TRUE&lt;&#x2F;code&gt;. We can also specify additional arguments to the functions. Here we specify &lt;code&gt;na.rm = TRUE&lt;&#x2F;code&gt; for handling missing values.&lt;&#x2F;p&gt;
&lt;p&gt;In this case, we are checking to see if our columns are of the data type &lt;code&gt;double&lt;&#x2F;code&gt; using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;double.html&quot;&gt;&lt;code&gt;is.double()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function. If you&#x27;re wondering why we didn&#x27;t use &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;numeric.html&quot;&gt;&lt;code&gt;is.numeric()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, it&#x27;s because the &lt;code&gt;ID&lt;&#x2F;code&gt; column is an integer which is considered numeric.&lt;&#x2F;p&gt;
&lt;p&gt;If we wanted to take the underlying vector of one of the columns, we can also, use &lt;code&gt;dplyr::pull(col_name)&lt;&#x2F;code&gt;. This will be helpful later when we want to obtain the mean of just one column.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Obtain mean nitrate&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;Date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&#x27;&gt;summarise_if&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;is.double&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;mean&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# Pull just the sulfate column&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sulfate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;Date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&#x27;&gt;summarise_if&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;is.double&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;mean&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# Pull just the nitrate column&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;nitrate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we have all of the tools, we can put this together into a single function, which I will call &lt;code&gt;pollutant_mean()&lt;&#x2F;code&gt; to somewhat adhere---functions should take the name of verbs---to the tidyverse style guide.&lt;&#x2F;p&gt;
&lt;p&gt;Here we have three arguments:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;directory&lt;&#x2F;code&gt;: Where to look for the files&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;pollutant&lt;&#x2F;code&gt;: Which pollutant (nitrate or sulfate) to evaluate
&lt;ul&gt;
&lt;li&gt;This needs to be a character value unless we want to get into &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;articles&#x2F;programming.html&quot;&gt;tidyeval&lt;&#x2F;a&gt;, which frankly I will leave to the professionals. But I will provide an alternative solution at the end that doesn&#x27;t require quoted &lt;code&gt;pollutant&lt;&#x2F;code&gt; names.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;id&lt;&#x2F;code&gt;: Which monitoring stations we should look at&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Within the function we take everything we did in the above steps but generalize it to a function. We identify the files in the directory provided (&lt;code&gt;specdata&lt;&#x2F;code&gt;), subset the files positionally based on the provided &lt;code&gt;id&lt;&#x2F;code&gt; vector, and then iterate over the file names and read them in with &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Next we take our data and calculate the mean on both &lt;code&gt;sulfate&lt;&#x2F;code&gt; and &lt;code&gt;nitrate&lt;&#x2F;code&gt; columns. We then &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&quot;&gt;&lt;code&gt;pull()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; the specified column from the &lt;code&gt;pollutant&lt;&#x2F;code&gt; argument and then &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&quot;&gt;&lt;code&gt;return()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; that value.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;
&lt;span class=&#x27;nv&#x27;&gt;pollutant_mean&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;pollutant&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;, 
                     col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;Date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&#x27;&gt;summarise_if&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;is.double&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;mean&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;pollutant&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Here we can test out the function with both types of pollutants and different &lt;code&gt;id&lt;&#x2F;code&gt; values.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;pollutant_mean&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;directory &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, pollutant &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;sulfate&quot;&lt;&#x2F;span&gt;, id &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#pollutant_mean(&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;, &quot;nitrate&quot;, 2)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;part-ii&quot;&gt;Part II:&lt;&#x2F;h1&gt;
&lt;p&gt;Let us continue to the second problem in the problem set.&lt;&#x2F;p&gt;
&lt;p&gt;Problem 2:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write a function that reads a directory full of files and reports the number of completely observed cases in each data file. The function should return a data frame where the first column is the name of the file and the second column is the number of complete cases.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;The assignment provides an example function format, but I think it to be a bit misleading. So I will go about this in the way I think is best. We will work on creating a function called &lt;code&gt;complete_spec_cases()&lt;&#x2F;code&gt; which will take only two arguments, &lt;code&gt;directory&lt;&#x2F;code&gt;, and &lt;code&gt;id&lt;&#x2F;code&gt;. &lt;code&gt;directory&lt;&#x2F;code&gt; and &lt;code&gt;id&lt;&#x2F;code&gt; will be used in the the same way as the previous problem.&lt;&#x2F;p&gt;
&lt;p&gt;For this problem our goal is to identify how many complete cases there are by provided ID. This should be exceptionally simple. We will have to identify our files, subset them, and read them in the same way as before. Next we can identify complete cases by piping our &lt;code&gt;specdata&lt;&#x2F;code&gt; object to &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&quot;&gt;&lt;code&gt;na.omit()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which will remove any row with a missing value. Next, we have to group by the &lt;code&gt;ID&lt;&#x2F;code&gt; column and pipe our grouped data frame to &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;count.html&quot;&gt;&lt;code&gt;count()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which will count how many observations there are by group. We will then return this data frame to the user.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;complete_spec_cases&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;

  &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;,
                     col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;complete_specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise.html&#x27;&gt;summarise&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;nobs &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;context.html&#x27;&gt;n&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;complete_specdata&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;complete_spec_cases&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, id &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;part-iii&quot;&gt;Part III:&lt;&#x2F;h1&gt;
&lt;p&gt;This final problem is probably the most complicated, but with the method we just used above and with a bit more help from the &lt;code&gt;purrr&lt;&#x2F;code&gt; and &lt;code&gt;dplyr&lt;&#x2F;code&gt; packages, we can do this no problem.&lt;&#x2F;p&gt;
&lt;p&gt;Problem 3:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write a function that takes a directory of data files and a threshold for complete cases and calculates the correlation between sulfate and nitrate for monitor locations where the &lt;em&gt;number of completely observed cases&lt;&#x2F;em&gt; (on all variables) is greater than the threshold. The function should return a vector of correlations for the monitors that meet the threshold requirement. If no monitors meet the threshold requirement, then the function should return a numeric vector of length 0. A prototype of this function follows:&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Correct &amp;lt;- function(directory, threshold = 0){
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;directory&amp;#39; is a character vector of length 1 indicating
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## the location of the CSV files
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;threshold&amp;#39; is a numeric vector of length 1 indicating the
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## number of completely observed observations (on all
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## variables) required to compute the correlation between
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## nitrate and sulfate; the default is 0
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## Return a numeric vector of correlations
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## NOTE: Do not round the result!
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Let keep this simple. The above statement essentially is asking that we find the correlation between &lt;code&gt;nitrate&lt;&#x2F;code&gt; and &lt;code&gt;sulfate&lt;&#x2F;code&gt; for each monitoring station (ID). But there is a catch! Each ID must meet a specified threshold of complete cases, and if none of the monitors meet the requirement the function must return a &lt;code&gt;numeric(0)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The way we will structure this function will be to first read in the data---as we have done twice now, except this time there will be no subsetting of IDs. Then we need to identify the number of complete cases by ID---as we did in problem 2---and identify the stations that meet the threshold requirement. At this point we will use an &lt;code&gt;if&lt;&#x2F;code&gt; statement to check if we have at least 1 monitoring station that meets our threshold, if we do not, we return the &lt;code&gt;numeric(0)&lt;&#x2F;code&gt;---there is most likely a more tidy way to do this, but I am not aware. If we have at least 1 monitoring station that meets the specified threshold we will use an &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&quot;&gt;&lt;code&gt;inner_join()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to make sure that &lt;code&gt;specdata&lt;&#x2F;code&gt; contains only those IDs that meet the requirement.&lt;&#x2F;p&gt;
&lt;p&gt;For the sake of this example, we will continue to use the &lt;code&gt;specdata&lt;&#x2F;code&gt; object we created in previous examples, and we will set our threshold to &lt;code&gt;100.&lt;&#x2F;code&gt; Once we identify the stations with the proper number of counts (&lt;code&gt;&amp;gt; 100&lt;&#x2F;code&gt;), we will store that data frame in an object called &lt;code&gt;id_counts&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;
&lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;count.html&#x27;&gt;count&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;100&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; 
  
  &lt;span class=&#x27;kr&#x27;&gt;if&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;nrow&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;numeric.html&#x27;&gt;numeric&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;else&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;print.html&#x27;&gt;print&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;All is well.&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;

  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&#x27;&gt;inner_join&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;ID&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; 
  
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This is where it gets kind of funky. Once we have filtered down our data set, we need to calculate the correlations for each ID. The way that we do this is by nesting our data frame on the &lt;code&gt;ID&lt;&#x2F;code&gt; column. Calling &lt;code&gt;nest(-ID)&lt;&#x2F;code&gt; allows us to, for each value of ID, create a data frame for just those rows where the &lt;code&gt;ID&lt;&#x2F;code&gt; is the same. We will then have a new list type column where each value is actually a data frame. Let&#x27;s check out what this looks like before we hop into the function.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;nest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we know how to nest our data, we need to calculate the correlations for each row (ID value). We will do this by combining &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&quot;&gt;&lt;code&gt;mutate()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Here &lt;code&gt;.x&lt;&#x2F;code&gt; references the data that is within each nested tibble. To learn more about &lt;code&gt;purrr&lt;&#x2F;code&gt; I recommend the &lt;a href=&quot;http:&#x2F;&#x2F;r4ds.had.co.nz&#x2F;iteration.html&quot;&gt;chapter&lt;&#x2F;a&gt; on iteration from &lt;em&gt;R For Data Science&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;After we have done our calculations we undo our nesting using &lt;a href=&quot;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&quot;&gt;&lt;code&gt;unnest()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; on the new column we created, and deselect the &lt;code&gt;data&lt;&#x2F;code&gt; column.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;nest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;correlation &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;data&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;cor.html&#x27;&gt;cor&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sulfate&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;nitrate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;unnest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;correlation&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;data&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can now place these above examples within a new function called &lt;code&gt;pollutant_cor()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;pollutant_cor&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;threshold&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;, 
                     col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;count.html&#x27;&gt;count&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;threshold&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; 
  
  &lt;span class=&#x27;kr&#x27;&gt;if&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;nrow&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;numeric.html&#x27;&gt;numeric&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;correlations&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&#x27;&gt;inner_join&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;ID&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;nest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;correlation &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;data&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;cor.html&#x27;&gt;cor&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sulfate&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;nitrate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;unnest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;correlation&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;correlations&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

  
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can now test our function against two different thresholds to see how it reacts.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;pollutant_cor&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;100&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;If we set the threshold to 100,000, we should expect a &lt;code&gt;numeric(0)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;pollutant_cor&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;100000&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;It all works!&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
