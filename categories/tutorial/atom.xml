<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>Josiah Parry - tutorial</title>
    <link rel="self" type="application/atom+xml" href="https://josiah.rs/categories/tutorial/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://josiah.rs"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2023-03-02T00:00:00+00:00</updated>
    <id>https://josiah.rs/categories/tutorial/atom.xml</id>
    <entry xml:lang="en">
        <title>Rust traits for R users</title>
        <published>2023-03-02T00:00:00+00:00</published>
        <updated>2023-03-02T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/rust-traits-for-r-programmers/"/>
        <id>https://josiah.rs/posts/rust-traits-for-r-programmers/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/rust-traits-for-r-programmers/">&lt;p&gt;In the few months that I’ve been programming in Rust nothing has so
fundamentally shifted the way that I think about programming—and
specifically R packages—as Rust traits. I want to talk briefly about
Rust traits and why I think they can make R packages better.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;img src=&quot;feRris.svg&quot; height=&quot;150&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;A trait defines a set of behaviors that can be used by objects of
different kinds. Each trait is a collection of methods (functions) whose
behavior is defined abstractly. The traits can then be &lt;code&gt;impl&lt;&#x2F;code&gt;emented
&lt;em&gt;for&lt;&#x2F;em&gt; different object types. Any object that implements the trait can
then use that method. It’s kind of confusing, isn’t it? Let’s work
through &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;book&#x2F;ch10-02-traits.html&quot;&gt;the example in The
Book™&lt;&#x2F;a&gt; and how we
can implement it in R.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;defining-a-trait&quot;&gt;Defining a Trait&lt;&#x2F;h2&gt;
&lt;p&gt;We start by defining a trait called &lt;code&gt;Summary&lt;&#x2F;code&gt; which as a single method
that returns a &lt;code&gt;String&lt;&#x2F;code&gt;. Note how the definition is rather abstract. We
know what the function is and what it returns. What happens on the
inside doesn’t matter to use.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-trait z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-trait z-rust&quot;&gt;trait&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-trait z-rust&quot;&gt;Summary&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-trait z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;summarize&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; String&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-trait z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Analogous in R is the definition of an &lt;a href=&quot;https:&#x2F;&#x2F;adv-r.hadley.nz&#x2F;s3.html&quot;&gt;S3 function
generic&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;It’s only analogous if the trait implements only one method&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;Summary&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;UseMethod&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Summary&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The S3 function generic is essentially saying that there is a new
function called &lt;code&gt;Summary&lt;&#x2F;code&gt; and it will behave differently based on the
class of object passed to it.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Note that we can’t specify the output type so we may want to create a
validator function later&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now we want to define a struct called &lt;code&gt;NewsArticle&lt;&#x2F;code&gt; that contains 4
fields related to the news paper itself.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-struct z-rust&quot;&gt;struct&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-entity z-name z-struct z-rust&quot;&gt;NewsArticle&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;headline&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;location&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;author&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is similar to creating a new record in
&lt;a href=&quot;https:&#x2F;&#x2F;vctrs.r-lib.org&#x2F;&quot;&gt;&lt;code&gt;vctrs&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which is rather similar to using
base R.&lt;&#x2F;p&gt;
&lt;div class=&quot;panel-tabset&quot;&gt;
&lt;h2 id=&quot;base-r&quot;&gt;Base R&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;NewsArticle&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$headline
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$location
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$author
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$content
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;attr(,&amp;quot;class&amp;quot;)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;NewsArticle&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;vctrs&quot;&gt;&lt;code&gt;vctrs&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_rcrd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;NewsArticle&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;NewsArticle[0]&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;implementing-a-trait&quot;&gt;&lt;code&gt;impl&lt;&#x2F;code&gt;ementing a trait&lt;&#x2F;h2&gt;
&lt;p&gt;It’s important that we are able to summarise our newspaper article for
the socials ofc—so we need to &lt;code&gt;impl&lt;&#x2F;code&gt;ement the &lt;code&gt;Summary&lt;&#x2F;code&gt; trait for the
&lt;code&gt;NewsArticle&lt;&#x2F;code&gt; struct.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-impl z-rust&quot;&gt;impl&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;Summary &lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;for&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt; &lt;span class=&quot;z-entity z-name z-impl z-rust&quot;&gt;NewsArticle&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;summarize&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; String&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;format!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;, by &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt; (&lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-language z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;headline&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-language z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;author&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-language z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;location&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Notice that the trait is called &lt;code&gt;Summary&lt;&#x2F;code&gt; whereas the method it provides
is called &lt;code&gt;summarize()&lt;&#x2F;code&gt;. For the sake of example I’m going to call the R
function &lt;code&gt;Summary()&lt;&#x2F;code&gt; throughout the rest of the example. It’s not
possible to have a perfect 1:1 relationship between Rust and R ;)&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This block defines how the &lt;code&gt;summarize()&lt;&#x2F;code&gt; method will work for a
&lt;code&gt;NewsArticle&lt;&#x2F;code&gt; struct. It will create a string in the format of
&lt;code&gt;&quot;{title}, by {author} ({location})&quot;&lt;&#x2F;code&gt;. In R, we have to define the
&lt;code&gt;NewsArticle&lt;&#x2F;code&gt; method for the &lt;code&gt;Summary&lt;&#x2F;code&gt; function which is done by
creating a function object with the name signature
&lt;code&gt;{Generic}.{class} &amp;lt;- function(...) { . . . }&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;panel-tabset&quot;&gt;
&lt;h2 id=&quot;base-r-1&quot;&gt;Base R&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;Summary.NewsArticle&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;%s, by %s (%s)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    x&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;headline&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    x&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;author&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    x&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;location&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;vctrs-1&quot;&gt;&lt;code&gt;vctrs&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;Summary.NewsArticle&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;%s, by %s (%s)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;headline&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;author&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;location&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Since Musk’s takeover of twitter, tweets are getting out of hand
becoming ridiculously long so we need to be able to summarize them too!
So if we define a &lt;code&gt;Tweet&lt;&#x2F;code&gt; struct and a corresponding implementation of
&lt;code&gt;Summary&lt;&#x2F;code&gt; we’ll be able to easily summarize them exactly the same way as
news articles.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; define the struct
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-struct z-rust&quot;&gt;struct&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-entity z-name z-struct z-rust&quot;&gt;Tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;username&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;reply&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;bool&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;retweet&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;bool&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; implement the trait
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-impl z-rust&quot;&gt;impl&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;Summary &lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;for&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt; &lt;span class=&quot;z-entity z-name z-impl z-rust&quot;&gt;Tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;summarize&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; String&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;format!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;: &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-language z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;username&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-language z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;content&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Correspondingly in R, we’re going to be working with both Tweets and
News Articles. So we need to define a tweet class to contain our tweets
and a &lt;code&gt;Summary()&lt;&#x2F;code&gt; method for the new class.&lt;&#x2F;p&gt;
&lt;div class=&quot;panel-tabset&quot;&gt;
&lt;h2 id=&quot;base-r-2&quot;&gt;Base R&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Tweet&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$username
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$content
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$reply
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;logical(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$retweet
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;logical(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;attr(,&amp;quot;class&amp;quot;)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;Tweet&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;Summary.Tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;%s: %s&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; x&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;username&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; x&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;content&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;vctrs-2&quot;&gt;vctrs&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_rcrd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Tweet&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;Tweet[0]&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;Summary.Tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;%s: %s&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;username&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;content&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can now define a function that utilizes this trait that will produce
consistent &lt;code&gt;String&lt;&#x2F;code&gt; output in the same format for both tweets and new
articles.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;notify&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;item&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;impl Summary&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;println!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Breaking news! &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; item&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;summarize&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is huge from the R perspective because we can create a &lt;code&gt;notify()&lt;&#x2F;code&gt;
function that calls &lt;code&gt;Summary()&lt;&#x2F;code&gt; and as long as a method if defined for
the input class it will work!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;notify&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;item&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Breaking news! %s&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;Summary&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;item&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To test this out lets create a &lt;code&gt;Tweet&lt;&#x2F;code&gt; and a &lt;code&gt;NewsArticle&lt;&#x2F;code&gt;. First we’ll
create constructor functions for each.&lt;&#x2F;p&gt;
&lt;div class=&quot;panel-tabset&quot;&gt;
&lt;h2 id=&quot;base-r-3&quot;&gt;Base R&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;new_article&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; headline&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; location&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; author&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; content
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;NewsArticle&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;new_tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; username&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; content&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; reply&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; retweet
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Tweet&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;vctrs-3&quot;&gt;&lt;code&gt;vctrs&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;new_article&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_rcrd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; headline&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; location&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; author&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; content
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;NewsArticle&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;new_tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_rcrd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; username&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; content&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; reply&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; retweet
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Tweet&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Using the constructors we can create a tweet and a news article.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; https:&#x2F;&#x2F;www.theonion.com&#x2F;new-absolut-ad-features-swaying-mom-with-one-eye-closed-1850138855
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;article &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_article&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;New Absolut Ad Features Swaying Mom With One Eye Closed Telling Camera She Used To Dance&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Stockholm&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;The Onion&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;The ad concludes abruptly with the mother beginning to cry when, for no particular reason, she suddenly remembers the death of Princess Diana.&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; https:&#x2F;&#x2F;twitter.com&#x2F;TheOnion&#x2F;status&#x2F;1631104570041552896
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;tweet &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_tweet&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;@TheOnion&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Cat Internally Debates Whether Or Not To Rip Head Off Smaller Creature It Just Met https:&#x2F;&#x2F;bit.ly&#x2F;3J1kNzV&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-constant z-language z-r&quot;&gt;FALSE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-constant z-language z-r&quot;&gt;FALSE&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We can see how notify works for both of these.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;notify&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;tweet&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;Breaking news! @TheOnion: Cat Internally Debates Whether Or Not To Rip Head Off Smaller Creature It Just Met https:&#x2F;&#x2F;bit.ly&#x2F;3J1kNzV&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;notify&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;article&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;Breaking news! New Absolut Ad Features Swaying Mom With One Eye Closed Telling Camera She Used To Dance, by The Onion (Stockholm)&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;what-this-means&quot;&gt;what this means&lt;&#x2F;h3&gt;
&lt;p&gt;This is awesome. This means that any object that we create in the
future, as long as it implements the &lt;code&gt;Summary()&lt;&#x2F;code&gt; function for its class
we can utilize the &lt;code&gt;notify()&lt;&#x2F;code&gt; function. This comes with a caveat,
though—as all good things do.&lt;&#x2F;p&gt;
&lt;p&gt;The Rust compiler ensures that any object that implements the &lt;code&gt;Summary&lt;&#x2F;code&gt;
trait returns a single string. R is far more laissez faire than Rust
with classes and types. One could create a &lt;code&gt;Summary&lt;&#x2F;code&gt; method for an
object that returns a vector of strings. That would break notify. Either
&lt;code&gt;notify()&lt;&#x2F;code&gt; should have type checking or you should make sure that your
method always produces the correct type.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;implications-for-r-packages&quot;&gt;Implications for R packages&lt;&#x2F;h2&gt;
&lt;p&gt;This very simple concept can be transformative for the way that we build
R packages. R packages are, for the most part, bespoke. Each one serves
their own purpose and works only within its own types or types it’s
aware of. But what if an R package could work with &lt;em&gt;any&lt;&#x2F;em&gt; object type?
Using this idea we can get from Rust traits, we can do that.&lt;&#x2F;p&gt;
&lt;p&gt;Packages that want to be extensible can make it easy to do so by doing
two fairly simple things. Low-level and critical functions should be
exported as generic functions. High level functions that perform some
useful functionality should be built upon those generics.&lt;&#x2F;p&gt;
&lt;p&gt;An example is the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;sdf&quot;&gt;&lt;code&gt;sdf&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; package
I’ve prototyped based on this idea. In this case, I have a spatial data
frame class that can be implemented on any object that implements
methods for the following functions:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;is_geometry()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;bounding_box()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;combine_geometry()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;an-example&quot;&gt;An example&lt;&#x2F;h3&gt;
&lt;p&gt;The &lt;code&gt;sdf&lt;&#x2F;code&gt; class is a &lt;code&gt;tibble&lt;&#x2F;code&gt; with a geometry column and a bounding box
attribute. The function &lt;code&gt;as_sdf()&lt;&#x2F;code&gt; creates an &lt;code&gt;sdf&lt;&#x2F;code&gt; object that tells us
what type of geometry is used and the bounding box of it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sf&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Linking to GEOS 3.13.0, GDAL 3.8.5, PROJ 9.5.1; sf_use_s2() is TRUE
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sdf&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; get some sample data 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;g &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; sfdep&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;guerry&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;region&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;as_sdf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;g&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 85 × 2
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   region                                                               geometry
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;fct&amp;gt;                                                          &amp;lt;MULTIPOLYGON&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1 E      (((801150 2092615, 800669 2093190, 800688 2095430, 800780 2095795, 80…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2 N      (((729326 2521619, 729320 2521230, 729280 2518544, 728751 2517520, 72…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3 C      (((710830 2137350, 711746 2136617, 712430 2135212, 712070 2134132, 71…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4 E      (((882701 1920024, 882408 1920733, 881778 1921200, 881526 1922332, 87…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5 E      (((886504 1922890, 885733 1922978, 885479 1923276, 883061 1925266, 88…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6 S      (((747008 1925789, 746630 1925762, 745723 1925138, 744216 1925236, 74…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7 N      (((818893 2514767, 818614 2514515, 817900 2514467, 817327 2514945, 81…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8 S      (((509103 1747787, 508820 1747513, 508154 1747093, 505861 1746627, 50…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9 E      (((775400 2345600, 775068 2345397, 773587 2345177, 772940 2344780, 77…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10 S      (((626230 1810121, 626269 1810496, 627494 1811321, 627681 1812424, 62…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ℹ 75 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is super cool because we can group by and summarize the data just
because we have those above functions defined for &lt;code&gt;sfc&lt;&#x2F;code&gt; objects (the
geometry column).&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dplyr&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;as_sdf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;g&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;group_by&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;region&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;summarise&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;n&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 5 × 3
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  region     n                                                          geometry
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;fct&amp;gt;  &amp;lt;int&amp;gt;                                                    &amp;lt;MULTIPOLYGON&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 C         17 (((710830 2137350, 711746 2136617, 712430 2135212, 712070 213413…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 E         17 (((801150 2092615, 800669 2093190, 800688 2095430, 800780 209579…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;3 N         17 (((729326 2521619, 729320 2521230, 729280 2518544, 728751 251752…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;4 S         17 (((747008 1925789, 746630 1925762, 745723 1925138, 744216 192523…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;5 W         17 (((456425 2120055, 456229 2120382, 455943 2121064, 456070 212219…
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Say we want to create a custom &lt;code&gt;Point&lt;&#x2F;code&gt; class that we want to be usable
by an &lt;code&gt;sdf&lt;&#x2F;code&gt; object. We can do this rather simply by creating the proper
generics. A &lt;code&gt;Point&lt;&#x2F;code&gt; will be a list of length 2 numeric vectors where the
first element is the x coordinate and the second element is the y
coordinate.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; create some points
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;pnt_data &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;5&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; \&lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;runif&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;90&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; create new vector class
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;pnts &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_vctr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;pnt_data&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Point&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;pnts
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;Point[5]&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 33.37356, 24.34350  80.77240, 41.22992  43.02110, 35.40899 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[4] 26.096064, 1.978444 24.61735, 14.82955 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now we can start defining our methods. &lt;code&gt;is_geometry()&lt;&#x2F;code&gt; should always
return TRUE for our type. We can do this like so:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;is_geometry.Point&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;inherits&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Point&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;This method will only be dispatched on &lt;code&gt;Point&lt;&#x2F;code&gt;s so it will always
inherit the &lt;code&gt;Point&lt;&#x2F;code&gt; class. One could just as well always return &lt;code&gt;TRUE&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Next we need to define a method for the bounding box. This is the the
maximum and minimum x and y coordinates. Our method should iterate over
each point and extract the x and y into their own vector and return the
minimum and maxes. These need to be structured in a particular order.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;bounding_box.Point&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  x &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; `[`&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  y &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; `[`&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;xmin&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;min&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;ymin&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;min&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;xmax&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;max&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;ymax&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;max&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Lastly, we need a way to combine the points together. In this case, we
can just “combine” the points by finding the average point. This is not
geometrically sound but for the sake of example it suffices. Note that
the type it returns always has to be the same! There is not a compiler
forcing us, so we must force ourselves!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;combine_geometry.Point&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  x &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; `[`&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  y &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; `[`&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_vctr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;mean&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;mean&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Point&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;With only those 3 functions we’ve defined enough to create an &lt;code&gt;sdf&lt;&#x2F;code&gt;
object where the geometry column is a &lt;code&gt;Point&lt;&#x2F;code&gt; vector. To illustrate this
we can use the ggplot2 diamonds data set for example since it has nice x
and y coordinates.&lt;&#x2F;p&gt;
&lt;p&gt;First we create a data frame with a &lt;code&gt;Point&lt;&#x2F;code&gt; column.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;data&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;diamonds&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;package&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;ggplot2&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;diamond_pnts &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; diamonds &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mutate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;pnts&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_vctr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      purrr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;map2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; y&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; `c`&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Point&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;select&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;cut&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; pnts&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;head&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;diamond_pnts&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 6 × 2
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  cut             pnts
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;ord&amp;gt;        &amp;lt;Point&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 Ideal     3.95, 3.98
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 Premium   3.89, 3.84
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;3 Good      4.05, 4.07
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;4 Premium   4.20, 4.23
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;5 Good      4.34, 4.35
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;6 Very Good 3.94, 3.96
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next we cast it to an &lt;code&gt;sdf&lt;&#x2F;code&gt; object by using &lt;code&gt;as_sdf()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;diamond_sdf &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;as_sdf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;diamond_pnts&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;diamond_sdf
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 53,940 × 2
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   cut             pnts
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;ord&amp;gt;        &amp;lt;Point&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1 Ideal     3.95, 3.98
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2 Premium   3.89, 3.84
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3 Good      4.05, 4.07
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4 Premium   4.20, 4.23
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5 Good      4.34, 4.35
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6 Very Good 3.94, 3.96
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7 Very Good 3.95, 3.98
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8 Very Good 4.07, 4.11
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9 Fair      3.87, 3.78
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10 Very Good 4.00, 4.05
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ℹ 53,930 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Notice that the printing method shows &lt;code&gt;Geometry Type: Point&lt;&#x2F;code&gt; and also
has a &lt;code&gt;Bounding box:&lt;&#x2F;code&gt;. That means we have effectively extended the &lt;code&gt;sdf&lt;&#x2F;code&gt;
class by implementing our own methods for the exported generic functions
from &lt;code&gt;sdf&lt;&#x2F;code&gt;. From that alone the &lt;code&gt;sdf&lt;&#x2F;code&gt; methods for dplyr can be used.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;diamond_sdf &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;group_by&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;cut&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;summarise&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;n&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 5 × 3
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  cut           n               pnts
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;ord&amp;gt;     &amp;lt;int&amp;gt;            &amp;lt;Point&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 Fair       1610 6.246894, 6.182652
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 Good       4906 5.838785, 5.850744
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;3 Very Good 12082 5.740696, 5.770026
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;4 Premium   13791 5.973887, 5.944879
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;5 Ideal     21551 5.507451, 5.520080
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;why-this-works&quot;&gt;Why this works&lt;&#x2F;h3&gt;
&lt;p&gt;The dplyr &lt;code&gt;sdf&lt;&#x2F;code&gt; methods work like a charm because they use generic
functions. Take the &lt;code&gt;summarise()&lt;&#x2F;code&gt; method for example.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;sdf&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;:::&lt;&#x2F;span&gt;summarise.sdf
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;function (.data, ...) 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    geom_col_name &amp;lt;- attr(.data, &amp;quot;geom_column&amp;quot;)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    geom_col &amp;lt;- .data[[geom_col_name]]
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    gd &amp;lt;- group_data(.data)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    summarized_geoms &amp;lt;- lapply(gd$.rows, function(ids) combine_geometry(geom_col[ids]))
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    res &amp;lt;- NextMethod()
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    res[[geom_col_name]] &amp;lt;- rlang::inject(c(!!!summarized_geoms))
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    as_sdf(res)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;}
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;bytecode: 0x113a2c470&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;environment: namespace:sdf&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This method uses the &lt;code&gt;combine_geometry()&lt;&#x2F;code&gt; generic function.
&lt;code&gt;combine_geometry()&lt;&#x2F;code&gt; takes a vector of geometries (as determined by
&lt;code&gt;is_geometry()&lt;&#x2F;code&gt;) and returns a single element. The summarise method does
not care which method is used. It only cares that the output is
consistent—in this case that a scalar value is outputted and that
multiple of those scalars can be combined using &lt;code&gt;c()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;another-example&quot;&gt;Another example&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;sdf#implementing-geos-generics&quot;&gt;For a more detailed example check out the section in the README that
implements an sdf class for geos
geometry&lt;&#x2F;a&gt;.
If you’re interested in the details I recommend looking at the source
code it is very simple.&lt;&#x2F;p&gt;
&lt;p&gt;First look at the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;sdf&#x2F;blob&#x2F;main&#x2F;R&#x2F;generics.R&quot;&gt;generic method
definitions&lt;&#x2F;a&gt;.
Then look at the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;sdf&#x2F;blob&#x2F;main&#x2F;R&#x2F;sf-compat.R&quot;&gt;&lt;code&gt;sf&lt;&#x2F;code&gt; compatibility
methods&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Fishnets and overlapping polygons</title>
        <published>2022-11-17T00:00:00+00:00</published>
        <updated>2022-11-17T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/overlapping-polys/"/>
        <id>https://josiah.rs/posts/overlapping-polys/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/overlapping-polys/">&lt;script src=&quot;index_files&#x2F;libs&#x2F;core-js-2.5.3&#x2F;shim.min.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;script src=&quot;index_files&#x2F;libs&#x2F;react-18.2.0&#x2F;react.min.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;script src=&quot;index_files&#x2F;libs&#x2F;react-18.2.0&#x2F;react-dom.min.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;script src=&quot;index_files&#x2F;libs&#x2F;reactwidget-2.0.0&#x2F;react-tools.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;link href=&quot;index_files&#x2F;libs&#x2F;htmltools-fill-0.5.8.1&#x2F;fill.css&quot; rel=&quot;stylesheet&quot; &#x2F;&gt;
&lt;script src=&quot;index_files&#x2F;libs&#x2F;htmlwidgets-1.6.4&#x2F;htmlwidgets.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;link href=&quot;index_files&#x2F;libs&#x2F;reactable-0.4.5&#x2F;reactable.css&quot; rel=&quot;stylesheet&quot; &#x2F;&gt;
&lt;script src=&quot;index_files&#x2F;libs&#x2F;reactable-binding-0.4.5&#x2F;reactable.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;p&gt;Today a question was asked in the geocompr discord. I wanted to share
part of the solution as I think it covers 2 helpful things:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;making a fishnet grid&lt;&#x2F;li&gt;
&lt;li&gt;calculating the area of overlap between two polygons&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;For this example I’m using data from the &lt;a href=&quot;http:&#x2F;&#x2F;gis.atlantaga.gov&#x2F;?page=OPEN-DATA-HUB&quot;&gt;Atlanta GIS Open Data
Portal&lt;&#x2F;a&gt;. Specifically
using the &lt;a href=&quot;https:&#x2F;&#x2F;dpcd-coaplangis.opendata.arcgis.com&#x2F;maps&#x2F;future-land-use-&quot;&gt;future land use
polygons&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;I’ve downloaded a local copy of the data as a geojson. But you can read
it using the ArcGIS Feature Server it is hosted on.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;objective&quot;&gt;Objective&lt;&#x2F;h3&gt;
&lt;p&gt;Create a map of Atlanta, visualized as a hexagon grid, that displays the
amount of planned mixed use zoning. This will be done in the following
sequence:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Creating a fishnet (hexagon) grid over the city&lt;&#x2F;li&gt;
&lt;li&gt;Creating intersected polygons&lt;&#x2F;li&gt;
&lt;li&gt;Calculate the area of intersected polygons&lt;&#x2F;li&gt;
&lt;li&gt;Join back to the original fishnet grid&lt;&#x2F;li&gt;
&lt;li&gt;visualized.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h3 id=&quot;mixed-use-zoning&quot;&gt;Mixed-use zoning&lt;&#x2F;h3&gt;
&lt;p&gt;Start by loading sf, dplyr, and ggplot2. sf for our spatial work, dplyr
for making our lives easier, and ggplot2 for a bad map later.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sf&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dplyr&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;ggplot2&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We read in our data (mine is local). You can use the commented out code
to read directly from the ArcGIS feature server.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; read from the ArcGIS feature server
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; st_read(&amp;quot;https:&#x2F;&#x2F;services5.arcgis.com&#x2F;5RxyIIJ9boPdptdo&#x2F;arcgis&#x2F;rest&#x2F;services&#x2F;Land_Use_Future&#x2F;FeatureServer&#x2F;0&#x2F;query?outFields=*&amp;amp;where=1%3D1&amp;amp;f=geojson&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;future_land_use &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;read_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Future_Land_Use_.geojson&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mutate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;geometry&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_make_valid&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;geometry&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Let’s look at the different land use descriptions.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;future_land_use &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_drop_geometry&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;LANDUSEDESC&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;sort&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  reactable&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;reactable&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;reactable html-widget html-fill-item&quot; id=&quot;htmlwidget-69e006ce736600915a0c&quot; style=&quot;width:auto;height:auto;&quot;&gt;&lt;&#x2F;div&gt;
&lt;script type=&quot;application&#x2F;json&quot; data-for=&quot;htmlwidget-69e006ce736600915a0c&quot;&gt;{&quot;x&quot;:{&quot;tag&quot;:{&quot;name&quot;:&quot;Reactable&quot;,&quot;attribs&quot;:{&quot;data&quot;:{&quot;LANDUSEDESC&quot;:[&quot;Open Space&quot;,&quot;Low-Density Commercial&quot;,&quot;Medium-Density Residential&quot;,&quot;Low-Density Residential&quot;,&quot;Mixed-Use&quot;,&quot;Single-Family Residential&quot;,&quot;High-Density Residential&quot;,&quot;Community Facilities&quot;,&quot;Industrial&quot;,&quot;Office&#x2F;Institutional&quot;,&quot;Mixed-Use Medium-Density&quot;,&quot;Mixed-Use Low-Density&quot;,&quot;Mixed-Use High-Density&quot;,&quot;High-Density Commercial&quot;,&quot;Very High-Density Residential&quot;,&quot;Mixed Use-High Density&quot;,&quot;Transportation&#x2F;Communications&#x2F;Utilities&quot;,&quot;Mixed Use-Low Density&quot;,&quot;Office&#x2F;Institutional&#x2F;Residential&quot;,&quot;Private Open Space&quot;,&quot;High-Density Mixed-Use&quot;,&quot;Mixed Use-Medium Density&quot;,&quot;Business Park&quot;,&quot;Industrial-Mixed Use&quot;,null],&quot;n&quot;:[385,275,266,179,137,115,112,89,81,50,34,33,23,22,22,8,7,6,4,4,3,2,1,1,1]},&quot;columns&quot;:[{&quot;id&quot;:&quot;LANDUSEDESC&quot;,&quot;name&quot;:&quot;LANDUSEDESC&quot;,&quot;type&quot;:&quot;character&quot;},{&quot;id&quot;:&quot;n&quot;,&quot;name&quot;:&quot;n&quot;,&quot;type&quot;:&quot;numeric&quot;}],&quot;dataKey&quot;:&quot;44ca7976bdd855e4c8ea13b049e53c79&quot;},&quot;children&quot;:[]},&quot;class&quot;:&quot;reactR_markup&quot;},&quot;evals&quot;:[],&quot;jsHooks&quot;:[]}&lt;&#x2F;script&gt;
&lt;p&gt;To see a disgusting map with a bad legend run the following.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;future_land_use &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;ggplot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;aes&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fill&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; LANDUSEDESC&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;geom_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;lwd&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;span class=&quot;z-punctuation z-separator z-decimal z-r&quot;&gt;.&lt;&#x2F;span&gt;15&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;color&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;black&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We can see that there are a bunch of different descriptions for
different types of mixed use zoning. Let’s filter down to descriptions
that have &lt;code&gt;&quot;Mixed-Use&quot;&lt;&#x2F;code&gt; or &lt;code&gt;&quot;Mixed Use&quot;&lt;&#x2F;code&gt; and visualize them.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; how much area of mixed use land use?
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;mixed_use &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; future_land_use &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;filter&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;grepl&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Mixed-Use|Mixed Use&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; LANDUSEDESC&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;ggplot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;geom_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;data&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; mixed_use&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fill&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;blue&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;color&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;NA&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;theme_void&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;overlapping-polys&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-5-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;making-a-fishnet-grid&quot;&gt;Making a fishnet grid&lt;&#x2F;h3&gt;
&lt;p&gt;Having made a fishnet grid quite a few times, I’ve got this handy
function. In essence we create a grid over our target geometry and we
keep only those locations from the grid that intersect eachother. If we
dont’, we have a square shaped grid.&lt;&#x2F;p&gt;
&lt;p&gt;It is important that you create an ID for the grid, otherwise when we
intersect later you’ll not know what is being intersected.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;make_fishnet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;geometry&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;10&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;hex&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  g &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_make_grid&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;geometry&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;square&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;hex&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; n&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  g&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lengths&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_intersects&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;g&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; geometry&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;grd &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;make_fishnet&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;future_land_use&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;40&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_as_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mutate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;hex_id&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;row_number&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;plot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;grd&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;overlapping-polys&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-6-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Man, I love maps of sequential IDs.&lt;&#x2F;p&gt;
&lt;p&gt;Next, we split our mixed use polygons based on the hexagons.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; how much area in each hexagon
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;lu_intersects &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_intersection&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;mixed_use&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; grd&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Warning: attribute variables are assumed to be spatially constant throughout
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;all geometries
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then we calculate the area of each resultant shape.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;overlap_area &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; lu_intersects &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mutate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;area&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_area&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;geometry&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;plot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;overlap_area&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;area&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;overlapping-polys&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-8-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The next step here is to take the split polygons, and join the data back
to the hexagons. I use a right join because they don’t get enough love.
And also because if you try to do a join with two sf objects they’ll
scream!!.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; join it back to the grid
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;hex_area_overlap &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_drop_geometry&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;overlap_area&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;select&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;hex_id&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; area&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;right_join&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;grd&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;by&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;hex_id&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_as_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;hex_area_overlap
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Simple feature collection with 1381 features and 2 fields
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Geometry type: POLYGON
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Dimension:     XY
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Bounding box:  xmin: -84.55738 ymin: 33.64417 xmax: -84.28635 ymax: 33.88926
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Geodetic CRS:  WGS 84
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 1,381 × 3
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   hex_id    area                                                              x
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    &amp;lt;int&amp;gt;   [m^2]                                                  &amp;lt;POLYGON [°]&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1     72 160485. ((-84.5182 33.65548, -84.52146 33.65737, -84.52146 33.66114, …
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2     84  44538. ((-84.51493 33.64983, -84.5182 33.65171, -84.5182 33.65548, -…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3     85 176134. ((-84.51493 33.66114, -84.5182 33.66302, -84.5182 33.66679, -…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4     87   5049. ((-84.51493 33.68376, -84.5182 33.68565, -84.5182 33.68942, -…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5     97 380145. ((-84.51167 33.65548, -84.51493 33.65737, -84.51493 33.66114,…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6    100 110821. ((-84.51167 33.68942, -84.51493 33.6913, -84.51493 33.69507, …
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7    106   8232. ((-84.51167 33.75729, -84.51493 33.75917, -84.51493 33.76294,…
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8    110 109249. ((-84.5084 33.64983, -84.51167 33.65171, -84.51167 33.65548, …
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9    111 150687. ((-84.5084 33.66114, -84.51167 33.66302, -84.51167 33.66679, …
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10    113 141654. ((-84.5084 33.68376, -84.51167 33.68565, -84.51167 33.68942, …
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ℹ 1,371 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now plot it!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;ggplot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;hex_area_overlap&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;aes&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fill&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;as.numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;area&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;geom_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;color&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;black&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;lwd&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;span class=&quot;z-punctuation z-separator z-decimal z-r&quot;&gt;.&lt;&#x2F;span&gt;15&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;theme_void&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;scale_fill_viridis_c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;option&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;plasma&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;na.value&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;NA&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;labels&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; scales&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;comma
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;labs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fill&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Area of mixed-use zoning (m)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;overlapping-polys&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-10-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>[Not so] generic functions</title>
        <published>2018-11-28T00:00:00+00:00</published>
        <updated>2018-11-28T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/function-methods/"/>
        <id>https://josiah.rs/posts/function-methods/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/function-methods/">&lt;p&gt;Lately I have been doing more of my spatial analysis work in R with the help of the &lt;code&gt;sf&lt;&#x2F;code&gt; package. One shapefile I was working with had some horrendously named columns, and naturally, I tried to clean them using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function from the &lt;code&gt;janitor&lt;&#x2F;code&gt; package. But lo, an egregious error occurred. To this end, I officially filed my complaint as an &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfirke&#x2F;janitor&#x2F;pull&#x2F;249&quot;&gt;issue&lt;&#x2F;a&gt;. The solution presented was to &lt;em&gt;simply&lt;&#x2F;em&gt; create a method for &lt;code&gt;sf&lt;&#x2F;code&gt; objects.&lt;&#x2F;p&gt;
&lt;p&gt;Yeah, methods, how tough can those be? Apparently the process isn&#x27;t at all difficult. But figuring out the process? That was difficult. This post will explain how I went about the process for converting the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function into a &lt;em&gt;generic&lt;&#x2F;em&gt; (I&#x27;ll explain this in a second), and creating a &lt;em&gt;method&lt;&#x2F;em&gt; for &lt;code&gt;sf&lt;&#x2F;code&gt; and &lt;code&gt;tbl_graph&lt;&#x2F;code&gt; objects.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-jargon&quot;&gt;The Jargon&lt;&#x2F;h3&gt;
&lt;p&gt;Okay, I want to address the jargon. What the hell is a &lt;em&gt;generic&lt;&#x2F;em&gt; function, and what is a &lt;em&gt;method&lt;&#x2F;em&gt;? But first, I want to give a quick tl;dr on what a function is. I define as function as bit of code that takes an input, changes it in some way, and produces an output. Even simpler, a function takes an input and creates an output.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;generic-functions&quot;&gt;Generic Functions&lt;&#x2F;h4&gt;
&lt;p&gt;Now, what is a &lt;em&gt;&lt;strong&gt;generic&lt;&#x2F;strong&gt;&lt;&#x2F;em&gt; function? My favorite definition that I&#x27;ve seen so far comes from &lt;em&gt;LispWorks Ltd&lt;&#x2F;em&gt; (their website is a historic landmark, I recommend you give it a look for a reminder of what the internet used to be). They define a &lt;a href=&quot;http:&#x2F;&#x2F;clhs.lisp.se&#x2F;Body&#x2F;07_fa.htm&quot;&gt;generic function&lt;&#x2F;a&gt; as&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;a function whose behavior depends on the classes or identities of the arguments supplied to it.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;This means that we have to create a function that looks at the class of an object and perform an operation based on the object class. That means if there is &lt;code&gt;&quot;numeric&quot;&lt;&#x2F;code&gt; or &lt;code&gt;&quot;list&quot;&lt;&#x2F;code&gt; object, they will be treated differently. These are called &lt;code&gt;methods&lt;&#x2F;code&gt;. Note: you can find the class of an object by using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;class.html&quot;&gt;&lt;code&gt;class()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function on any object.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;methods&quot;&gt;Methods&lt;&#x2F;h4&gt;
&lt;p&gt;To steal from &lt;em&gt;LispWorks Ltd&lt;&#x2F;em&gt; again, a &lt;a href=&quot;http:&#x2F;&#x2F;clhs.lisp.se&#x2F;Body&#x2F;26_glo_m.htm#method&quot;&gt;method&lt;&#x2F;a&gt; is&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;part of a generic function which provides information about how that generic function should behave [for] certain classes.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;This means that a method is part of a generic function and has to be defined separately. Imagine we have a generic function called &lt;code&gt;f&lt;&#x2F;code&gt; with methods for &lt;code&gt;list&lt;&#x2F;code&gt; and &lt;code&gt;numeric&lt;&#x2F;code&gt; objects. The way that we would denote these methods is by putting a period after the function name and indicating the type of object the function is to be used on. These would look like &lt;code&gt;f.list&lt;&#x2F;code&gt; and &lt;code&gt;f.numeric&lt;&#x2F;code&gt; respectively.&lt;&#x2F;p&gt;
&lt;p&gt;But to save time you can always create a &lt;code&gt;default&lt;&#x2F;code&gt; method which will be dispatched (used) on any object that it hasn&#x27;t been explicitly told how to operate on (by a specific method).&lt;&#x2F;p&gt;
&lt;p&gt;Now that the intuition of what generic functions and methods R, we can begin the work of actually creating them. This tutorial will walk through the steps I took in changing the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; from a standard function into a generic function with methods for &lt;code&gt;sf&lt;&#x2F;code&gt; objects and &lt;code&gt;tbl_graph&lt;&#x2F;code&gt; objects from the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;r-spatial&#x2F;sf&quot;&gt;&lt;code&gt;sf&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thomasp85&#x2F;tidygraph&quot;&gt;&lt;code&gt;tidygraph&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; packages respectively.&lt;&#x2F;p&gt;
&lt;p&gt;A brief overview of the process:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Define the generic function&lt;&#x2F;li&gt;
&lt;li&gt;Create a default method&lt;&#x2F;li&gt;
&lt;li&gt;Create additional methods&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;A quick note: The code that follows is not identical to that of the package. I will be changing it up to make it simpler to read and understand what is happening.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-generic-method&quot;&gt;The Generic Method&lt;&#x2F;h3&gt;
&lt;p&gt;The first step, as described above, is to create a generic function. Generic functions are made by creating a new function with the body containing only a call to the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;UseMethod.html&quot;&gt;&lt;code&gt;UseMethod()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function. The only argument to this is the name of your generic function---this should be the same as the name of the function you are making. This tells R that you are creating a generic function. Additionally, you should add any arguments that will be necessary for your function. Here, there are two arguments: &lt;code&gt;dat&lt;&#x2F;code&gt; and &lt;code&gt;case&lt;&#x2F;code&gt;. These indicate the data to be cleaned and the preferred style for them to be cleaned according to.&lt;&#x2F;p&gt;
&lt;p&gt;I am not setting any default values for &lt;code&gt;dat&lt;&#x2F;code&gt; to make it required, whereas I am setting &lt;code&gt;case&lt;&#x2F;code&gt; to &lt;code&gt;&quot;snake&quot;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;clean_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;case&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;snake&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;UseMethod.html&#x27;&gt;UseMethod&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;clean_names&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now we have created a generic function. But this function doesn&#x27;t know how to run on any given object types. In other words, there are no methods associated with it. To illustrate this try using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function we just defined on objects of different types.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;clean_names(1) # numeric 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;clean_names(&amp;quot;test&amp;quot;) # character 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;clean_names(TRUE) # logical 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;no applicable method for &#x27;clean_names&#x27; applied to an object of class \&quot;c(&#x27;double&#x27;, &#x27;numeric&#x27;)\&quot;&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;no applicable method for &#x27;clean_names&#x27; applied to an object of class \&quot;character\&quot;&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;no applicable method for &#x27;clean_names&#x27; applied to an object of class \&quot;logical\&quot;&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The output of these calls say &lt;code&gt;no applicable method for &#x27;x&#x27; applied to an object of [class]&lt;&#x2F;code&gt;. In order to prevent this from happening, we can create a default method. A default method will always be used if the function doesn&#x27;t have a method for the provided object type.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-default-method&quot;&gt;The Default Method&lt;&#x2F;h3&gt;
&lt;p&gt;Remember that methods are indicated by writing &lt;code&gt;function.method&lt;&#x2F;code&gt;. It is also important to note that the &lt;code&gt;method&lt;&#x2F;code&gt; should indicate an object class. To figure out what class an object is you can use the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;class.html&quot;&gt;&lt;code&gt;class()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function. For example &lt;code&gt;class(1)&lt;&#x2F;code&gt; tells you that the number &lt;code&gt;1&lt;&#x2F;code&gt; is &quot;numeric&quot;.&lt;&#x2F;p&gt;
&lt;p&gt;In this next step I want to create a default method that will be used on every object that there isn&#x27;t a method explicitly for. To do this I will create a function called &lt;code&gt;clean_names.default&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As background, the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function takes a data frame and changes column headers to fit a given style. &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; in the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfirke&#x2F;janitor&quot;&gt;development version&lt;&#x2F;a&gt; is based on the function &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&quot;&gt;&lt;code&gt;make_clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which takes a character vector and makes each value match a given style (the default is snake, and you should only use snake case because everything else is wrong * sarcasm * ).&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;github.com&#x2F;sfirke&#x2F;janitor&#x27;&gt;janitor&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now let&#x27;s see how this function works. For this we will use the ugliest character vector I have ever seen from the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfirke&#x2F;janitor&#x2F;blob&#x2F;master&#x2F;tests&#x2F;testthat&#x2F;test-clean-names.R&quot;&gt;tests&lt;&#x2F;a&gt; for &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; (h&#x2F;t @sfirke for making this).&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;ugly_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
  &lt;span class=&#x27;s&#x27;&gt;&quot;sp ace&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;repeated&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;a**^@&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;%&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;*&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;!&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;d(!)9&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;REPEATED&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;can\&quot;&#x27;t&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;hi_`there`&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;  leading spaces&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;€&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;ação&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Farœ&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;a b c d e f&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;testCamelCase&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;!leadingpunct&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;average # of days&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;jan2009sales&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;jan 2009 sales&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;ugly_names&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [1] &quot;sp ace&quot;            &quot;repeated&quot;          &quot;a**^@&quot;             &quot;%&quot;                &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [5] &quot;*&quot;                 &quot;!&quot;                 &quot;d(!)9&quot;             &quot;REPEATED&quot;         &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [9] &quot;can\&quot;&#x27;t&quot;           &quot;hi_`there`&quot;        &quot;  leading spaces&quot;  &quot;€&quot;                &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [13] &quot;ação&quot;              &quot;Farœ&quot;              &quot;a b c d e f&quot;       &quot;testCamelCase&quot;    &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [17] &quot;!leadingpunct&quot;     &quot;average # of days&quot; &quot;jan2009sales&quot;      &quot;jan 2009 sales&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now to see how this function works:&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&#x27;&gt;make_clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ugly_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [1] &quot;sp_ace&quot;                 &quot;repeated&quot;               &quot;a&quot;                     &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [4] &quot;percent&quot;                &quot;x&quot;                      &quot;x_2&quot;                   &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [7] &quot;d_9&quot;                    &quot;repeated_2&quot;             &quot;cant&quot;                  &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [10] &quot;hi_there&quot;               &quot;leading_spaces&quot;         &quot;x_3&quot;                   &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [13] &quot;acao&quot;                   &quot;faroe&quot;                  &quot;a_b_c_d_e_f&quot;           &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [16] &quot;test_camel_case&quot;        &quot;leadingpunct&quot;           &quot;average_number_of_days&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [19] &quot;jan2009sales&quot;           &quot;jan_2009_sales&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Très magnifique!&lt;&#x2F;p&gt;
&lt;p&gt;The body of the default method will take column names from a dataframe, clean them, and reassign them. Before we can do this, a dataframe is needed!&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# create a data frame with 20 columns&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;as_tibble.html&#x27;&gt;as_tibble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;matrix.html&#x27;&gt;matrix&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;100&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, ncol &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# makes the column names the `ugly_names` vector&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;ugly_names&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# print the data frame.&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1 × 20&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   `sp ace` repeated `a**^@`   `%`   `*`   `!` `d(!)9` REPEATED `can&quot;&#x27;t` hi_\th…¹   lea…²&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;       78       18      99    28    26    38      43       73       51       33      23&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# … with 9 more variables: `€` &amp;lt;int&amp;gt;, ação &amp;lt;int&amp;gt;, Farœ &amp;lt;int&amp;gt;, `a b c d e f` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   testCamelCase &amp;lt;int&amp;gt;, `!leadingpunct` &amp;lt;int&amp;gt;, `average # of days` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, `jan 2009 sales` &amp;lt;int&amp;gt;, and abbreviated variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   ¹​`hi_\`there\``, ²​`  leading spaces`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ℹ Use `colnames()` to see all variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The process for writing this function is:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;take a dataframe&lt;&#x2F;li&gt;
&lt;li&gt;take the old column names and clean them&lt;&#x2F;li&gt;
&lt;li&gt;reassign the column names as the new clean names&lt;&#x2F;li&gt;
&lt;li&gt;return the object&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;clean_names.default&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;case&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;snake&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# retrieve the old names&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;old_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# clean the old names&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;new_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&#x27;&gt;make_clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;old_names&lt;&#x2F;span&gt;, case &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;case&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# assign the column names as the clean names vector&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;new_names&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# return the data&lt;&#x2F;span&gt;
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that the default method has been defined. Try running the function on our test dataframe!&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1 × 20&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sp_ace repeated     a percent     x   x_2   d_9 repeated_2  cant hi_th…¹ leadi…²   x_3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;     78       18    99      28    26    38    43         73    51      33      23    27&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# … with 8 more variables: acao &amp;lt;int&amp;gt;, faroe &amp;lt;int&amp;gt;, a_b_c_d_e_f &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   test_camel_case &amp;lt;int&amp;gt;, leadingpunct &amp;lt;int&amp;gt;, average_number_of_days &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, jan_2009_sales &amp;lt;int&amp;gt;, and abbreviated variable names ¹​hi_there,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   ²​leading_spaces&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ℹ Use `colnames()` to see all variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Oh, my gorsh. Look at that! We can try replicating this with a named vector to see how the default method dispatched on unknown objects!&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# create a vector with 20 elements&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;test_vect&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# name each element with the ugly_names vector &lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_vect&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;ugly_names&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# try cleaning!&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_vect&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                 sp_ace               repeated                      a &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                      1                      2                      3 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                percent                      x                    x_2 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                      4                      5                      6 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                    d_9             repeated_2                   cant &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                      7                      8                      9 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;               hi_there         leading_spaces                    x_3 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                     10                     11                     12 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                   acao                  faroe            a_b_c_d_e_f &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                     13                     14                     15 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;        test_camel_case           leadingpunct average_number_of_days &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                     16                     17                     18 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;           jan2009sales         jan_2009_sales &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                     19                     20&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;It looks like this default function works super well with named objects! Now, we will broach the problem I started with, &lt;code&gt;sf&lt;&#x2F;code&gt; objects.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;sf-method&quot;&gt;&lt;code&gt;sf&lt;&#x2F;code&gt; method&lt;&#x2F;h3&gt;
&lt;p&gt;This section will go over the process for creating the &lt;code&gt;sf&lt;&#x2F;code&gt; method. If you have not ever used the &lt;code&gt;sf&lt;&#x2F;code&gt; package, I suggest you give it a try! It makes dataframe objects with spatial data associated with it. This allows you to perform many of the functions from the &lt;code&gt;tidyverse&lt;&#x2F;code&gt; to spatial data.&lt;&#x2F;p&gt;
&lt;p&gt;Before getting into it, I want to create a test object to work with. I will take the &lt;code&gt;test_df&lt;&#x2F;code&gt; column, create longitude and latitude columns, and then convert it into an &lt;code&gt;sf&lt;&#x2F;code&gt; object. The details of &lt;code&gt;sf&lt;&#x2F;code&gt; objects is out of the scope of this post.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;sf&#x2F;&#x27;&gt;sf&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;test_sf&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# create xy columns&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;long &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;80&lt;&#x2F;span&gt;, 
         lat &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;40&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# convert to sf object &lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;sf&#x2F;reference&#x2F;st_as_sf.html&#x27;&gt;st_as_sf&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;coords &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;long&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;lat&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# converting geometry column name to poor style&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_sf&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;21&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Geometry&quot;&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# telling sf which column is now the geometry&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;sf&#x2F;reference&#x2F;st_geometry.html&#x27;&gt;st_geometry&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_sf&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Geometry&quot;&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;test_sf&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Simple feature collection with 1 feature and 20 fields&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Geometry type: POINT&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Dimension:     XY&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Bounding box:  xmin: -80 ymin: 40 xmax: -80 ymax: 40&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; CRS:           NA&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1 × 21&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   `sp ace` repeated `a**^@`   `%`   `*`   `!` `d(!)9` REPEATED `can&quot;&#x27;t` hi_\th…¹   lea…²&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;       78       18      99    28    26    38      43       73       51       33      23&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# … with 10 more variables: `€` &amp;lt;int&amp;gt;, ação &amp;lt;int&amp;gt;, Farœ &amp;lt;int&amp;gt;, `a b c d e f` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   testCamelCase &amp;lt;int&amp;gt;, `!leadingpunct` &amp;lt;int&amp;gt;, `average # of days` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, `jan 2009 sales` &amp;lt;int&amp;gt;, Geometry &amp;lt;POINT&amp;gt;, and abbreviated&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   variable names ¹​`hi_\`there\``, ²​`  leading spaces`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ℹ Use `colnames()` to see all variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The &lt;code&gt;sf&lt;&#x2F;code&gt; object has been created. But now how does our default method of the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function work on this object? There is only one way to know, try it.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;clean_names(test_sf)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Error in st_geometry.sf(x) : attr(obj, &amp;quot;sf_column&amp;quot;) does not point to a geometry column. Did you rename it, without setting st_geometry(obj) &amp;lt;- &amp;quot;newname&amp;quot;?
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Notice how it fails. &lt;code&gt;sf&lt;&#x2F;code&gt; noticed that I changed the name of the geometry column without explicitly telling it I did so. Since the geometry column is &lt;em&gt;almost&lt;&#x2F;em&gt; always the last column of an sf object, we can use the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&quot;&gt;&lt;code&gt;make_clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function on every column but the last one! To do this we will use the &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&quot;&gt;&lt;code&gt;rename_at()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function from &lt;code&gt;dplyr&lt;&#x2F;code&gt;. This function allows you rename columns based on their name or position, and a function that renames it (in this case, &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&quot;&gt;&lt;code&gt;make_clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;For this example dataset, say I wanted to clean the first column. How would I do that? Note that the first column is called &lt;code&gt;sp ace&lt;&#x2F;code&gt;. How this works can be seen in a simple example. In the below function call we are using the &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&quot;&gt;&lt;code&gt;rename_at()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function (for more, go &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&quot;&gt;here&lt;&#x2F;a&gt;), selecting the first column name, and renaming it using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&quot;&gt;&lt;code&gt;make_clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&#x27;&gt;rename_at&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt;, .vars &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;vars.html&#x27;&gt;vars&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, .funs &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;make_clean_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1 × 20&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sp_ace repea…¹ `a**^@`   `%`   `*`   `!` `d(!)9` REPEA…² can&quot;&#x27;…³ hi_\t…⁴   lea…⁵   `€`&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;     78      18      99    28    26    38      43      73      51      33      23    27&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# … with 8 more variables: ação &amp;lt;int&amp;gt;, Farœ &amp;lt;int&amp;gt;, `a b c d e f` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   testCamelCase &amp;lt;int&amp;gt;, `!leadingpunct` &amp;lt;int&amp;gt;, `average # of days` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, `jan 2009 sales` &amp;lt;int&amp;gt;, and abbreviated variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   ¹​repeated, ²​REPEATED, ³​`can&quot;&#x27;t`, ⁴​`hi_\`there\``, ⁵​`  leading spaces`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ℹ Use `colnames()` to see all variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Notice how only the first column has been cleaned. It went from &lt;code&gt;sp ace&lt;&#x2F;code&gt; to &lt;code&gt;sp_ace&lt;&#x2F;code&gt;. The goal is to replicate this for all columns &lt;em&gt;except&lt;&#x2F;em&gt; the last one.&lt;&#x2F;p&gt;
&lt;p&gt;To write the sf method, the above line of code can be adapted to select columns 1 through the number of columns &lt;em&gt;minus&lt;&#x2F;em&gt; 1 (so geometry isn&#x27;t selected). In order to make this work, we need to identify the second to last column---this will be supplied as the ending value of our selected variables.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;clean_names.sf&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;case&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;snake&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# identify last column that is not geometry&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;last_col_to_clean&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;ncol&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# create a new dat object&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&#x27;&gt;rename_at&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, 
                   &lt;span class=&#x27;c&#x27;&gt;# rename the first up until the second to last&lt;&#x2F;span&gt;
                   .vars &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;vars.html&#x27;&gt;vars&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;last_col_to_clean&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, 
                   &lt;span class=&#x27;c&#x27;&gt;# clean using the make_clean_names&lt;&#x2F;span&gt;
                   .funs &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;make_clean_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Voilà! Our first non-default method has been created. This means that when an &lt;code&gt;sf&lt;&#x2F;code&gt; object is supplied to our generic function &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; it looks at the class of the object---&lt;code&gt;class(sf_object)&lt;&#x2F;code&gt;---notices it&#x27;s an &lt;code&gt;sf&lt;&#x2F;code&gt; object, then dispatches (uses) the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names.sf()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; method instead of the default.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_sf&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Simple feature collection with 1 feature and 20 fields&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Geometry type: POINT&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Dimension:     XY&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Bounding box:  xmin: -80 ymin: 40 xmax: -80 ymax: 40&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; CRS:           NA&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1 × 21&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sp_ace repeated     a percent     x   x_2   d_9 repeated_2  cant hi_th…¹ leadi…²   x_3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;     78       18    99      28    26    38    43         73    51      33      23    27&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# … with 9 more variables: acao &amp;lt;int&amp;gt;, faroe &amp;lt;int&amp;gt;, a_b_c_d_e_f &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   test_camel_case &amp;lt;int&amp;gt;, leadingpunct &amp;lt;int&amp;gt;, average_number_of_days &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, jan_2009_sales &amp;lt;int&amp;gt;, Geometry &amp;lt;POINT&amp;gt;, and abbreviated&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   variable names ¹​hi_there, ²​leading_spaces&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ℹ Use `colnames()` to see all variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Here we see that it worked exactly as we hoped. Every column but the last has been altered. This allows &lt;code&gt;sf&lt;&#x2F;code&gt; to name it&#x27;s geometry columns whatever it would like without disrupting it.&lt;&#x2F;p&gt;
&lt;p&gt;Shortly after this addition was added to the package I became aware of another type of object that had problems using &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. This is the &lt;code&gt;tbl_graph&lt;&#x2F;code&gt; object from the &lt;code&gt;tidygraph&lt;&#x2F;code&gt; package from Thomas Lin Pederson.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;tbl-graph-method&quot;&gt;&lt;code&gt;tbl_graph&lt;&#x2F;code&gt; method&lt;&#x2F;h3&gt;
&lt;p&gt;In issue &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfirke&#x2F;janitor&#x2F;issues&#x2F;252&quot;&gt;#252&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;gvdr&quot;&gt;@gvdr&lt;&#x2F;a&gt; noted that calling &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; on a &lt;code&gt;tbl_graph&lt;&#x2F;code&gt; doesn&#x27;t execute. Thankfully &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Tazinho&quot;&gt;@Tazinho&lt;&#x2F;a&gt; noted that you could easily clean the column headers by using the &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&quot;&gt;&lt;code&gt;rename_all()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function from &lt;code&gt;dplyr&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Here the solution was even easier than above. As a reminder, in order to make the &lt;code&gt;tbl_graph&lt;&#x2F;code&gt; method, we need to specify the name of the generic followed by the object class.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;clean_names.tbl_graph&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;case&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;snake&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# rename all columns&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&#x27;&gt;rename_all&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;make_clean_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;In order to test the function, we will need a graph to test it on. This example draws on the example used in the issue.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidygraph.data-imaginist.com&#x27;&gt;tidygraph&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;# create test graph to test clean_names&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;test_graph&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidygraph.data-imaginist.com&#x2F;reference&#x2F;sampling_games.html&#x27;&gt;play_erdos_renyi&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;0.5&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# attach test_df as columns &lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidygraph.data-imaginist.com&#x2F;reference&#x2F;bind_graphs.html&#x27;&gt;bind_nodes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;test_graph&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tbl_graph: 1 nodes and 0 edges&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; #&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # A rooted tree&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; #&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # Node Data: 1 × 20 (active)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sp ace… repeat… `a**^@`   `%`   `*`   `!` `d(!)9` REPEAT… can&quot;&#x27;t… hi_\th…   lead…&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;     &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;      78      18      99    28    26    38      43      73      51      33      23&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# … with 9 more variables: `€` &amp;lt;int&amp;gt;, ação &amp;lt;int&amp;gt;, Farœ &amp;lt;int&amp;gt;, `a b c d e f` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   testCamelCase &amp;lt;int&amp;gt;, `!leadingpunct` &amp;lt;int&amp;gt;, `average # of days` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, `jan 2009 sales` &amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # Edge Data: 0 × 2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# … with 2 variables: from &amp;lt;int&amp;gt;, to &amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Here we see that there is a graph with only 1 node and 0 edges (relations) with bad column headers (for more, visit the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thomasp85&#x2F;tidygraph&#x2F;&quot;&gt;GitHub page&lt;&#x2F;a&gt;). Now we can test this as well.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_graph&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tbl_graph: 1 nodes and 0 edges&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; #&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # A rooted tree&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; #&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # Node Data: 1 × 20 (active)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sp_ace repeat…     a percent     x   x_2   d_9 repeat…  cant hi_the… leadin…   x_3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;     78      18    99      28    26    38    43      73    51      33      23    27&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# … with 8 more variables: acao &amp;lt;int&amp;gt;, faroe &amp;lt;int&amp;gt;, a_b_c_d_e_f &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   test_camel_case &amp;lt;int&amp;gt;, leadingpunct &amp;lt;int&amp;gt;, average_number_of_days &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, jan_2009_sales &amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # Edge Data: 0 × 2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# … with 2 variables: from &amp;lt;int&amp;gt;, to &amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;It worked as anticipated!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;review-tl-dr&quot;&gt;Review (tl;dr)&lt;&#x2F;h3&gt;
&lt;p&gt;In the preceding sections we learned what generic functions and methods are. How to create a generic function, a default method, and methods for objects of different classes.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;generic function&lt;&#x2F;strong&gt;: &quot;A generic function is a function whose behavior depends on the classes or identities of the arguments supplied to it&quot;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;generic function method&lt;&#x2F;strong&gt;: &quot;part of a generic function and which provides information about how that generic function should behave [for] certain classes&quot;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The process to create a function with a method is to:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Create a generic function with:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;f_x &amp;lt;- function() { UseMethod(&quot;f_x&quot;) }&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Define the default method with:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;f_x.default &amp;lt;- function() { do something }&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Define object class specific methods with:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;f_x.class &amp;lt;- function() { do something else}&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h4 id=&quot;notes&quot;&gt;Notes&lt;&#x2F;h4&gt;
&lt;p&gt;If you have not yet encountered the &lt;code&gt;janitor&lt;&#x2F;code&gt; package it will help you tremendously with various data cleaning processes. Clearly, &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; is my favorite function as it helps me enforce my preferred style (and the only). If you are not aware of &lt;em&gt;&quot;proper&quot;&lt;&#x2F;em&gt; R style, I suggest you read the &lt;a href=&quot;http:&#x2F;&#x2F;adv-r.had.co.nz&#x2F;Style.html&quot;&gt;style guide&lt;&#x2F;a&gt; in &lt;a href=&quot;http:&#x2F;&#x2F;adv-r.had.co.nz&#x2F;&quot;&gt;Advanced R&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;While on the subject of &lt;em&gt;Advanced R&lt;&#x2F;em&gt;, I suggest you read the &quot;Creating new methods and generics&quot; &lt;a href=&quot;http:&#x2F;&#x2F;adv-r.had.co.nz&#x2F;OO-essentials.html&quot;&gt;section&lt;&#x2F;a&gt; of it. I struggled comprehending it at first because I didn&#x27;t even know what a method was. However, if after reading this you feel like you want more, that&#x27;s the place to go.&lt;&#x2F;p&gt;
&lt;p&gt;I&#x27;d like to thank &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfirke&quot;&gt;@sfirke&lt;&#x2F;a&gt; for being exceptionally helpful in guiding my contributions to the &lt;code&gt;janitor&lt;&#x2F;code&gt; package.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Reading Multiple csvs as 1 data frame</title>
        <published>2018-10-27T00:00:00+00:00</published>
        <updated>2018-10-27T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/read-chunked-csv/"/>
        <id>https://josiah.rs/posts/read-chunked-csv/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/read-chunked-csv/">&lt;p&gt;In an earlier &lt;a href=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;read-chunked-csv&#x2F;josiahparry.com&#x2F;post&#x2F;write-chunked-csv&quot;&gt;posting&lt;&#x2F;a&gt; I wrote about having to break a single csv into multiple csvs. In other scenarios one data set maybe provided as multiple a csvs.&lt;&#x2F;p&gt;
&lt;p&gt;Thankfully &lt;code&gt;purrr&lt;&#x2F;code&gt; has a beautiful function called &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which will make this into a two liner. This process has essentially 3 steps.&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Create a vector of all &lt;code&gt;.csv&lt;&#x2F;code&gt; files that should be merged together.&lt;&#x2F;li&gt;
&lt;li&gt;Read each file using &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Combine each dataframe into one.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; maps (applys) a function to each value of an object and produces a dataframe of all outputs.&lt;&#x2F;p&gt;
&lt;p&gt;For this example I will use the csvs I created in a previous tutorial utilizing a dataset from the Quantitative Social Science book.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Get all csv file names &lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;file_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&quot;&lt;&#x2F;span&gt;, pattern &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;\\.csv&quot;&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;file_names&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [1] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_1.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [2] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_10.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [3] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_11.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [4] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_12.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [5] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_13.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [6] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_2.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [7] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_3.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [8] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_4.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [9] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_5.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [10] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_6.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [11] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_7.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [12] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_8.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [13] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_9.csv&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;# apply &lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;all_csvs&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;file_names&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;5866&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;──&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;────────────────────────────────────────────────────────────────&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;ℹ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# preview the data&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;utils&#x2F;head.html&#x27;&gt;head&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;all_csvs&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 6 × 6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sex    yearofbirth primary2004 messages   primary2006 hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;        &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;       &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;            &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;  &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt; male          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;941           0 Civic Duty           0      2&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;2&lt;&#x2F;span&gt; female        &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;947           0 Civic Duty           0      2&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;3&lt;&#x2F;span&gt; male          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;951           0 Hawthorne            1      3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;4&lt;&#x2F;span&gt; female        &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;950           0 Hawthorne            1      3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;5&lt;&#x2F;span&gt; female        &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;982           0 Hawthorne            1      3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;6&lt;&#x2F;span&gt; male          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;981           0 Control              0      3&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Chunking your csv</title>
        <published>2018-10-27T00:00:00+00:00</published>
        <updated>2018-10-27T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/write-chunked-csv/"/>
        <id>https://josiah.rs/posts/write-chunked-csv/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/write-chunked-csv/">&lt;p&gt;Sometimes due to limitations of software, file uploads often have a row limit. I recently encountered this while creating texting campaigns using &lt;a href=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;write-chunked-csv&#x2F;relaytxt.io&quot;&gt;Relay&lt;&#x2F;a&gt;. Relay is a peer-to-peer texting platform. It has a limitation of 20k contacts per texting campaign. This is a limitation when running a massive Get Out the Vote (GOTV) texting initiative.&lt;&#x2F;p&gt;
&lt;p&gt;In order to solve this problem, a large csv must be split into multiple csv&#x27;s for upload. Though this could be solved with excel and Google Sheets, who wants to labor over that?&lt;&#x2F;p&gt;
&lt;p&gt;Here I will go through the methodology of writing a csv into multiple. I will use data from the &lt;a href=&quot;https:&#x2F;&#x2F;www.google.com&#x2F;search?q=quantitative+social+science&amp;amp;oq=quantitative+social+science&amp;amp;aqs=chrome..69i57j69i61j69i65j69i60l2j69i59.5035j0j1&amp;amp;sourceid=chrome&amp;amp;ie=UTF-8&quot;&gt;Quantitative Social Science&lt;&#x2F;a&gt; book by Kosuke Imai.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;social&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;kosukeimai&#x2F;qss&#x2F;master&#x2F;CAUSALITY&#x2F;social.csv&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;dim.html&#x27;&gt;dim&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;social&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This dataset has 305k observations and 6 columns. For this example let&#x27;s say we wanted to split this into files of 15,000 rows or fewer. We can use the following custom funciton:&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;write_csv_chunk&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;filepath&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;output_name&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;df&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;filepath&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 1. read original file&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;n_files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Round.html&#x27;&gt;ceiling&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;nrow&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;df&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 2. identify how many files to make&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;chunk_starts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;seq.html&#x27;&gt;seq&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;*&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n_files&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;#  3. identify the rown number to start on&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;kr&#x27;&gt;for&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;in&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n_files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4. iterate through the csv to write the files&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nv&#x27;&gt;chunk_end&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;*&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4a&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nv&#x27;&gt;df_to_write&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;slice.html&#x27;&gt;slice&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;df&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;chunk_starts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;chunk_end&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4b&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nv&#x27;&gt;fpath&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste0&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;output_name&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;_&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;.csv&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4c&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;write_delim.html&#x27;&gt;write_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;df_to_write&lt;&#x2F;span&gt;,  &lt;span class=&#x27;nv&#x27;&gt;fpath&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4d&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;message.html&#x27;&gt;message&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste0&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;fpath&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot; was written.&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4e&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The function has a few steps. Let&#x27;s walk through them. The step numbers are commented above.&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Read in the csv.&lt;&#x2F;li&gt;
&lt;li&gt;Identify the number of files that will have to be created.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;ul&gt;
&lt;li&gt;This will be the number of rows of the data frame divided by the number of rows we want each file to have. This number will be rounded up to handle a remainder.&lt;&#x2F;li&gt;
&lt;li&gt;In this case &lt;code&gt;ceiling(nrow(social) &#x2F; 15000)&lt;&#x2F;code&gt; is equal to &lt;code&gt;ceiling(nrow(social) &#x2F; 15000)&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;ol&gt;
&lt;li&gt;Identify the row number to begin splitting the dataframe for each file.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;ul&gt;
&lt;li&gt;This will be a factor of our &lt;code&gt;n&lt;&#x2F;code&gt; plus 1, but will never exceed the &lt;code&gt;nrow(df)&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;ol&gt;
&lt;li&gt;This is the fun part, writing our files. The number of iterations is the number of files.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;4a&lt;&#x2F;em&gt;: The ending row number is the iteration number multiplied by the number of rows.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4b&lt;&#x2F;em&gt;: use &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;slice.html&quot;&gt;&lt;code&gt;slice()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to cute the original data frame into the chunk beginning and chunk end&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4c&lt;&#x2F;em&gt;: Creating the file paththat will be written.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4d&lt;&#x2F;em&gt;: Write the csv!&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4e&lt;&#x2F;em&gt;: Print a message about the file being printed.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;soc_fpath&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;kosukeimai&#x2F;qss&#x2F;master&#x2F;CAUSALITY&#x2F;social.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;write_csv_chunk&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;filepath &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;soc_fpath&lt;&#x2F;span&gt;, n &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;25000&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we have these files split up, it will be good to know how to get them back into one piece! Check out my blog post on reading multiple csvs in as one data frame &lt;a href=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;write-chunked-csv&#x2F;josiahparry.com&#x2F;post&#x2F;read-chunked-csv&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Coursera R-Programming: Week 2 Problems</title>
        <published>2018-04-14T00:00:00+00:00</published>
        <updated>2018-04-14T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/tidy-coursera-r-programming/"/>
        <id>https://josiah.rs/posts/tidy-coursera-r-programming/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/tidy-coursera-r-programming/">&lt;p&gt;Over the past several weeks I have been helping students, career professionals, and people of other backgrounds learn R. During this time one this has become apparent, people are teaching the old paradigm of R and avoiding the tidyverse all together.&lt;&#x2F;p&gt;
&lt;p&gt;I recently had a student reach out to me in need of help with the first programming assignment from the &lt;a href=&quot;https:&#x2F;&#x2F;www.coursera.org&#x2F;learn&#x2F;r-programming&quot;&gt;Coursera R-Programming&lt;&#x2F;a&gt; course (part of the Johns Hopkins Data Science Specialization). This particular student was struggling with combining the her new knowledge of R data types, conditional statements, looping, control statements, scoping, and functions to solve the assignment problem set. I provided her with a walk through of each question in base R, the style of the course. I couldn&#x27;t help but empathize with her as I too learned the long way first. However I thought that she shouldn&#x27;t be learning the hard way first (see David Robinson&#x27;s &lt;a href=&quot;http:&#x2F;&#x2F;varianceexplained.org&#x2F;r&#x2F;teach-hard-way&#x2F;&quot;&gt;blog post&lt;&#x2F;a&gt;, &lt;em&gt;&quot;Don&#x27;t teach students the hard way first&quot;&lt;&#x2F;em&gt;), she should be learning the effective way.&lt;&#x2F;p&gt;
&lt;p&gt;In my written response to her, I gave her solutions to her problems in base R and using the tidyverse. Here, I will go over the problems and adress them from a tidy perspective. This will not serve as a full introduction to the tidyverse. For an introduction and a reason why the tidyverse is superior to base R, I leave you with &lt;a href=&quot;http:&#x2F;&#x2F;stat545.com&#x2F;block009_dplyr-intro.html&quot;&gt;&lt;strong&gt;Stat 545&lt;&#x2F;strong&gt;: &lt;em&gt;Introduction to dplyr&lt;&#x2F;em&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The assignment utilizes a directory of data called &lt;code&gt;specdata&lt;&#x2F;code&gt; which can be downloaded &lt;a href=&quot;https:&#x2F;&#x2F;d396qusza40orc.cloudfront.net&#x2F;rprog%2Fdata%2Fspecdata.zip&quot;&gt;&lt;strong&gt;here&lt;&#x2F;strong&gt;&lt;&#x2F;a&gt;, and describes it:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;The zip file contains 332 comma-separated-value (CSV) files containing pollution monitoring data for fine particulate matter (PM) air pollution at 332 locations in the United States. Each file contains data from a single monitor and the ID number for each monitor is contained in the file name. For example, data for monitor 200 is contained in the file &quot;200.csv&quot;. Each file contains three variables:&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Date&lt;&#x2F;strong&gt;: the date of the observation in &lt;code&gt;YYYY-MM-DD&lt;&#x2F;code&gt; format (year-month-day)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;sulfate&lt;&#x2F;strong&gt;: the level of sulfate PM in the air on that date (measured in micrograms per cubic meter)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;nitrate&lt;&#x2F;strong&gt;: the level of nitrate PM in the air on that date (measured in micrograms per cubic meter)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;For this programming assignment you will need to unzip this file and create the directory &#x27;specdata&#x27;. Once you have unzipped the zip file, do not make any modifications to the files in the &#x27;specdata&#x27; directory. In each file you&#x27;ll notice that there are many days where either sulfate or nitrate (or both) are missing (coded as NA). This is common with air pollution monitoring data in the United States.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;part-i&quot;&gt;Part I&lt;&#x2F;h1&gt;
&lt;p&gt;Problem 1:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write a function named &#x27;pollutantmean&#x27; that calculates the mean of a pollutant (sulfate or nitrate) across a specified list of monitors. The function &#x27;pollutantmean&#x27; takes three arguments: &#x27;directory&#x27;, &#x27;pollutant&#x27;, and &#x27;id&#x27;. Given a vector monitor ID numbers, &#x27;pollutantmean&#x27; reads that monitors&#x27; particulate matter data from the directory specified in the &#x27;directory&#x27; argument and returns the mean of the pollutant across all of the monitors, ignoring any missing values coded as NA. A prototype of the function is as follows&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; pollutantmean &amp;lt;- function(directory, pollutant, id = 1:332){
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;directory&amp;#39; is a character vector of length 1 indicating
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## the location of the CSV files
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;pollutant&amp;#39; is a character vector of length 1 indicating
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## the name of the pollutant for which we will calculate the 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## mean; either &amp;quot;sulfate&amp;quot; or &amp;quot;nitrate&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;id&amp;#39; is an integer vector indicating the monitor ID numbers
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## to be used
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## Return the mean of the pollutant across all monitors list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## in the &amp;#39;id&amp;#39; vector (ignoring NA values)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## NOTE: Do not round the result!
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Before we tackle the function, I believe the best approach is to first solve the problem in a regular script. This problem has four clear steps:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Identify files in the directory&lt;&#x2F;li&gt;
&lt;li&gt;Subset files based on provided ID&lt;&#x2F;li&gt;
&lt;li&gt;Read the files&lt;&#x2F;li&gt;
&lt;li&gt;Calculate and return the mean on the desired column&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;This problem gives us a directory of files from which we need to read in the data based on the provided IDs. For the sake of this walk through we will randomly sample 10 values within the range designated in the problem statement (332).&lt;&#x2F;p&gt;
&lt;p&gt;We will first generate random IDs, then identify all of the files within the specified directory and obtain their file paths using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&quot;&gt;&lt;code&gt;list.files()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function. After this we will subset our file list based on the IDs, then iterate over our file list and read in each file as a csv using &lt;code&gt;purrr:map_df()&lt;&#x2F;code&gt; combined with &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Fortunately &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; returns a nice and pretty data frame which lets us avoid having to explicitly bind each unique data frame.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;identify-files&quot;&gt;Identify Files&lt;&#x2F;h4&gt;
&lt;p&gt;Here we create 10 random IDs and store them in the &lt;code&gt;ids&lt;&#x2F;code&gt; variable. Next we use &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&quot;&gt;&lt;code&gt;list.files()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to look within the &lt;code&gt;specdata&lt;&#x2F;code&gt; folder that we downloaded above. Everyone&#x27;s path will most likely be different. Be sure to obtain the correct file path---help for &lt;a href=&quot;http:&#x2F;&#x2F;osxdaily.com&#x2F;2013&#x2F;06&#x2F;19&#x2F;copy-file-folder-path-mac-os-x&#x2F;&quot;&gt;Mac&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Next we identify the files we need based on the sampled &lt;code&gt;ids&lt;&#x2F;code&gt; and store the subset in the &lt;code&gt;files_filtered&lt;&#x2F;code&gt; variable. We use the values of the &lt;code&gt;ids&lt;&#x2F;code&gt; to locate the file paths positionally. For example, ID number 1 is the first file, number 10 is the tenth, etc.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Load our handy dandy functions&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# 10 random IDs in ID range&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;ids&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;10&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# Identify all files within the directory&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# Subset the data&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ids&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# View the files to verify&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ids&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h4 id=&quot;reading-the-files&quot;&gt;Reading the Files&lt;&#x2F;h4&gt;
&lt;p&gt;Now that we have identified the files that we are going to read in, we can use &lt;code&gt;purrr:map_df()&lt;&#x2F;code&gt; to apply the &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function to each value of &lt;code&gt;files_filtered&lt;&#x2F;code&gt; and return a data frame (hence the &lt;code&gt;_df()&lt;&#x2F;code&gt; suffix). We supply additional arguments to &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to ensure that every column is read in properly.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Read in the subset of the data. Notice the brackets after files[]&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;, 
                   col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                   &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;pillar.r-lib.org&#x2F;reference&#x2F;glimpse.html&#x27;&gt;glimpse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Next, we get to utilize some &lt;code&gt;dplyr&lt;&#x2F;code&gt; magic. Here we take the &lt;code&gt;specdata&lt;&#x2F;code&gt; object we created from reading in our files, deselct the &lt;code&gt;Date&lt;&#x2F;code&gt; column, then utilize &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&quot;&gt;&lt;code&gt;summarise_if()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to apply the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;mean.html&quot;&gt;&lt;code&gt;mean()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function to our data. &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&quot;&gt;&lt;code&gt;summarise_if()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; requires that we provide a logical statement as the first argument. &lt;em&gt;If&lt;&#x2F;em&gt; (hence the &lt;code&gt;_if()&lt;&#x2F;code&gt; suffix) the logical statement evaluates to &lt;code&gt;TRUE&lt;&#x2F;code&gt; on a column then it will apply a list of functions to those columns where the statement evaluated to &lt;code&gt;TRUE&lt;&#x2F;code&gt;. We can also specify additional arguments to the functions. Here we specify &lt;code&gt;na.rm = TRUE&lt;&#x2F;code&gt; for handling missing values.&lt;&#x2F;p&gt;
&lt;p&gt;In this case, we are checking to see if our columns are of the data type &lt;code&gt;double&lt;&#x2F;code&gt; using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;double.html&quot;&gt;&lt;code&gt;is.double()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function. If you&#x27;re wondering why we didn&#x27;t use &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;numeric.html&quot;&gt;&lt;code&gt;is.numeric()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, it&#x27;s because the &lt;code&gt;ID&lt;&#x2F;code&gt; column is an integer which is considered numeric.&lt;&#x2F;p&gt;
&lt;p&gt;If we wanted to take the underlying vector of one of the columns, we can also, use &lt;code&gt;dplyr::pull(col_name)&lt;&#x2F;code&gt;. This will be helpful later when we want to obtain the mean of just one column.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Obtain mean nitrate&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;Date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&#x27;&gt;summarise_if&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;is.double&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;mean&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# Pull just the sulfate column&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sulfate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;Date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&#x27;&gt;summarise_if&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;is.double&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;mean&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# Pull just the nitrate column&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;nitrate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we have all of the tools, we can put this together into a single function, which I will call &lt;code&gt;pollutant_mean()&lt;&#x2F;code&gt; to somewhat adhere---functions should take the name of verbs---to the tidyverse style guide.&lt;&#x2F;p&gt;
&lt;p&gt;Here we have three arguments:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;directory&lt;&#x2F;code&gt;: Where to look for the files&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;pollutant&lt;&#x2F;code&gt;: Which pollutant (nitrate or sulfate) to evaluate
&lt;ul&gt;
&lt;li&gt;This needs to be a character value unless we want to get into &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;articles&#x2F;programming.html&quot;&gt;tidyeval&lt;&#x2F;a&gt;, which frankly I will leave to the professionals. But I will provide an alternative solution at the end that doesn&#x27;t require quoted &lt;code&gt;pollutant&lt;&#x2F;code&gt; names.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;id&lt;&#x2F;code&gt;: Which monitoring stations we should look at&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Within the function we take everything we did in the above steps but generalize it to a function. We identify the files in the directory provided (&lt;code&gt;specdata&lt;&#x2F;code&gt;), subset the files positionally based on the provided &lt;code&gt;id&lt;&#x2F;code&gt; vector, and then iterate over the file names and read them in with &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Next we take our data and calculate the mean on both &lt;code&gt;sulfate&lt;&#x2F;code&gt; and &lt;code&gt;nitrate&lt;&#x2F;code&gt; columns. We then &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&quot;&gt;&lt;code&gt;pull()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; the specified column from the &lt;code&gt;pollutant&lt;&#x2F;code&gt; argument and then &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&quot;&gt;&lt;code&gt;return()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; that value.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;
&lt;span class=&#x27;nv&#x27;&gt;pollutant_mean&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;pollutant&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;, 
                     col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;Date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&#x27;&gt;summarise_if&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;is.double&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;mean&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;pollutant&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Here we can test out the function with both types of pollutants and different &lt;code&gt;id&lt;&#x2F;code&gt; values.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;pollutant_mean&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;directory &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, pollutant &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;sulfate&quot;&lt;&#x2F;span&gt;, id &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#pollutant_mean(&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;, &quot;nitrate&quot;, 2)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;part-ii&quot;&gt;Part II:&lt;&#x2F;h1&gt;
&lt;p&gt;Let us continue to the second problem in the problem set.&lt;&#x2F;p&gt;
&lt;p&gt;Problem 2:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write a function that reads a directory full of files and reports the number of completely observed cases in each data file. The function should return a data frame where the first column is the name of the file and the second column is the number of complete cases.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;The assignment provides an example function format, but I think it to be a bit misleading. So I will go about this in the way I think is best. We will work on creating a function called &lt;code&gt;complete_spec_cases()&lt;&#x2F;code&gt; which will take only two arguments, &lt;code&gt;directory&lt;&#x2F;code&gt;, and &lt;code&gt;id&lt;&#x2F;code&gt;. &lt;code&gt;directory&lt;&#x2F;code&gt; and &lt;code&gt;id&lt;&#x2F;code&gt; will be used in the the same way as the previous problem.&lt;&#x2F;p&gt;
&lt;p&gt;For this problem our goal is to identify how many complete cases there are by provided ID. This should be exceptionally simple. We will have to identify our files, subset them, and read them in the same way as before. Next we can identify complete cases by piping our &lt;code&gt;specdata&lt;&#x2F;code&gt; object to &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&quot;&gt;&lt;code&gt;na.omit()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which will remove any row with a missing value. Next, we have to group by the &lt;code&gt;ID&lt;&#x2F;code&gt; column and pipe our grouped data frame to &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;count.html&quot;&gt;&lt;code&gt;count()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which will count how many observations there are by group. We will then return this data frame to the user.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;complete_spec_cases&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;

  &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;,
                     col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;complete_specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise.html&#x27;&gt;summarise&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;nobs &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;context.html&#x27;&gt;n&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;complete_specdata&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;complete_spec_cases&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, id &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;part-iii&quot;&gt;Part III:&lt;&#x2F;h1&gt;
&lt;p&gt;This final problem is probably the most complicated, but with the method we just used above and with a bit more help from the &lt;code&gt;purrr&lt;&#x2F;code&gt; and &lt;code&gt;dplyr&lt;&#x2F;code&gt; packages, we can do this no problem.&lt;&#x2F;p&gt;
&lt;p&gt;Problem 3:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write a function that takes a directory of data files and a threshold for complete cases and calculates the correlation between sulfate and nitrate for monitor locations where the &lt;em&gt;number of completely observed cases&lt;&#x2F;em&gt; (on all variables) is greater than the threshold. The function should return a vector of correlations for the monitors that meet the threshold requirement. If no monitors meet the threshold requirement, then the function should return a numeric vector of length 0. A prototype of this function follows:&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Correct &amp;lt;- function(directory, threshold = 0){
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;directory&amp;#39; is a character vector of length 1 indicating
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## the location of the CSV files
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;threshold&amp;#39; is a numeric vector of length 1 indicating the
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## number of completely observed observations (on all
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## variables) required to compute the correlation between
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## nitrate and sulfate; the default is 0
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## Return a numeric vector of correlations
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## NOTE: Do not round the result!
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Let keep this simple. The above statement essentially is asking that we find the correlation between &lt;code&gt;nitrate&lt;&#x2F;code&gt; and &lt;code&gt;sulfate&lt;&#x2F;code&gt; for each monitoring station (ID). But there is a catch! Each ID must meet a specified threshold of complete cases, and if none of the monitors meet the requirement the function must return a &lt;code&gt;numeric(0)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The way we will structure this function will be to first read in the data---as we have done twice now, except this time there will be no subsetting of IDs. Then we need to identify the number of complete cases by ID---as we did in problem 2---and identify the stations that meet the threshold requirement. At this point we will use an &lt;code&gt;if&lt;&#x2F;code&gt; statement to check if we have at least 1 monitoring station that meets our threshold, if we do not, we return the &lt;code&gt;numeric(0)&lt;&#x2F;code&gt;---there is most likely a more tidy way to do this, but I am not aware. If we have at least 1 monitoring station that meets the specified threshold we will use an &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&quot;&gt;&lt;code&gt;inner_join()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to make sure that &lt;code&gt;specdata&lt;&#x2F;code&gt; contains only those IDs that meet the requirement.&lt;&#x2F;p&gt;
&lt;p&gt;For the sake of this example, we will continue to use the &lt;code&gt;specdata&lt;&#x2F;code&gt; object we created in previous examples, and we will set our threshold to &lt;code&gt;100.&lt;&#x2F;code&gt; Once we identify the stations with the proper number of counts (&lt;code&gt;&amp;gt; 100&lt;&#x2F;code&gt;), we will store that data frame in an object called &lt;code&gt;id_counts&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;
&lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;count.html&#x27;&gt;count&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;100&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; 
  
  &lt;span class=&#x27;kr&#x27;&gt;if&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;nrow&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;numeric.html&#x27;&gt;numeric&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;else&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;print.html&#x27;&gt;print&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;All is well.&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;

  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&#x27;&gt;inner_join&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;ID&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; 
  
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This is where it gets kind of funky. Once we have filtered down our data set, we need to calculate the correlations for each ID. The way that we do this is by nesting our data frame on the &lt;code&gt;ID&lt;&#x2F;code&gt; column. Calling &lt;code&gt;nest(-ID)&lt;&#x2F;code&gt; allows us to, for each value of ID, create a data frame for just those rows where the &lt;code&gt;ID&lt;&#x2F;code&gt; is the same. We will then have a new list type column where each value is actually a data frame. Let&#x27;s check out what this looks like before we hop into the function.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;nest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we know how to nest our data, we need to calculate the correlations for each row (ID value). We will do this by combining &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&quot;&gt;&lt;code&gt;mutate()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Here &lt;code&gt;.x&lt;&#x2F;code&gt; references the data that is within each nested tibble. To learn more about &lt;code&gt;purrr&lt;&#x2F;code&gt; I recommend the &lt;a href=&quot;http:&#x2F;&#x2F;r4ds.had.co.nz&#x2F;iteration.html&quot;&gt;chapter&lt;&#x2F;a&gt; on iteration from &lt;em&gt;R For Data Science&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;After we have done our calculations we undo our nesting using &lt;a href=&quot;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&quot;&gt;&lt;code&gt;unnest()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; on the new column we created, and deselect the &lt;code&gt;data&lt;&#x2F;code&gt; column.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;nest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;correlation &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;data&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;cor.html&#x27;&gt;cor&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sulfate&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;nitrate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;unnest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;correlation&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;data&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can now place these above examples within a new function called &lt;code&gt;pollutant_cor()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;pollutant_cor&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;threshold&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;, 
                     col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;count.html&#x27;&gt;count&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;threshold&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; 
  
  &lt;span class=&#x27;kr&#x27;&gt;if&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;nrow&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;numeric.html&#x27;&gt;numeric&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;correlations&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&#x27;&gt;inner_join&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;ID&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;nest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;correlation &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;data&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;cor.html&#x27;&gt;cor&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sulfate&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;nitrate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;unnest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;correlation&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;correlations&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

  
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can now test our function against two different thresholds to see how it reacts.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;pollutant_cor&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;100&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;If we set the threshold to 100,000, we should expect a &lt;code&gt;numeric(0)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;pollutant_cor&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;100000&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;It all works!&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
