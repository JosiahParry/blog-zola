<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>Josiah Parry - R</title>
    <link rel="self" type="application/atom+xml" href="https://josiah.rs/categories/r/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://josiah.rs"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2025-11-16T00:00:00+00:00</updated>
    <id>https://josiah.rs/categories/r/atom.xml</id>
    <entry xml:lang="en">
        <title>Graph Neural Nets for Spatial Data Science</title>
        <published>2025-11-16T00:00:00+00:00</published>
        <updated>2025-11-16T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/gnn-for-sds/"/>
        <id>https://josiah.rs/posts/gnn-for-sds/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/gnn-for-sds/">&lt;p&gt;I‚Äôve been saying this for years and I‚Äôll say it again:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Spatial data is just a graph&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;I‚Äôve been diving &lt;em&gt;deep&lt;&#x2F;em&gt; into &lt;strong&gt;Graph Neural Networks&lt;&#x2F;strong&gt; (GNN) to
understand how we can use them for ‚ÄúGeoAI‚Äù and spatial machine learning.&lt;&#x2F;p&gt;
&lt;p&gt;This post is going to build the intuition for why Graph Neural Networks
are perfect for spatial data (non-raster).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;spatial-weights-matrices-are-graphs&quot;&gt;Spatial Weights Matrices are graphs&lt;&#x2F;h2&gt;
&lt;p&gt;A graph is defined as a set &lt;strong&gt;nodes&lt;&#x2F;strong&gt; connected by &lt;strong&gt;edges&lt;&#x2F;strong&gt;. Nodes can
be thought of as ‚Äúthings‚Äù or ‚Äúentities‚Äù and then the connections between
them are the edges. The nodes can be thought of as &lt;strong&gt;rows&lt;&#x2F;strong&gt; in a
dataset. Then the edges are an additional ‚Äúedge list‚Äù that informs us of
connectivity between them.&lt;&#x2F;p&gt;
&lt;details class=&quot;code-fold&quot;&gt;
&lt;summary&gt;Code&lt;&#x2F;summary&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;igraph&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;set.seed&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;g &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;sample_gnm&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;6&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;11&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;plot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;g&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;details&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;gnn-for-sds&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-2-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;When we do spatial statistics we need to create the concept of a
&lt;strong&gt;neighborhood&lt;&#x2F;strong&gt;. For example with polygons, we typically use
&lt;strong&gt;contiguity&lt;&#x2F;strong&gt; to define our neighborhood.&lt;&#x2F;p&gt;
&lt;details class=&quot;code-fold&quot;&gt;
&lt;summary&gt;Code&lt;&#x2F;summary&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sf&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;data&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;guerry&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;package&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;sfdep&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;plot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;guerry&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;geometry&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;details&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;gnn-for-sds&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-3-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;If we identify &lt;em&gt;neighborhoods&lt;&#x2F;em&gt; based on contiguity we then identify our
neighbors based on that which we use to create a &lt;strong&gt;spatial weights
matrix&lt;&#x2F;strong&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;spdep&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;nb &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;poly2nb&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;guerry&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;lw &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;nb2listw&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;nb&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;lw
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Characteristics of weights list object:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Neighbour list object:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Number of regions: 85 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Number of nonzero links: 420 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Percentage nonzero weights: 5.813149 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Average number of links: 4.941176 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Weights style: W 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Weights constants summary:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   n   nn S0      S1       S2
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;W 85 7225 85 37.2761 347.6683
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;The &lt;code&gt;listw&lt;&#x2F;code&gt; object from spdep is the representation of the spatial
weights matrix.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The spatial weights matrix is a &lt;strong&gt;sparse matrix&lt;&#x2F;strong&gt;. For every location in
our data set there is a row and a column‚Äî&lt;code&gt;n x n&lt;&#x2F;code&gt; matrix. A non-zero
value in a row indicates a neighbor. The connections between locations
(or the &lt;strong&gt;spatial weights matrix&lt;&#x2F;strong&gt; (SWM)) can be viewed as a network.&lt;&#x2F;p&gt;
&lt;details class=&quot;code-fold&quot;&gt;
&lt;summary&gt;Code&lt;&#x2F;summary&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;plot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;nb&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; guerry&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;geometry&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;details&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;gnn-for-sds&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-5-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;As you can see a spatial weight matrix &lt;strong&gt;is a graph&lt;&#x2F;strong&gt;!&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;To be exceptionally pedantic (as this whole post is) a SWM is a graph
&lt;em&gt;G&lt;&#x2F;em&gt;‚ÄÑ=‚ÄÑ(&lt;em&gt;V&lt;&#x2F;em&gt;,‚ÄÜ&lt;em&gt;E&lt;&#x2F;em&gt;) where each node, &lt;em&gt;v&lt;&#x2F;em&gt;&lt;sub&gt;&lt;em&gt;i&lt;&#x2F;em&gt;&lt;&#x2F;sub&gt;, is a location in a
set of nodes (&lt;em&gt;i&lt;&#x2F;em&gt;‚ÄÑ=‚ÄÑ1,‚ÄÜ...,‚ÄÜ&lt;em&gt;n&lt;&#x2F;em&gt;). The edges in the graph
&lt;em&gt;e&lt;&#x2F;em&gt;&lt;sub&gt;&lt;em&gt;i**j&lt;&#x2F;em&gt;&lt;&#x2F;sub&gt;‚ÄÑ=‚ÄÑ(&lt;em&gt;v&lt;&#x2F;em&gt;&lt;sub&gt;&lt;em&gt;i&lt;&#x2F;em&gt;&lt;&#x2F;sub&gt;,‚ÄÜ&lt;em&gt;v&lt;&#x2F;em&gt;&lt;sub&gt;&lt;em&gt;j&lt;&#x2F;em&gt;&lt;&#x2F;sub&gt;,‚ÄÜ&lt;em&gt;w&lt;&#x2F;em&gt;&lt;sub&gt;&lt;em&gt;i**j&lt;&#x2F;em&gt;&lt;&#x2F;sub&gt;)
are the spatial weights between neighbors.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Okay, moving on.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;spatial-lags-and-message-passing&quot;&gt;Spatial Lags and Message Passing&lt;&#x2F;h2&gt;
&lt;p&gt;The crux of spatial econometrics is the spatial lag. For all intents and
purposes, the spatial lag is ‚Äújust‚Äù an average of a variable &lt;em&gt;X&lt;&#x2F;em&gt; over a
neighborhood.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-note&quot;&gt;
&lt;p&gt;See my &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=abrQBSdTk7E&quot;&gt;YouTube video&lt;&#x2F;a&gt; on
this in more depth.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;details class=&quot;code-fold&quot;&gt;
&lt;summary&gt;Code&lt;&#x2F;summary&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dplyr&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sfdep&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;ggplot2&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;patchwork&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;df &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; guerry_nb &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mutate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;crime_lag&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_lag&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;crime_pers&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; nb&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; wt&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;obs &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;ggplot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;df&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;geom_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;aes&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fill&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; crime_pers&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;scale_fill_viridis_c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;theme_void&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;theme&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;legend.position&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;none&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;labs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;title&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Observed&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;lagged &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;ggplot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;df&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;geom_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;aes&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fill&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; crime_lag&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;scale_fill_viridis_c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;theme_void&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;theme&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;legend.position&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;none&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;labs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;title&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Spatial Lag&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;obs &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt; lagged
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;details&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;gnn-for-sds&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-6-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-important&quot;&gt;
&lt;h2 id=&quot;point-down-don-t-miss-this&quot;&gt;üëáüèΩ Don‚Äôt miss this&lt;&#x2F;h2&gt;
&lt;p&gt;üëâüèº The spatial lag is a way to &lt;strong&gt;aggregate information&lt;&#x2F;strong&gt; about a
location‚Äôs neighborhood. üëàüèº&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;GNNs are based on the concept of &lt;strong&gt;message passing&lt;&#x2F;strong&gt;. Message passing is
how we propagate information from a node‚Äôs neighbors (edge connections)
to the node itself.&lt;&#x2F;p&gt;
&lt;details class=&quot;code-fold&quot;&gt;
&lt;summary&gt;Code&lt;&#x2F;summary&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Create a simple 4-node network: central node with 3 neighbors
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;edges &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;matrix&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; node 2 -&amp;gt; central node
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;3&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; node 3 -&amp;gt; central node
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;4&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;   &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; node 4 -&amp;gt; central node
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;ncol&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;byrow&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;g &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;graph_from_edgelist&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;edges&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;directed&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Assign values to each node
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;node_values &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;span class=&quot;z-punctuation z-separator z-decimal z-r&quot;&gt;.&lt;&#x2F;span&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;span class=&quot;z-punctuation z-separator z-decimal z-r&quot;&gt;.&lt;&#x2F;span&gt;8&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;span class=&quot;z-punctuation z-separator z-decimal z-r&quot;&gt;.&lt;&#x2F;span&gt;5&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;span class=&quot;z-punctuation z-separator z-decimal z-r&quot;&gt;.&lt;&#x2F;span&gt;9&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Create layout: central node in middle, others in circle
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;layout &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;matrix&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;           &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; central node
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;-&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;          &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; node 2
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;-&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;-&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;         &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; node 3
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;            &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; node 4
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;ncol&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;byrow&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Plot
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;plot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;g&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;vertex.size&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;30&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;vertex.color&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;rgb&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;node_values&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;-&lt;&#x2F;span&gt; node_values&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;vertex.label&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;paste0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;4&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;vertex.label.cex&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;span class=&quot;z-punctuation z-separator z-decimal z-r&quot;&gt;.&lt;&#x2F;span&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;vertex.label.font&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;vertex.label.color&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;white&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;edge.width&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;edge.arrow.size&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;edge.color&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;gray50&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;layout&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; layout&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;details&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;gnn-for-sds&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-7-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In this graph, we have nodes x1 through x4. The nodes x2, x3, and x4 are
‚Äúpassing‚Äù their message to the focal node. These node values have to be
summarized in some way. This is typically called an &lt;strong&gt;aggregation
function&lt;&#x2F;strong&gt;. The most common one? The average!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-takeaway&quot;&gt;The takeaway&lt;&#x2F;h3&gt;
&lt;p&gt;The spatial lag operator &lt;strong&gt;is message passing&lt;&#x2F;strong&gt;! This means that most of
our spatial econometric models‚Äîspatial lag and spatial error models and
many others are actually utilizing graph message passing in some way.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;graph-convolution-networks&quot;&gt;Graph Convolution Networks&lt;&#x2F;h2&gt;
&lt;p&gt;The most common type of GNN is the &lt;strong&gt;Graph Convolution Network&lt;&#x2F;strong&gt; (GCN).&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;The term ‚ÄúConvolution‚Äù is often used for deep learning models that
perform image detection‚Äîtypically a &lt;strong&gt;Convolution Neural Network&lt;&#x2F;strong&gt;.
These apply a ‚Äúfilter‚Äù over each pixel in an image and typically take
the weighted sum (or average) of the neighboring pixels to summarize
nearby pixels.&lt;&#x2F;p&gt;
&lt;p&gt;This is literally the same thing! Except pixels have a fixed grid
whereas we‚Äôre generalizing message passing and spatial lags to &lt;em&gt;any&lt;&#x2F;em&gt;
network with a node and neighbors.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The GCN is defined from a famous paper &lt;a href=&quot;https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;1609.02907&quot;&gt;Semi-Supervised Classification
with Graph Convolutional Networks&lt;&#x2F;a&gt; as:&lt;&#x2F;p&gt;
&lt;p&gt;$$
\mathbf{H}^{(k)} = \sigma\left(\tilde{\mathbf{A}}\mathbf{H}^{(k-1)}\mathbf{W}^{(k)}\right)
$$&lt;&#x2F;p&gt;
&lt;p&gt;The single layer version of this can be written as:&lt;&#x2F;p&gt;
&lt;p&gt;$$
\mathbf{H} = \sigma\left(\tilde{\mathbf{A}} \mathbf{X} \mathbf{W}\right)
$$&lt;&#x2F;p&gt;
&lt;p&gt;This is actually a lot less scary once you think of everything as a
spatial lag and locations on a map. Let‚Äôs start with &lt;em&gt;AÃÉ&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-adjacency-matrix&quot;&gt;The adjacency matrix&lt;&#x2F;h3&gt;
&lt;p&gt;$$
\tilde{\mathbf{A}} = (\mathbf{D} + \mathbf{I})^{-\frac{1}{2}}(\mathbf{I} + \mathbf{A})(\mathbf{D} + \mathbf{I})^{-\frac{1}{2}}
$$&lt;&#x2F;p&gt;
&lt;p&gt;This equation is saying that we have an adjacency matrix &lt;em&gt;A&lt;&#x2F;em&gt; which is
‚Äúnormalized‚Äù (scaled by) the &lt;strong&gt;degree matrix&lt;&#x2F;strong&gt; &lt;em&gt;D&lt;&#x2F;em&gt;. The degree matrix
counts the number of neighbors per location.&lt;&#x2F;p&gt;
&lt;p&gt;The matrix D is equivalent to &lt;code&gt;spdep::card(nb)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The biggest difference here between spatial econometrics and the GCN is
that the adjacency matrix &lt;em&gt;A&lt;&#x2F;em&gt; must have ‚Äúself-loops.‚Äù The &lt;em&gt;I&lt;&#x2F;em&gt;‚ÄÖ+‚ÄÖ&lt;em&gt;A&lt;&#x2F;em&gt; is
equivalent to &lt;code&gt;spdep::include.self()&lt;&#x2F;code&gt;. This ensures that the
neighborhood includes the observed location.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;&lt;em&gt;I&lt;&#x2F;em&gt; is called the ‚Äúidentity matrix.‚Äù It‚Äôs literally just the diagonal of
a matrix set to 1.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The point of this matrix is to ensure that when we multiply values
together the scale is roughly maintained and that the contribution from
neighbors &lt;strong&gt;and&lt;&#x2F;strong&gt; the focal node (location) are roughly balanced.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-weights-matrix-w&quot;&gt;The weights matrix &lt;em&gt;W&lt;&#x2F;em&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;The strength of neural networks is their ability to learn
representations of our variables‚Äîtypically using a higher dimension
representation. For example, taking 3 variables and mapping them onto,
say, 3 ‚Äúhidden‚Äù dimension would create a total of 9 values of &lt;em&gt;W&lt;&#x2F;em&gt; that
would be learned on. These embeddings can capture more patterns than
might be possible from the values themselves.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;gnn-for-sds&#x2F;images&#x2F;paste-3.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-note&quot;&gt;
&lt;p&gt;The rows of &lt;em&gt;W&lt;&#x2F;em&gt; correspond to the input variables. The columns indicate
the ‚Äúhidden dimensions.‚Äù Multiplying by the &lt;em&gt;W&lt;&#x2F;em&gt; creates ‚Äúnode
embeddings.‚Äù The more hidden dimensions the more embedding variables
there are.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The matrix &lt;em&gt;W&lt;&#x2F;em&gt; is &lt;strong&gt;learnable&lt;&#x2F;strong&gt; which means that the network adjusts the
values to best predict the target variable &lt;em&gt;Y&lt;&#x2F;em&gt;. The &lt;em&gt;W&lt;&#x2F;em&gt; is akin to the
&lt;em&gt;Œ≤&lt;&#x2F;em&gt; coefficients of a regression model.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;single-layer-gcn-is-just-regression&quot;&gt;Single layer GCN is just regression&lt;&#x2F;h2&gt;
&lt;p&gt;In a regression we have a &lt;em&gt;Œ≤&lt;&#x2F;em&gt; for each variable in our model. If we have
3 variables in our &lt;em&gt;X&lt;&#x2F;em&gt; matrix (the predictor variables) and we specify
that our single layer model only have 1 hidden dimension then the &lt;em&gt;W&lt;&#x2F;em&gt;
only has 3 values‚Äîone per variable. This is essentially a learned
version of the &lt;em&gt;Œ≤&lt;&#x2F;em&gt;!&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;gnn-for-sds&#x2F;images&#x2F;paste-4.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In this example we only have 1 hidden dimension which means we only have
1 weight per variable‚Äîakin to the actual &lt;em&gt;Œ≤&lt;&#x2F;em&gt; of a linear regression.
Now, this is actually ignoring the message passing aspect of this. To be
a GCN we need to calculate the spatial lag of each X before we multiply
by the learned weights. The actual GCN looks like&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;gnn-for-sds&#x2F;images&#x2F;paste-5.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;For the spatial econometricians in the house‚Äîthis might look like a
spatially lagged X model without the original X matrix.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;See &lt;a href=&quot;https:&#x2F;&#x2F;r-spatial.org&#x2F;book&#x2F;17-Econometrics.html&quot;&gt;Spatial Data Science ch 17 on econometric
models&lt;&#x2F;a&gt; for a fairly
terse discussion on these models by Bivand and Pebesma.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Let‚Äôs first create a spatially lagged X model by hand:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Create neighborhood structure with self-loops
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;nb &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;include.self&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;guerry_nb&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;nb&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;lw &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; spdep&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;nb2listw&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;nb&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;style&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;W&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Prepare feature matrix
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;x &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; guerry &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  sf&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_drop_geometry&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;select&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;commerce&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; crime_pers&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; donations&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;scale&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; calculate spatial lags for each variable
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;sp_lags &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;lag.listw&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;lw&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; define y variable
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;y &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; guerry&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;instruction
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; fit slx model
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;slx_mod &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lm&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;y &lt;span class=&quot;z-keyword z-other z-r&quot;&gt;~&lt;&#x2F;span&gt; sp_lags&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;summary&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;slx_mod&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Call:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;lm(formula = y ~ sp_lags)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Residuals:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   Min     1Q Median     3Q    Max 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;-45.22 -11.60   0.38  11.55  35.09 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Coefficients:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;            Estimate Std. Error t value Pr(&amp;gt;|t|)    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;(Intercept) 43.64726    1.93599  22.545  &amp;lt; 2e-16 ***
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;sp_lags1    24.27125    2.92102   8.309 1.84e-12 ***
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;sp_lags2    -1.06314    3.23981  -0.328    0.744    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;sp_lags3     0.09644    3.84151   0.025    0.980    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;---
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Signif. codes:  0 &amp;#39;***&amp;#39; 0.001 &amp;#39;**&amp;#39; 0.01 &amp;#39;*&amp;#39; 0.05 &amp;#39;.&amp;#39; 0.1 &amp;#39; &amp;#39; 1
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Residual standard error: 17.75 on 81 degrees of freedom
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Multiple R-squared:  0.5086,    Adjusted R-squared:  0.4904 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;F-statistic: 27.95 on 3 and 81 DF,  p-value: 1.663e-12
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If we treat the regression coefficients as our &lt;em&gt;W&lt;&#x2F;em&gt; matrix in a GCN layer
we can get the &lt;em&gt;exact&lt;&#x2F;em&gt; same values from a GCN layer!&lt;&#x2F;p&gt;
&lt;p&gt;Here we‚Äôre using my
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;josiahparry&#x2F;torchgnn&quot;&gt;&lt;code&gt;{torchgnn}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; package to
create a &lt;code&gt;layer_gcn()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;&lt;code&gt;{torchgnn}&lt;&#x2F;code&gt; is not yet on CRAN. You can install it with
&lt;code&gt;pak::pak(&quot;josiahparry&#x2F;torchgnn&quot;)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;torch&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;torchgnn&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Create sparse adjacency matrix for GCN
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;adj &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;adj_from_edgelist&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;rep.int&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;seq_along&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;nb&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lengths&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;nb&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;unlist&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;nb&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;unlist&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;lw&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;weights&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; already handled by spdep
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;symmetric&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;FALSE&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;coalesce&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; convert X to a tensor for torch
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;X &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;torch_tensor&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; don&amp;#39;t modify the adjacency matrix
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;layer &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;layer_gcn&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;3&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;normalize&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;FALSE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; set the weights to the same as a the regression
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;with_no_grad&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  layer&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;weight&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;copy_&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;torch_tensor&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;matrix&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;coef&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;slx_mod&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;-&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;nrow&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;3&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; set the bias to the intercept
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;with_no_grad&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  layer&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;bias&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;copy_&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;torch_tensor&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;coef&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;slx_mod&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In the above code check we created a single GCN layer and manually set
the bias (equivalent to an intercept term) and the weights. Typically
these would be learned by a training loop. But for the sake of
education, we‚Äôre setting them to be the equivalent to our linear
regression.&lt;&#x2F;p&gt;
&lt;p&gt;Next we apply the layer to the &lt;em&gt;X&lt;&#x2F;em&gt; and &lt;em&gt;A&lt;&#x2F;em&gt; matrices to get our &lt;em&gt;YÃÇ&lt;&#x2F;em&gt;
predictions.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;tibble&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;tibble&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;gcn_preds&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;as.numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;layer&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;X&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; adj&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;slx_preds&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;unname&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;slx_mod&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;fitted.values&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 85 √ó 2
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   gcn_preds slx_preds
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;       &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1     47.9      47.9 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2     18.1      18.1 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3     64.9      64.9 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4     46.5      46.5 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5     52.0      52.0 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6     49.4      49.4 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7      6.78      6.78
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8     45.5      45.5 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9     10.9      10.9 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10     44.1      44.1 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 75 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;fuller-gcn-models&quot;&gt;Fuller GCN models&lt;&#x2F;h2&gt;
&lt;p&gt;In the above we showed that the GCN layer is literally just a fancy
regression model using the spatial lags of our input variables. However,
we assumed that there was not any &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Activation_function&quot;&gt;activation
function&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;For fuller examples we can fit a GCN with multiple hidden layers as well
as an additional activation or loss functions. These GCN models can
generalize well to classification or regression.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Broadcasting: Scalars or vectors</title>
        <published>2025-08-18T00:00:00+00:00</published>
        <updated>2025-08-18T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/broadcast/"/>
        <id>https://josiah.rs/posts/broadcast/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/broadcast/">&lt;p&gt;There‚Äôs a common pattern that we encounter when writing functions for R.
A single argument can often either be&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;a scalar&lt;&#x2F;li&gt;
&lt;li&gt;or a vector of the same length as another argument&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;When it‚Äôs a scalar, it makes sense to ‚Äúbroadcast‚Äù it to the same length
of another argument. Since R is vectorized we often want our functions
to be able to handle these scenarios.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-is-broadcasting&quot;&gt;What is broadcasting?&lt;&#x2F;h2&gt;
&lt;p&gt;Broadcasting definitely isn‚Äôt a new idea. It was first exposed to me
from &lt;a href=&quot;http:&#x2F;&#x2F;kylebarron.dev&#x2F;&quot;&gt;Kyle Barron‚Äôs&lt;&#x2F;a&gt; work in
&lt;a href=&quot;https:&#x2F;&#x2F;docs.rs&#x2F;geoarrow&#x2F;0.4.0-beta.4&#x2F;geoarrow&#x2F;algorithm&#x2F;broadcasting&#x2F;enum.BroadcastablePrimitive.html&quot;&gt;geoarrow-rs&lt;&#x2F;a&gt;.
It gave words to a pattern I have handled many times.&lt;&#x2F;p&gt;
&lt;p&gt;Broadcasting ensures that the ‚Äúshape‚Äù of two arrays are the same. We are
essentially stretching a scalar to the length of a longer array.&lt;&#x2F;p&gt;
&lt;p&gt;You can find broadcasting in many places:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;docs.julialang.org&#x2F;en&#x2F;v1&#x2F;manual&#x2F;arrays&#x2F;#Broadcasting&quot;&gt;Julia has array
broadcasting&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;numpy.org&#x2F;doc&#x2F;stable&#x2F;user&#x2F;basics.broadcasting.html&quot;&gt;NumPy has broadcasting
rules&lt;&#x2F;a&gt;
that solve this elegantly for array operations.&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;rray.r-lib.org&#x2F;reference&#x2F;rray_broadcast.html&quot;&gt;rray
package&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;my-use-case&quot;&gt;My use case&lt;&#x2F;h2&gt;
&lt;p&gt;In my work on the &lt;a href=&quot;https:&#x2F;&#x2F;developers.arcgis.com&#x2F;r-bridge&quot;&gt;R-ArcGIS
Bridge&lt;&#x2F;a&gt; we create many
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;r-lib&#x2F;httr2&#x2F;&quot;&gt;httr2&lt;&#x2F;a&gt; requests and send them in
parallel.&lt;&#x2F;p&gt;
&lt;p&gt;For ergonomic reasons, arguments should accept either a scalar OR a
vector of the same length. This is similar to R‚Äôs recycling&lt;&#x2F;p&gt;
&lt;p&gt;Here‚Äôs a function I‚Äôm working with:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;make_requests&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;con&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;xid&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;yid&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; what if xid is a scalar?
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; TODO we need to broadcast
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  n &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;length&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;xid&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; initialize empty list
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  all_reqs &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vector&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;list&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; n&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-loop z-for z-r&quot;&gt;for&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;i &lt;span class=&quot;z-keyword z-operator z-word z-r&quot;&gt;in&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;seq_len&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;n&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; create an httr2 request and store it in the list
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    req &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; httr2&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;request&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;url&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;      httr2&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_body_form&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;xid&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; xid&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;i&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;yid&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; yid&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;i&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    all_reqs&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;i&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; req
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; send all of the requests
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  all_resps &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; httr2&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_perform_parallel&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    all_reqs&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;max_active&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;3&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; process the requests
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  all_resps
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The problem occurs when &lt;code&gt;xid&lt;&#x2F;code&gt; is a scalar. This means that the loop
length with be &lt;code&gt;1&lt;&#x2F;code&gt; when insteaad it should be the length of &lt;code&gt;yid&lt;&#x2F;code&gt;.
Additionally, if &lt;code&gt;xid&lt;&#x2F;code&gt; is a scalar and i subset into it with &lt;code&gt;xid[i]&lt;&#x2F;code&gt;
and &lt;code&gt;i &amp;gt; 1&lt;&#x2F;code&gt; then the value will be NA. We &lt;strong&gt;don‚Äôt&lt;&#x2F;strong&gt; want that!&lt;&#x2F;p&gt;
&lt;p&gt;If &lt;code&gt;xid&lt;&#x2F;code&gt; was broadcasted to the length of &lt;code&gt;yid&lt;&#x2F;code&gt; first then we can be
sure that the lengths are the same.&lt;&#x2F;p&gt;
&lt;p&gt;Right now, implementing this flexibility means writing manual validation
and broadcasting logic in every single function. That‚Äôs tedious and
error-prone.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-solution&quot;&gt;A solution&lt;&#x2F;h2&gt;
&lt;p&gt;I think if there was a formalized &lt;code&gt;broadcast()&lt;&#x2F;code&gt; function that could make
this pattern more stable and reproducible without much overhead or
boilerplate for devs.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-roxygen z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&amp;#39;&lt;&#x2F;span&gt; Broadcast x to the same length as y
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-roxygen z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&amp;#39;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-roxygen z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&amp;#39;&lt;&#x2F;span&gt; Broadcasts the argument `x` to the same length as `y`.
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-roxygen z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&amp;#39;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-roxygen z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&amp;#39;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-other z-r&quot;&gt;@param&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt; a scalar atomic or an atomic of the same length as `y`
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-roxygen z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&amp;#39;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-other z-r&quot;&gt;@param&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;y&lt;&#x2F;span&gt; an atomic vector
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;broadcast&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;y&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_bare_atomic&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_bare_atomic&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;abort&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`x` and `y` must be atomic vectors&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;typeof&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;typeof&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;abort&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`x` and `y` must be the same type&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  len_y &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;length&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  len_x &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;length&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;len_x &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;==&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-r&quot;&gt;1&lt;span class=&quot;z-storage z-type z-numeric z-r&quot;&gt;L&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-flow z-return z-r&quot;&gt;return&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;rep&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; len_y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;len_x &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!=&lt;&#x2F;span&gt; len_y&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;abort&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`x` must be a scalar or the same length as `y`&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  x
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;how-it-works&quot;&gt;How it works&lt;&#x2F;h2&gt;
&lt;p&gt;It takes the first argument and casts it to the length of &lt;code&gt;y&lt;&#x2F;code&gt;. If &lt;code&gt;x&lt;&#x2F;code&gt; is
the same length as &lt;code&gt;y&lt;&#x2F;code&gt; then it returns it unchanged.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, it ensures that the two types of vectors are the same
classes.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Scalar broadcasting
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;broadcast&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;xyz&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-constant z-misc z-r&quot;&gt;letters&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt;  [1] &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; [13] &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; [25] &amp;quot;xyz&amp;quot; &amp;quot;xyz&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Same-length vectors pass through
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;broadcast&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;rep&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abc&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;26&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-constant z-misc z-r&quot;&gt;letters&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt;  [1] &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; [13] &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; [25] &amp;quot;abc&amp;quot; &amp;quot;abc&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Incompatible lengths error
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;broadcast&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;rep&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;xyz&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-constant z-misc z-r&quot;&gt;letters&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; Error in `broadcast()`:
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; ! `x` must be a scalar or the same length as `y`
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now the function becomes way cleaner:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;make_requests&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;con&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;xid&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;yid&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; broadcast arguments to same length
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  xid &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;broadcast&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;xid&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; yid&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  n &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;length&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;yid&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; now we can safely use yid length
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; initialize empty list
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  all_reqs &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vector&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;list&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; n&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-loop z-for z-r&quot;&gt;for&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;i &lt;span class=&quot;z-keyword z-operator z-word z-r&quot;&gt;in&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;seq_len&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;n&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; create an httr2 request and store it in the list
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    req &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; httr2&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;request&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;url&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;      httr2&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_body_form&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;xid&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; xid&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;i&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;yid&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; yid&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;i&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    all_reqs&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;i&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; req
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; send all of the requests
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  all_resps &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; httr2&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_perform_parallel&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    all_reqs&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;max_active&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;3&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; process the requests
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  all_resps
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;alert-tip&quot;&gt;
&lt;h2 id=&quot;performance-note&quot;&gt;Performance note&lt;&#x2F;h2&gt;
&lt;p&gt;For large vectors, &lt;code&gt;rep()&lt;&#x2F;code&gt; creates a new vector in memory.&lt;&#x2F;p&gt;
&lt;p&gt;A better approach would be able to create an ALTREP vector here that
just has a reference to the initial scalar value.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;what-s-next&quot;&gt;What‚Äôs next&lt;&#x2F;h2&gt;
&lt;p&gt;A production version might need to handle more cases like factor level
compatibility, date&#x2F;datetime broadcasting, and NA handling. But the core
pattern works.&lt;&#x2F;p&gt;
&lt;p&gt;I‚Äôve proposed this for rlang in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;r-lib&#x2F;rlang&#x2F;issues&#x2F;1819&quot;&gt;issue
#1819&lt;&#x2F;a&gt;. If you run into
this pattern too, give it a thumbs up!&lt;&#x2F;p&gt;
&lt;p&gt;R excels at making complex operations simple and expressive.
Broadcasting feels like a natural next step.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Apache Arrow, Rust, and cross-langauge data science</title>
        <published>2025-06-04T00:00:00+00:00</published>
        <updated>2025-06-04T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/cross-language-ds/"/>
        <id>https://josiah.rs/posts/cross-language-ds/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/cross-language-ds/">&lt;h2 id=&quot;tl-dr&quot;&gt;TL;DR&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;arrow.apache.org&#x2F;&quot;&gt;Apache Arrow&lt;&#x2F;a&gt; standardized memory layout
so that memory can be used in any language without (de)serialization.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.rust-lang.org&#x2F;&quot;&gt;Rust&lt;&#x2F;a&gt; is a great candidate for building
core algorithm &#x2F; tool implementations as it has robust &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;std&#x2F;ffi&#x2F;index.html&quot;&gt;foreign
function interface&lt;&#x2F;a&gt;
(&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Foreign_function_interface&quot;&gt;FFI&lt;&#x2F;a&gt;)
tooling and bindings tools like &lt;a href=&quot;https:&#x2F;&#x2F;extendr.github.io&#x2F;&quot;&gt;extendr&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;pyo3.rs&#x2F;&quot;&gt;PyO3&lt;&#x2F;a&gt;, and
&lt;a href=&quot;https:&#x2F;&#x2F;docs.rs&#x2F;jlrs&#x2F;latest&#x2F;jlrs&#x2F;&quot;&gt;jlrs&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Use Apache Arrow as inputs and outputs from the tool standardize the
API across languages.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;hr &#x2F;&gt;
&lt;h2 id=&quot;the-status-quo&quot;&gt;The Status Quo&lt;&#x2F;h2&gt;
&lt;p&gt;I would categorize the majority of scientific computing libraries as
either:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;tightly coupled&lt;&#x2F;li&gt;
&lt;li&gt;loosely coupled&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;tightly-coupled&quot;&gt;Tightly coupled&lt;&#x2F;h2&gt;
&lt;p&gt;Many of the most popular scientific computing libraries in R and Python
are developed in a tightly coupled manner.&lt;&#x2F;p&gt;
&lt;div class=&quot;columns&quot;&gt;
&lt;div class=&quot;column&quot;&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;cross-language-ds&#x2F;images&#x2F;rdatatable.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;column&quot;&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;cross-language-ds&#x2F;images&#x2F;numpy.svg&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Julia is a different beast because it is inherently fast and native
implementations are exceptionally performant.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;For example &lt;a href=&quot;https:&#x2F;&#x2F;rdatatable.gitlab.io&#x2F;data.table&#x2F;&quot;&gt;&lt;code&gt;{data.table}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
is one of the fastest data frame libraries in the world‚Äîand for a while
was &lt;em&gt;the&lt;&#x2F;em&gt; fastest. It is developed in C directly with R‚Äôs C API.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;numpy.org&#x2F;&quot;&gt;NumPy&lt;&#x2F;a&gt; is probably the most numerical computing
library in the world. It is written directly in C with Cython and is
intended for use directly with Python.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;pros&quot;&gt;Pros&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;Highly efficient&lt;&#x2F;li&gt;
&lt;li&gt;Ergonomic APIs for the language&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;cons&quot;&gt;Cons&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;Innovation and development siloed to the language of implementation&lt;&#x2F;li&gt;
&lt;li&gt;Contributor pool shrinks to the intersection of C developers with
knowledge of the language-specific C API&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;loosely-coupled&quot;&gt;Loosely coupled&lt;&#x2F;h2&gt;
&lt;p&gt;Loose coupling is another common approach to scientific computing and is
pervasive in the geospatial ecosystem.&lt;&#x2F;p&gt;
&lt;p&gt;Core libraries such as &lt;a href=&quot;https:&#x2F;&#x2F;libgeos.org&#x2F;&quot;&gt;GEOS&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;gdal.org&#x2F;en&#x2F;stable&#x2F;&quot;&gt;GDAL&lt;&#x2F;a&gt;, and
&lt;a href=&quot;https:&#x2F;&#x2F;proj.org&#x2F;en&#x2F;stable&#x2F;&quot;&gt;PROJ&lt;&#x2F;a&gt; are written in C&#x2F;++ with bindings to
them in R, Python, Julia, and others.&lt;&#x2F;p&gt;
&lt;figure&gt;
&lt;a href=&quot;https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;2503.16686&quot;&gt;&lt;img
src=&quot;images&#x2F;sdsl.png&quot; &#x2F;&gt;&lt;&#x2F;a&gt;
&lt;figcaption&gt;Pebesma, et al.¬†2025&lt;&#x2F;figcaption&gt;
&lt;&#x2F;figure&gt;
&lt;p&gt;There are many packages that have bindings to these libraries. However,
due to the lack of standardized interface, the APIs that are developed
may not work with each other even if they‚Äôre implemented in the same
language.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;pros-1&quot;&gt;Pros&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;Innovations and development is not siloed&lt;&#x2F;li&gt;
&lt;li&gt;Contributions to the core library can be propagated to the client
bindings&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;cons-1&quot;&gt;Cons&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;Little &#x2F; no standardization of data format leads to &lt;em&gt;tons&lt;&#x2F;em&gt; of very
different and incompatible libraries&lt;&#x2F;li&gt;
&lt;li&gt;Using output from one library in another requires intermediate
representation&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;using-rust-for-a-core-library&quot;&gt;Using Rust for a core library&lt;&#x2F;h2&gt;
&lt;p&gt;It is not my intention to belabor the point of ‚Äúwhy Rust.‚Äù But I will
list out a few bullets for why I believe Rust is the best candidate for
core implementations.&lt;&#x2F;p&gt;
&lt;table&gt;
&lt;colgroup&gt;
&lt;col style=&quot;width: 33%&quot; &#x2F;&gt;
&lt;col style=&quot;width: 66%&quot; &#x2F;&gt;
&lt;&#x2F;colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Pro&lt;&#x2F;th&gt;
&lt;th&gt;Me belaboring the point&lt;&#x2F;th&gt;
&lt;&#x2F;tr&gt;
&lt;&#x2F;thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Rust is (fairly) easy to pick up.&lt;&#x2F;td&gt;
&lt;td&gt;I‚Äôve tried and failed many times to learn C++. I‚Äôve tried to learn
Java. I‚Äôve tried to learn Go. Nothing has the guide rails that Rust
does.&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;Dependency free&lt;&#x2F;td&gt;
&lt;td&gt;Rust crates are compiled into a single shared library which has no
dependencies to other libraries. More often than not there is also no
system dependency requirement either.&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;Stupid fast by default üöÄ&lt;&#x2F;td&gt;
&lt;td&gt;The most naive implementations often out perform even advanced
implementations in R or Python (and sometimes even Julia)&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;Easy parallelization with &lt;a
href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rayon-rs&#x2F;rayon&quot;&gt;&lt;code&gt;rayon&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;td&gt;
&lt;td&gt;&lt;code&gt;rayon&lt;&#x2F;code&gt; allows you to parallelize your code with next to
no effort. For example changing &lt;code&gt;.iter()&lt;&#x2F;code&gt; ‚û°Ô∏è
&lt;code&gt;.par_iter()&lt;&#x2F;code&gt; is all you need.&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;Cross-platform support.&lt;&#x2F;td&gt;
&lt;td&gt;Rust libraries can support Windows, Mac, x86 and Arm, Linux, and
WASM, all with no modification of the core library. That‚Äôs HUGE!&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;
&lt;&#x2F;table&gt;
&lt;p&gt;Creating a Rust core would still be considered a ‚Äúloose coupling.‚Äù
Though, you do at least get the above benefits of using Rust. We can
improve this experience a bit more by incorporating Apache Arrow into
the picture.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;apache-arrow&quot;&gt;Apache Arrow&lt;&#x2F;h2&gt;
&lt;p&gt;Apache Arrow is a &lt;strong&gt;specification&lt;&#x2F;strong&gt; of what data should look like &lt;em&gt;in
memory&lt;&#x2F;em&gt; (not stored as a file). Additionally, Apache Arrow &lt;strong&gt;is not&lt;&#x2F;strong&gt;
the R package &lt;code&gt;{arrow}&lt;&#x2F;code&gt; and it is also not pyarrow. Those package are
&lt;em&gt;implementations&lt;&#x2F;em&gt; of Arrow with additional goodies.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-note&quot;&gt;
&lt;p&gt;I really recommend reading Danielle Navarro‚Äôs &lt;a href=&quot;https:&#x2F;&#x2F;blog.djnavarro.net&#x2F;posts&#x2F;2021-11-19_starting-apache-arrow-in-r&#x2F;#fiiiiiine-ill-keep-reading-tell-me-what-arrow-is&quot;&gt;blog post on Apache
Arrow&lt;&#x2F;a&gt;
for a very human introduction to the topic.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;the-problem&quot;&gt;The Problem&lt;&#x2F;h3&gt;
&lt;p&gt;In this status-quo of cross-language tooling, we have this issue where
data in R is represented differently than data is represented in Python,
which is represented differently in Rust or Julia‚Äîand so on.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;cross-language-ds&#x2F;images&#x2F;paste-7.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This process of copying data and converting is &lt;em&gt;expensive&lt;&#x2F;em&gt; and time
consuming. The canonical example is that of a database.&lt;&#x2F;p&gt;
&lt;p&gt;We typically work with tabular data that looks like so&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;cross-language-ds&#x2F;images&#x2F;paste-9.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;However, these databases typically represent data in a row-oriented
manner. Where each row is stored in memory followed by the next row etc.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;columnar-data&quot;&gt;Columnar data&lt;&#x2F;h3&gt;
&lt;p&gt;Instead, Apache Arrow is a columnar data format. Instead of each row
being represented in memory, we have each column. This is a huge
enhancement particularly for analytical processes where we are working
with &lt;em&gt;columns&lt;&#x2F;em&gt; of data instead of _rows.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;cross-language-ds&#x2F;images&#x2F;paste-13.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The above shows the difference between these.&lt;&#x2F;p&gt;
&lt;p&gt;Apache Arrow is a standized way of saying what data should look like in
memory. So instead of copying and converting between each tool, we can
use the same exact arrow data set by each tool .&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;cross-language-ds&#x2F;images&#x2F;paste-8.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;arrow-and-cross-langauge-tooling&quot;&gt;Arrow and cross-langauge tooling&lt;&#x2F;h2&gt;
&lt;p&gt;By adopting Apache Arrow as a standard memory format, we can have data
science workflows that look something like this.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;cross-language-ds&#x2F;images&#x2F;paste-4.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;At step 1, we may call a library that uses Rust under the hood. But when
we send data to it, it uses Apache Arrow, and it also gives us back
Arrow. Then in the next step, we use our Arrow data to call out to a C++
library which &lt;em&gt;also&lt;&#x2F;em&gt; accepts and returns Arrow.&lt;&#x2F;p&gt;
&lt;p&gt;Doing this will eliminate the overhead of copying and converting data to
each tool‚Äôs desired format. This also helps us move towards a
standardized API that shouldn‚Äôt be too different between language
binding. Also, by using the same data format, even if there are multiple
bindings to the same underlying library, if they all accept Arrow, there
is no cost incurred by sending data to them.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-real-example&quot;&gt;A real example&lt;&#x2F;h2&gt;
&lt;p&gt;A real world example of this is the
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;anime&quot;&gt;ANIME&lt;&#x2F;a&gt; algorithm that I developed
along with &lt;a href=&quot;https:&#x2F;&#x2F;www.robinlovelace.net&#x2F;&quot;&gt;Dr.¬†Robin Lovelace&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Approximate Network Integration, Matching, and Enrichment (ANIME) is a
partial line matching algorithm that is written in Rust with bindings to
it in both R and Python‚Äîno Julia bindings, so if you‚Äôre interested in
building them, please help!&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;cross-language-ds&#x2F;images&#x2F;paste-16.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The ANIME crate is designed to work &lt;a href=&quot;https:&#x2F;&#x2F;geoarrow.org&#x2F;&quot;&gt;GeoArrow&lt;&#x2F;a&gt;
data.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;repo-structure&quot;&gt;Repo structure&lt;&#x2F;h3&gt;
&lt;p&gt;I use a monorepo structure to accomplish this where the core algorithm
is implemented in &lt;code&gt;&#x2F;rust&lt;&#x2F;code&gt; and the R bindings in &lt;code&gt;r&#x2F;&lt;&#x2F;code&gt; and the python
bindings in &lt;code&gt;&#x2F;python&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚îú‚îÄ‚îÄ rust&#x2F;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚îÇ   ‚îî‚îÄ‚îÄ Cargo.toml
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚îú‚îÄ‚îÄ r&#x2F;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚îÇ   ‚îî‚îÄ‚îÄ src&#x2F;rust&#x2F;Cargo.toml
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚îî‚îÄ‚îÄ py&#x2F;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ‚îî‚îÄ‚îÄ Cargo.toml
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The result is bindings with a very similar API and &lt;em&gt;identical&lt;&#x2F;em&gt; results:&lt;&#x2F;p&gt;
&lt;div&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;arrow-ffi-helpers&quot;&gt;Arrow FFI helpers&lt;&#x2F;h2&gt;
&lt;p&gt;There still exists a challenge of taking Arrow from R, Python, or Julia
and getting it across the language barrier.&lt;&#x2F;p&gt;
&lt;p&gt;To do so from R with extendr is
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;arrow-extendr&quot;&gt;&lt;code&gt;arrow-extendr&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. And
from Python is &lt;a href=&quot;https:&#x2F;&#x2F;kylebarron.dev&#x2F;arro3&#x2F;latest&#x2F;&quot;&gt;arro3&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-quick-caveat&quot;&gt;A quick caveat&lt;&#x2F;h2&gt;
&lt;p&gt;ANIME is not a perfectly fleshed out example. At present, the core rust
library does not &lt;em&gt;return&lt;&#x2F;em&gt; Arrow but &lt;em&gt;it is&lt;&#x2F;em&gt; designed to work with the
geoarrow-rust library. The current bindings are a loose-ish coupling
approach where on the extendr and PyO3 side the results are processed
into a data.frame and Arrow Table respectively.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Call to action&lt;&#x2F;strong&gt; if you‚Äôre interested in contributing Julia bindings
or improving the Python bindings (and maybe publishing them), please do
make a PR or an issue.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>https with `{plumber}` using Caddy</title>
        <published>2025-05-12T00:00:00+00:00</published>
        <updated>2025-05-12T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/plumber-caddy-https/"/>
        <id>https://josiah.rs/posts/plumber-caddy-https/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/plumber-caddy-https/">&lt;p&gt;Say you have a plumber API and you need to serve it over https. You can
do this by spinning up a Docker container in something like
&lt;a href=&quot;https:&#x2F;&#x2F;digitalocean.com&#x2F;&quot;&gt;DigitalOcean&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;render.com&quot;&gt;Render&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;heroku.com&quot;&gt;Heroku&lt;&#x2F;a&gt;, or &lt;a href=&quot;https:&#x2F;&#x2F;aws.amazon.com&#x2F;ecs&quot;&gt;AWS ECS&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;If you have you own server, you may want to use that instead. The most
common way to do this is by using a &lt;a href=&quot;https:&#x2F;&#x2F;www.cloudflare.com&#x2F;learning&#x2F;cdn&#x2F;glossary&#x2F;reverse-proxy&#x2F;&quot;&gt;&lt;strong&gt;reverse
proxy&lt;&#x2F;strong&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;caddyserver.com&#x2F;&quot;&gt;Caddy&lt;&#x2F;a&gt; is the simplest reverse proxy I am
aware of.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-plumber-api&quot;&gt;The Plumber API&lt;&#x2F;h2&gt;
&lt;p&gt;Below we define a simple plumber API. Save this file to &lt;code&gt;plumber.R&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;plumber&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;pr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;pr_get&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&#x2F;echo&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;msg&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;msg&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;paste0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;The message is: &amp;#39;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; msg&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&amp;#39;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;pr_get&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&#x2F;sum&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;a&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;b&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;as.numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;a&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;as.numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;b&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;pr_run&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;port&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;8888&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;serving-with-https&quot;&gt;Serving with https&lt;&#x2F;h2&gt;
&lt;p&gt;Reverse proxies are typically the most common way of adding https to a
site. Many organization use &lt;a href=&quot;https:&#x2F;&#x2F;nginx.org&#x2F;&quot;&gt;nginx&lt;&#x2F;a&gt;. Though for
simplicity I recommend Caddy.&lt;&#x2F;p&gt;
&lt;p&gt;Caddy automatically implements https by default.&lt;&#x2F;p&gt;
&lt;p&gt;The below &lt;code&gt;Caddyfile&lt;&#x2F;code&gt; will serve the plumber API over https. It takes
any requests to &lt;code&gt;localhost&lt;&#x2F;code&gt; and passes the request to the plumber API on
port &lt;code&gt;8888&lt;&#x2F;code&gt;, captures the response and sends it back to the client.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-tip&quot;&gt;
&lt;p&gt;The https protocol requires binding to port 443.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Save this as &lt;code&gt;Caddyfile&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;caddy&quot; class=&quot;language-caddy z-code&quot;&gt;&lt;code class=&quot;language-caddy&quot; data-lang=&quot;caddy&quot;&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# serve the plumber API over HTTPS
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;localhost:443 {
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    reverse_proxy localhost:8888
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;running-the-api-proxy&quot;&gt;Running the API &amp;amp; proxy&lt;&#x2F;h2&gt;
&lt;p&gt;To serve the plumber API via Caddy you need to start both processes.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;shell&quot; class=&quot;language-shell z-code&quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;(R -f plumber.R) &amp;amp; caddy run
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will run the plumber API in the background and then the caddy
process.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;generalizing&quot;&gt;Generalizing&lt;&#x2F;h2&gt;
&lt;p&gt;Note that these are instructions specifically for using Caddy. However
this point genealizes to all reverse proxies. They likely require more
boiler plate, but will work just as well.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.andrewheiss.com&#x2F;&quot;&gt;Andrew Heiss&lt;&#x2F;a&gt; has a really great &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;andrewheiss&#x2F;docker-plumber-caddy&quot;&gt;demo
repository&lt;&#x2F;a&gt; that is
a much more advanced version of this that uses
&lt;a href=&quot;https:&#x2F;&#x2F;www.docker.com&#x2F;&quot;&gt;Docker&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;docs.docker.com&#x2F;compose&#x2F;&quot;&gt;Docker
Compose&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Use &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;valve&quot;&gt;Valve&lt;&#x2F;a&gt; to scale your plumber
API and apply the same principles.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Building local packages for WebR</title>
        <published>2025-04-30T00:00:00+00:00</published>
        <updated>2025-04-30T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/building-for-webr/"/>
        <id>https://josiah.rs/posts/building-for-webr/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/building-for-webr/">&lt;p&gt;We‚Äôve recently &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;extendr&#x2F;rextendr&#x2F;pull&#x2F;431&quot;&gt;added WebR
support&lt;&#x2F;a&gt; for
&lt;a href=&quot;https:&#x2F;&#x2F;extendr.github.io&#x2F;&quot;&gt;extendr&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-tip&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;docs.r-wasm.org&#x2F;webr&#x2F;latest&#x2F;&quot;&gt;WebR&lt;&#x2F;a&gt; is a distribution of the R
programming language that runs natively in
&lt;a href=&quot;https:&#x2F;&#x2F;webassembly.org&#x2F;&quot;&gt;WebAssembly&lt;&#x2F;a&gt;. WebAssembly is binary format
that runs directly in the browser.&lt;&#x2F;p&gt;
&lt;p&gt;Using WebR means that R can be used directly by the browser &#x2F;
&lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&quot;&gt;JavaScript&lt;&#x2F;a&gt;
without a backend server running R for you.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Typically, folks rely on &lt;a href=&quot;https:&#x2F;&#x2F;r-universe.dev&#x2F;&quot;&gt;R-universe&lt;&#x2F;a&gt; to build
their packages for WebR. However, compiled packages require a bit more
work. Figuring out how to build a package for WebR locally was
surprsingly confusing and also very straightfoward.&lt;&#x2F;p&gt;
&lt;p&gt;I‚Äôve releaned how to do this a few times now. Here is how it is done:&lt;&#x2F;p&gt;
&lt;h2 id=&quot;how-to-build-for-webr&quot;&gt;How to build for WebR&lt;&#x2F;h2&gt;
&lt;p&gt;The easiest way to build a local package for WebR is using the Docker
image.&lt;&#x2F;p&gt;
&lt;p&gt;To do so, cd into your R package you want to build. Then spin up the
Docker image and then enter R from inside of the container.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; class=&quot;language-bash z-code&quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;z-source z-shell z-bash&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-shell&quot;&gt;&lt;span class=&quot;z-variable z-function z-shell&quot;&gt;docker&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-shell&quot;&gt; run&lt;span class=&quot;z-variable z-parameter z-option z-shell&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-parameter z-shell&quot;&gt; -&lt;&#x2F;span&gt;it&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-option z-shell&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-parameter z-shell&quot;&gt; --&lt;&#x2F;span&gt;rm&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-option z-shell&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-parameter z-shell&quot;&gt; -&lt;&#x2F;span&gt;v&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-expansion z-parameter z-shell&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-variable z-shell&quot;&gt;$&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-expansion z-parameter z-begin z-shell&quot;&gt;{&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-expansion z-parameter z-shell&quot;&gt;&lt;span class=&quot;z-variable z-other z-readwrite z-shell&quot;&gt;PWD&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-expansion z-parameter z-shell&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-expansion z-parameter z-end z-shell&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&#x2F;output:&#x2F;output&lt;span class=&quot;z-variable z-parameter z-option z-shell&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-parameter z-shell&quot;&gt; -&lt;&#x2F;span&gt;w&lt;&#x2F;span&gt; &#x2F;output ghcr.io&#x2F;r-wasm&#x2F;webr:main&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-shell z-bash&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-shell&quot;&gt;&lt;span class=&quot;z-variable z-function z-shell&quot;&gt;R&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then from R inside of the container, run &lt;code&gt;rwasm::build(&quot;.&quot;)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;That‚Äôs it!&lt;&#x2F;p&gt;
&lt;p&gt;Thanks to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;r-wasm&#x2F;rwasm&#x2F;issues&#x2F;50#issuecomment-2827097396&quot;&gt;George
Stagg&lt;&#x2F;a&gt;
for helping with this!&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Create and edit TOML in R with {tomledit}</title>
        <published>2025-04-10T00:00:00+00:00</published>
        <updated>2025-04-10T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/tomledit/"/>
        <id>https://josiah.rs/posts/tomledit/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/tomledit/">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;extendr.github.io&#x2F;tomledit&#x2F;&quot;&gt;&lt;code&gt;{tomledit}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; v0.1.1 has found its
way onto
&lt;a href=&quot;https:&#x2F;&#x2F;cran.r-project.org&#x2F;web&#x2F;packages&#x2F;tomledit&#x2F;index.html&quot;&gt;CRAN&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;{tomledit}&lt;&#x2F;code&gt; is a package for &lt;em&gt;creating&lt;&#x2F;em&gt; and &lt;em&gt;editing&lt;&#x2F;em&gt; TOML files from R
with support for reading as well.&lt;&#x2F;p&gt;
&lt;p&gt;The most basic use of &lt;code&gt;tomledit&lt;&#x2F;code&gt; is via &lt;code&gt;toml()&lt;&#x2F;code&gt;. &lt;code&gt;toml()&lt;&#x2F;code&gt; creates a
&lt;code&gt;Toml&lt;&#x2F;code&gt; object from named arguments passed to &lt;code&gt;...&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;tomledit&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;toml&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;person&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;age&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-r&quot;&gt;30&lt;span class=&quot;z-storage z-type z-numeric z-r&quot;&gt;L&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;name&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Wilma&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;Toml&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[person]
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;age = 30
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;name = &amp;quot;Wilma&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;v0-1-1-features&quot;&gt;v0.1.1 Features&lt;&#x2F;h2&gt;
&lt;p&gt;This newest release supports the use of arrays with inline tables. This
feature comes as a request from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dpastoor&quot;&gt;@dpastoor&lt;&#x2F;a&gt;
to support the experimental &lt;code&gt;rproject.toml&lt;&#x2F;code&gt; file for
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;A2-ai&#x2F;rv&quot;&gt;&lt;code&gt;rv&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;I‚Äôm bullish on &lt;code&gt;rv&lt;&#x2F;code&gt; as a new alternative to &lt;code&gt;{renv}&lt;&#x2F;code&gt;. I think it will be
a great addition to the R community.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This new feature allows us to have a list of unnamed lists inside of our
TOML.&lt;&#x2F;p&gt;
&lt;p&gt;Below we create an item called &lt;code&gt;repositories&lt;&#x2F;code&gt; which is an array of
inline tables containing the alias and url to a CRAN-like repository.&lt;&#x2F;p&gt;
&lt;p&gt;Similarly, the &lt;code&gt;dependencies&lt;&#x2F;code&gt; item is an array of &lt;em&gt;both&lt;&#x2F;em&gt; inline-tables
and strings. This new feature adds more flexibility to the type of TOML
that we can create.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;r_proj_toml &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;name&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;upgrade&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;r_version&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;4.4&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;repositories&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;alias&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;gh-pkg-mirror&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;url&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;https:&#x2F;&#x2F;a2-ai.github.io&#x2F;gh-pkg-mirror&#x2F;2024-02-22&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;alias&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;RSPM&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;url&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;https:&#x2F;&#x2F;packagemanager.posit.co&#x2F;cran&#x2F;2024-02-22&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;alias&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;new-mirror&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;url&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;https:&#x2F;&#x2F;a2-ai.github.io&#x2F;gh-pkg-mirror&#x2F;2024-12-04&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;alias&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;new-rspm&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;url&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;https:&#x2F;&#x2F;packagemanager.posit.co&#x2F;cran&#x2F;2024-12-04&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;dependencies&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;name&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;pmplots&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;repository&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;new-mirror&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;pmtables&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;bbr&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;name&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;ggplot2&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;repository&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;new-rspm&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;as_toml&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;project&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; r_proj_toml&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;Toml&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[project]
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;name = &amp;quot;upgrade&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;r_version = &amp;quot;4.4&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;repositories = [
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    { alias = &amp;quot;gh-pkg-mirror&amp;quot;, url = &amp;quot;https:&#x2F;&#x2F;a2-ai.github.io&#x2F;gh-pkg-mirror&#x2F;2024-02-22&amp;quot; },
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    { alias = &amp;quot;RSPM&amp;quot;, url = &amp;quot;https:&#x2F;&#x2F;packagemanager.posit.co&#x2F;cran&#x2F;2024-02-22&amp;quot; },
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    { alias = &amp;quot;new-mirror&amp;quot;, url = &amp;quot;https:&#x2F;&#x2F;a2-ai.github.io&#x2F;gh-pkg-mirror&#x2F;2024-12-04&amp;quot; },
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    { alias = &amp;quot;new-rspm&amp;quot;, url = &amp;quot;https:&#x2F;&#x2F;packagemanager.posit.co&#x2F;cran&#x2F;2024-12-04&amp;quot; }
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;dependencies = [
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    { name = &amp;quot;pmplots&amp;quot;, repository = &amp;quot;new-mirror&amp;quot; },
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    &amp;quot;pmtables&amp;quot;,
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    &amp;quot;bbr&amp;quot;,
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    { name = &amp;quot;ggplot2&amp;quot;, repository = &amp;quot;new-rspm&amp;quot; }
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>üéÑdvent Day 1: Rust and R solutions</title>
        <published>2024-12-01T00:00:00+00:00</published>
        <updated>2024-12-01T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/advent-day-1/"/>
        <id>https://josiah.rs/posts/advent-day-1/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/advent-day-1/">&lt;h2 id=&quot;tl-dr&quot;&gt;TL;DR&lt;&#x2F;h2&gt;
&lt;p&gt;I give you the solutions to Day 1 of Advent of Code in R, Rust, and Rust
in R for part 2 using
&lt;a href=&quot;https:&#x2F;&#x2F;extendr.github.io&#x2F;user-guide&#x2F;complete-example.html&quot;&gt;&lt;code&gt;{extendr}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;I tend to always do just the first day of the advent of code. It is not
my cup of tea. I don‚Äôt enjoy word problems, or sudoku, or the like. But
I do like it when people learn. I find many people use this as a time to
learn a new language.&lt;&#x2F;p&gt;
&lt;p&gt;This morning I did the &lt;a href=&quot;https:&#x2F;&#x2F;adventofcode.com&#x2F;2024&#x2F;day&#x2F;1&quot;&gt;Advent of Code Day
1&lt;&#x2F;a&gt; in both R and Rust. I‚Äôll discuss
my approaches to the challenges.&lt;&#x2F;p&gt;
&lt;div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Important&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;If you care a lot about the Advent of Code and want to do it yourself,
do not read any further. I am giving away the answers.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;part-1&quot;&gt;Part 1&lt;&#x2F;h2&gt;
&lt;p&gt;The objective of part one is to calculate the distance between column 1
and column 2 in acending order. Note that the distance is in
&lt;strong&gt;absolute&lt;&#x2F;strong&gt; values. This is not mentioned but I figured it out after my
first submission was wrong.&lt;&#x2F;p&gt;
&lt;p&gt;The approach:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;read input&lt;&#x2F;li&gt;
&lt;li&gt;sort each column independently&lt;&#x2F;li&gt;
&lt;li&gt;calculate the different from column 2 and column 1&lt;&#x2F;li&gt;
&lt;li&gt;calculate the absolute value&lt;&#x2F;li&gt;
&lt;li&gt;sum it all up&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;r&quot;&gt;R&lt;&#x2F;h3&gt;
&lt;p&gt;This was a one liner:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sum&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;abs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;do.call&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;`-`&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;read.table&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;day1.txt&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; sort&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 2057374
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Let‚Äôs try rewriting it using a pipe so it can be a bit easier to
process:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;read.table&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;day1.txt&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sort&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;do.call&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;`-`&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;args&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; _&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;abs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sum&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 2057374
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;There are two things here that may be novel to you. The first is that we
can use &lt;code&gt;lapply()&lt;&#x2F;code&gt; with a &lt;code&gt;data.frame&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;To quote myself:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;‚ÄúData frames are actually just lists masquerading as rectangles.‚Äù&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Source: &lt;a href=&quot;https:&#x2F;&#x2F;josiahparry.com&#x2F;posts&#x2F;2019-12-14-spss-haven&quot;&gt;Finding and SPSS
{haven}&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This returns a list where each element is the sorted input vector.&lt;&#x2F;p&gt;
&lt;p&gt;Next, we can compute the different between the two columns by using
&lt;code&gt;do.call()&lt;&#x2F;code&gt; with the function being &lt;code&gt;-&lt;&#x2F;code&gt;. &lt;code&gt;do.call()&lt;&#x2F;code&gt; takes a list of
arguments and splices them into the function call.&lt;&#x2F;p&gt;
&lt;p&gt;Since our funciton, &lt;code&gt;-&lt;&#x2F;code&gt;, has two arguments it works perfectly. Then we
wrap the results in &lt;code&gt;sum(abs())&lt;&#x2F;code&gt; and voila.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;rust&quot;&gt;Rust&lt;&#x2F;h3&gt;
&lt;p&gt;The hardest part of the rust solution is reading the file to be
completely honest. I‚Äôm still terrible with using readers in Rust so I
used ChatGPTs help. I‚Äôm not going to lie about it.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;reading-the-input&quot;&gt;Reading the input&lt;&#x2F;h4&gt;
&lt;p&gt;The first thing to note is that we are returning
&lt;code&gt;Result&amp;lt;(Vec&amp;lt;i32&amp;gt;, Vec&amp;lt;i32&amp;gt;), Box&amp;lt;dyn Error&amp;gt;&amp;gt;&lt;&#x2F;code&gt; from the function. We
return a &lt;code&gt;Result&amp;lt;&amp;gt;&lt;&#x2F;code&gt; because there are multiple places where the function
can error. Using a &lt;code&gt;Result&amp;lt;&amp;gt;&lt;&#x2F;code&gt; gives us the ability to unwrap anything
inside of the body of the function that is in a &lt;code&gt;Result&amp;lt;&amp;gt;&lt;&#x2F;code&gt; itself. If
there is an error, it will be returned‚Äîthus, ‚Äúgracefully‚Äù handling the
errors.&lt;&#x2F;p&gt;
&lt;p&gt;Typically, if you‚Äôre a Rust hardo, you will define your own custom
&lt;code&gt;Error&lt;&#x2F;code&gt; type. That is too much work for me‚Äîand I‚Äôm not good at knowing
all of the types of errors that I may want. Instead we use
&lt;code&gt;Box&amp;lt;dyn Error&amp;gt;&lt;&#x2F;code&gt;. &lt;code&gt;Box&amp;lt;dyn Error&amp;gt;&lt;&#x2F;code&gt; is a fancy way of saying we can
accept anything that implements the &lt;code&gt;Error&lt;&#x2F;code&gt; trait.&lt;&#x2F;p&gt;
&lt;p&gt;Next it is important to use a &lt;code&gt;BufReader&lt;&#x2F;code&gt; which allows us to read the
file line by line. &lt;em&gt;Always&lt;&#x2F;em&gt; use a &lt;code&gt;BufReader&lt;&#x2F;code&gt; when possible. It will
make your code so much faster.&lt;&#x2F;p&gt;
&lt;p&gt;Next, we are going to instantiate two vectors that we will use to store
the results. Then we iterate through the lines of the reader and parse
the contents and shove them into the vector. Voila.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;use&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;error&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Error&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;use&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;fs&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;File&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;use&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;io&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;BufRead&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; BufReader&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;read_day1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;str&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Result&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Vec&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;, &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Vec&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;, &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Box&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;dyn Error&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; file &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;File&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;open&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; reader &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;BufReader&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;new&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;file&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Create two vectors to hold the integers
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; vec1 &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Vec&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;new&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; vec2 &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Vec&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;new&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Read the file line by line
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;for&lt;&#x2F;span&gt; line &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;in&lt;&#x2F;span&gt; reader&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;lines&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; line &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; line&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; nums &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; line
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;            &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;split_whitespace&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Split by whitespace
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;            &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;map&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;s&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;s&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;parse&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt; &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Parse each number into i32
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Collect the numbers into the two vectors
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Some&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;num1&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Some&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;num2&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;nums&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;next&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; nums&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;next&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;            vec1&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;push&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;num1&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;            vec2&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;push&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;num2&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;else&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;            &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;eprintln!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Skipping malformed line: &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; line&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;vec1&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; vec2&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;sorting-and-summing&quot;&gt;Sorting and summing&lt;&#x2F;h4&gt;
&lt;p&gt;Next, we define a little handy wrapper function. We can use
destructuring assignment here to put the results of &lt;code&gt;read_day1()&lt;&#x2F;code&gt; into
two items at once. If you‚Äôre an R user, this is like using
&lt;a href=&quot;https:&#x2F;&#x2F;kevinushey.github.io&#x2F;dotty&#x2F;&quot;&gt;&lt;code&gt;{dotty}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; or
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;r-lib&#x2F;zeallot&quot;&gt;&lt;code&gt;{zeallot}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. My preference is for
dotty, personally.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;day_one_part_one&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;str&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Result&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;, &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Box&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;dyn Error&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; read the input. needs to be mutable to sort
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; y&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-function z-rust&quot;&gt;read_day1&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; sort the input
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;sort&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    y&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;sort&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; calculate the sum
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; res &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;iter&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;zip&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;iter&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;fold&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;acc&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;xx&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;yy&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        acc &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;+=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;yy &lt;span class=&quot;z-keyword z-operator z-arithmetic z-rust&quot;&gt;-&lt;&#x2F;span&gt; xx&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;abs&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        acc
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;res&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We iterate through x &lt;strong&gt;and&lt;&#x2F;strong&gt; why by creating a &lt;code&gt;zipped&lt;&#x2F;code&gt; iterator. When
you zip an iterator you get a tuple of elements. We will iterate through
these two items together and calculate the absolute difference and
accumulate it along the way.&lt;&#x2F;p&gt;
&lt;p&gt;We accumulate the results using &lt;code&gt;.fold()&lt;&#x2F;code&gt; which takes two arguments :&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;The initial value to accumulate&lt;&#x2F;li&gt;
&lt;li&gt;A closure that has two arguments:&lt;&#x2F;li&gt;
&lt;li&gt;The accumulating value&lt;&#x2F;li&gt;
&lt;li&gt;The current value of the iterator&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;A closure is like an anonymous function in R that is defined like
&lt;code&gt;\(.x, .y)&lt;&#x2F;code&gt; or using the &lt;code&gt;purrr&lt;&#x2F;code&gt; tilde syntax like &lt;code&gt;~ .x + .y&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;It is also important that the closure must return the same type as the
initial value.&lt;&#x2F;p&gt;
&lt;p&gt;In our closure we say that the &lt;code&gt;acc&lt;&#x2F;code&gt; (you can choose any name you‚Äôd like
here, it is just a function argument) must be mutable so we can change
its value at each step. We use the shortcut &lt;code&gt;+=&lt;&#x2F;code&gt; operator so that we
dont have to write &lt;code&gt;acc = acc + (yy - xx).abs()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;all-together&quot;&gt;All together&lt;&#x2F;h4&gt;
&lt;p&gt;Since these are just functions, we need to wrap them all up in our
&lt;code&gt;main.rs&lt;&#x2F;code&gt; file.&lt;&#x2F;p&gt;
&lt;div class=&quot;code-with-filename&quot;&gt;
&lt;p&gt;&lt;strong&gt;main.rs&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;use&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;error&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Error&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;main&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Result&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;, &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Box&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;dyn Error&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; d1p1 &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-function z-rust&quot;&gt;day_one_part_one&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;input&#x2F;day1.txt&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;println!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Part 1: &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{d1p1}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;part-2&quot;&gt;Part 2&lt;&#x2F;h2&gt;
&lt;p&gt;Part two was quite fun to do, actually. For it, we want to count the
number of times that each value in the second column occurs. Each of
these values correspond to a value in the first column. Our sum is now
the value in column 1 multiplied by the number of times it occurs in
column two. To approach this we will do the following:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;read the input&lt;&#x2F;li&gt;
&lt;li&gt;count the number of times each value in column 2 occurs&lt;&#x2F;li&gt;
&lt;li&gt;calculate the ‚Äúscore‚Äù for each value in column 1&lt;&#x2F;li&gt;
&lt;li&gt;sum up the scores&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;r-1&quot;&gt;R&lt;&#x2F;h3&gt;
&lt;p&gt;The R solution is quite straight forward as well but again, might use
techniques you‚Äôre not familiar with. Here is the solution in all of its
(surprisingly fast) glory.&lt;&#x2F;p&gt;
&lt;p&gt;You may think it is ugly but I &lt;em&gt;assure you&lt;&#x2F;em&gt;, it is very fast.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;x &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;read.table&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;day1.txt&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sum&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V1 &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;*&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;table&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V2&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;as.character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V1&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;na.rm&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 23177084
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Let‚Äôs break it up. The most important part is the &lt;code&gt;table()&lt;&#x2F;code&gt; call. This
calculates how many times each value in &lt;code&gt;x$V2&lt;&#x2F;code&gt; occurs. We can use this
table as a lookup vector.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;lookup &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;table&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V2&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Using a lookup vector is a very efficient approach that people tend to
not think about. Since this is a named vector, we can extract it‚Äôs
elements by name.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;lookup&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;92252&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;92252 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   19 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now, all we need to do is do this for &lt;em&gt;every&lt;&#x2F;em&gt; value in &lt;code&gt;x$V1&lt;&#x2F;code&gt;. We have
to cast &lt;code&gt;x$V1&lt;&#x2F;code&gt; as a character vector otherwise it will attempt to do the
lookup by position.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;x_counts &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; lookup&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;as.character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V1&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;tail&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x_counts&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt; 61539 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;                                 11 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If there is not any occurrences in &lt;code&gt;x$V2&lt;&#x2F;code&gt; the value is &lt;code&gt;NA&lt;&#x2F;code&gt; which is
very handy because an &lt;code&gt;NA&lt;&#x2F;code&gt; just like a &lt;code&gt;0&lt;&#x2F;code&gt; will propagate in
multiplication. All we need to do now is multiple and sum!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sum&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V1 &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;*&lt;&#x2F;span&gt; x_counts&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;na.rm&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 23177084
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;rust-1&quot;&gt;Rust&lt;&#x2F;h3&gt;
&lt;p&gt;I quite enjoyed writing this rust solution‚Äîfrankly more than either R or
Rust solution. Any time I get to use a &lt;code&gt;BtreeMap&lt;&#x2F;code&gt; I‚Äôm giddy.&lt;&#x2F;p&gt;
&lt;p&gt;Counting unique values in Rust is a little bit different. We typically
use a &lt;code&gt;Map&lt;&#x2F;code&gt; of some variety. Think of these as named lists. Typically
you will hear reference about a &lt;code&gt;HashMap&lt;&#x2F;code&gt;. &lt;code&gt;HashMap&lt;&#x2F;code&gt; are key-value
stores that do not have any sense of order in the key. &lt;code&gt;BTreeMap&lt;&#x2F;code&gt; is
different because the key &lt;em&gt;must&lt;&#x2F;em&gt; be ordered. Since we will be performing
a lookup based on an integer value, I feel BTreeMap may be better
here‚Äîthough only bench marks can prove it one way or another.&lt;&#x2F;p&gt;
&lt;p&gt;Here is the solution:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;day_one_part_two&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;str&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Result&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;, &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Box&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;dyn Error&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; read the inputs
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; y&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-function z-rust&quot;&gt;read_day1&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Create an empty BTreeMap to count the occurrences
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; counts &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;BTreeMap&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;new&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Iterate through Y to populate the BTreeMap and increment
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; each time we see an entry
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;for&lt;&#x2F;span&gt; yi &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;in&lt;&#x2F;span&gt; y &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; entry &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; counts&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;entry&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;yi&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;or_insert&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-keyword z-operator z-arithmetic z-rust&quot;&gt;*&lt;&#x2F;span&gt;entry &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;+=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Iterate through x and get the value from the btreemap.
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; if it doesn&amp;#39;t exist we get use the default value of 0
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; that is what the unwrap_or() is for
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; res &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;iter&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;fold&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;acc&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;next&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; multiplier &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; counts&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;get&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;next&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;unwrap_or&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-bitwise z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        acc &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;+=&lt;&#x2F;span&gt; next &lt;span class=&quot;z-keyword z-operator z-arithmetic z-rust&quot;&gt;*&lt;&#x2F;span&gt; multiplier&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        acc
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;res&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We instantiate an empty &lt;code&gt;BTreeMap&lt;&#x2F;code&gt; then we populate it. We do this using
the below code. This will grab the entry with the key &lt;code&gt;yi&lt;&#x2F;code&gt; from the map.
If it doesn‚Äôt exist, it will insert the value &lt;code&gt;0&lt;&#x2F;code&gt;. Then we add the value
&lt;code&gt;1&lt;&#x2F;code&gt; to it. Notice that &lt;code&gt;*entry&lt;&#x2F;code&gt;. We do this because we are assinging to
a mutable reference. This lets the value inside of the &lt;code&gt;counts&lt;&#x2F;code&gt;
&lt;code&gt;BTreeMap&lt;&#x2F;code&gt; be updated.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;for&lt;&#x2F;span&gt; yi &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;in&lt;&#x2F;span&gt; y &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;      &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; entry &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; counts&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;entry&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;yi&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;or_insert&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;      &lt;span class=&quot;z-keyword z-operator z-arithmetic z-rust&quot;&gt;*&lt;&#x2F;span&gt;entry &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;+=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;  &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The next part is quite like our part 1 solution. We use &lt;code&gt;.fold()&lt;&#x2F;code&gt; to
perform the sum for us. We iterate through each value of &lt;code&gt;x&lt;&#x2F;code&gt;‚Äîstored in
the value of &lt;code&gt;next&lt;&#x2F;code&gt; in the closure. We then try and get the lookup value
from our &lt;code&gt;counts&lt;&#x2F;code&gt; map. If there is no associated value, we provide a
value of &lt;code&gt;0&lt;&#x2F;code&gt; and store it in our &lt;code&gt;multiplier&lt;&#x2F;code&gt; variable. Then we multiply
&lt;code&gt;xi&lt;&#x2F;code&gt; (or &lt;code&gt;next&lt;&#x2F;code&gt; in the closure) and add it the the accumulator!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; res &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;iter&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;fold&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;acc&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;next&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; multiplier &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; counts&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;get&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;next&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;unwrap_or&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-bitwise z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    acc &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;+=&lt;&#x2F;span&gt; next &lt;span class=&quot;z-keyword z-operator z-arithmetic z-rust&quot;&gt;*&lt;&#x2F;span&gt; multiplier&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    acc
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That‚Äôs it. While it is much more code, it feels much easier to read and
a bit &lt;em&gt;cleaner&lt;&#x2F;em&gt; than the R solution.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bonus-r-rust-via-rextendr&quot;&gt;Bonus: R + Rust via &lt;code&gt;{rextendr}&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;We can take the part 2 solution and tidy it up into a Rust function that
can be called from R using rextendr.&lt;&#x2F;p&gt;
&lt;div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This isn‚Äôt optimized to be fast code and we‚Äôre not even using R native
types so we will incur an overhead cost to go from &lt;code&gt;integer()&lt;&#x2F;code&gt; vector
to &lt;code&gt;Vec&amp;lt;i32&amp;gt;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;To do this you will need &lt;code&gt;{rextendr}&lt;&#x2F;code&gt; installed. Do so with
&lt;code&gt;pak::pak(&quot;extendr&#x2F;rextendr&quot;)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;tally_code &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; r&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;-{
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  fn tally_day1(x: Vec&amp;lt;i32&amp;gt;, y: Vec&amp;lt;i32&amp;gt;) -&amp;gt; Result&amp;lt;i32&amp;gt; {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    let mut counts = std::collections::BTreeMap::new();
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    for yi in y {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        let entry = counts.entry(yi).or_insert(0);
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        *entry += 1;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    }
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    let res = x.iter().fold(0, |mut acc, next| {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        let multiplier = counts.get(next).unwrap_or(&amp;amp;0);
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        acc += next * multiplier;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        acc
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    });
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    Ok(res)
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;}-&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;rextendr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;rust_function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  tally_code&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;profile&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;release&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;quiet&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now we can call this code directly from R:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;tally_day1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V1&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V2&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 23177084
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Let‚Äôs perform a small bench mark between this and the R solution:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;bench&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mark&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;r&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sum&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V1 &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;*&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;table&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V2&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;as.character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V1&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;na.rm&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;rust_simple&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;tally_day1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V1&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; x&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;V2&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 2 √ó 6
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  expression       min   median `itr&#x2F;sec` mem_alloc `gc&#x2F;sec`
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;bch:expr&amp;gt;  &amp;lt;bch:tm&amp;gt; &amp;lt;bch:tm&amp;gt;     &amp;lt;dbl&amp;gt; &amp;lt;bch:byt&amp;gt;    &amp;lt;dbl&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 r            353.1¬µs  377.9¬µs     2584.  210.19KB     8.31
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 rust_simple   44.4¬µs   56.1¬µs    16948.    4.84KB     2.02
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;rust-solution-code&quot;&gt;Rust solution code&lt;&#x2F;h2&gt;
&lt;p&gt;Below is all of the code I used for the rust solution.&lt;&#x2F;p&gt;
&lt;div class=&quot;panel-tabset&quot;&gt;
&lt;h3 id=&quot;main-rs&quot;&gt;&lt;code&gt;main.rs&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;div class=&quot;code-with-filename&quot;&gt;
&lt;p&gt;&lt;strong&gt;main.rs&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;use&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;error&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Error&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-module z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-module z-rust&quot;&gt;mod&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-module z-rust&quot;&gt;day1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;use&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;day1&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-arithmetic z-rust&quot;&gt;*&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;main&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Result&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;, &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Box&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;dyn Error&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; d1p1 &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-function z-rust&quot;&gt;day_one_part_one&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;input&#x2F;day1.txt&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; d1p2 &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-function z-rust&quot;&gt;day_one_part_two&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;input&#x2F;day1.txt&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;println!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Day 1 results:&lt;span class=&quot;z-constant z-character z-escape z-rust&quot;&gt;\n&lt;&#x2F;span&gt;  Part 1: &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{d1p1}&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character z-escape z-rust&quot;&gt;\n&lt;&#x2F;span&gt;  Part 2: &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{d1p2}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;day1-rs&quot;&gt;&lt;code&gt;day1.rs&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;div class=&quot;code-with-filename&quot;&gt;
&lt;p&gt;&lt;strong&gt;day1.rs&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;use&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;collections&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;BTreeMap&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;use&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;error&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Error&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;use&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;fs&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;File&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;use&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;io&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;BufRead&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; BufReader&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;read_day1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;str&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Result&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Vec&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;, &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Vec&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;, &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Box&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;dyn Error&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; file &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;File&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;open&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; reader &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;BufReader&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;new&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;file&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Create two vectors to hold the integers
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; vec1 &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Vec&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;new&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; vec2 &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Vec&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;new&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Read the file line by line
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;for&lt;&#x2F;span&gt; line &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;in&lt;&#x2F;span&gt; reader&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;lines&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; line &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; line&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; nums &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; line
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;            &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;split_whitespace&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Split by whitespace
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;            &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;map&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;s&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;s&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;parse&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt; &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Parse each number into i32
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Collect the numbers into the two vectors
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Some&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;num1&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Some&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;num2&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;nums&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;next&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; nums&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;next&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;            vec1&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;push&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;num1&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;            vec2&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;push&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;num2&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;else&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;            &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;eprintln!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Skipping malformed line: &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; line&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;vec1&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; vec2&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;day_one_part_one&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;str&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Result&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;, &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Box&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;dyn Error&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; read the input. needs to be mutable to sort
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; y&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-function z-rust&quot;&gt;read_day1&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; sort the input
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;sort&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    y&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;sort&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; calculate the sum
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; res &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;iter&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;zip&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;iter&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;fold&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;acc&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;xx&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;yy&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        acc &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;+=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;yy &lt;span class=&quot;z-keyword z-operator z-arithmetic z-rust&quot;&gt;-&lt;&#x2F;span&gt; xx&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;abs&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        acc
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;res&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;day_one_part_two&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;str&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Result&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;, &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Box&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;dyn Error&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; read the inputs
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; y&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-function z-rust&quot;&gt;read_day1&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Create an empty BTreeMap to count the occurrences
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; counts &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;BTreeMap&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;new&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Iterate through Y to populate the BTreeMap and increment
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; each time we see an entry
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;for&lt;&#x2F;span&gt; yi &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;in&lt;&#x2F;span&gt; y &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; entry &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; counts&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;entry&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;yi&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;or_insert&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-keyword z-operator z-arithmetic z-rust&quot;&gt;*&lt;&#x2F;span&gt;entry &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;+=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Iterate through x and get the value from the btreemap.
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; if it doesn&amp;#39;t exist we get use the default value of 0
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; that is what the unwrap_or() is for
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; res &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;iter&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;fold&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;mut&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;acc&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;next&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; multiplier &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; counts&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;get&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;next&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;unwrap_or&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-bitwise z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        acc &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;+=&lt;&#x2F;span&gt; next &lt;span class=&quot;z-keyword z-operator z-arithmetic z-rust&quot;&gt;*&lt;&#x2F;span&gt; multiplier&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        acc
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-type z-rust&quot;&gt;Ok&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;res&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Implementing OpenID Connect (OIDC) in R</title>
        <published>2024-11-28T00:00:00+00:00</published>
        <updated>2024-11-28T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/httr2-oidc/"/>
        <id>https://josiah.rs/posts/httr2-oidc/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/httr2-oidc/">&lt;p&gt;I am working on a rust project that I want to use OpenID Connect for.
I‚Äôm struggling to wrap my head around it, so naturally, I implemented it
in R to understand it better.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-is-oidc&quot;&gt;What is OIDC?&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;openid.net&#x2F;developers&#x2F;how-connect-works&#x2F;&quot;&gt;OpenID Connect
(OIDC)&lt;&#x2F;a&gt; is an
authentication standard based on OAuth 2.0. The hope is that most
identity providers (IDP) can have an implementation of OIDC so that
plugging in their authentication system is pretty straight forward.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;oidc-discovery&quot;&gt;OIDC discovery&lt;&#x2F;h2&gt;
&lt;p&gt;Each OIDC provider has an
&lt;code&gt;{issuer_url}&#x2F;.well-known&#x2F;openid-configuration&lt;&#x2F;code&gt; URL which contains
information about the authentication provider. This is a public facing
document that can be used to find endpoints and other information&lt;&#x2F;p&gt;
&lt;p&gt;For this example, I‚Äôve created a free account at
&lt;a href=&quot;https:&#x2F;&#x2F;auth0.com&#x2F;&quot;&gt;Auth0&lt;&#x2F;a&gt; and made an application. I‚Äôll store the url
in a variable called &lt;code&gt;issuer_url&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;issuer_url &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Accessing the &lt;code&gt;openid-configuration&lt;&#x2F;code&gt; is a simple get request. We‚Äôll
create an &lt;code&gt;oidc_discovery()&lt;&#x2F;code&gt; function. This will return a list and we
will give it a class &lt;code&gt;oidc_provider&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;httr2&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;oidc_discovery&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;issuer_url&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  res &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;request&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;issuer_url&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_url_path_append&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;.well-known&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;openid-configuration&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_perform&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;resp_body_json&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;res&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;oidc_provider&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;list&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Tip&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I‚Äôve also given this object a nicer print method based on the
&lt;code&gt;httr2_oauth_client&lt;&#x2F;code&gt; class in &lt;a href=&quot;https:&#x2F;&#x2F;httr2.r-lib.org&quot;&gt;&lt;code&gt;{httr2}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;print.oidc_provider&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;...&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; adapted from httr2:::print.httr2_request
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    cli&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;cli_text&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;cli&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;style_bold&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&amp;lt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;paste&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;collapse&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&#x2F;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&amp;gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    lines &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        \&lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;is.atomic&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;amp;&amp;amp;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;length&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;==&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;            &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;is.character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;                &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;paste0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&amp;#39;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; .x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&amp;#39;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;            &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;            &lt;span class=&quot;z-keyword z-control z-conditional z-else z-r&quot;&gt;else&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;                &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;format&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;            &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-keyword z-control z-conditional z-else z-r&quot;&gt;else&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;            &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    cli&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;cli_dl&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;lines&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;invisible&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;blockquote&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Using this gives us a very informative list that we will use for
identifying our authorization endpoints.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;provider &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;oidc_discovery&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;issuer_url&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;oidc_provider&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;issuer: &amp;#39;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;authorization_endpoint: &amp;#39;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;authorize&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;token_endpoint: &amp;#39;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;oauth&#x2F;token&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;device_authorization_endpoint: &amp;#39;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;oauth&#x2F;device&#x2F;code&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;userinfo_endpoint: &amp;#39;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;userinfo&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;mfa_challenge_endpoint: &amp;#39;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;mfa&#x2F;challenge&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;jwks_uri: &amp;#39;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;.well-known&#x2F;jwks.json&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;registration_endpoint: &amp;#39;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;oidc&#x2F;register&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;revocation_endpoint: &amp;#39;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;oauth&#x2F;revoke&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;scopes_supported: list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;response_types_supported: list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;code_challenge_methods_supported: list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;response_modes_supported: list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;subject_types_supported: list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;token_endpoint_auth_methods_supported: list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;claims_supported: list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;request_uri_parameter_supported: FALSE
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;request_parameter_supported: FALSE
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;id_token_signing_alg_values_supported: list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;token_endpoint_auth_signing_alg_values_supported: list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;end_session_endpoint:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;#39;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;oidc&#x2F;logout&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The information in this object will be used for our oauth flows with
&lt;code&gt;httr2&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;oidc-client-object&quot;&gt;OIDC Client Object&lt;&#x2F;h2&gt;
&lt;p&gt;In httr2, we create an &lt;code&gt;httr2_oauth_client&lt;&#x2F;code&gt; object to be used for our
authentication flows. We will generalize that approac and create
&lt;code&gt;oidc_client()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;In this function, we will store the &lt;code&gt;redirect_uri&lt;&#x2F;code&gt; into the client
itself as well as tack on the &lt;code&gt;oidc_client&lt;&#x2F;code&gt; subclass. This will give us
a nicer print method and prevent us from having to put in the
&lt;code&gt;redirect_uri&lt;&#x2F;code&gt; multiple times.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;oidc_client&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;oidc_provider&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;client_id&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;Sys.getenv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;OIDC_CLIENT&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;client_secret&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;Sys.getenv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;OIDC_SECRET&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;redirect_uri&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;oauth_redirect_uri&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  client &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;oauth_client&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;id&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; client_id&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;secret&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; client_secret&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;token_url&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; oidc_provider&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;token_endpoint&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  client&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;redirect_uri&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; redirect_uri
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;client&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;oidc_client&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;client&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  client
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This function fetches the client id and secret from environment
variables. This is because we do not want to store these variables
directly in our code.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-tip&quot;&gt;
&lt;p&gt;Use &lt;code&gt;usethis::edit_r_environ()&lt;&#x2F;code&gt; to set these variables globally.
Alternatively, you can use something like &lt;code&gt;config&lt;&#x2F;code&gt; to have a
&lt;code&gt;config.yml&lt;&#x2F;code&gt; file or an alternative environment management system. But
at the end of the day just please do not store your credentials in your
code!!!!&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;For Auth0, you have to specify which redirect URIs can be trusted. In my
case I set it to &lt;code&gt;http:&#x2F;&#x2F;localhost:3000&#x2F;oauth&#x2F;callback&lt;&#x2F;code&gt; in my
application settings.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;client &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;oidc_client&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    provider&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;redirect_uri&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;http:&#x2F;&#x2F;localhost:3000&#x2F;oauth&#x2F;callback&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;oidc_client&#x2F;httr2_oauth_client&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;name: bf83aacb811320e5da430601736f1286
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;id:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;secret: &amp;lt;REDACTED&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;token_url: https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;oauth&#x2F;token
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;auth: oauth_client_req_auth_body
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;redirect_uri: http:&#x2F;&#x2F;localhost:3000&#x2F;oauth&#x2F;callback
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This client will now be used for our authentication steps.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;oauth2-code-flow&quot;&gt;OAuth2 Code Flow&lt;&#x2F;h2&gt;
&lt;p&gt;The most secure method of authentication with OAuth2 is the code flow.
This is also the most common when building web applications. It will
send you to the external provider to authenticate there, then return you
to the app when complete with an &lt;code&gt;access_token&lt;&#x2F;code&gt; and an &lt;code&gt;id_token&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Here we create the &lt;code&gt;oidc_flow_auth_code()&lt;&#x2F;code&gt; function. The authorization
endpoint will likely be different for providers. This is why we fetch it
from the provider itself.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;oidc_flow_auth_code&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;client&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;provider&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;scope&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;openid profile email&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;oauth_flow_auth_code&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    client&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    provider&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;authorization_endpoint&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;scope&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; scope&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;redirect_uri&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; client&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;redirect_uri
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;alert-note&quot;&gt;
&lt;p&gt;Now that I‚Äôm looking at this again, it may be worth storing the the
authorization endpoint into the client too‚Ä¶&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;When we authenticate with OIDC we most also provide the &lt;code&gt;openid&lt;&#x2F;code&gt; scope.
This indicates to the provider that the OIDC protocol will be used.
Additionally, OIDC uses something called json web-tokens (JWT).&lt;&#x2F;p&gt;
&lt;p&gt;JWTs have ‚Äúclaims‚Äù associated with them. This is basic informations
about the user that is authenticated. These get stored alongside the
&lt;code&gt;access_token&lt;&#x2F;code&gt; as an &lt;code&gt;id_token&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;openid.net&#x2F;specs&#x2F;openid-connect-basic-1_0.html#StandardClaims&quot;&gt;standard
claim&lt;&#x2F;a&gt;
&lt;code&gt;profile&lt;&#x2F;code&gt; will give you a lot of basic information about an end-user. It
wraps up the name, family_name, given_name, middle_name, nickname,
preferred_username, profile, picture, website, gender, birthdate,
zoneinfo, and locale claims.&lt;&#x2F;p&gt;
&lt;p&gt;Specify the claim you want after &lt;code&gt;openid&lt;&#x2F;code&gt; in the &lt;code&gt;scope&lt;&#x2F;code&gt; argument&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;token &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;oidc_flow_auth_code&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  client&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; provider&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;scope&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;openid profile&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;httr2_token&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;token_type: Bearer
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;access_token: &amp;lt;REDACTED&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;expires_at: 2024-11-29 11:07:12
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;id_token: &amp;lt;REDACTED&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;scope: openid profile
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;With this you‚Äôve now authenticated using OIDC. Though you may want to
access the user information in the token. We can do that by decoding the
&lt;code&gt;id_token&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;accessing-claims&quot;&gt;Accessing Claims&lt;&#x2F;h2&gt;
&lt;p&gt;Here we create a function &lt;code&gt;parse_id_token()&lt;&#x2F;code&gt; which takes the contents of
&lt;code&gt;token$id_token&lt;&#x2F;code&gt; and parses it into something human representable.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;token&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;id_token
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImV0WWVUTjhseGJ6VENZblBMNnhxSyJ9.eyJnaXZlbl9uYW1lIjoiSm9zaWFoIiwiZmFtaWx5X25hbWUiOiJQYXJyeSIsIm5pY2tuYW1lIjoiam9zaWFoLnBhcnJ5IiwibmFtZSI6Ikpvc2lhaCBQYXJyeSIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5...truncate&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is base64 encoded nonsense. Below is an opinionated way to decode
this. I utilize the &lt;a href=&quot;https:&#x2F;&#x2F;extendr.github.io&#x2F;b64&#x2F;&quot;&gt;&lt;code&gt;{b64}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; package
for fast decoding. Then use
&lt;a href=&quot;https:&#x2F;&#x2F;coolbutuseless.github.io&#x2F;package&#x2F;yyjsonr&#x2F;index.html&quot;&gt;&lt;code&gt;{yyjsonr}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
for fast json parsing.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;parse_id_token&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;token&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  parts &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;strsplit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;token&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;id_token&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\\&lt;&#x2F;span&gt;.&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  b64&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;decode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;parts&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;eng&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; b64&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;engine&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;url_safe_no_pad&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;rawToChar&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;set_names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;header&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;payload&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;yyjsonr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;read_json_str&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$header
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$header$alg
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;RS256&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$header$typ
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;JWT&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$header$kid
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;redacted&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$given_name
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;Josiah&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$family_name
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;Parry&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$nickname
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;josiah.parry&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$name
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;Josiah Parry&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$picture
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;redacted&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$updated_at
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;2024-11-28T00:46:24.934Z&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$iss
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;https:&#x2F;&#x2F;dev-2ts7ytkts28hfj4o.us.auth0.com&#x2F;&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$aud
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;mi3FRXJuJarrM7rFBDr0N270l84ANSXo&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$iat
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 1732820832
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$exp
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 1732856832
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$sub
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;redacted&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$payload$sid
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;redacted&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;authenticating-requests-with-oidc&quot;&gt;Authenticating requests with OIDC&lt;&#x2F;h2&gt;
&lt;p&gt;However, you may want to wrap your requests with your OIDC auth
provider.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;req_auth_oidc&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;req&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;provider&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;client&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;scope&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;openid profile email&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  req &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_oauth_auth_code&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;client&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; client&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;auth_url&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; provider&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;authorization_endpoint&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;scope&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; scope&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;redirect_uri&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; client&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;redirect_uri
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;accessing-userinfo&quot;&gt;Accessing &lt;code&gt;UserInfo&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Each OIDC provider also has a &lt;code&gt;UserInfo&lt;&#x2F;code&gt; endpoint that can be accessed
for user-level claims.&lt;&#x2F;p&gt;
&lt;p&gt;We can wrap this up as well:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;oidc_user_info&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;provider&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;token&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;request&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;provider&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;userinfo_endpoint&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_auth_bearer_token&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;token&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;access_token&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_perform&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;resp_body_json&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Note that this will only give you the user information that is
associated with the claims used to authenticate with as well.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>S7 &amp; Options objects</title>
        <published>2024-11-21T00:00:00+00:00</published>
        <updated>2024-11-21T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/s7-options-objects/"/>
        <id>https://josiah.rs/posts/s7-options-objects/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/s7-options-objects/">&lt;p&gt;One scenario I have encountered is the case case of
&lt;code&gt;readr::read_delim()&lt;&#x2F;code&gt;. The argument &lt;code&gt;col_names = TRUE&lt;&#x2F;code&gt; by default, can
be &lt;code&gt;FALSE&lt;&#x2F;code&gt;, or it can be a character vector of the names to provide to
the columns it is reading.&lt;&#x2F;p&gt;
&lt;p&gt;This is a bit stinky üò∑. But it actually makes a lot of sense.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;col_names = TRUE&lt;&#x2F;code&gt; (default): the file provides you with headers and
you should use them&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;col_names = FALSE&lt;&#x2F;code&gt;: there are no column names we should make some
placeholders for the data frame (because column names are necessary)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;col_names = character()&lt;&#x2F;code&gt;: we want to provide column names directly
(makes the most sense when there are no headers in the file)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;This is a little confusing when we think deeply about the character
vector option.&lt;&#x2F;p&gt;
&lt;p&gt;There are two scenarios here:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;the file has column headers but we want to give it different ones&lt;&#x2F;li&gt;
&lt;li&gt;the file has no column headers but we want to give it different ones&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Lets explore how this works in practice a bit. Here we write &lt;code&gt;iris&lt;&#x2F;code&gt; to a
temporary file.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;tmp &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;tempfile&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fileext&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;.csv&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;write_csv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;iris&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; tmp&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;scenario-1-has-headers-give-it-different-once&quot;&gt;Scenario 1: has headers give it different once&lt;&#x2F;h3&gt;
&lt;p&gt;In the first scenario we can provide a character vector to &lt;code&gt;col_names&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;read_csv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;tmp&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;col_names&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;a&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;b&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;c&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;d&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;e&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 151 √ó 5
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   a            b           c            d           e      
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;chr&amp;gt;        &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;        &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1 Sepal.Length Sepal.Width Petal.Length Petal.Width Species
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2 5.1          3.5         1.4          0.2         setosa 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3 4.9          3           1.4          0.2         setosa 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4 4.7          3.2         1.3          0.2         setosa 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5 4.6          3.1         1.5          0.2         setosa 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6 5            3.6         1.4          0.2         setosa 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7 5.4          3.9         1.7          0.4         setosa 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8 4.6          3.4         1.4          0.3         setosa 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9 5            3.4         1.5          0.2         setosa 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10 4.4          2.9         1.4          0.2         setosa 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 141 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Here we can see that &lt;code&gt;col_names = character()&lt;&#x2F;code&gt; assumes that there isn‚Äôt
any header. To accomplish this we need to set &lt;code&gt;skip = 1&lt;&#x2F;code&gt; to not read the
first line where the header actually is.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;read_csv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    tmp&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;col_names&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;a&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;b&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;c&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;d&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;e&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;skip&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 150 √ó 5
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;       a     b     c     d e     
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1   5.1   3.5   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2   4.9   3     1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3   4.7   3.2   1.3   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4   4.6   3.1   1.5   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5   5     3.6   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6   5.4   3.9   1.7   0.4 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7   4.6   3.4   1.4   0.3 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8   5     3.4   1.5   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9   4.4   2.9   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10   4.9   3.1   1.5   0.1 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 140 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;scenario-2-has-no-headers-give-it-names&quot;&gt;Scenario 2: has no headers give it names&lt;&#x2F;h3&gt;
&lt;p&gt;Create a csv without the headers:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;tmp &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;tempfile&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fileext&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;.csv&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;write_csv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;iris&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; tmp&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;col_names&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;FALSE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;In the case of &lt;code&gt;write_csv()&lt;&#x2F;code&gt; the argument &lt;code&gt;col_names&lt;&#x2F;code&gt; is &lt;em&gt;always&lt;&#x2F;em&gt; a
logical scalar&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;In this case, the &lt;code&gt;col_names = character()&lt;&#x2F;code&gt; works well!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;read_csv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    tmp&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;col_names&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;a&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;b&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;c&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;d&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;e&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 150 √ó 5
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;       a     b     c     d e     
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1   5.1   3.5   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2   4.9   3     1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3   4.7   3.2   1.3   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4   4.6   3.1   1.5   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5   5     3.6   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6   5.4   3.9   1.7   0.4 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7   4.6   3.4   1.4   0.3 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8   5     3.4   1.5   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9   4.4   2.9   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10   4.9   3.1   1.5   0.1 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 140 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Here are the other two scenarios:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;read_csv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;tmp&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 149 √ó 5
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   `5.1` `3.5` `1.4` `0.2` setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1   4.9   3     1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2   4.7   3.2   1.3   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3   4.6   3.1   1.5   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4   5     3.6   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5   5.4   3.9   1.7   0.4 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6   4.6   3.4   1.4   0.3 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7   5     3.4   1.5   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8   4.4   2.9   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9   4.9   3.1   1.5   0.1 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10   5.4   3.7   1.5   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 139 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;read_csv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;tmp&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;col_names&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;FALSE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 150 √ó 5
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;      X1    X2    X3    X4 X5    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1   5.1   3.5   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2   4.9   3     1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3   4.7   3.2   1.3   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4   4.6   3.1   1.5   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5   5     3.6   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6   5.4   3.9   1.7   0.4 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7   4.6   3.4   1.4   0.3 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8   5     3.4   1.5   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9   4.4   2.9   1.4   0.2 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10   4.9   3.1   1.5   0.1 setosa
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 140 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;rethinking-the-arguments&quot;&gt;Rethinking the arguments&lt;&#x2F;h2&gt;
&lt;p&gt;To me, I think these arguments can be made less
&lt;a href=&quot;https:&#x2F;&#x2F;www.infoq.com&#x2F;presentations&#x2F;Simple-Made-Easy&#x2F;&quot;&gt;complected&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;To me, there are two arguments burried in &lt;code&gt;col_names&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;header = TRUE&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;col_names = NULL&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;The imaginary &lt;code&gt;header&lt;&#x2F;code&gt; argument should be used to determine if there is
a header line to be used.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;code&gt;col_names&lt;&#x2F;code&gt;, which defaults to &lt;code&gt;NULL&lt;&#x2F;code&gt; can be used to provide an
alternative set of column names.&lt;&#x2F;p&gt;
&lt;p&gt;This approach would reduce the cognitive overload of &lt;code&gt;col_names&lt;&#x2F;code&gt;
argument.&lt;&#x2F;p&gt;
&lt;p&gt;However, there are&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;length&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;formals&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;read_csv&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 20
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;arguments already‚Ä¶.so‚Ä¶ additional ones? That could be quite a bit.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;options-objects-with-s7&quot;&gt;Options objects with S7&lt;&#x2F;h2&gt;
&lt;p&gt;One alternative to having every option as a function argument is to
create an options object.&lt;&#x2F;p&gt;
&lt;p&gt;This is very common in the Rust ecosystem. There is a struct that is
used to define common settings. That object is then passed into methods
and functions.&lt;&#x2F;p&gt;
&lt;p&gt;We could consider doing something similar for the &lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;
function.&lt;&#x2F;p&gt;
&lt;p&gt;Lets take a look at the arguments for &lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;fn_fmls_names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;read_csv&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; [1] &amp;quot;file&amp;quot;            &amp;quot;col_names&amp;quot;       &amp;quot;col_types&amp;quot;       &amp;quot;col_select&amp;quot;     
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; [5] &amp;quot;id&amp;quot;              &amp;quot;locale&amp;quot;          &amp;quot;na&amp;quot;              &amp;quot;quoted_na&amp;quot;      
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; [9] &amp;quot;quote&amp;quot;           &amp;quot;comment&amp;quot;         &amp;quot;trim_ws&amp;quot;         &amp;quot;skip&amp;quot;           
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[13] &amp;quot;n_max&amp;quot;           &amp;quot;guess_max&amp;quot;       &amp;quot;name_repair&amp;quot;     &amp;quot;num_threads&amp;quot;    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[17] &amp;quot;progress&amp;quot;        &amp;quot;show_col_types&amp;quot;  &amp;quot;skip_empty_rows&amp;quot; &amp;quot;lazy&amp;quot;           
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Many of these are booleans or scalars. I think we can improve this by
using S7 to store our options as a standalone object.&lt;&#x2F;p&gt;
&lt;p&gt;Looking at the arguments for &lt;code&gt;read_csv()&lt;&#x2F;code&gt; I think our options object can
be used for the following options:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;locale&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;na&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;quote&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;comment&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;trim_ws&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;skip&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;n_max&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;guess_max&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;name_repair&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;num_threads&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;progress&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;show_col_types&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;skip_empty_rows&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;lazy&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;This will take 14 of the less commonly used arguments out of the
function!&lt;&#x2F;p&gt;
&lt;p&gt;The first thing we will do is define properties for each of these
values. It looks like a lot of code, but it is not so bad! This
boilerplate is going to give us a strongly typed object that will catch
errors early!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;s7-object-properties&quot;&gt;S7 object properties&lt;&#x2F;h2&gt;
&lt;p&gt;For each of the arguments we want to ensure that we:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;have a good default&lt;&#x2F;li&gt;
&lt;li&gt;validate any input&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;First we‚Äôre looking at the &lt;code&gt;locale&lt;&#x2F;code&gt;. This one is quite a lot of
checking.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;property-validation&quot;&gt;Property validation&lt;&#x2F;h3&gt;
&lt;p&gt;Ideally, the &lt;code&gt;locale&lt;&#x2F;code&gt; would be an S7 object so we could provide a
&lt;code&gt;class_locale&lt;&#x2F;code&gt; as our propery but we don‚Äôt have that luxury. So here, we
validate each of the components of the locale object.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;S7&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.locale &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_list&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;default_locale&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    dnames &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; value&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;date_names
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    invalid &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dnames&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;mon&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;12&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dnames&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;mon_ab&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;12&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dnames&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;day&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;7&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dnames&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;day_ab&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;7&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dnames&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;am_pm&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;date_format&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;time_format&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;decimal_mark&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;grouping_mark&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;tz&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;encoding&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;invalid&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;expected `locale` object&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Similarly, the argument for &lt;code&gt;name_repair&lt;&#x2F;code&gt; is not at all straight
forward. It can be one of any known strategy &lt;em&gt;or&lt;&#x2F;em&gt; it can be a function
that is applied to the names via &lt;code&gt;vctrs::vec_as_names()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.name_repair &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_any&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;unique&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    known_strategies &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;minimal&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;unique&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;check_unique&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;unique_quiet&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;universal&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;universal_quiet&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      fmls &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;fn_fmls&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sum&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;fmls&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;inherits&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;name&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;name repair function must only have one required argument&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-control z-flow z-return z-r&quot;&gt;return&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-language z-r&quot;&gt;NULL&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`name_repair` must be one of minimal, unique, check_unique, unique_quiet, universal, universal_quiet or a function&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;value &lt;span class=&quot;z-keyword z-operator z-other z-r&quot;&gt;%in%&lt;&#x2F;span&gt; known_strategies&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;%s is not a valid `name_repair` value&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Here we define the validators for the rest of the options. These are all
quite straight forward and are mostly scalars.&lt;&#x2F;p&gt;
&lt;details open class=&quot;code-fold&quot;&gt;
&lt;summary&gt;Code&lt;&#x2F;summary&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.na &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_character&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;NA&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.quote &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_logical&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`quote` must be a scalar character&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.comment &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_character&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`comment` must be a scalar character&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.trim_ws &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_logical&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`trim_ws` must be a scalar character&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.skip &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_numeric&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-r&quot;&gt;0&lt;span class=&quot;z-storage z-type z-numeric z-r&quot;&gt;L&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_integerish&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`skip` must be a scalar numeric&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.n_max &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_numeric&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;Inf&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_integerish&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`n_max` must be a scalar numeric&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.guess_max &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_numeric&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-r&quot;&gt;1000&lt;span class=&quot;z-storage z-type z-numeric z-r&quot;&gt;L&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_integerish&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`guess_max` must be a scalar numeric&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.n_max &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_numeric&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;Inf&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_integerish&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`n_max` must be a scalar numeric&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.num_threads &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  class_numeric&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;readr_threads&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_integerish&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`num_threads` must be a scalar numeric&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.progress &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    class_logical&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;show_progress&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;         &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`progress` must be a scalar logical&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.show_col_types &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    class_logical&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;should_show_types&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; %&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;||&lt;&#x2F;span&gt;% &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;         &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`show_col_types` must be a scalar logical&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.skip_empty_rows &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    class_logical&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;         &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`skip_empty_rows` must be a scalar logical&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;.lazy &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    class_logical&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;should_read_lazy&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;         &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;is_scalar_logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;          &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;`lazy` must be a scalar logical&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;details&gt;
&lt;h2 id=&quot;s7-readr-opts-class&quot;&gt;S7 &lt;code&gt;readr_opts&lt;&#x2F;code&gt; class&lt;&#x2F;h2&gt;
&lt;p&gt;Now can actually define the S7 object class by passing in all of our new
property objects to the &lt;code&gt;properties&lt;&#x2F;code&gt; argument. Because we defined
defaults for every property we can construct a default option object.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;class_readr_opts &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;readr_opts&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;properties&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;locale&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .locale&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;na&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .na&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;quote&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .quote&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; comment = .comment,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;trim_ws&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .trim_ws&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;skip&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .skip&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n_max&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .n_max&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;guess_max&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .guess_max&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;name_repair&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .name_repair&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;num_threads&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .num_threads&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;progress&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .progress&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;show_col_types&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .show_col_types&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;skip_empty_rows&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .skip_empty_rows&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;lazy&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; .lazy
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;opts &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;class_readr_opts&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;opts
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;readr_opts&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ locale         :List of 7
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; .. $ date_names   :List of 5
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; ..  ..$ mon   : chr [1:12] &amp;quot;January&amp;quot; &amp;quot;February&amp;quot; &amp;quot;March&amp;quot; &amp;quot;April&amp;quot; ...
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; ..  ..$ mon_ab: chr [1:12] &amp;quot;Jan&amp;quot; &amp;quot;Feb&amp;quot; &amp;quot;Mar&amp;quot; &amp;quot;Apr&amp;quot; ...
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; ..  ..$ day   : chr [1:7] &amp;quot;Sunday&amp;quot; &amp;quot;Monday&amp;quot; &amp;quot;Tuesday&amp;quot; &amp;quot;Wednesday&amp;quot; ...
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; ..  ..$ day_ab: chr [1:7] &amp;quot;Sun&amp;quot; &amp;quot;Mon&amp;quot; &amp;quot;Tue&amp;quot; &amp;quot;Wed&amp;quot; ...
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; ..  ..$ am_pm : chr [1:2] &amp;quot;AM&amp;quot; &amp;quot;PM&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; ..  ..- attr(*, &amp;quot;class&amp;quot;)= chr &amp;quot;date_names&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; .. $ date_format  : chr &amp;quot;%AD&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; .. $ time_format  : chr &amp;quot;%AT&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; .. $ decimal_mark : chr &amp;quot;.&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; .. $ grouping_mark: chr &amp;quot;,&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; .. $ tz           : chr &amp;quot;UTC&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; .. $ encoding     : chr &amp;quot;UTF-8&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; .. - attr(*, &amp;quot;class&amp;quot;)= chr &amp;quot;locale&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ na             : chr [1:2] &amp;quot;&amp;quot; &amp;quot;NA&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ quote          : logi TRUE
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ trim_ws        : logi TRUE
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ skip           : int 0
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ n_max          : num Inf
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ guess_max      : int 1000
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ name_repair    : chr &amp;quot;unique&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ num_threads    : int 8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ progress       : logi FALSE
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ show_col_types : logi FALSE
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ skip_empty_rows: logi TRUE
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ lazy           : logi FALSE
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;h2 id=&quot;update-2025-12-03&quot;&gt;Update 2025-12-03&lt;&#x2F;h2&gt;
&lt;p&gt;Due to a change in {S7}, ‚Äúcomment‚Äù is considered a ‚Äúforbidden‚Äù
(reserved) word and cannot be used. See &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RConsortium&#x2F;S7&#x2F;issues&#x2F;579&quot;&gt;issue
579&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can access each of these properties using the &lt;code&gt;@&lt;&#x2F;code&gt; accessor. For
example, if we want the &lt;code&gt;locale&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;opts&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;@&lt;&#x2F;span&gt;locale
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;locale&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Numbers:  123,456.78
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Formats:  %AD &#x2F; %AT
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Timezone: UTC
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Encoding: UTF-8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;date_names&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Days:   Sunday (Sun), Monday (Mon), Tuesday (Tue), Wednesday (Wed), Thursday
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;        (Thu), Friday (Fri), Saturday (Sat)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Months: January (Jan), February (Feb), March (Mar), April (Apr), May (May),
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;        June (Jun), July (Jul), August (Aug), September (Sep), October
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;        (Oct), November (Nov), December (Dec)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;AM&#x2F;PM:  AM&#x2F;PM
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;simplifying-readr-read-csv&quot;&gt;Simplifying &lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Now, imagine if we can use this as a way to simplify the
&lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt; function. The function definition can now look like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;read_csv&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;file&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;col_names&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;col_types&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;NULL&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;col_select&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;NULL&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;id&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;NULL&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;options&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;class_readr_opts&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; function logic
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This greatly reduces the cognitive load for end users and it consolides
options specification into a single object.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Get notified of failing CRAN checks</title>
        <published>2024-09-01T00:00:00+00:00</published>
        <updated>2024-09-01T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/cran-checks/"/>
        <id>https://josiah.rs/posts/cran-checks/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/cran-checks/">&lt;h2 id=&quot;background&quot;&gt;Background&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;CRAN performs checks on all CRAN packages quite frequently.&lt;&#x2F;li&gt;
&lt;li&gt;If a package has a warning or an error you have a week or two to fix
it.&lt;&#x2F;li&gt;
&lt;li&gt;Unfixed packages get removed.&lt;&#x2F;li&gt;
&lt;li&gt;If your package depends on the removed package it also gets removed.&lt;&#x2F;li&gt;
&lt;li&gt;You will not be notified if your package is removed.&lt;&#x2F;li&gt;
&lt;li&gt;That &lt;em&gt;&lt;strong&gt;sucks&lt;&#x2F;strong&gt;&lt;&#x2F;em&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;get-informed-cran-checks-github-action&quot;&gt;Get informed: CRAN checks GitHub Action&lt;&#x2F;h2&gt;
&lt;p&gt;There is a new GitHub Action that you can use with your CRAN package. It
will run once a day. If there are any &lt;code&gt;WARN&lt;&#x2F;code&gt; or &lt;code&gt;ERROR&lt;&#x2F;code&gt; statuses in any
of the check flavors, then the GitHub Action will fail.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;add-the-action&quot;&gt;Add the action&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;usethis&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;use_github_action&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;url&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;https:&#x2F;&#x2F;github.com&#x2F;ricochet-rs&#x2F;cran-checks&#x2F;blob&#x2F;main&#x2F;check-pkg&#x2F;cran-checks.yaml&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;open&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will open a yaml file for you with the following:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;yml&quot; class=&quot;language-yml z-code&quot;&gt;&lt;code class=&quot;language-yml&quot; data-lang=&quot;yml&quot;&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;&lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;name&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;Check CRAN status&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;&lt;span class=&quot;z-constant z-language z-boolean z-yaml&quot;&gt;on&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;  &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;schedule&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;    &lt;span class=&quot;z-comment z-line z-number-sign z-yaml&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-line z-number-sign z-yaml&quot;&gt;#&lt;&#x2F;span&gt; Runs daily at 4:00 PM UTC (9:00 AM PST)
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;    &lt;span class=&quot;z-punctuation z-definition z-block z-sequence z-item z-yaml&quot;&gt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;cron&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-single z-yaml&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-yaml&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;0 16 * * *&lt;span class=&quot;z-punctuation z-definition z-string z-end z-yaml&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-yaml&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-line z-number-sign z-yaml&quot;&gt;#&lt;&#x2F;span&gt; allows for manually running of the check
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;  &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;workflow_dispatch&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;&lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;jobs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;  &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;check_cran_status&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;    &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;runs-on&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;ubuntu-latest&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;    &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;steps&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;      &lt;span class=&quot;z-punctuation z-definition z-block z-sequence z-item z-yaml&quot;&gt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;name&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;Get CRAN checks&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;        &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;uses&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;ricochet-rs&#x2F;cran-checks&#x2F;check-pkg@main&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;        &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;with&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-yaml&quot;&gt;          &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;&lt;span class=&quot;z-entity z-name z-tag z-yaml&quot;&gt;pkg&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-mapping z-yaml&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-unquoted z-plain z-out z-yaml&quot;&gt;YOUR-PKG-NAME&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Replace &lt;code&gt;YOUR-PKG-NAME&lt;&#x2F;code&gt; with the name of your package (no quotes).
Commit the file to GitHub and voil√°.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;how-this-works&quot;&gt;How this works&lt;&#x2F;h3&gt;
&lt;p&gt;Since CRAN can‚Äôt be bothered to email us when they remove a package, we
can utilized GitHub Actions to be our messenger.&lt;&#x2F;p&gt;
&lt;p&gt;Whenever a GitHub Action fails, an email is sent to you so you know.
Isn‚Äôt that nice?&lt;&#x2F;p&gt;
&lt;p&gt;The
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ricochet-rs&#x2F;cran-checks&quot;&gt;&lt;code&gt;ricochet-rs&#x2F;cran-checks&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
repository fetches the status of all packages daily. Then stores them as
a json file that is hosted on GitHub pages. They can be accessed from
url
&lt;a href=&quot;https:&#x2F;&#x2F;ricochet-rs.github.io&#x2F;cran-checks&#x2F;b64.json&quot;&gt;&lt;code&gt;https:&#x2F;&#x2F;ricochet-rs.github.io&#x2F;cran-checks&#x2F;b64.json&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The GitHub Action checks for your package‚Äôs json file and looks at all
of the statuses. If the package isn‚Äôt found or if there is a single
warning or error, it fails.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;motivation-packages-removed-without-warning&quot;&gt;Motivation: packages removed without warning&lt;&#x2F;h2&gt;
&lt;p&gt;On August 19th, 2024, CRAN removed 3 of my packages without so much as
an email. I was notified by a colleague who was giving a live workshop
to the US Forest Service on August 21st. When the attendants tried to
install the packages, they weren‚Äôt on CRAN. It was a very bad look.&lt;&#x2F;p&gt;
&lt;p&gt;How were they supposed to know the packages we‚Äôre gone? They were there
when they tested. I didn‚Äôt get any warning so I couldn‚Äôt help them find
a way to provide a work around.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;solution-always-check-your-cran-checks&quot;&gt;Solution: always check your CRAN checks&lt;&#x2F;h2&gt;
&lt;p&gt;I‚Äôve been told that I should check the status of my CRAN package checks
on every flavor every day. CRAN tests on r-devel, so frequently there
are false positives. Also, I‚Äôve got a lot going on and I can hardly
remember to talk myself on a walk some days. Other package managers will
let you know if your package is failing, why doesn‚Äôt CRAN?&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-future-of-cran-check-messaging&quot;&gt;A future of CRAN check messaging?&lt;&#x2F;h2&gt;
&lt;p&gt;Ideally, I would like to have an opt-in service that provides these
checks daily and will email you directly if any of your R packages are
failing. However, this would require funding which I don‚Äôt have.&lt;&#x2F;p&gt;
&lt;p&gt;If you are interested in sponsoring this project further, email me at
&lt;code&gt;josiah.parry at gmail dot com&lt;&#x2F;code&gt; and we can discuss this. I think the R
community could benefit quite greatly.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Type safe(r) R code</title>
        <published>2024-07-01T00:00:00+00:00</published>
        <updated>2024-07-01T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/type-safety/"/>
        <id>https://josiah.rs/posts/type-safety/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/type-safety/">&lt;h2 id=&quot;introduction-to-r-lib-type-safety-checks&quot;&gt;Introduction to r-lib type safety checks&lt;&#x2F;h2&gt;
&lt;p&gt;Type safety is all the rage these days. It‚Äôs the (one of the many)
reason why people love Rust , TypeScript, and Pydantic.&lt;&#x2F;p&gt;
&lt;p&gt;Knowing what type of data is coming in and going out of a function is
critical! It means fewer bugs and more robust code.&lt;&#x2F;p&gt;
&lt;p&gt;I will introduce you to the r-lib standalone checks. Here is a peek of
some code from &lt;code&gt;{arcgisgeocode}&lt;&#x2F;code&gt; that helps make the function more type
safe.&lt;&#x2F;p&gt;
&lt;img src=&quot;images&#x2F;Untitled.png&quot; style=&quot;width:50.0%&quot; &#x2F;&gt;
&lt;h2 id=&quot;what-is-type-safety&quot;&gt;What is type safety?&lt;&#x2F;h2&gt;
&lt;p&gt;A type safe language is one where each variable has a known and
&lt;em&gt;validated&lt;&#x2F;em&gt; type. R &lt;em&gt;&lt;strong&gt;is not type safe.&lt;&#x2F;strong&gt;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;When you define a function in a type safe language, you have to specify
the input types and the output types.&lt;&#x2F;p&gt;
&lt;p&gt;Here is a function that scales one numeric variable by another.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;scale_by&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;y&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  x &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;&#x2F;&lt;&#x2F;span&gt; y
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;This is not type safe&lt;&#x2F;strong&gt;. I can pass in a &lt;strong&gt;character&lt;&#x2F;strong&gt; vector a
&lt;strong&gt;list&lt;&#x2F;strong&gt;, &lt;strong&gt;NULL&lt;&#x2F;strong&gt;, or even a &lt;strong&gt;POSIXct&lt;&#x2F;strong&gt; class. Sometimes R will do the
appropriate conversions for us. But other times it wont.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;scale_by&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;100&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;10&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Error in x&#x2F;y: non-numeric argument to binary operator
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;You want to be in control of your function!&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;why-type-safety-is-important&quot;&gt;Why type safety is important&lt;&#x2F;h2&gt;
&lt;p&gt;Type safety allows us to catch and prevent errors early and thus
&lt;strong&gt;prevent unintended bugs&lt;&#x2F;strong&gt;. Without type safety, R may perform silent
&lt;strong&gt;coercions&lt;&#x2F;strong&gt; or your code may run as R intended‚Äîbut not &lt;em&gt;as you&lt;&#x2F;em&gt;
intended.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;üí° A type &lt;strong&gt;coercion&lt;&#x2F;strong&gt; is a type conversion that occurs because one type
does not match the other and is done silently. &lt;strong&gt;Casting&lt;&#x2F;strong&gt; is when you
explicitly change the type‚Äîe.g.¬†calling &lt;code&gt;as.integer()&lt;&#x2F;code&gt; on &lt;code&gt;doubles()&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Adding type guarantees ensures that your code functions as intended.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;type-safety-in-other-languages&quot;&gt;Type safety in other languages&lt;&#x2F;h2&gt;
&lt;p&gt;Type safety is becoming an increasingly common and more important aspect
of programming. People love Rust for its type safety among other things.
Rust (and C&#x2F;++ and Java and Scala etc) is a &lt;strong&gt;statically typed&lt;&#x2F;strong&gt;
language.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;üí° A statically typed language requires you to specify the &lt;em&gt;type&lt;&#x2F;em&gt; of
object that are used in a function and elsewhere.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;rust-s-static-typing&quot;&gt;Rust‚Äôs static typing&lt;&#x2F;h3&gt;
&lt;p&gt;In Rust, you define a type and that type is unique.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-struct z-rust&quot;&gt;struct&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-entity z-name z-struct z-rust&quot;&gt;Person&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;name&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;age&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;u8&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To create a person you would write
&lt;code&gt;Person { name: &quot;Josiah&quot;.to_string(), age: 28 }&lt;&#x2F;code&gt; . This is recognized as
a &lt;code&gt;Person&lt;&#x2F;code&gt; struct. In Rust, a function must know its argument types, for
example:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;calculate_birth_year&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;person&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;Person&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; use chrono::DateLike
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; now &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;chrono&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;Utc&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;now&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;now&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;year&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-rust&quot;&gt;-&lt;&#x2F;span&gt; person&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;age &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;as&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This function takes a reference to a &lt;code&gt;Person&lt;&#x2F;code&gt; and calculates (roughly)
what year they were born in. If I had another struct called &lt;code&gt;Me&lt;&#x2F;code&gt; with
the same exact fields, this wouldn‚Äôt work.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-struct z-rust&quot;&gt;struct&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-entity z-name z-struct z-rust&quot;&gt;Me&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;name&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;age&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;u8&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Even though &lt;code&gt;Me&lt;&#x2F;code&gt; and &lt;code&gt;Person&lt;&#x2F;code&gt; have the exact same field types, they are
recognized as different types.&lt;&#x2F;p&gt;
&lt;p&gt;This is different than how JavaScript does this.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;typescript-interfaces&quot;&gt;TypeScript Interfaces&lt;&#x2F;h3&gt;
&lt;p&gt;The JavaScript folks now have TypeScript which is pseudo-type safety.
TypeScript uses &lt;strong&gt;duck typing.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;üí° If it looks like a duck, swims like a duck, and quacks like a duck,
this it probably &lt;em&gt;is&lt;&#x2F;em&gt; a duck.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;If I understand TypeScript correctly, they use a type &lt;strong&gt;interface.&lt;&#x2F;strong&gt;
These feel similar to struct definitions in Rust.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;tsx&quot; class=&quot;language-tsx z-code&quot;&gt;&lt;code class=&quot;language-tsx&quot; data-lang=&quot;tsx&quot;&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-interface z-tsx&quot;&gt;&lt;span class=&quot;z-storage z-type z-interface z-tsx&quot;&gt;interface&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-type z-interface z-tsx&quot;&gt;Person&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-definition z-block z-tsx&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-interface z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-field z-declaration z-tsx&quot;&gt;    &lt;span class=&quot;z-meta z-definition z-property z-tsx&quot;&gt;&lt;span class=&quot;z-variable z-object z-property z-tsx&quot;&gt;name&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-type z-annotation z-tsx&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-type z-annotation z-tsx&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-primitive z-tsx&quot;&gt;string&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-tsx&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-interface z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-field z-declaration z-tsx&quot;&gt;    &lt;span class=&quot;z-meta z-definition z-property z-tsx&quot;&gt;&lt;span class=&quot;z-variable z-object z-property z-tsx&quot;&gt;age&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-type z-annotation z-tsx&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-type z-annotation z-tsx&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-primitive z-tsx&quot;&gt;number&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-tsx&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-interface z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-block z-tsx&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In TypeScript, these interfaces are a way to standardizes what a type
&lt;em&gt;looks like&lt;&#x2F;em&gt;. But not an actual type themself! This is (I think), the
equivalent JavaScript code to calculate the birth year of an individual.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;tsx&quot; class=&quot;language-tsx z-code&quot;&gt;&lt;code class=&quot;language-tsx&quot; data-lang=&quot;tsx&quot;&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-function z-tsx&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-tsx&quot;&gt;function&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-definition z-function z-tsx&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-tsx&quot;&gt;calculateBirthYear&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-parameters z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-parameters z-begin z-tsx&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-tsx&quot;&gt;person&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-type z-annotation z-tsx&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-type z-annotation z-tsx&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-type z-tsx&quot;&gt;Person&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-parameters z-end z-tsx&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-block z-tsx&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-function z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-block z-tsx&quot;&gt;        &lt;span class=&quot;z-meta z-function-call z-tsx&quot;&gt;&lt;span class=&quot;z-support z-class z-builtin z-tsx&quot;&gt;Date&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-accessor z-tsx&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-tsx&quot;&gt;getFullYear&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-tsx&quot;&gt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-object z-tsx&quot;&gt;person&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-tsx&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-property z-tsx&quot;&gt;age&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-function z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-block z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-block z-tsx&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;With this, though, you don‚Äôt actually need to have an instance of
&lt;code&gt;Person&lt;&#x2F;code&gt; . Instead, you can have a normal JavaScript object that &lt;em&gt;looks&lt;&#x2F;em&gt;
(and quacks) just like the &lt;code&gt;Person&lt;&#x2F;code&gt; type.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;tsx&quot; class=&quot;language-tsx z-code&quot;&gt;&lt;code class=&quot;language-tsx&quot; data-lang=&quot;tsx&quot;&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-var z-expr z-tsx&quot;&gt;&lt;span class=&quot;z-storage z-type z-tsx&quot;&gt;const&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-var-single-variable z-expr z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-definition z-variable z-tsx&quot;&gt;&lt;span class=&quot;z-variable z-other z-constant z-tsx&quot;&gt;john&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-type z-annotation z-tsx&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-type z-annotation z-tsx&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-type z-tsx&quot;&gt;Person&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-tsx&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-objectliteral z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-block z-tsx&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-var z-expr z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-objectliteral z-tsx&quot;&gt;    &lt;span class=&quot;z-meta z-object z-member z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-object-literal z-key z-tsx&quot;&gt;name&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-object z-member z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-object-literal z-key z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-tsx&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-single z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-tsx&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;John Doe&lt;span class=&quot;z-punctuation z-definition z-string z-end z-tsx&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-comma z-tsx&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-var z-expr z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-objectliteral z-tsx&quot;&gt;    &lt;span class=&quot;z-meta z-object z-member z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-object-literal z-key z-tsx&quot;&gt;age&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-object z-member z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-object-literal z-key z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-tsx&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-decimal z-tsx&quot;&gt;30&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-var z-expr z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-objectliteral z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-object z-member z-tsx&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-block z-tsx&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-var z-expr z-tsx&quot;&gt;&lt;span class=&quot;z-storage z-type z-tsx&quot;&gt;let&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-var-single-variable z-expr z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-definition z-variable z-tsx&quot;&gt;&lt;span class=&quot;z-variable z-other z-readwrite z-tsx&quot;&gt;jane&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-tsx&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-objectliteral z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-block z-tsx&quot;&gt;{&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-object z-member z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-object-literal z-key z-tsx&quot;&gt;name&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-object z-member z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-object-literal z-key z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-tsx&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-single z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-tsx&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;Jane Doe&lt;span class=&quot;z-punctuation z-definition z-string z-end z-tsx&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-comma z-tsx&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-object z-member z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-object-literal z-key z-tsx&quot;&gt;age&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-object z-member z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-object-literal z-key z-tsx&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-key-value z-tsx&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-decimal z-tsx&quot;&gt;28&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-block z-tsx&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-tsx&quot;&gt;&lt;span class=&quot;z-support z-class z-console z-tsx&quot;&gt;console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-tsx&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-console z-tsx&quot;&gt;log&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-tsx&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-tsx&quot;&gt;calculateBirthYear&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-readwrite z-tsx&quot;&gt;john&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-tsx&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-tsx&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-tsx&quot;&gt;&lt;span class=&quot;z-support z-class z-console z-tsx&quot;&gt;console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-tsx&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-console z-tsx&quot;&gt;log&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-tsx&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-tsx&quot;&gt;calculateBirthYear&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-readwrite z-tsx&quot;&gt;jane&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brace z-round z-tsx&quot;&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-tsx&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;These both work.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;type-safety-in-r&quot;&gt;Type safety in R&lt;&#x2F;h2&gt;
&lt;p&gt;Like JavaScript, and Python (yes I know about type hinting, thats opt in
and different), R doesn‚Äôt do any validation of arguments. TypeScript can
add a layer of Duck Typing checks to the functions which is great for
them. But what about us?&lt;&#x2F;p&gt;
&lt;p&gt;How can we make our R functions safer? In R, (almost) everything is a
vector. The &lt;code&gt;r-lib&lt;&#x2F;code&gt; team has (very quietly) created what I think is the
greatest contribution to the tidyverse ecosystem in a long time in the
form of standalone type check functions.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;stand-alone-type-checks&quot;&gt;Stand-alone type checks&lt;&#x2F;h2&gt;
&lt;p&gt;The standalone functions are quite unique. I‚Äôve never seen anything
quite like them. They‚Äôre literally standalone R files with a bunch of
handy R functions. It‚Äôs like adding a package but without adding it as a
dependency.&lt;&#x2F;p&gt;
&lt;p&gt;These are functions prefixed with &lt;code&gt;check_&lt;&#x2F;code&gt; that test inputs for the most
common types. They provide beautiful error messages and have commonly
needed flexibility.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;add-type-checks-to-your-project&quot;&gt;Add type checks to your project&lt;&#x2F;h3&gt;
&lt;p&gt;The usethis package has a handy function &lt;code&gt;use_standalone()&lt;&#x2F;code&gt; which will
add these functions for you.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;usethis&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;use_standalone&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;r-lib&#x2F;rlang&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;file&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;types-check&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is supposed to be used in the context of an R package but can still
be used in any R script. THe function requires an R directory to be
found at the root.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;standalone-type-checks&quot;&gt;Standalone type checks&lt;&#x2F;h2&gt;
&lt;p&gt;We can get &lt;em&gt;really far&lt;&#x2F;em&gt; in enhancing type safety&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;usethis.r-lib.org&#x2F;reference&#x2F;use_standalone.html&quot;&gt;https:&#x2F;&#x2F;usethis.r-lib.org&#x2F;reference&#x2F;use_standalone.html&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Since this isn‚Äôt an R package, I will source the functions. Otherwise,
run &lt;code&gt;devtools::load_all()&lt;&#x2F;code&gt; for the functions to become available.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;getwd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;&#x2F;Users&#x2F;josiahparry&#x2F;github&#x2F;misc&#x2F;blog-zola&#x2F;content&#x2F;posts&#x2F;2024-06-30-type-safety&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;source&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;R&#x2F;import-standalone-obj-type.R&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;local&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;source&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;R&#x2F;import-standalone-types-check.R&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;local&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;alert-note&quot;&gt;
&lt;p&gt;These standalone checks require that &lt;code&gt;{rlang}&lt;&#x2F;code&gt; be an imported package.
Use &lt;code&gt;usethis::use_package(&quot;rlang&quot;)&lt;&#x2F;code&gt;. It is a very small package and has
no dependencies. Very little to lose by adding it.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;scalar-checks&quot;&gt;Scalar checks&lt;&#x2F;h2&gt;
&lt;p&gt;R doesn‚Äôt have the concept of a scalar. Though using a scalar is still
very useful in R.&lt;&#x2F;p&gt;
&lt;p&gt;The standalone checks provide helpers for checking scalar values. There
a quite a few but the ones I use most commonly are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;check_string()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;check_bool()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;check_number_whole()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;check_number_decimal()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;usage&quot;&gt;Usage&lt;&#x2F;h3&gt;
&lt;p&gt;Each of these functions provide the arguments:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;allow_na&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;allow_null&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;This is helpful because using NULL is often used as a default argument
for optional arguments.&lt;&#x2F;p&gt;
&lt;p&gt;For example we can check that something is a string:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;check_string&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;a&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;But when it is a character vector:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;check_string&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;hello&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;world&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Error:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;! `c(&amp;quot;hello&amp;quot;, &amp;quot;world&amp;quot;)` must be a single string, not a character vector.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This gives us an informative error telling the user what type was found
and expected.&lt;&#x2F;p&gt;
&lt;p&gt;In the case of &lt;code&gt;NULL&lt;&#x2F;code&gt;s we can provide the &lt;code&gt;allow_null&lt;&#x2F;code&gt; argument which
allows the test to pass.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;check_string&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-language z-r&quot;&gt;NULL&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;check_string&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-language z-r&quot;&gt;NULL&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;allow_null&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;vector-checks&quot;&gt;Vector checks&lt;&#x2F;h2&gt;
&lt;p&gt;In addition to scalar checks, there are many handy vectorized checks.&lt;&#x2F;p&gt;
&lt;p&gt;There are vector checks these are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;check_character()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;check_logical()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;check_data_frame()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;check_character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;check_logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;a&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;b&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;check_data_frame&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;a&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;b&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Error:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;! `1:2` must be a character vector, not an integer vector.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Error:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;! `c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;)` must be a logical vector, not a character vector.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Error:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;! `list(a = 1, b = 2)` must be a data frame, not a list.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Static file server in R</title>
        <published>2024-06-24T00:00:00+00:00</published>
        <updated>2024-06-24T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/file-server/"/>
        <id>https://josiah.rs/posts/file-server/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/file-server/">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.rplumber.io&#x2F;articles&#x2F;routing-and-input.html?q=upload#static-file-handler&quot;&gt;Plumber&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;ambiorix.dev&#x2F;&quot;&gt;ambiorix&lt;&#x2F;a&gt;, and
&lt;a href=&quot;https:&#x2F;&#x2F;opencpu.r-universe.dev&#x2F;opencpu&quot;&gt;opencpu&lt;&#x2F;a&gt; are the keys to
putting R into production.&lt;&#x2F;p&gt;
&lt;p&gt;Sometimes all an API needs to do is statically serve files. Making a
static file server with R is insanely easy.&lt;&#x2F;p&gt;
&lt;p&gt;For this example, I have a folder called &lt;code&gt;&#x2F;public&lt;&#x2F;code&gt; which I want to serve
files from at the API path &lt;code&gt;&#x2F;static&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;To do this we create a plumber API using the &lt;code&gt;pr_static()&lt;&#x2F;code&gt; function or
&lt;code&gt;#* @assets&lt;&#x2F;code&gt; if using the other plumber declaration format.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;making-the-file-server&quot;&gt;Making the file server&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;plumber&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;pr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;pr_static&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&#x2F;static&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;.&#x2F;public&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;pr_run&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;calling-the-file-server&quot;&gt;calling the file server&lt;&#x2F;h2&gt;
&lt;p&gt;We can call this api using a GET request:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;httr2&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;iris_csv &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;request&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;http:&#x2F;&#x2F;127.0.0.1:3000&#x2F;static&#x2F;iris.csv&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_perform&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;resp_body_string&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;readr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;read_csv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;iris_csv&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;alternative-plumber-format&quot;&gt;Alternative plumber format&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;* @assets .&#x2F;public &#x2F;static
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Caching WebR from CDN</title>
        <published>2024-06-13T00:00:00+00:00</published>
        <updated>2024-06-13T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/caching-webr/"/>
        <id>https://josiah.rs/posts/caching-webr/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/caching-webr/">&lt;p&gt;I am developing Rust bindings to &lt;a href=&quot;https:&#x2F;&#x2F;webr.r-wasm.org&#x2F;&quot;&gt;WebR&lt;&#x2F;a&gt;.
Because WebR is not compiled for WASI and only WebAssembly, native Rust
bindings are not possible. Instead, bindings are done through
&lt;a href=&quot;https:&#x2F;&#x2F;rustwasm.github.io&#x2F;docs&#x2F;wasm-bindgen&#x2F;&quot;&gt;wasm-bindgen&lt;&#x2F;a&gt; which
creates bindings to JavaScript.&lt;&#x2F;p&gt;
&lt;p&gt;The WIP Rust crate is called
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;webr-js-rs&#x2F;&quot;&gt;&lt;code&gt;webr-js-rs&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-tip&quot;&gt;
&lt;p&gt;I‚Äôm building these bindings to support
&lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;flrsh.dev&#x2F;&quot;&gt;flrsh.dev&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Sign up for an account to be notified when I launch our first course (a
deep dive on DuckDB)!&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;&lt;code&gt;webr-js-rs&lt;&#x2F;code&gt; works &lt;em&gt;only&lt;&#x2F;em&gt; on wasm targets.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-note&quot;&gt;
&lt;ul&gt;
&lt;li&gt;See &lt;a href=&quot;https:&#x2F;&#x2F;hacks.mozilla.org&#x2F;2019&#x2F;03&#x2F;standardizing-wasi-a-webassembly-system-interface&#x2F;&quot;&gt;this informative blog
post&lt;&#x2F;a&gt;
from Mozilla on what WASI is.&lt;&#x2F;li&gt;
&lt;li&gt;There is an &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;r-wasm&#x2F;webr&#x2F;issues&#x2F;166&quot;&gt;outstanding
issue&lt;&#x2F;a&gt; on the WebR GitHub.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The problem I was encountering:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;WebR wasn‚Äôt caching the binaries!&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Turns out that this is because my code had this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rs&quot; class=&quot;language-rs z-code&quot;&gt;&lt;code class=&quot;language-rs&quot; data-lang=&quot;rs&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-annotation z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-annotation z-rust&quot;&gt;#&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-annotation z-rust&quot;&gt;wasm_bindgen&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;module &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;https:&#x2F;&#x2F;webr.r-wasm.org&#x2F;latest&#x2F;webr.mjs&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;I brought this issue up in a GitHub issue.
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;georgestagg&quot;&gt;@GeorgeStagg&lt;&#x2F;a&gt; pointed out&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;‚ÄúThe webR CDN assets under &#x2F;latest&#x2F; are intentionally served with
Cache-Control: no-cache so that the latest commit is always downloaded
by the browser.‚Äù&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;This makes sense! It means since there is no cache instruction, it will
fetch the binaries every time! Instead he recommended to use a tagged
version&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;‚ÄúThe longer-term builds under e.g.¬†&#x2F;v0.3.3&#x2F; are served with the HTTP
header cache-control: max-age=604800, and so the webR assets should
automatically be &lt;strong&gt;cached by browsers for 1 week&lt;&#x2F;strong&gt;.‚Äù&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;üëÜüèº emphasis mine.&lt;&#x2F;p&gt;
&lt;p&gt;This works! So I‚Äôve changed webr-js-rs to use a fixed version.&lt;&#x2F;p&gt;
&lt;p&gt;The one challenge with this, though, is that even though the binaries
are cached, the R session will be restarted from scratch if the browser
is refreshed. So that is something I need to figure out next!&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Evaluate strings as code</title>
        <published>2024-06-13T00:00:00+00:00</published>
        <updated>2024-06-13T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/eval-strings/"/>
        <id>https://josiah.rs/posts/eval-strings/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/eval-strings/">&lt;p&gt;Prompted by a post on Mastodon, I wanted to explore how to evaluate an R
string as code.&lt;&#x2F;p&gt;
&lt;iframe src=&quot;https:&#x2F;&#x2F;mastodon.cloud&#x2F;@nxskok&#x2F;112610810465402574&#x2F;embed&quot; width=&quot;400&quot; allowfullscreen=&quot;allowfullscreen&quot; sandbox=&quot;allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-forms&quot;&gt;
&lt;&#x2F;iframe&gt;
&lt;p&gt;This is generally a pretty common pattern that I have myself encountered
in the past and had to work through a solution for‚Äîmany times.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-problem&quot;&gt;The Problem&lt;&#x2F;h2&gt;
&lt;p&gt;How can I programatically create and execute valid R code?&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-solution&quot;&gt;A solution&lt;&#x2F;h2&gt;
&lt;p&gt;In this case, the problem space is quite simple:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;given a package name and&lt;&#x2F;li&gt;
&lt;li&gt;a dataset name&lt;&#x2F;li&gt;
&lt;li&gt;extract the dataset as an object&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;You can typically extract datasets from a package‚Äôs namespace. This
looks like &lt;code&gt;{pkgname}::{dataset}&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;We can create this string simply like so:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;pkg &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;dplyr&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;dataset &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;starwars&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;dataset_str &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;paste0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;pkg&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;::&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; dataset&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;evaluating-r-code&quot;&gt;Evaluating R code&lt;&#x2F;h3&gt;
&lt;p&gt;Then, we need to be able to evaluate this code. I find
&lt;a href=&quot;https:&#x2F;&#x2F;rlang.r-lib.org&#x2F;reference&#x2F;&quot;&gt;&lt;code&gt;{rlang}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to be very handy.&lt;&#x2F;p&gt;
&lt;p&gt;To convert a string into an expression, use &lt;code&gt;rlang::parse_expr()&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;rlang&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;to_eval &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;parse_expr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dataset_str&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;to_eval
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;dplyr::starwars
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This creates a &lt;code&gt;language&lt;&#x2F;code&gt; type object.&lt;&#x2F;p&gt;
&lt;p&gt;We can now pass this into &lt;code&gt;rlang::eval_bare()&lt;&#x2F;code&gt; to evaluate the string
and run the R code and store the result into an R object.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;result &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;eval_bare&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;to_eval&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;result
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 87 √ó 14
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   name     height  mass hair_color skin_color eye_color birth_year sex   gender
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;chr&amp;gt;     &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2 C-3PO       167    75 &amp;lt;NA&amp;gt;       gold       yellow         112   none  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3 R2-D2        96    32 &amp;lt;NA&amp;gt;       white, bl‚Ä¶ red             33   none  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4 Darth V‚Ä¶    202   136 none       white      yellow          41.9 male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8 R5-D4        97    32 &amp;lt;NA&amp;gt;       white, red red             NA   none  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10 Obi-Wan‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 77 more rows
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 5 more variables: homeworld &amp;lt;chr&amp;gt;, species &amp;lt;chr&amp;gt;, films &amp;lt;list&amp;gt;,
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;#   vehicles &amp;lt;list&amp;gt;, starships &amp;lt;list&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;alternative-solution&quot;&gt;Alternative solution&lt;&#x2F;h2&gt;
&lt;p&gt;Here is an alternative solution which uses the &lt;code&gt;data()&lt;&#x2F;code&gt; function. Then,
assuming the name of the dataset is created in the environment, fetches
it using &lt;code&gt;get()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;englue&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;data({dataset}, package = &amp;#39;{pkg}&amp;#39;)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;parse_expr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;eval_bare&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;res &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;get&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dataset&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;res
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 87 √ó 14
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   name     height  mass hair_color skin_color eye_color birth_year sex   gender
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;chr&amp;gt;     &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2 C-3PO       167    75 &amp;lt;NA&amp;gt;       gold       yellow         112   none  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3 R2-D2        96    32 &amp;lt;NA&amp;gt;       white, bl‚Ä¶ red             33   none  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4 Darth V‚Ä¶    202   136 none       white      yellow          41.9 male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8 R5-D4        97    32 &amp;lt;NA&amp;gt;       white, red red             NA   none  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10 Obi-Wan‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 77 more rows
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 5 more variables: homeworld &amp;lt;chr&amp;gt;, species &amp;lt;chr&amp;gt;, films &amp;lt;list&amp;gt;,
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;#   vehicles &amp;lt;list&amp;gt;, starships &amp;lt;list&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;There are issues with this in that you can also end up overwriting
things. We can create a new environment if we‚Äôd like as well.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; create a custom environment to store stuff
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;my_env &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;env&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;englue&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;data({dataset}, package = &amp;#39;{pkg}&amp;#39;)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;parse_expr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;eval_bare&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;my_env&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; get it from the environment
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;res &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;get&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dataset&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;envir&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; my_env&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;res
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 87 √ó 14
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   name     height  mass hair_color skin_color eye_color birth_year sex   gender
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;chr&amp;gt;     &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2 C-3PO       167    75 &amp;lt;NA&amp;gt;       gold       yellow         112   none  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3 R2-D2        96    32 &amp;lt;NA&amp;gt;       white, bl‚Ä¶ red             33   none  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4 Darth V‚Ä¶    202   136 none       white      yellow          41.9 male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8 R5-D4        97    32 &amp;lt;NA&amp;gt;       white, red red             NA   none  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10 Obi-Wan‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 77 more rows
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 5 more variables: homeworld &amp;lt;chr&amp;gt;, species &amp;lt;chr&amp;gt;, films &amp;lt;list&amp;gt;,
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;#   vehicles &amp;lt;list&amp;gt;, starships &amp;lt;list&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Making a Ridiculously Fast‚Ñ¢ API Client</title>
        <published>2024-06-06T00:00:00+00:00</published>
        <updated>2024-06-06T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/designing-arcgisgeocode/"/>
        <id>https://josiah.rs/posts/designing-arcgisgeocode/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/designing-arcgisgeocode/">&lt;p&gt;I recently had the pleasure of publishing the R package
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;R-ArcGIS&#x2F;arcgisgeocode&#x2F;&quot;&gt;&lt;code&gt;{arcgisgeocode}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. It is
an R interface to the &lt;a href=&quot;https:&#x2F;&#x2F;www.esri.com&#x2F;en-us&#x2F;arcgis&#x2F;products&#x2F;arcgis-world-geocoder&quot;&gt;ArcGIS World
Geocoder&lt;&#x2F;a&gt;.
You could say it is the ‚Äúofficial‚Äù Esri geocoding R package.&lt;&#x2F;p&gt;
&lt;p&gt;To my knowledge, &lt;strong&gt;it is the fastest geocoding library available in the
R ecosystem&lt;&#x2F;strong&gt;. The ArcGIS World Geocoder is made avialable through
&lt;a href=&quot;https:&#x2F;&#x2F;jessecambon.github.io&#x2F;tidygeocoder&#x2F;&quot;&gt;&lt;code&gt;{tidygeocoder}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; as well
as &lt;a href=&quot;https:&#x2F;&#x2F;dieghernan.github.io&#x2F;arcgeocoder&#x2F;&quot;&gt;&lt;code&gt;{arcgeocoder}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;{arcgisgeocode}&lt;&#x2F;code&gt; provides the full functionality of the World Geocoder
which includes bulk geocoding functionality which the other two do not.
The other two packages provide an interface to the
&lt;a href=&quot;https:&#x2F;&#x2F;developers.arcgis.com&#x2F;rest&#x2F;geocode&#x2F;api-reference&#x2F;geocoding-find-address-candidates.htm&quot;&gt;&lt;code&gt;&#x2F;findAddressCandidates&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
and
&lt;a href=&quot;https:&#x2F;&#x2F;developers.arcgis.com&#x2F;rest&#x2F;geocode&#x2F;api-reference&#x2F;geocoding-reverse-geocode.htm&quot;&gt;&lt;code&gt;&#x2F;reverseGeocode&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
API endpoints. The former provides single address &lt;strong&gt;forward geocoding&lt;&#x2F;strong&gt;
and the latter provides &lt;strong&gt;reverse geocoding&lt;&#x2F;strong&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;{arcgisgeocode}&lt;&#x2F;code&gt; is &lt;strong&gt;~17x faster&lt;&#x2F;strong&gt; when performing single address
geocoding and &lt;strong&gt;~40x faster&lt;&#x2F;strong&gt; when performing reverse geocoding when
compared to the community counterparts. There are 2 primary reasons why
this is.&lt;&#x2F;p&gt;
&lt;p&gt;The prolific &lt;a href=&quot;https:&#x2F;&#x2F;kylebarron.dev&#x2F;&quot;&gt;Kyle Barron&lt;&#x2F;a&gt; responded to one of
my tweets a few months ago.&lt;&#x2F;p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;
&lt;p&gt;isn&#x27;t geocoding always bottlenecked by the server?&lt;&#x2F;p&gt;
&lt;&#x2F;p&gt;
&lt;p&gt;‚Äî Kyle Barron @kylebarron@mapstodon.space (@kylebarron2)
&lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;kylebarron2&#x2F;status&#x2F;1773509095024107756?ref_src=twsrc%5Etfw&quot;&gt;March
29, 2024&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;script async src=&quot;https:&#x2F;&#x2F;platform.twitter.com&#x2F;widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;&#x2F;script&gt;
&lt;p&gt;This statement is true in an aboslute sense. But then if it is only the
server that is the bottle neck, why does &lt;code&gt;{arcgisgeocode}&lt;&#x2F;code&gt; out-perform
two other packages calling &lt;strong&gt;the exact same API endpoints&lt;&#x2F;strong&gt;?&lt;&#x2F;p&gt;
&lt;p&gt;The reasons are primarily two-fold.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;json-parsing-is-slow&quot;&gt;JSON parsing is slow&lt;&#x2F;h1&gt;
&lt;p&gt;The first is that both tidygeocoder and arcgeocoder rely on
&lt;a href=&quot;https:&#x2F;&#x2F;cran.r-project.org&#x2F;web&#x2F;packages&#x2F;jsonlite&#x2F;index.html&quot;&gt;&lt;code&gt;{jsonlite}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
to both encode json and parse json. I have said it many times before and
I‚Äôll say it again‚Äîjsonlite was a revolutionary R package but it has
proven to be &lt;em&gt;slow&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The way that these API requests work is that we need to craft JSON from
R objects, inject them into our API request, and then process the JSON
that we get back from the server.&lt;&#x2F;p&gt;
&lt;p&gt;Encoding R objects as text strings is slow. Reading text and converting
them back into R objects is also slow.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;This is tangentially why Apache Arrow is so amazing. It uses the same
memory layout regardless of where you are. If we were using Arrow arrays
and the API received &lt;a href=&quot;https:&#x2F;&#x2F;arrow.apache.org&#x2F;docs&#x2F;python&#x2F;ipc.html&quot;&gt;Arrow
IPC&lt;&#x2F;a&gt; and sent Arrow IPC,
we would be able serialize and deserialize much faster!!!!&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;handling-json-with-serde&quot;&gt;Handling JSON with serde&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;docs.rs&#x2F;serde_json&quot;&gt;serde_json&lt;&#x2F;a&gt; is a Rust crate that handles
&lt;strong&gt;ser&lt;&#x2F;strong&gt;ialization and &lt;strong&gt;de&lt;&#x2F;strong&gt;serialization of Rust structs. It takes the
guess work out of encoding and decoding JSON responses because it
requires that we specify what the json will look like. &lt;code&gt;{arcgisgeocode}&lt;&#x2F;code&gt;
uses &lt;code&gt;serde_json&lt;&#x2F;code&gt; to perform JSON serialization and deserialization.&lt;&#x2F;p&gt;
&lt;p&gt;For example I have the following &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;R-ArcGIS&#x2F;arcgisgeocode&#x2F;blob&#x2F;62edfcccc572f2fa518095b2d85acc0c1d041c9c&#x2F;src&#x2F;rust&#x2F;src&#x2F;batch_geocode.rs#L26-L43&quot;&gt;struct
definition&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-struct z-rust&quot;&gt;struct&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-entity z-name z-struct z-rust&quot;&gt;Address&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;objectid&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-meta z-annotation z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-annotation z-rust&quot;&gt;#&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-annotation z-rust&quot;&gt;serde&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;rename &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;singleLine&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;single_line&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;address&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;address2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;address3&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;neighborhood&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;city&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;subregion&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;region&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;postal&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-meta z-annotation z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-annotation z-rust&quot;&gt;#&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-annotation z-rust&quot;&gt;serde&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;rename &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;postalExt&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;postal_ext&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-meta z-annotation z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-annotation z-rust&quot;&gt;#&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-annotation z-rust&quot;&gt;serde&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;rename &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;countryCode&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;country_code&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;location&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Option&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;EsriPoint&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;These struct definitions plus serde_json all coupled with the
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;extendr&#x2F;extendr&quot;&gt;&lt;code&gt;extendr&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; library means that I can
process and create JSON extremely fast!&lt;&#x2F;p&gt;
&lt;h1 id=&quot;using-a-request-pool&quot;&gt;Using a request pool&lt;&#x2F;h1&gt;
&lt;p&gt;Both &lt;code&gt;{tidygeocoder}&lt;&#x2F;code&gt; and &lt;code&gt;{arcgeocoder}&lt;&#x2F;code&gt; both use
&lt;a href=&quot;https:&#x2F;&#x2F;httr.r-lib.org&#x2F;&quot;&gt;&lt;code&gt;{httr}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; whereas &lt;code&gt;{arcgisgeocode}&lt;&#x2F;code&gt; uses
&lt;a href=&quot;https:&#x2F;&#x2F;httr2.r-lib.org&#x2F;&quot;&gt;&lt;code&gt;{httr2}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. There may be speed-ups inherent
in switching.&lt;&#x2F;p&gt;
&lt;p&gt;But the primary difference is that in &lt;code&gt;{arcgisgeocode}&lt;&#x2F;code&gt;, we use a
&lt;a href=&quot;https:&#x2F;&#x2F;httr2.r-lib.org&#x2F;reference&#x2F;req_perform_parallel.html&quot;&gt;&lt;code&gt;req_perform_parallel()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
with a small connection pool. This allows for multiple workers to be
handling requests concurrently. That means there is less time being
spent waiting for each request to be handled and then processed by our R
code.&lt;&#x2F;p&gt;
&lt;p&gt;Note that with great power comes great responsibility. Using
&lt;code&gt;req_perform_parallel()&lt;&#x2F;code&gt; without care may lead to accidentally
committing a &lt;a href=&quot;https:&#x2F;&#x2F;www.cloudflare.com&#x2F;learning&#x2F;ddos&#x2F;what-is-a-ddos-attack&#x2F;&quot;&gt;DDoS
attack&lt;&#x2F;a&gt;.
For that reason we use a conservative number of workers.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;closing-notes&quot;&gt;Closing notes&lt;&#x2F;h1&gt;
&lt;p&gt;While Kyle is correct in the absolute sense, that the bottleneck of
performance does come down to the geocoding service, it is also true
that the clients that we write to call these services might be adding
additional performance overhead.&lt;&#x2F;p&gt;
&lt;p&gt;To improve performance, I would recommend identifying the slowest part
and making it faster. In general, when it comes to API clients, this is
almost always the &lt;strong&gt;(de)serialization&lt;&#x2F;strong&gt; and the request handling.&lt;&#x2F;p&gt;
&lt;p&gt;I don‚Äôt expect everyone to learn how to write Rust. But you can make
informed decisions about what libraries you are using.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-tip&quot;&gt;
&lt;h1 id=&quot;learn-how-to-parse-json-with-rust&quot;&gt;Learn how to parse json with Rust&lt;&#x2F;h1&gt;
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;embed&#x2F;f2HfHlYQLks?si=NO5VOZRLBola3qVE&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;
&lt;&#x2F;iframe&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;If you are using &lt;code&gt;jsonlite&lt;&#x2F;code&gt; and you care about performance. Stop that. I
strongly recommend using RccpSimdJson (for parsing only), yyjson (for
both), and jsonify‚Äîin that order. You will find your code to be &lt;em&gt;much
faster&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Next, if you are making multiple requests to the same endpoint. Consider
using a small worker pool using &lt;code&gt;req_perform_parallel()&lt;&#x2F;code&gt; and then watch
how the speed improves.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>{duckdb} or {duckplyr}? </title>
        <published>2024-05-24T00:00:00+00:00</published>
        <updated>2024-05-24T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/duckdb-and-r/"/>
        <id>https://josiah.rs/posts/duckdb-and-r/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/duckdb-and-r/">&lt;p&gt;I‚Äôve been diving pretty deep into DuckDB. It has shown that it has great
utility for the vast majority of mid to large scale data analysis
tasks‚ÄîI‚Äôm talking Gigabytes not Petabytes. In particular, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krlmlr&quot;&gt;Kirill
M√ºller&lt;&#x2F;a&gt; of &lt;a href=&quot;https:&#x2F;&#x2F;cynkra.com&#x2F;&quot;&gt;Cynkra&lt;&#x2F;a&gt;, has
been doing great work in bringing DuckDB to the R community.&lt;&#x2F;p&gt;
&lt;p&gt;Today, this takes the form of two R packages:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;r.duckdb.org&#x2F;&quot;&gt;&lt;code&gt;{duckdb}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;duckdblabs.github.io&#x2F;duckplyr&#x2F;&quot;&gt;&lt;code&gt;{duckplyr}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;I think the R community would &lt;strong&gt;benefit greatly&lt;&#x2F;strong&gt; by adopting DuckDB
into their analytic workflows. It can used to make highly performant
shiny applications or just speed up your workflow.&lt;&#x2F;p&gt;
&lt;p&gt;For example, here is a demo of a Shiny application filtering, plotting,
and visualizing 4.5 million records very quickly!&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;ricochet-rs&#x2F;flrsh-lessons&#x2F;main&#x2F;duckdb-deep-dive&#x2F;project&#x2F;final-app.gif&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;y-all-keep-asking-me-duckdb-or-duckplyr&quot;&gt;Y‚Äôall keep asking me &lt;code&gt;{duckdb}&lt;&#x2F;code&gt; or &lt;code&gt;{duckplyr}&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;and before I tell you what my answer is, I‚Äôll tell you why I‚Äôm bullish
on DuckDB. I won‚Äôt ramble on details.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-tip&quot; collapse=&quot;true&quot;&gt;
&lt;h2 id=&quot;jargon-giraffe-giraffe-bullish&quot;&gt;Jargon giraffe ü¶í: bullish!&lt;&#x2F;h2&gt;
&lt;p&gt;Bullish is a term that is associated with a growing stock market. Think
of the upward motion of their horns. People who are ‚Äúbullish‚Äù would
spend more money in the stock market expecting its prices to continue to
rise and thus make more moneyyy üí∏üí∏üí∏&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;why-duckdb&quot;&gt;Why DuckDB?&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Supports &lt;strong&gt;larger-than-memory&lt;&#x2F;strong&gt; workloads&lt;&#x2F;li&gt;
&lt;li&gt;Columnar vectorized operations means &lt;strong&gt;operating only on the data you
need&lt;&#x2F;strong&gt; to and more of it and faster!&lt;&#x2F;li&gt;
&lt;li&gt;Tight &lt;a href=&quot;https:&#x2F;&#x2F;arrow.apache.org&#x2F;docs&#x2F;r&#x2F;&quot;&gt;Apache Arrow&lt;&#x2F;a&gt; integration!&lt;&#x2F;li&gt;
&lt;li&gt;Supports &lt;a href=&quot;https:&#x2F;&#x2F;substrait.io&#x2F;&quot;&gt;Substrait&lt;&#x2F;a&gt; for database agnostic
query plans&lt;&#x2F;li&gt;
&lt;li&gt;Runs in the browser (think
&lt;a href=&quot;https:&#x2F;&#x2F;shinylive.io&#x2F;r&#x2F;examples&#x2F;&quot;&gt;ShinyLive&lt;&#x2F;a&gt; + DuckDB means fast
compute all running in the browser without a Shiny server)&lt;&#x2F;li&gt;
&lt;li&gt;_ It is stupid fast_&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;my-verdict&quot;&gt;My verdict?&lt;&#x2F;h2&gt;
&lt;p&gt;The thing that is most important, in my opinion, for DuckDBs ability to
be useful to the R community is its ability to work on data that is
larger than RAM. &lt;a href=&quot;https:&#x2F;&#x2F;duckdb.org&#x2F;2024&#x2F;03&#x2F;29&#x2F;external-aggregation.html&quot;&gt;Read this awesome blog
post&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;display-1&quot;&gt;
&lt;blockquote&gt;
&lt;p&gt;Use &lt;code&gt;{duckdb}&lt;&#x2F;code&gt;!!!&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;duckplyr&quot;&gt;&lt;code&gt;{duckplyr}&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;The R package &lt;code&gt;{duckplyr}&lt;&#x2F;code&gt; is a &lt;strong&gt;drop in replacement for dplyr&lt;&#x2F;strong&gt;.
duckplyr operates only on data.frame objects and, as of today, only
works with in memory data. This means it is limited to the size of your
machine‚Äôs RAM.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;duckdb&quot;&gt;&lt;code&gt;{duckdb}&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;code&gt;{duckdb}&lt;&#x2F;code&gt;, on the other hand, is a
&lt;a href=&quot;https:&#x2F;&#x2F;dbi.r-dbi.org&#x2F;reference&#x2F;index.html&quot;&gt;&lt;code&gt;{DBI}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; extension package.
This means that you can use DBI functions to write standard SQL. But it
also means that you can use use tables in your DuckDB database with
dplyr (via dbplyr).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;{duckdb}&lt;&#x2F;code&gt; allows you to write standard dplyr code and create lazy
tables that can be combined to make even lazier code! Moreover, you can
utilize the &lt;strong&gt;out-of-core&lt;&#x2F;strong&gt; processing capabilities with DuckDB using
&lt;code&gt;{duckdb}&lt;&#x2F;code&gt; and, to me, that is the whole selling point.&lt;&#x2F;p&gt;
&lt;p&gt;If performance is your objective and you, for some reason, refuse to use
the out-of-core capabilities of DuckDB, you should just use &lt;code&gt;data.table&lt;&#x2F;code&gt;
via &lt;code&gt;dtplyr&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;getting-started-with-duckdb-r&quot;&gt;Getting started with DuckDB &amp;amp; R&lt;&#x2F;h2&gt;
&lt;p&gt;Using DuckDB as a database backend for dplyr is pretty much the same as
anything other backend you might use. Very similar code to what I‚Äôll
show you can be used to run code on Apache Spark or Postgres.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-note&quot; collapse=&quot;true&quot;&gt;
&lt;h2 id=&quot;sob-crying-just-use-postgres&quot;&gt;üò≠ * crying * just use postgres&lt;&#x2F;h2&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;
&lt;p&gt;me, sobbing: just use postgres
&lt;a href=&quot;https:&#x2F;&#x2F;t.co&#x2F;rJ4JcZJ4Zj&quot;&gt;https:&#x2F;&#x2F;t.co&#x2F;rJ4JcZJ4Zj&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;p&gt;
&lt;p&gt;‚Äî Jacob Matson (@matsonj)
&lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;matsonj&#x2F;status&#x2F;1793681468134445371?ref_src=twsrc%5Etfw&quot;&gt;May
23, 2024&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;script async src=&quot;https:&#x2F;&#x2F;platform.twitter.com&#x2F;widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;&#x2F;script&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;|Ôø£Ôø£Ôø£Ôø£Ôø£Ôø£Ôø£Ôø£Ôø£Ôø£Ôø£Ôø£Ôø£Ôø£|
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    Just use Postgres    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;|ÔºøÔºøÔºøÔºøÔºøÔºøÔºøÔºøÔºøÔºøÔºøÔºøÔºøÔºø|
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;       \ (‚Ä¢‚ó°‚Ä¢) &#x2F; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;        \     &#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;create-a-duckdb-driver&quot;&gt;Create a DuckDB driver&lt;&#x2F;h3&gt;
&lt;ol&gt;
&lt;li&gt;Load duckdb: &lt;code&gt;library(duckdb)&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Create a database driver &lt;code&gt;duckdb()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;duckdb&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Loading required package: DBI
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; This uses **in memory** database which is limited by RAM
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;drv &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;duckdb&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; this creates a persistent database which allows DuckDB to
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; perform **larger-than-memory** workloads
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;drv &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;duckdb&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;tempfile&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fileext&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;.duckdb&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;drv
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;duckdb_driver dbdir=&amp;#39;&#x2F;private&#x2F;var&#x2F;folders&#x2F;wd&#x2F;xq999jjj3bx2w8cpg7lkfxlm0000gn&#x2F;T&#x2F;RtmpUFMKNa&#x2F;file10be84c0a3ff2.duckdb&amp;#39; read_only=FALSE bigint=numeric&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;Create a database connection object&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;con &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;dbConnect&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;drv&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;con
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;duckdb_connection 4ccd0 driver=&amp;lt;duckdb_driver dbdir=&amp;#39;&#x2F;private&#x2F;var&#x2F;folders&#x2F;wd&#x2F;xq999jjj3bx2w8cpg7lkfxlm0000gn&#x2F;T&#x2F;RtmpUFMKNa&#x2F;file10be84c0a3ff2.duckdb&amp;#39; read_only=FALSE bigint=numeric&amp;gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;Import some data from somewhere&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Here we will download a medium sized csv and import it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;tmp &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;tempfile&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fileext&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;.csv&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;download.file&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;ricochet-rs&#x2F;flrsh-lessons&#x2F;main&#x2F;data&#x2F;houses1990.csv&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  tmp
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;housing &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;tbl_file&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;con&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; tmp&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;housing
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# Source:   SQL [?? x 9]
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# Database: DuckDB 1.4.1 [josiahparry@Darwin 24.0.0:R 4.6.0&#x2F;&#x2F;private&#x2F;var&#x2F;folders&#x2F;wd&#x2F;xq999jjj3bx2w8cpg7lkfxlm0000gn&#x2F;T&#x2F;RtmpUFMKNa&#x2F;file10be84c0a3ff2.duckdb]
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   houseValue income houseAge rooms bedrooms population households latitude
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;        &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;      &amp;lt;dbl&amp;gt;      &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1     452600   8.33       41   880      129        322        126     37.9
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2     358500   8.30       21  7099     1106       2401       1138     37.9
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3     352100   7.26       52  1467      190        496        177     37.8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4     341300   5.64       52  1274      235        558        219     37.8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5     342200   3.85       52  1627      280        565        259     37.8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6     269700   4.04       52   919      213        413        193     37.8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7     299200   3.66       52  2535      489       1094        514     37.8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8     241400   3.12       52  3104      687       1157        647     37.8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9     226700   2.08       42  2555      665       1206        595     37.8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10     261100   3.69       52  3549      707       1551        714     37.8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ more rows
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 1 more variable: longitude &amp;lt;dbl&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;Run some dplyr code on the table&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dplyr&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;avg_price_by_age &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; housing &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;group_by&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;houseAge&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;summarise&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;avg_val&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;mean&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;houseValue&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;show_query&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;avg_price_by_age&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;SQL&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;SELECT houseAge, AVG(houseValue) AS avg_val
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;FROM (FROM &amp;#39;&#x2F;var&#x2F;folders&#x2F;wd&#x2F;xq999jjj3bx2w8cpg7lkfxlm0000gn&#x2F;T&#x2F;&#x2F;RtmpUFMKNa&#x2F;file10be81ebf71cd.csv&amp;#39;) q01
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;GROUP BY houseAge
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ol start=&quot;6&quot;&gt;
&lt;li&gt;Bring the results into memory&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Use &lt;code&gt;dplyr::collect()&lt;&#x2F;code&gt; to bring the results into memory as an actual
tibble!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;avg_price_df &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;collect&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;avg_price_by_age&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;avg_price_df
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 52 √ó 2
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   houseAge avg_val
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;      &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1       17 190494.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2       35 207299.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3       37 207361.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4       44 216233.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5       30 200253.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6       14 189597.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7        5 208418.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8        9 186673.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9       49 220336.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10        2 224476.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 42 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Why do we sleep on factors?</title>
        <published>2024-02-15T00:00:00+00:00</published>
        <updated>2024-02-15T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/factor-finagling/"/>
        <id>https://josiah.rs/posts/factor-finagling/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/factor-finagling/">&lt;p&gt;Factors are R‚Äôs version of an enum(eration) (&lt;a href=&quot;..&#x2F;posts&#x2F;2023-11-10-enums-in-r&#x2F;index.qmd&quot;&gt;related
post&lt;&#x2F;a&gt;). They‚Äôre quite handy
and I think we can probably rely on them a bit more for enumations like
&lt;code&gt;c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)&lt;&#x2F;code&gt;. Today I‚Äôve been helping test a new possible feature
of &lt;a href=&quot;https:&#x2F;&#x2F;extendr.github.io&#x2F;&quot;&gt;&lt;code&gt;extendr&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; involving factors and it has
me thinking a bit about some behaviors. Here are my extemporaneous
thoughts:&lt;&#x2F;p&gt;
&lt;p&gt;When we have a factor, how can we get new values and associate it with
an existing factor?&lt;&#x2F;p&gt;
&lt;p&gt;For example, we can create a factor of the alphabet.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;f &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;as.factor&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-constant z-misc z-r&quot;&gt;letters&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;f
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; [1] a b c d e f g h i j k l m n o p q r s t u v w x y z
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Say we have new values that match the level names and want to extend the
vector or create a new one based on the levels.&lt;&#x2F;p&gt;
&lt;p&gt;It would be &lt;em&gt;nice&lt;&#x2F;em&gt; if we could subset a factor based on the levels name&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;f&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;a&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;lt;NA&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;but this gives us an &lt;code&gt;NA&lt;&#x2F;code&gt; because there is no named element &lt;code&gt;&quot;a&quot;&lt;&#x2F;code&gt;. If we
gave them names we could access it accordingly&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;setNames&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;f&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-constant z-misc z-r&quot;&gt;letters&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;a&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;a 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;a 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;but this would be antithetical to the efficiency of a factor.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;They key selling point of a factor is that we define the levels only
once and associate them based on integer positions. This is far far far
faster and more memory efficient than repeating a value a sh!t ton of
times.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;To create a new factor we have to pass in the levels accordingly:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;factor&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;d&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;levels&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;f&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] d
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is actually pretty nice! But I feel like there could be an even
better experience, though I don‚Äôt know what it would be‚Ä¶&lt;&#x2F;p&gt;
&lt;p&gt;If we wanted to extend the vector by combining the existing factor with
levels names we coerce to a character vector but instead of the levels
we get the integer values.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;f&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;a&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; [1] &amp;quot;1&amp;quot;  &amp;quot;2&amp;quot;  &amp;quot;3&amp;quot;  &amp;quot;4&amp;quot;  &amp;quot;5&amp;quot;  &amp;quot;6&amp;quot;  &amp;quot;7&amp;quot;  &amp;quot;8&amp;quot;  &amp;quot;9&amp;quot;  &amp;quot;10&amp;quot; &amp;quot;11&amp;quot; &amp;quot;12&amp;quot; &amp;quot;13&amp;quot; &amp;quot;14&amp;quot; &amp;quot;15&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[16] &amp;quot;16&amp;quot; &amp;quot;17&amp;quot; &amp;quot;18&amp;quot; &amp;quot;19&amp;quot; &amp;quot;20&amp;quot; &amp;quot;21&amp;quot; &amp;quot;22&amp;quot; &amp;quot;23&amp;quot; &amp;quot;24&amp;quot; &amp;quot;25&amp;quot; &amp;quot;26&amp;quot; &amp;quot;a&amp;quot; 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To combine them we would need to ensure that they are both factors.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;f&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;factor&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;d&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;levels&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;f&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; [1] a b c d e f g h i j k l m n o p q r s t u v w x y z d
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;using-vctrs&quot;&gt;Using &lt;code&gt;vctrs&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Upon further thinking, &lt;a href=&quot;https:&#x2F;&#x2F;vctrs.r-lib.org&#x2F;&quot;&gt;&lt;code&gt;vctrs&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; tends to have
the type-safe behavior that I wish from R (and aspects of it should
probably be adapted into base R).&lt;&#x2F;p&gt;
&lt;p&gt;I think vctrs gets to the behavior that I want actually. If I have a
value and I use &lt;code&gt;vctrs::vec_cast()&lt;&#x2F;code&gt; and provide the existing factor
vector &lt;code&gt;f&lt;&#x2F;code&gt; to the &lt;code&gt;to&lt;&#x2F;code&gt; argument, it will use the levels.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;vec_cast&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;z&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; f&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] z
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;But this &lt;em&gt;will not&lt;&#x2F;em&gt; succeed if we pass it a value that is unknown. The
error message is a bit cryptic and frankly feels a little pythonic in
the verbosity of the traceback! But this is type safe! And I LIKE IT!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;vec_cast&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; f&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Error:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;! Can&amp;#39;t convert from `&amp;quot;123&amp;quot;` &amp;lt;character&amp;gt; to &amp;lt;factor&amp;lt;754f0&amp;gt;&amp;gt; due to loss of generality.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚Ä¢ Locations: 1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Enums in R: towards type safe R</title>
        <published>2023-11-10T00:00:00+00:00</published>
        <updated>2023-11-10T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/enums-in-r/"/>
        <id>https://josiah.rs/posts/enums-in-r/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/enums-in-r/">&lt;p&gt;Hadley Wickham has recently dropped a new draft section of his book
&lt;a href=&quot;https:&#x2F;&#x2F;design.tidyverse.org&#x2F;&quot;&gt;Tidy Design Principles&lt;&#x2F;a&gt; on &lt;a href=&quot;https:&#x2F;&#x2F;design.tidyverse.org&#x2F;boolean-strategies.html&quot;&gt;enumerations
and their use in
R&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;In short, &lt;strong&gt;enumerations&lt;&#x2F;strong&gt; enumerate (list out) the possible values that
something might take on. In R we see this most often in function
signatures where an argument takes a scalar value but all possible
values are listed out.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;I will refer to enumerations as enums from here on.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;enums-in-r&quot;&gt;Enums in R&lt;&#x2F;h2&gt;
&lt;p&gt;A good example is the &lt;code&gt;cor()&lt;&#x2F;code&gt; function from the base package &lt;code&gt;stats&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;args&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;cor&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;function (x, y = NULL, use = &amp;quot;everything&amp;quot;, method = c(&amp;quot;pearson&amp;quot;, 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    &amp;quot;kendall&amp;quot;, &amp;quot;spearman&amp;quot;)) 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;NULL
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The possible values for &lt;code&gt;method&lt;&#x2F;code&gt; are &lt;code&gt;&quot;pearson&quot;&lt;&#x2F;code&gt;, &lt;code&gt;&quot;kendall&quot;&lt;&#x2F;code&gt;, or
&lt;code&gt;&quot;spearman&quot;&lt;&#x2F;code&gt; but all values are listed inside of the function
definition.&lt;&#x2F;p&gt;
&lt;p&gt;Inside of the function, though, &lt;code&gt;match.arg(method)&lt;&#x2F;code&gt; is used to ensure
that the provided value to the &lt;code&gt;method&lt;&#x2F;code&gt; argument is one of the provided
values.&lt;&#x2F;p&gt;
&lt;p&gt;Hadley makes the argument that we should prefer an enumeration to a
boolean flag such as &lt;code&gt;TRUE&lt;&#x2F;code&gt; or &lt;code&gt;FALSE&lt;&#x2F;code&gt;. I agree!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;a-real-world-example&quot;&gt;A real world example&lt;&#x2F;h3&gt;
&lt;p&gt;A post on mastodon makes a point that the function &lt;code&gt;sf::st_make_grid()&lt;&#x2F;code&gt;
has an argument &lt;code&gt;square = TRUE&lt;&#x2F;code&gt; where when set to &lt;code&gt;FALSE&lt;&#x2F;code&gt; hexagons are
returned.&lt;&#x2F;p&gt;
&lt;iframe src=&quot;https:&#x2F;&#x2F;mastodon.social&#x2F;@eliocamp&#x2F;111387155503851033&#x2F;embed&quot; width=&quot;100%&quot; height=&quot;300px&quot; allowfullscreen=&quot;allowfullscreen&quot; sandbox=&quot;allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-forms&quot;&gt;
&lt;&#x2F;iframe&gt;
&lt;p&gt;In this case, it‚Äôs very clear that an enum would be better! For example
we can improve the signature like so:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;st_make_grid&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;grid_shape&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;square&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;hexagon&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;...&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; ensure only one of the provided grid shapes are used
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;match.arg&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;grid_shape&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; ... rest of function 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;enums-in-rust&quot;&gt;Enums in Rust&lt;&#x2F;h2&gt;
&lt;p&gt;When I first started using rust enums made no sense to me. In Rust,
enums are a first class citizen that are treated as their own &lt;em&gt;thing&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;I‚Äôm not really sure what to call &lt;em&gt;things&lt;&#x2F;em&gt; in Rust. Are they all objects?&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We make them by defining the name of the enum and the &lt;em&gt;&lt;strong&gt;variants&lt;&#x2F;strong&gt;&lt;&#x2F;em&gt;
they may take on.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-enum z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-enum z-rust&quot;&gt;enum&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-enum z-rust&quot;&gt;GridShape&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-enum z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;  Square&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-enum z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;  Hexagon
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-enum z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now you can use this enum &lt;code&gt;GridShape&lt;&#x2F;code&gt; to specify one of two types:
&lt;code&gt;Square&lt;&#x2F;code&gt; or &lt;code&gt;Hexagon&lt;&#x2F;code&gt;. Syntactically, this is written
&lt;code&gt;GridShape::Square&lt;&#x2F;code&gt; and &lt;code&gt;GridShape::Hexagon&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Enums are very nice because we can match on the variants and do
different things based on them. For example we can have a function like
so:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;which_shape&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; GridShape&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;match&lt;&#x2F;span&gt; x &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;GridShape&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Square &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;=&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;println!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;We have a square!&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;GridShape&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Hexagon &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;=&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;println!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Hexagons are the bestagons&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;It takes an argument &lt;code&gt;x&lt;&#x2F;code&gt; which is a &lt;code&gt;GridShape&lt;&#x2F;code&gt; enum. We
&lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;book&#x2F;ch06-02-match.html&quot;&gt;match&lt;&#x2F;a&gt; on the
possible variants and then &lt;em&gt;do something&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Inside of the match statement each of the possible variants of the enum
have to be written out. These are called &lt;strong&gt;match arms&lt;&#x2F;strong&gt;. The left side
lists the variant where as the right portion (after &lt;code&gt;=&amp;gt;&lt;&#x2F;code&gt;) indicates what
will be executed if the left side is matched (essentially if the
condition is true).&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;With this function we can pass in specific variants and get different
behavior.&lt;&#x2F;p&gt;
&lt;div class=&quot;panel-tabset&quot;&gt;
&lt;h2 id=&quot;gridshape-hexagon&quot;&gt;GridShape::Hexagon&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;which_shape&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;GridShape&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Hexagon&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;#&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-comparison z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; Hexagons are the bestagons
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;gridshape-square&quot;&gt;GridShape::Square&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;which_shape&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;GridShape&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Square&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;#&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-comparison z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; We have a square&lt;span class=&quot;z-keyword z-operator z-logical z-rust&quot;&gt;!&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;making-an-s7-enum-object-in-r&quot;&gt;Making an S7 enum object in R&lt;&#x2F;h2&gt;
&lt;p&gt;I think R would benefit from having a &lt;em&gt;‚Äúreal‚Äù&lt;&#x2F;em&gt; enum type object. Having
a character vector of valid variants and checking against them using
&lt;code&gt;match.arg()&lt;&#x2F;code&gt; or &lt;code&gt;rlang::arg_match()&lt;&#x2F;code&gt; is great but I think we can go
further.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Since learning Rust, I think having more strictness can make our code
much better and more robust. I think adding enums would be a good step
towards that&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;I‚Äôve prototyped an &lt;code&gt;Enum&lt;&#x2F;code&gt; type in R using the new &lt;code&gt;S7&lt;&#x2F;code&gt; object system
that might point us towards what an enum object in the future might look
like for R users.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;design-of-an-enum&quot;&gt;Design of an Enum&lt;&#x2F;h3&gt;
&lt;p&gt;For an enum we need to know what the valid &lt;strong&gt;variants&lt;&#x2F;strong&gt; are and what the
current &lt;strong&gt;value&lt;&#x2F;strong&gt; of the enum is. These would be the two properties.&lt;&#x2F;p&gt;
&lt;p&gt;An enum S7 object must also make sure that a value of an Enum is one of
the valid variants. Using the &lt;code&gt;GridShape&lt;&#x2F;code&gt; enum the valid variants would
be &lt;code&gt;&quot;Square&quot;&lt;&#x2F;code&gt; and &lt;code&gt;&quot;Hexagon&quot;&lt;&#x2F;code&gt;. A GridShape enum could not take, for
example, &lt;code&gt;&quot;Circle&quot;&lt;&#x2F;code&gt; since it is not a listed variant.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;using-an-abstract-class&quot;&gt;Using an abstract class&lt;&#x2F;h3&gt;
&lt;p&gt;To start, we will create an abstract S7 class called &lt;code&gt;Enum&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&quot;_an abstract class is a generic class (or type of object) used as a
basis for creating specific objects that conform to its protocol, or
the set of operations it supports‚Äù ‚Äî
&lt;a href=&quot;https:&#x2F;&#x2F;www.techopedia.com&#x2F;definition&#x2F;17408&#x2F;abstract-class&quot;&gt;Source&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;The &lt;code&gt;Enum&lt;&#x2F;code&gt; class will be used to create other &lt;code&gt;Enum&lt;&#x2F;code&gt; objects.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;S7&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; create a new Enum abstract class
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;Enum &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Enum&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;properties&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;Value&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; class_character&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;Variants&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; class_character
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;validator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;length&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;self&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;@&lt;&#x2F;span&gt;Value&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-r&quot;&gt;1&lt;span class=&quot;z-storage z-type z-numeric z-r&quot;&gt;L&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;enum value&amp;#39;s are length 1&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-control z-conditional z-else z-r&quot;&gt;else&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;self&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;@&lt;&#x2F;span&gt;Value &lt;span class=&quot;z-keyword z-operator z-other z-r&quot;&gt;%in%&lt;&#x2F;span&gt; self&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;@&lt;&#x2F;span&gt;Variants&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;enum value must be one of possible variants&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;abstract&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this code chunk we specify that there are 2 properties: &lt;code&gt;Value&lt;&#x2F;code&gt; and
&lt;code&gt;Variant&lt;&#x2F;code&gt; each must be a character type. &lt;code&gt;Value&lt;&#x2F;code&gt; will be the value of
the enum. It would be the right hand side of &lt;code&gt;GridShape::Square&lt;&#x2F;code&gt; in
Rust‚Äôs enum, for example. &lt;code&gt;Variants&lt;&#x2F;code&gt; is a character vector of all of the
possible values it may be able to take on. The validator ensures that
&lt;code&gt;Value&lt;&#x2F;code&gt; must only have 1 value. It also ensures that &lt;code&gt;Value&lt;&#x2F;code&gt; is one of
the enumerated &lt;code&gt;Variants&lt;&#x2F;code&gt;. This &lt;code&gt;Enum&lt;&#x2F;code&gt; class will be used to generate
other enums and cannot be instantiated by itself.&lt;&#x2F;p&gt;
&lt;p&gt;We can create a new enum factory function with the arguments:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;enum_class&lt;&#x2F;code&gt; the class of the enum we are creating&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;variants&lt;&#x2F;code&gt; a character vector of the valid variant values&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; create a new enum constructor 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;new_enum_class&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;enum_class&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;variants&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    enum_class&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;parent&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; Enum&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;properties&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;Value&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; class_character&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;Variants&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_property&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;class_character&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;default&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; variants&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;constructor&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;Value&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_object&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;S7_object&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;Value&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; Value&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;Variants&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; variants&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Note that the &lt;code&gt;constructor&lt;&#x2F;code&gt; here only takes a &lt;code&gt;Value&lt;&#x2F;code&gt; argument. We do
this so that users cannot circumvent the pre-defined &lt;strong&gt;variants&lt;&#x2F;strong&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;With this we can now create a &lt;code&gt;GridShape&lt;&#x2F;code&gt; enum in R!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;GridShape &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_enum_class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;GridShape&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Square&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Hexagon&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;GridShape
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;GridShape&amp;gt; class
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;@ parent     : &amp;lt;Enum&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;@ constructor: function(Value) {...}
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;@ validator  : &amp;lt;NULL&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;@ properties :
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; $ Value   : &amp;lt;character&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; $ Variants: &amp;lt;character&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This new object will construct new &lt;code&gt;GridShape&lt;&#x2F;code&gt; enums for us.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;GridShape&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Square&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;GridShape&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ Value   : chr &amp;quot;Square&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; @ Variants: chr [1:2] &amp;quot;Square&amp;quot; &amp;quot;Hexagon&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When we try to create a GridShape that is not one of the valid variants
we will get an error.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;GridShape&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Triangle&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Error: &amp;lt;GridShape&amp;gt; object is invalid:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;- enum value must be one of possible variants
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;making-a-print-method&quot;&gt;Making a print method&lt;&#x2F;h3&gt;
&lt;p&gt;For fun, I would like &lt;code&gt;Enum&lt;&#x2F;code&gt; objects to print like how I would use them
in Rust. To do this we can create a custom print method&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; print method for enums
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; since this is an abstract class we get the first class (super)
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; to print
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;print.Enum&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;...&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;cat&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;::&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; x&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;@&lt;&#x2F;span&gt;Value&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;sep&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;invisible&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Since &lt;code&gt;Enum&lt;&#x2F;code&gt;s will only ever be a sub-class we can confidently grab the
first element of the &lt;code&gt;class(enum_obj)&lt;&#x2F;code&gt; which is the super-class of the
enum. We paste that together with the value of the enum.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;square  &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;GridShape&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Square&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;square
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;GridShape::Square
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;drawing-even-more-from-rust&quot;&gt;Drawing even more from Rust&lt;&#x2F;h2&gt;
&lt;p&gt;Rust enums are even more powerful than what I briefly introduced. Each
variant of an enum can actually be &lt;em&gt;typed&lt;&#x2F;em&gt;!!! Take a look at the example
from &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;book&#x2F;ch06-01-defining-an-enum.html&quot;&gt;The
Book‚Ñ¢&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-enum z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-enum z-rust&quot;&gt;enum&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-enum z-rust&quot;&gt;Message&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-enum z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    Quit&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-enum z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    Move &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; y&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-enum z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    Write&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-enum z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    ChangeColor&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;i32&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-enum z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this enum there are 4 variants. The first &lt;code&gt;Quit&lt;&#x2F;code&gt; doesn‚Äôt have any
associated data with it. But the other three do! The second one &lt;code&gt;Move&lt;&#x2F;code&gt;
has two fields &lt;code&gt;x&lt;&#x2F;code&gt; and &lt;code&gt;y&lt;&#x2F;code&gt; which contain integer values. &lt;code&gt;Write&lt;&#x2F;code&gt; is a
tuple with a string in it and &lt;code&gt;ChangeColor&lt;&#x2F;code&gt; has 3 integer values in its
tuple. These can be extracted.&lt;&#x2F;p&gt;
&lt;p&gt;A silly example function that illustrates how each value can be used can
be&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;which_msg&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; Message&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-rust&quot;&gt;match&lt;&#x2F;span&gt; x &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;Message&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Quit &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;=&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;println!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;I&amp;#39;m a quitter&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;Message&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Move &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; y &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;=&amp;gt;&lt;&#x2F;span&gt;  &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;println!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Move over &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{x}&lt;&#x2F;span&gt; and up &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{y}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;Message&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;Write&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;msg&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;=&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;println!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;your message is: &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{msg}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-meta z-path z-rust&quot;&gt;Message&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;ChangeColor&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;r&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; g&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; b&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;=&amp;gt;&lt;&#x2F;span&gt;  &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;println!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Your RGB (&lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{r}&lt;&#x2F;span&gt;, &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{g}&lt;&#x2F;span&gt;, &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{b}&lt;&#x2F;span&gt;)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When a variant with data is passed in the values can be used. For
example&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;which_msg&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-path z-rust&quot;&gt;Message&lt;span class=&quot;z-punctuation z-accessor z-rust&quot;&gt;::&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;ChangeColor&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;155&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;200&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;#&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-comparison z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; Your &lt;span class=&quot;z-constant z-other z-rust&quot;&gt;RGB&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;155&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;200&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;extending-it-to-r&quot;&gt;Extending it to R&lt;&#x2F;h3&gt;
&lt;p&gt;What would this look like if we extended it to an R based enum object? I
suspect the &lt;code&gt;Variants&lt;&#x2F;code&gt; would be a list of prototypes such as those from
&lt;a href=&quot;https:&#x2F;&#x2F;vctrs.r-lib.org&#x2F;&quot;&gt;&lt;code&gt;{vctrs}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. The &lt;code&gt;Value&lt;&#x2F;code&gt; would have to be
validated against all of the provided prototypes to ensure that it is
one of the provided types.&lt;&#x2F;p&gt;
&lt;p&gt;I‚Äôm not sure how I would code this up, but I think that would be a great
thing to have.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Where am I in the sky?</title>
        <published>2023-10-28T00:00:00+00:00</published>
        <updated>2023-10-28T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/2023-10-28/"/>
        <id>https://josiah.rs/posts/2023-10-28/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/2023-10-28/">&lt;p&gt;When I was flying back from the Spatial Data Science Across Langauge
event from Frankfurt to Atlanta the plane I was bored beyond measure.
The plane had no wifi to connect to. I had already watched a movie and
couldn‚Äôt be bothered by a podcast. I wanted to know where I was.&lt;&#x2F;p&gt;
&lt;p&gt;When looking at the onboard ‚ÄúAbout this flight‚Äù information, they didn‚Äôt
show a map even. The gave us our coordinates in degrees and minutes.
Helpful right?&lt;&#x2F;p&gt;
&lt;p&gt;Well, in an attempt to figure out where the hell I was I wrote some
code. Here it is.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sf&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Linking to GEOS 3.13.0, GDAL 3.8.5, PROJ 9.5.1; sf_use_s2() is TRUE
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;units&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;udunits database from &#x2F;Library&#x2F;Frameworks&#x2F;R.framework&#x2F;Versions&#x2F;4.6-arm64&#x2F;Resources&#x2F;library&#x2F;units&#x2F;share&#x2F;udunits&#x2F;udunits2.xml
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-roxygen z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&amp;#39;&lt;&#x2F;span&gt; Given degrees and minutes calculate the coordinate
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-roxygen z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&amp;#39;&lt;&#x2F;span&gt; in degrees
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;as_degree&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;degrees&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;minutes&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  d &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;set_units&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;degrees&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;arc_degrees&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  m &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;set_units&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;minutes&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;arc_minutes&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;set_units&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;arc_degrees&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  d &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt; m
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; get the country shapes
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;x &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; rnaturalearthdata&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;countries50 &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_as_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; filter to North America
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;usa &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; x &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  dplyr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;filter&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;continent &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;==&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;North America&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;                subregion &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;==&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Northern America&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_geometry&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; Create a bounding box to crop myself to 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;crp &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_bbox&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;xmin&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;-&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;128&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;xmax&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;ymin&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;18&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;ymax&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;61&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; plot N. America
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;usa &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_cast&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;POLYGON&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_as_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_filter&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_as_sfc&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;crp&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_as_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;crs&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_crs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;usa&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;plot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; add planes location.
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;plot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_point&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;-&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;as_degree&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;61&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;19&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;as_degree&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;57&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;46&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;add&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;col&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;red&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;pch&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;16&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;2023-10-28&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-1-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Export Python functions in R packages</title>
        <published>2023-10-28T00:00:00+00:00</published>
        <updated>2023-10-28T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/python-fns/"/>
        <id>https://josiah.rs/posts/python-fns/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/python-fns/">&lt;p&gt;I was asked a really interesting question by
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;benyamindsmith&quot;&gt;@benyamindsmith&lt;&#x2F;a&gt; yesterday. The
question was essentially:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;How can one export a python üêç function in an R package üì¶?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;I proposed my solution as a very minimal R package called
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;pyfns&quot;&gt;&lt;code&gt;{pyfns}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;It is an R package with one function: &lt;code&gt;hello_world()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;how-it-works&quot;&gt;How it works&lt;&#x2F;h2&gt;
&lt;p&gt;The process is &lt;em&gt;fairly&lt;&#x2F;em&gt; simple.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;We create an environment inside of our package&lt;&#x2F;li&gt;
&lt;li&gt;On package start-up we source python scripts using
&lt;code&gt;reticulate::source_python()&lt;&#x2F;code&gt; into the new environment&lt;&#x2F;li&gt;
&lt;li&gt;We create R wrapper functions that call the reticulated function.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Example usage:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;pyfns&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;hello_world&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;Helloooo world&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;storing-python-scripts&quot;&gt;Storing Python Scripts&lt;&#x2F;h2&gt;
&lt;p&gt;Store python scripts inside of &lt;code&gt;inst&#x2F;&lt;&#x2F;code&gt;. These files can be read using
&lt;code&gt;system.file()&lt;&#x2F;code&gt;. In this example &lt;code&gt;inst&#x2F;helloworld.py&lt;&#x2F;code&gt; contains&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;py&quot; class=&quot;language-py z-code&quot;&gt;&lt;code class=&quot;language-py&quot; data-lang=&quot;py&quot;&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function z-python&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-python&quot;&gt;&lt;span class=&quot;z-keyword z-declaration z-function z-python&quot;&gt;def&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;hello_world&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-function z-begin z-python&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-flow z-return z-python&quot;&gt;return&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;Helloooo world&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;creating-an-environment&quot;&gt;Creating an environment&lt;&#x2F;h2&gt;
&lt;p&gt;Before we can source python scripts, we must create an environment to
soure them into. This is done in &lt;code&gt;R&#x2F;env.R&lt;&#x2F;code&gt; like so&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;pyfn_env &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; rlang&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;env&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;sourcing-scripts&quot;&gt;Sourcing scripts&lt;&#x2F;h2&gt;
&lt;p&gt;Scripts are sourced in &lt;code&gt;R&#x2F;zzz.R&lt;&#x2F;code&gt; in which there is an &lt;code&gt;.onLoad()&lt;&#x2F;code&gt;
function call. This gets called only once when the package is loaded.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;.onLoad&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;libname&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;pkgname&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  reticulate&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;source_python&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;system.file&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;helloworld.py&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;package&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;pyfns&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;envir&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; pyfn_env
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this chunk we use &lt;code&gt;reticulate::source_python()&lt;&#x2F;code&gt; to bring the python
function into scope. The function needs a path to the python script that
we want to source. This is where &lt;code&gt;system.file()&lt;&#x2F;code&gt; comes into play. It can
access files stored in &lt;code&gt;inst&lt;&#x2F;code&gt;. &lt;em&gt;Note that it does not include &lt;code&gt;inst&lt;&#x2F;code&gt;&lt;&#x2F;em&gt;.
And most importantly we set &lt;code&gt;envir = pyfn_env&lt;&#x2F;code&gt; which is the environment
we created in &lt;code&gt;R&#x2F;env.R&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;wrapper-functions&quot;&gt;Wrapper functions&lt;&#x2F;h2&gt;
&lt;p&gt;Since the functions are being sourced into &lt;code&gt;pyfn_env&lt;&#x2F;code&gt; they can be called
from the environment directly. In &lt;code&gt;R&#x2F;env.R&lt;&#x2F;code&gt;, the R function
&lt;code&gt;hello_world()&lt;&#x2F;code&gt; is just calling the &lt;code&gt;hello_world()&lt;&#x2F;code&gt; python function from
the &lt;code&gt;pyfn_env&lt;&#x2F;code&gt;. If there were arguments we can pass them in using &lt;code&gt;...&lt;&#x2F;code&gt;
in the outer function or recreating the same function arguments.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-roxygen z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;@export&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;hello_world&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  pyfn_env&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;hello_world&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Spatial Data Science Across Languages</title>
        <published>2023-09-22T00:00:00+00:00</published>
        <updated>2023-09-22T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/sdsl/"/>
        <id>https://josiah.rs/posts/sdsl/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/sdsl/">&lt;p&gt;I feel very fortunate to have been invited to the first Spatial Data
Science Across Languages (SDSL) workshop at the University of M√ºnster. I
am even more fortunate that I have an employer who sees the value in an
event such as this and be my patron for it.&lt;&#x2F;p&gt;
&lt;p&gt;The event brought together package maintainers from Julia, Python, and R
languages to just &lt;em&gt;discuss&lt;&#x2F;em&gt;. The event was loosely framed around a few
broad discussion topics that were varied and drifted.&lt;&#x2F;p&gt;
&lt;p&gt;In general, the theme of the workshop was ‚Äústandards.‚Äù We need standards
be able to ensure cohesion not only &lt;em&gt;within&lt;&#x2F;em&gt; languages, but across them.
Users should be able to move between languages and be able to expect
similar behavior, have similar terminology, and expect the same analysis
results.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;arrow&quot;&gt;Arrow&lt;&#x2F;h2&gt;
&lt;p&gt;We started everything off by discussing Arrow which set the theme of
‚Äústandards.‚Äù Arrow gets conflated at many thing all at once‚ÄîI do that.
At the core Arrow is a memory format specification. It describes how
data should be held in memory.&lt;&#x2F;p&gt;
&lt;p&gt;R holds objects in memory one way, Python another, and Julia another as
well. Arrow describes just one way that specific types of object can be
held in memory. GeoArrow is an extension of Arrow that specifies the
memory layout for geometry arrays.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;geoarrow&quot;&gt;GeoArrow&lt;&#x2F;h3&gt;
&lt;p&gt;Specifications like well-known text (WKT) and well-known binary (WKB)
are encodings of a &lt;em&gt;single&lt;&#x2F;em&gt; geometry. GeoArrow recognizes that we almost
never work with scalar objects alone. GeoArrow is a memory layout for an
array of geometries.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;sdsl&#x2F;image.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;If each language can hold Arrow arrays in memory, they can be passed
from one tool to another with 0 cost. Python can create an arrow array
and R can pick it up if it knows where it exists.&lt;&#x2F;p&gt;
&lt;p&gt;The current approach looks something like this. Each tool serializes its
data in one way. In order for another tool to use it, the data needs to
be copied (memory inefficient) and converted (computationally expensive)
into the appropriate format.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Maybe we ought to start framing adoption of Arrow as an effort to be
more ‚Äúgreen.‚Äù If we spend less time computing we use less energy which
is overall a net positive for the world.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;sdsl&#x2F;image-2.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The Arrow specification would allow data handoff between tools to be
much more seamless and look like so:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;sdsl&#x2F;image-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This is a massive productivity improvement. There‚Äôs no computation cost
in converting between one format to another saving time, energy, and
money.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;There‚Äôs a good chance that in order to adopt Arrow in &lt;code&gt;{sf}&lt;&#x2F;code&gt; there will
be breaking changes. I am an advocate for breaking changes when they are
for a good reason. Being on the leading edge is how to make a language
succeed.&lt;&#x2F;p&gt;
&lt;p&gt;I also think if we can move towards a ‚Äútrait-driven‚Äù approach to spatial
data frames, we can support both GeoArrow geometries as well as current
&lt;code&gt;sfc&lt;&#x2F;code&gt; objects.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;sdf&quot;&gt;Read my spatial data frame
manifesto.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The key thing though, is that in order for Arrow to be useful, &lt;strong&gt;it has
to be adopted widely&lt;&#x2F;strong&gt;. If GeoPandas uses Arrow and &lt;code&gt;{sf}&lt;&#x2F;code&gt; does not, we
have to go through the copy and convert process anyways.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;why-geoarrow-excites-me&quot;&gt;Why GeoArrow excites me&lt;&#x2F;h3&gt;
&lt;p&gt;The promise of Arrow and GeoArrow is that memory can be handed off
between tools without any additional cost. This (in theory) lowers the
bar for what is needed to hand off between tools and languages.
Hopefully &lt;a href=&quot;https:&#x2F;&#x2F;wesmckinney.com&#x2F;blog&#x2F;the-problem-with-the-data-science-language-wars&#x2F;&quot;&gt;ending the language
wars&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kylebarron&quot;&gt;Kyle Barron&lt;&#x2F;a&gt; demonstrated really cool
example use-case where he created GeoArrow arrays using
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;geopolars&#x2F;geopolars&quot;&gt;GeoPolars&lt;&#x2F;a&gt;. That array was then
written to a buffer and picked up by javascript. Since there was no
serialization or deserialization it was unbelievably fast!&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;sdsl&#x2F;image-3.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, we are seeing &lt;a href=&quot;https:&#x2F;&#x2F;webassembly.org&#x2F;&quot;&gt;WebAssembly&lt;&#x2F;a&gt;
proliferate in the data science community.
&lt;a href=&quot;https:&#x2F;&#x2F;webr.r-wasm.org&#x2F;&quot;&gt;WebR&lt;&#x2F;a&gt; provides R users with the ability to
execute R in the browser. This is also possible in Python, Rust, Go, and
I‚Äôm sure many others. Each language can be compiled to be used in the
browser and hand off components between them.&lt;&#x2F;p&gt;
&lt;p&gt;Client side computation will reduce the need for server side operations.
If we can reduce the amount of hours that servers are constantly running
by offloading lighter operations into the browser, we may be able to
save money, energy, be more green, and create tools that do not
necessarily require an active internet connection.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;spatial-support&quot;&gt;Spatial Support&lt;&#x2F;h2&gt;
&lt;p&gt;We also discussed the more esoteric topic of &lt;strong&gt;spatial support&lt;&#x2F;strong&gt;. This
was completely new to me. Support defines the relationship between an
attribute to the geometry. There are two kinds:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;point support&lt;&#x2F;strong&gt; - a constant values associated with every location
in a geometry
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;example&lt;&#x2F;em&gt;: temperature measurement at a weather station&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;block support&lt;&#x2F;strong&gt; - a value derived from aggregating measures over
space
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;example&lt;&#x2F;em&gt;: population count in a census tract&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;div class=&quot;alert-tip&quot;&gt;
&lt;p&gt;Read &lt;a href=&quot;https:&#x2F;&#x2F;r-spatial.org&#x2F;book&#x2F;01-hello.html#sec-support&quot;&gt;chapter 1.6 of Spatial Data
Science&lt;&#x2F;a&gt; (SDS) for
more on this topic.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;When geometries are manipulated and the associated attributes come along
for the ride, support assumptions are often violated resulting in
inaccurate calculations or maps.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;attribute-geometry-relationships&quot;&gt;Attribute-Geometry Relationships&lt;&#x2F;h3&gt;
&lt;p&gt;SDS formalizes the relationship between attributes and geometry a bit
further in something they call the &lt;strong&gt;Attribute-Geometry Relationship
(AGR)&lt;&#x2F;strong&gt;. Attributes of spatial features can have one of 3 types of AGR:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;constant value (i.e.¬†point support)&lt;&#x2F;li&gt;
&lt;li&gt;aggregate value (i.e.¬†block support)&lt;&#x2F;li&gt;
&lt;li&gt;identity (i.e.¬†attribute unique to a geometry)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Knowing the relationships between geometries can be useful in tracking
the assumptions of analyses. For example, taking the mean of an
&lt;em&gt;aggregate&lt;&#x2F;em&gt; attribute such as median age, creates as assumptions of
homogeneity in the aggregated areas and can contribute to the
&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Modifiable_areal_unit_problem&quot;&gt;modifiable areal unit problem
(MAUP)&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;intensive-vs-extensive&quot;&gt;Intensive vs Extensive&lt;&#x2F;h3&gt;
&lt;p&gt;Spatial intensive vs extensive variables were also discussed in the
context of spatial interpolation. I‚Äôm still quite unclear on how to
conceptualize intensive and extensive variables. &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;MobiTobi&quot;&gt;Tobias
G&lt;&#x2F;a&gt; pointed out that these terms come from
physics and provided a useful non-geometry motivating example.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;‚ÄúThe price of an ingot of gold is an extensive property and its
temperature would be intensive.‚Äù&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;The common example is that population is extensive and population
density is intensive. This requires the assumption that population is
&lt;em&gt;constant&lt;&#x2F;em&gt; across space. So the examples are more confusing than
helpful. I have yet to come up with an example of a spatially intensive
variable that makes sense.&lt;&#x2F;p&gt;
&lt;p&gt;If you can think of one, please comment on below!&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;&lt;strong&gt;Extensive&lt;&#x2F;strong&gt; variables are one that are associated with the physical
geometry itself. &lt;strong&gt;Intensive&lt;&#x2F;strong&gt; ones &lt;em&gt;do not&lt;&#x2F;em&gt; change when a geometry is
modified.&lt;&#x2F;p&gt;
&lt;p&gt;If an ingot of gold is split into half the price changes, each piece is
now worth less than the whole. But, assuming the room temperature didn‚Äôt
change, the temperature of each piece remained the same.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;domains&quot;&gt;Domains&lt;&#x2F;h3&gt;
&lt;p&gt;These properties of attributes are quite important but are forgotten
about. One of the ideas raised in discussions was adding
attribute-geometry relationship and a flag like &lt;code&gt;is_intensive&lt;&#x2F;code&gt; to a
field domain.&lt;&#x2F;p&gt;
&lt;p&gt;A
&lt;a href=&quot;https:&#x2F;&#x2F;desktop.arcgis.com&#x2F;en&#x2F;arcmap&#x2F;latest&#x2F;manage-data&#x2F;geodatabases&#x2F;an-overview-of-attribute-domains.htm&quot;&gt;Domain&lt;&#x2F;a&gt;
is a concept that &lt;em&gt;I think&lt;&#x2F;em&gt; originated at Esri. It allows you to specify
the field type, range of valid values, as well as policies that
determine how fields behave when they are split or merged. &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;OSGeo&#x2F;gdal&#x2F;releases&#x2F;tag&#x2F;v3.3.0&quot;&gt;Field
domains were added to GDAL in version
3.3&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Is there utility in adding &lt;code&gt;AGR&lt;&#x2F;code&gt; and (ex&#x2F;in)tensive flags to a field
domain?&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Arrow allows for embedded metadata at an array and table level. Perhaps
there should be a GeoArrow table (data frame) format spec too? I‚Äôd like
that. It would fit with my generic spatial data frame manifesto as well.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;geodesic-first&quot;&gt;Geodesic first&lt;&#x2F;h2&gt;
&lt;p&gt;A good amount of attention was paid to geodesic coordinate operations.
The conversation was kicked off by this ‚Äúmotivating example.‚Äù&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;sdsl&#x2F;geopandas-geodesic.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Really, I think this was just an excuse for Edzer to poke fun at the
GeoPandas devs! üòµ‚Äçüí´ü§£&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The example shows an area calculation on a dataset that uses a
geographic coordinate system (GCS). Area, though, is typically
calculated under the assumption that coordinates are on a plane
(rectangle). With GCS, the data is on a circle. So if we calculate the
area of angles the result is &lt;em&gt;definitely wrong&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;I think about it like calculating the area but cutting through the Earth
like so: &lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;sdsl&#x2F;circle.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The open source ecosystem is behind on support of geodetic calculations.
Data more often than not is captured using GCS and users often fail to
project their data. It would be nice if tools did this.&lt;&#x2F;p&gt;
&lt;p&gt;R supports spherical geometries by using &lt;a href=&quot;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;s2&#x2F;&quot;&gt;Google‚Äôs S2
library&lt;&#x2F;a&gt;. Python is presently building
out support for S2. Some operations like buffering still aren‚Äôt made
available by S2.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-full-polygon&quot;&gt;The ‚Äúfull polygon‚Äù&lt;&#x2F;h3&gt;
&lt;p&gt;One interesting point that was brought up is that in a GCS there is a
concept of a &lt;strong&gt;full polygon&lt;&#x2F;strong&gt;. This is the polygon that covers the
entire ellipsoid. There is no way to capture this using typical
coordinates.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;spatial-weights-matrix-serialization&quot;&gt;Spatial Weights Matrix Serialization&lt;&#x2F;h2&gt;
&lt;p&gt;Probably the second most interesting topic to me was around how to store
spatial weights matrixes. We didn‚Äôt really discuss the ‚Äúhow‚Äù of holding
it memory. Though I think they can be held in memory as a ragged Arrow
array of indices or IDs. What was quite interesting was the concept of
&lt;em&gt;serializing&lt;&#x2F;em&gt; the spatial weights matrix.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;martinfleischmann.net&#x2F;&quot;&gt;Martin&lt;&#x2F;a&gt; mentioned that in Pysal they
had moved to serializing spatial weights as a parquet file which greatly
improved their speed. In essence, spatial weights are stored in a 3
column table.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;table&gt;
&lt;caption&gt;Spatial Weights Matrix&lt;&#x2F;caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;i&lt;&#x2F;th&gt;
&lt;th&gt;j&lt;&#x2F;th&gt;
&lt;th&gt;wij&lt;&#x2F;th&gt;
&lt;&#x2F;tr&gt;
&lt;&#x2F;thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;&#x2F;td&gt;
&lt;td&gt;3&lt;&#x2F;td&gt;
&lt;td&gt;0.5&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;&#x2F;td&gt;
&lt;td&gt;2&lt;&#x2F;td&gt;
&lt;td&gt;0.75&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;&#x2F;td&gt;
&lt;td&gt;9&lt;&#x2F;td&gt;
&lt;td&gt;0.3&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;&#x2F;td&gt;
&lt;td&gt;7&lt;&#x2F;td&gt;
&lt;td&gt;0.2&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;
&lt;&#x2F;table&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;It was noted that additional metadata can be associated at the table
level or column level. This can be very handy to keep track of things
like the method for identifying neighbors, the weighting mechanism used,
storing flags to know if the focal feature is included and maybe even
remove weights if there is a constant value.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, since this is parquet, it can be handled and stored by a
number of databases.&lt;&#x2F;p&gt;
&lt;p&gt;One benefit of using arrow here, is that we can conceivably have a
future where spatial weights matrices are interchangeable between spdep,
pysal, geoda, and ArcGIS.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;closing&quot;&gt;Closing&lt;&#x2F;h2&gt;
&lt;p&gt;I‚Äôm about to hop on a flight back to the US now‚Äî10 hours without
internet is going to be a test of monk-like fortitude. I have left my
strongest feels for another time. Chatting with devs from other
languages makes is clear how great CRAN is as a package storage and
testing mechanism but yet how utterly abysmal it is as a developer. I
will write another post soon on the topics of retirement and how I think
we can make CRAN a better place for developers.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;additional-links&quot;&gt;Additional links&lt;&#x2F;h2&gt;
&lt;p&gt;I‚Äôll add more here as I can (hopefully).&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;martinfleischmann.net&#x2F;a-note-on-spatial-data-science-across-languages-vol.1&#x2F;&quot;&gt;Martin‚Äôs SDSL blog
post&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Valve: putting R in production</title>
        <published>2023-08-22T00:00:00+00:00</published>
        <updated>2023-08-22T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/valve-for-production/"/>
        <id>https://josiah.rs/posts/valve-for-production/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/valve-for-production/">&lt;p&gt;This blog post is based on my most recent YouTube video. Please give it
a watch!&lt;&#x2F;p&gt;
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;embed&#x2F;11FM-dxxi3M&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; allowfullscreen&gt;
&lt;&#x2F;iframe&gt;
&lt;p&gt;I‚Äôve been grinding on a new tool for a few months now. And I‚Äôm hyped to
formally introduce you to it. It‚Äôs called
&lt;a href=&quot;https:&#x2F;&#x2F;valve.josiahparry.com&quot;&gt;Valve&lt;&#x2F;a&gt; And Valve is going to make R in
production kick a$$.üî•&lt;&#x2F;p&gt;
&lt;p&gt;We‚Äôve all seen those click bait articles saying ‚ÄúDon‚Äôt Put R in
production‚Äù or telling you that R can‚Äôt make machine learning models for
production. Those ‚Äúhot takes‚Äù are uninformed and can be applied to other
languages such as Python. That‚Äôs a bunch of malarkey.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;towardsdatascience.com&#x2F;dont-use-r-in-production-e2f4c9dd4a7b&quot;&gt;&lt;img src=&quot;images&#x2F;paste-1.png&quot; style=&quot;width:50.0%&quot;
data-fig-align=&quot;center&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Let‚Äôs get right down to it. Let‚Äôs talk ‚Äúproduction.‚Äù And let me be
clear: R belongs in production. But we as the R community need to learn
how to do that and be better advocates.&lt;&#x2F;p&gt;
&lt;p&gt;When I say ‚Äúproduction‚Äù I‚Äôm talking about making your code work with any
other system. And that‚Äôs where RESTful APIs come in. If I‚Äôve lost you at
‚ÄúRESTful‚Äù, &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=w4yHEQWct20&amp;amp;list=UULFX78SUhrloA6Cn3aW_e8C_A&amp;amp;index=22&quot;&gt;watch my previous video
here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=w4yHEQWct20&amp;amp;list=UULFX78SUhrloA6Cn3aW_e8C_A&amp;amp;index=22&quot;&gt;&lt;img src=&quot;images&#x2F;paste-15.png&quot; style=&quot;width:75.0%&quot;
data-fig-align=&quot;center&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;REST relies on HTTP, which is the foundation of the internet and is a
common tongue. It‚Äôs like if Esperanto actually worked. REST APIs provide
a language-agnostic way to expose functionality over the web.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.rplumber.io&#x2F;&quot;&gt;Plumber&lt;&#x2F;a&gt; is an R package that converts your R
functions into a RESTful API meaning any tool that can communicate in
HTTP can call your R functions. It converts R code like this into an
http endpoint.&lt;&#x2F;p&gt;
&lt;p&gt;At it‚Äôs core Valve is a web server that runs multiple {plumber} APIs in
parallel. Valve spins up and down plumber APIs as needed.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;images&#x2F;paste-21.png&quot; style=&quot;width:75.0%&quot;
data-fig-align=&quot;center&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It‚Äôs designed to work with any existing plumber API. And because of that
it supports {vetiver} out of the box.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;img src=&quot;images&#x2F;paste-22.png&quot; style=&quot;width:50.0%&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Vetiver is a framework built by Julia Silge and Isabel Zimmerman from
Posit that simplifies putting machine learning models built with
tidymodels into a production setting. And since, the goal is R in
production, Valve can be easily integrated into Docker containers and
deployed with DigitalOcean, AWS, Azure, or whatever other orchestration
tools you have available.&lt;&#x2F;p&gt;
&lt;p&gt;Valve is akin to Gunicorn for Flask apps and FastAPI.&lt;&#x2F;p&gt;
&lt;div class=&quot;columns&quot;&gt;
&lt;div class=&quot;column&quot;&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;valve-for-production&#x2F;images&#x2F;gunicor.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;column&quot;&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;valve-for-production&#x2F;images&#x2F;flask.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;column&quot;&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;valve-for-production&#x2F;images&#x2F;fastapi.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;To understand why Valve is so powerful, we need to first understand how
plumber works and its limitations. Plumber works by writing a function
definition and providing annotations using a special comment character
&lt;code&gt;#*&lt;&#x2F;code&gt;. Let‚Äôs take a look at a very simple example.&lt;&#x2F;p&gt;
&lt;p&gt;The three main components of a plumber API are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;the function definition&lt;&#x2F;li&gt;
&lt;li&gt;the request type &lt;code&gt;@post&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;endpoint &lt;code&gt;&#x2F;add-2&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;In a nutshell plumber works by spawning a single web server using the
{httpuv} R package. The webserver captures incoming http requests,
captures the provided parameters, body, and requested endpoint. Based on
the endpoint, it passes the parameters to the function. The result is
then ‚Äúserialized‚Äù into the correct output type. By default, this is
&lt;code&gt;json&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;valve-for-production&#x2F;images&#x2F;plumber-nutshell.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;For example, we might be calling the &lt;code&gt;&#x2F;add-2&lt;&#x2F;code&gt; endpoint. The process
looks a bit like this. We have a GET request. The endpoint is colored
red. Then the parameters are colored blue. The request is captured by
the web-server. The endpoints are checked. Then the parameters are
passed to the function and the user gets the result.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;valve-for-production&#x2F;images&#x2F;request.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;You can see how this is powerful! But there is one major thing holding
this back. This is all running in a single R process. R, like Python, is
single threaded. That means each request that comes in has to be added
to a queue. The next request cannot be processed until the previous one
has been.&lt;&#x2F;p&gt;
&lt;p&gt;Valve helps by running multiple plumber APIs concurrently. Valve is
built specifically for plumber, in Rust, and by leveraging the power
Tokio framework. Instead of having a single plumber API and a single R
process handling all requests, there is another web server handling all
incoming requests. This web server is build using Tokio.&lt;&#x2F;p&gt;
&lt;div&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The app has a number of pre-specified worker threads. Each worker is
capable of taking an incoming request, processing it, and returning a
response. These worker threads will delegate the request to another
plumber API. These plumber APIs are sitting in a connection pool waiting
to be accessed. The APIs will spawn and de-spawn according to the amount
of incoming traffic.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;valve-for-production&#x2F;images&#x2F;valve.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;What this means is that instead of being able to handle 1 request at a
time, we can handle as many requests as there are workers concurrently.
This allows us to take advantage of more than a single R process at a
time and, as a result, we can utilize more of the compute resources
available to us.&lt;&#x2F;p&gt;
&lt;p&gt;So how do you install Valve? There are two ways in which you can install
Valve. The first is to use the Rust package manager Cargo. This is my
personal recommendation. If you don‚Äôt have Rust and cargo installed,
don‚Äôt worry it is the second easiest language I‚Äôve ever installed.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;valve-for-production&#x2F;images&#x2F;paste-12.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Follow this one liner and it‚Äôll handle the installation for you.&lt;&#x2F;p&gt;
&lt;p&gt;To install Valve with cargo run&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;shell&quot; class=&quot;language-shell z-code&quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;cargo install valve-rs --no-default-features
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Doing this will install the Valve binary and make it available to you as
a command line tool. Alternatively, if you want to install valve as an R
package you can do so via the R-universe. The R-universe version has
pre-built binaries for Windows, Mac, and Ubuntu which means you do not
need to have rust installed. But again, its easy, so give it a shot!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;install.packages&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;valve&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;repos&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;https:&#x2F;&#x2F;josiahparry.r-universe.dev&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;https:&#x2F;&#x2F;cloud.r-project.org&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To follow along with the rest of these demos you can check out code in
the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;youtube-tutorials&#x2F;tree&#x2F;main&#x2F;intro-valve&quot;&gt;github
repository&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Here I want to demo just how easy it is to use Valve and what the
experience is like. For this simple example we will run a plumber API
with one endpoint &lt;code&gt;&#x2F;zzz&lt;&#x2F;code&gt; which will sleep for a specified amount of
time. We‚Äôll create a Valve app with 10 workers and plumber APIs.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;shell&quot; class=&quot;language-shell z-code&quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;valve -n 10 -w 10
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You‚Äôll notice that only one API is spawned at the start. This is because
connections are spawned based on incoming demand. As we send more
requests, the plumber APIs will spawn. If, after a specified amount of
time, they go stale, they will de-spawn. However, you do have the
ability to control the minimum number of plumber APIs.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;shell&quot; class=&quot;language-shell z-code&quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Valve starting at: 127.0.0.1:3000
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:11094
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We‚Äôre going to create a simple function &lt;code&gt;sleep()&lt;&#x2F;code&gt; which will call the
zzz endpoint at a specified port for a specified amount of time. We‚Äôll
use &lt;code&gt;furrr&lt;&#x2F;code&gt; to create 10 sessions and call the function 10 times on
valve app.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;sleep&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;port&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;secs&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  httr2&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;request&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;        &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;paste0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;127.0.0.1:&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; port&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&#x2F;sleep?zzz=&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; secs&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    httr2&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;req_perform&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;    httr2&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;resp_body_string&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now with the function defined we can use furrr to run the function in
parallel&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;furrr&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;plan&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;multisession&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;workers&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;10&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We will call the function 10 times using &lt;code&gt;future_map()&lt;&#x2F;code&gt; . The first time
this runs we can see that more plumber APIs are being spawned. This
takes somewhere between 3 and 4 seconds the first time we run it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;start &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;Sys.time&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;furrr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;future_map&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;10&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-other z-r&quot;&gt;~&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;3000&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;multi_total &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;Sys.time&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;-&lt;&#x2F;span&gt; start
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;multi_total 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; Time difference of 3.653488 secs
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you watch your terminal, you will see additional plumber connections
being spawned.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;shell&quot; class=&quot;language-shell z-code&quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Valve starting at: 127.0.0.1:3000
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:11094
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:35714
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:15674
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:30746
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:26860
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:54939
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:5592
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:46549
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:53346
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Spawning plumber API at 127.0.0.1:44956
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If we run this again, we get something much closer to two seconds total
for sending all 10 requests.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;start &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;Sys.time&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;furrr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;future_map&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;10&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-other z-r&quot;&gt;~&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;3000&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;multi_total &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;Sys.time&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;-&lt;&#x2F;span&gt; start
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;multi_total 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; Time difference of 2.013385 secs
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now, we can do the same thing with all 10 workers calling just one of
the spawned plumber APIs.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;start &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;Sys.time&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;furrr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;future_map&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;10&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-other z-r&quot;&gt;~&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;24817&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;total &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;Sys.time&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;-&lt;&#x2F;span&gt; start&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; Time difference of 20.04956 secs
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That‚Äôs a huge different. That is a lot more performance that we are
squeezing out of this plumber API by creating multiple to run
concurrently.&lt;&#x2F;p&gt;
&lt;p&gt;In an R session load {valve}.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;valve&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next, we will use the function &lt;code&gt;valve_run()&lt;&#x2F;code&gt; to run our plumber API.
This function has a lot of handy defaults to moderately scale your
plumber API. By default it looks for the file &lt;code&gt;plumber.R&lt;&#x2F;code&gt; in your
working directory.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;valve_run&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;plumber.R&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n_max&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;10&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; Valve app hosted at &amp;lt;http:&#x2F;&#x2F;127.0.0.1:3000&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; Spawning plumber API at 127.0.0.1:49015
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The CLI works just like the R function with two differences. We call it
from the command line and the syntax is a smidgen different.&lt;&#x2F;p&gt;
&lt;p&gt;From the command line we can run &lt;code&gt;valve ‚Äìhelp&lt;&#x2F;code&gt; to see the arguments that
we can provide. The CLI has the same defaults as the R package.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;shell&quot; class=&quot;language-shell z-code&quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;valve --help
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Usage: valve [-h &amp;lt;host&amp;gt;] [-p &amp;lt;port&amp;gt;] [-n &amp;lt;n-max&amp;gt;] [-w &amp;lt;workers&amp;gt;] [-f &amp;lt;file&amp;gt;] [--check-unused &amp;lt;check-unused&amp;gt;] [--max-age &amp;lt;max-age&amp;gt;] [--n-min &amp;lt;n-min&amp;gt;]
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Distribute your plumber API in parallel.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Options:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  -h, --host        host to serve APIs on
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  -p, --port        the port to serve the main application on
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  -n, --n-max       the maximum number of plumber APIs to spawn
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  -w, --workers     number of Tokio workers to spawn to handle requests
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  -f, --file        path to the plumber API (default `plumber.R`)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  --check-unused    default 10. Interval in seconds when to check for unused
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;                    connections
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  --max-age         default 5 mins. How long an API can go unused before being
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;                    killed in seconds.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  --n-min           the maximum number of plumber APIs to spawn
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  --help            display usage information
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now I want to illustrate scaling a machine learning model with {vetiver}
and valve. They do so by wrapping the model into a plumber API. I‚Äôve
created a sample plumber API based on &lt;a href=&quot;https:&#x2F;&#x2F;juliasilge.com&#x2F;blog&#x2F;childcare-costs&#x2F;&quot;&gt;Julia‚Äôs recent Tidy Tuesday
screencast in which she creates an XGBoost
model&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;valve-for-production&#x2F;images&#x2F;paste-14.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I‚Äôve taken this example and used vetiver to create a plumber API to
serve predictions from this model. One could deploy this API as is with
Docker or something like Posit Connect. If going down the Docker
approach, we can make this a bit more performant by using Valve.&lt;&#x2F;p&gt;
&lt;div class=&quot;alert-note&quot;&gt;
&lt;p&gt;The scripts to generate the vetiver model and API are in the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;youtube-tutorials&#x2F;tree&#x2F;main&#x2F;intro-valve&quot;&gt;Github
repo&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;To make this into a Valve app all we need to do is pass provide the
plumber API file to valve and we‚Äôre on our way! I‚Äôve written some simple
bench marks using drill to compare the performance of the two
approaches. With valve we will use 5 concurrent processes and test it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;shell&quot; class=&quot;language-shell z-code&quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;valve -f vetiver-api.R -n 5 -w 5
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>R is still fast: a salty reaction to a salty blog post</title>
        <published>2023-07-06T00:00:00+00:00</published>
        <updated>2023-07-06T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/r-is-still-fast/"/>
        <id>https://josiah.rs/posts/r-is-still-fast/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/r-is-still-fast/">&lt;p&gt;There‚Äôs this new &lt;a href=&quot;https:&#x2F;&#x2F;matthewrkaye.com&#x2F;blog&#x2F;lessons-learned-from-running-r-in-production&quot;&gt;blog
post&lt;&#x2F;a&gt;
making the rounds making some claims about why they won‚Äôt put R into
production. Most notably they‚Äôre wheeling the whole ‚ÄúR is slow thing‚Äù
again. And there are few things that grind my gears more than that type
of sentiment. It‚Äôs almost always ill informed. I find that to be the
case here too.&lt;&#x2F;p&gt;
&lt;p&gt;I wouldn‚Äôt have known about this had it 1) not mentioned my own Rust
project &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;valve&#x2F;&quot;&gt;Valve&lt;&#x2F;a&gt; and 2) a kind
stranger inform me about it on mastodon.&lt;&#x2F;p&gt;
&lt;iframe src=&quot;https:&#x2F;&#x2F;fosstodon.org&#x2F;@jimgar&#x2F;110663477958759961&#x2F;embed&quot; class=&quot;mastodon-embed&quot; style=&quot;max-width: 100%; border: 0&quot; width=&quot;400&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;
&lt;&#x2F;iframe&gt;
&lt;p&gt;I‚Äôve collected my reactions below as notes and sundry bench marks and
bullet points.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;tl-dr&quot;&gt;TL;DR&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;There is a concurrent web server for R and I made it
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;valve&#x2F;&quot;&gt;Valve&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Python is really fast at serializing json and R is slower&lt;&#x2F;li&gt;
&lt;li&gt;Python is really slow at parsing json and R is so so soooo much faster&lt;&#x2F;li&gt;
&lt;li&gt;To handle types appropriately, sometimes you have to program&lt;&#x2F;li&gt;
&lt;li&gt;There are mock REST API testing libraries
&lt;a href=&quot;https:&#x2F;&#x2F;enpiar.com&#x2F;r&#x2F;httptest&#x2F;articles&#x2F;httptest.html&quot;&gt;&lt;code&gt;{httptest}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
and &lt;a href=&quot;https:&#x2F;&#x2F;docs.ropensci.org&#x2F;webmockr&#x2F;&quot;&gt;&lt;code&gt;{webmockr}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Demand your service providers to make the tools you want&lt;&#x2F;li&gt;
&lt;li&gt;Ask and you shall receive&lt;&#x2F;li&gt;
&lt;li&gt;R can go into production&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;PLEASE JUST TRY VALVE YOU‚ÄôLL LOVE IT&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;production-services&quot;&gt;Production Services&lt;&#x2F;h2&gt;
&lt;p&gt;There are so many people using R in production in so many ways across
the world. I wish Posit did a better job getting these stories out. As a
former RStudio employee, I personally met people putting R in production
in most amazing ways. From the US Department of State, Defense, Biotech
companies, marketing agencies, national lotteries, and so much more. The
one that sticks out the most is that &lt;a href=&quot;https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;pmokhtarian&#x2F;&quot;&gt;Payam
M.&lt;&#x2F;a&gt;, when at
&lt;a href=&quot;https:&#x2F;&#x2F;www.tabcorp.com.au&#x2F;&quot;&gt;Tabcorp&lt;&#x2F;a&gt; massively scaled their system
using Plumber APIs and Posit Connect to such a ridiculous scale I
couldn‚Äôt even believe.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;gunicorn-web-servers-and-concurrency&quot;&gt;Gunicorn, Web Servers, and Concurrency&lt;&#x2F;h3&gt;
&lt;blockquote&gt;
&lt;p&gt;‚ÄúR has no widely-used web server to help it run concurrently.‚Äù&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;The premise of this whole blog post stems from the fact that there is no
easily concurrent web server for R. Which is true and is the reason I
built Valve. It doesn‚Äôt meet the criteria of widely used because no one
has used it. In part, because of posts like this that discourage people
from using R in production.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;types-and-conversion&quot;&gt;Types and Conversion&lt;&#x2F;h3&gt;
&lt;p&gt;There‚Äôs this weird bit about how &lt;code&gt;1&lt;&#x2F;code&gt; and &lt;code&gt;c(1, 2)&lt;&#x2F;code&gt; are treated as the
same class and unboxing of json. They provide the following python code
as a desirable pattern for processing data.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; class=&quot;language-python z-code&quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;x&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-python&quot;&gt;1&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;y&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-sequence z-list z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-sequence z-begin z-python&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-python&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-sequence z-python&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-python&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-sequence z-end z-python&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;json&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-python&quot;&gt;.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;dump&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;x&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;sys&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-python&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;stdout&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-python&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; 1
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;json&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-python&quot;&gt;.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;dump&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;y&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;sys&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-python&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;stdout&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-python&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; [1, 2]
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;They want scalars to be unboxed and lists to remain lists. This is the
same behavior as &lt;code&gt;jsonlite&lt;&#x2F;code&gt;, though.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;jsonlite&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;toJSON&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;auto_unbox&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;jsonlite&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;toJSON&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;auto_unbox&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1,2] 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;There‚Äôs a difference here: one that the author fails to recognize is
that a length 1 vector is handled appropriately. What the author is
saying is that they don‚Äôt like that R doesn‚Äôt behave the same way as
Python. You, as a developer should be able to guarantee that a value is
length 1. It‚Äôs easy. &lt;code&gt;length(x) == 1&lt;&#x2F;code&gt;, or if you want
&lt;code&gt;is_scalar &amp;lt;- function(x) length(x) == 1&lt;&#x2F;code&gt;. This is the type system in R
and json libraries handle the ‚Äúedge case‚Äù appropriately. There is
nothing wrong here. The reprex is the same as the python library.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;‚ÄúR (and Plumber) also do not enforce types of parameters to your API,
as opposed to FastAPI, for instance, which does via the use of
pydantic.‚Äù&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Python does not type check nor does FastAPI. You opt in to type checking
with FastAPI. You can do the same with Plumber. A quick perusal of the
docs will show you this. Find the
&lt;a href=&quot;https:&#x2F;&#x2F;www.rplumber.io&#x2F;articles&#x2F;annotations.html&quot;&gt;&lt;code&gt;@param&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; section.
There is some concessions here, though. The truthful part here is the
type annotations do type conversion for only dynamic routes. Which, I
don‚Äôt know if FastAPI does. Type handling for static parameters is an
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rstudio&#x2F;plumber&#x2F;issues&#x2F;755&quot;&gt;outstanding issue of mine for plumber since
2021&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;I‚Äôve followed up on the issue above and within minutes the maintainer
responded. There is an existing &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rstudio&#x2F;plumber&#x2F;pull&#x2F;905&quot;&gt;PR to handle this
issue&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This just goes to show if that you want something done in the open
source world, just ask for it. More than likely its already there or
just waiting for the slight nudge from someone else.&lt;&#x2F;p&gt;
&lt;p&gt;While I know it‚Äôs not ‚Äúseemless‚Äù adding an &lt;code&gt;as.integer()&lt;&#x2F;code&gt; and a
&lt;code&gt;stopifnot(is.integer(n))&lt;&#x2F;code&gt; isn‚Äôt the wildest thing for a developer to
do.&lt;&#x2F;p&gt;
&lt;p&gt;There is a comparison between type checking in R and Python with the
python example using type hints which are, again, opt-in. An unfair
comparison when you say ‚Äúif you don‚Äôt use the opt-in features of plumber
but use the opt-in features of FastAPI, FastAPI is better.‚Äù&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; class=&quot;language-python z-code&quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-from z-python&quot;&gt;from&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt;&lt;span class=&quot;z-meta z-import-source z-python&quot;&gt; &lt;span class=&quot;z-meta z-import-path z-python&quot;&gt;&lt;span class=&quot;z-meta z-import-name z-python&quot;&gt;fastapi&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-python&quot;&gt;import&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt; &lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;FastAPI&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;app&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;FastAPI&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-annotation z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-annotation z-python&quot;&gt;@&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-function z-python&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;app&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-python&quot;&gt;.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-annotation z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;get&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-function z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-arguments z-python&quot;&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&#x2F;types&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-function z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function z-python&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-async z-python&quot;&gt;async&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-function z-python&quot;&gt;&lt;span class=&quot;z-keyword z-declaration z-function z-python&quot;&gt;def&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;types&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-python&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-python&quot;&gt;n&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-annotation z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-annotation z-parameter z-python&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-support z-type z-python&quot;&gt;int&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-python&quot;&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-annotation z-return z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-annotation z-return z-python&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-support z-type z-python&quot;&gt;int&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-function z-begin z-python&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-flow z-return z-python&quot;&gt;return&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;n&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-python&quot;&gt;*&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-python&quot;&gt;2&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;clients-and-testing&quot;&gt;Clients and Testing&lt;&#x2F;h3&gt;
&lt;p&gt;I haven‚Äôt done much testing of API endpoints but I do know that there
are two de facto packages for this:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;enpiar.com&#x2F;r&#x2F;httptest&#x2F;articles&#x2F;httptest.html&quot;&gt;&lt;code&gt;{httptest}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
and&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;docs.ropensci.org&#x2F;webmockr&#x2F;&quot;&gt;&lt;code&gt;{webmockr}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;These are pretty easy to find. Not so sure why they weren‚Äôt mentioned or
even tested.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;performance&quot;&gt;Performance&lt;&#x2F;h3&gt;
&lt;p&gt;JSON serialization is a quite interesting thing to base performance off
of. I‚Äôve never seen how fast pandas serialization is. Quite impressive!
But, keep with me, because you‚Äôll see, this is fibbing with benchmarks.&lt;&#x2F;p&gt;
&lt;p&gt;I do have thoughts on the use of jsonlite and it‚Äôs ubiquity. jsonlite is
slow. I don‚Äôt like it. My belief is that everyone should use
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;SymbolixAU&#x2F;jsonify&quot;&gt;&lt;code&gt;{jsonify}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; when creating json.
It‚Äôs damn good.&lt;&#x2F;p&gt;
&lt;p&gt;So, when I run these bench marks on my machine for parsing I get:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;microbenchmark&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;microbenchmark&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;jsonify&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; jsonify&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;to_json&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;iris&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;jsonlite&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; jsonlite&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;toJSON&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;iris&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;unit&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;ms&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;times&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1000&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Warning in microbenchmark::microbenchmark(jsonify = jsonify::to_json(iris), :
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;less accurate nanosecond times to avoid potential integer overflows
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Registered S3 method overwritten by &amp;#39;jsonify&amp;#39;:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  method     from    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  print.json jsonlite
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Unit: milliseconds
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;     expr     min        lq      mean  median        uq      max neval cld
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  jsonify 0.34727 0.3534200 0.4627725 0.35711 0.3657405 87.79506  1000   a
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; jsonlite 0.44362 0.4556945 0.5335460 0.46535 0.4918360 23.26147  1000   a
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;A very noticable difference in using jsonify over jsonlite. The same
benchmark using pandas is holy sh!t fast!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; class=&quot;language-python z-code&quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-from z-python&quot;&gt;from&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt;&lt;span class=&quot;z-meta z-import-source z-python&quot;&gt; &lt;span class=&quot;z-meta z-import-path z-python&quot;&gt;&lt;span class=&quot;z-meta z-import-name z-python&quot;&gt;timeit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-python&quot;&gt;import&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt; &lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;timeit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-statement z-import z-python&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-python&quot;&gt;import&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;pandas&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-control z-import z-as z-python&quot;&gt;as&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;pd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;iris&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;pd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-python&quot;&gt;.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;read_csv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;fastapi-example&#x2F;iris.csv&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;N&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-python&quot;&gt;1000&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-support z-function z-builtin z-python&quot;&gt;print&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;  &lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;Mean runtime:&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-support z-function z-builtin z-python&quot;&gt;round&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-python&quot;&gt;1000&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-python&quot;&gt;*&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;timeit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-single z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-single z-python&quot;&gt;iris.to_json(orient = &amp;quot;records&amp;quot;)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-python&quot;&gt;globals&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-support z-function z-builtin z-python&quot;&gt;locals&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-python&quot;&gt;number&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;N&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-python&quot;&gt;&#x2F;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;N&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-python&quot;&gt;4&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;  &lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;milliseconds&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-python&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; Mean runtime: 0.0721 milliseconds
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now, this is only half the story. This is &lt;em&gt;serialization&lt;&#x2F;em&gt;. What about
the other part? Where you ingest it.&lt;&#x2F;p&gt;
&lt;p&gt;Here, I will also say, again, that you shouldn‚Äôt use jsonlite because it
is slow. Instead, you should use
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;eddelbuettel&#x2F;rcppsimdjson&quot;&gt;&lt;code&gt;{RcppSimdJson}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.
Because its&lt;&#x2F;p&gt;
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;embed&#x2F;6E7ZGCfruaw&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; allowfullscreen&gt;
&lt;&#x2F;iframe&gt;
&lt;p&gt;Let‚Äôs run another benchmark&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;jsn &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; jsonify&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;to_json&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;iris&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;microbenchmark&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;microbenchmark&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;simd&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; RcppSimdJson&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;fparse&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;jsn&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;jsonlite&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; jsonlite&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;fromJSON&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;jsn&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;unit&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;ms&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;times&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1000&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Unit: milliseconds
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;     expr      min       lq       mean    median        uq      max neval cld
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;     simd 0.057728 0.059737 0.08452076 0.0619510 0.0692285 8.726399  1000  a 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; jsonlite 0.413854 0.424596 0.49297699 0.4310945 0.4551205 4.271462  1000   b
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;RcppSimdJson is ~8 times faster than jsonlite.&lt;&#x2F;p&gt;
&lt;p&gt;Let‚Äôs do a similar benchmark in python.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; class=&quot;language-python z-code&quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;jsn&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;iris&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-python&quot;&gt;.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;to_json&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-python&quot;&gt;orient&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;records&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-support z-function z-builtin z-python&quot;&gt;print&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;  &lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;Mean runtime:&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-support z-function z-builtin z-python&quot;&gt;round&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-python&quot;&gt;1000&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-python&quot;&gt;*&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;timeit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-single z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-single z-python&quot;&gt;pd.read_json(jsn)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-python&quot;&gt;globals&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-variable z-function z-python&quot;&gt;&lt;span class=&quot;z-support z-function z-builtin z-python&quot;&gt;locals&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-python&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-python&quot;&gt;number&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;N&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-python&quot;&gt;&#x2F;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;N&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-python&quot;&gt;4&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-python&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;  &lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;milliseconds&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-python&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-python&quot;&gt;#&lt;&#x2F;span&gt;&amp;gt; Mean runtime: 1.2629 milliseconds
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Python is 3x slower than jsonlite in this case and 25x slower than
RcppSimdJson. Which is very slow. While serializing is an important
thing to be fast in, so is parsing the incoming json you are receiving.
How nice it is to show only half the story! Use RcppSimdJson and
embarrass pandas‚Äô json parsing.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;integration-with-tooling&quot;&gt;Integration with Tooling&lt;&#x2F;h3&gt;
&lt;p&gt;I have literally no idea about any of these except Launchdarkly because
one of my close homies worked there for years. These are all paid
services so I‚Äôm not sure how they work :)&lt;&#x2F;p&gt;
&lt;p&gt;I would say to checkout Posit Connect for deploying R and python into
production. But if your only use case is to deploy a single model, then
yeah, I‚Äôd say that‚Äôs overkill.&lt;&#x2F;p&gt;
&lt;p&gt;I wish more companies would create tooling for R and their services. The
way to do this, is to lean into using R in production and demanding (not
asking) providers to make wrappers for them. When you pay for a service,
you have leverage. Use it. I think too many people fall over when what
they need isn‚Äôt there immediately. Be sure to be the squeeky wheel that
makes change.&lt;&#x2F;p&gt;
&lt;p&gt;I also think that if you‚Äôre in the position where you can make a wrapper
for something, you should. I did this when using Databricks in my last
role and provided them with a lot of feedback. Have they taken it? I‚Äôm
not sure. I‚Äôm not there to harass them anymore.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;workarounds&quot;&gt;Workarounds&lt;&#x2F;h2&gt;
&lt;p&gt;These are good workarounds. I would suggest looking at
&lt;a href=&quot;https:&#x2F;&#x2F;ndexr.io&#x2F;&quot;&gt;ndexr.io&lt;&#x2F;a&gt; as a way to scale these R based services
as well. They utilize the NGINX approach described here.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;addenda&quot;&gt;Addenda&lt;&#x2F;h2&gt;
&lt;p&gt;Clearly, this is where I care a lot. I am the author of
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;valve&#x2F;&quot;&gt;Valve&lt;&#x2F;a&gt;. Valve is exactly what
the author was clamoring for in the beginning of the blog post. It is a
web server that runs Plumber APIs in parallel written in Rust using
Tokio, Axum, and Deadpool. Valve auto-scales on its own up to a maximum
number of worker threads. So it‚Äôs not always taking up space and running
more compute than it needs.&lt;&#x2F;p&gt;
&lt;p&gt;Valve overview:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Concurrent webserver to auto-scale plumber APIs&lt;&#x2F;li&gt;
&lt;li&gt;written in Rust using Tokio, Axum, and Deadpool&lt;&#x2F;li&gt;
&lt;li&gt;spawns and kills plumber APIs based on demand&lt;&#x2F;li&gt;
&lt;li&gt;integration with {vetiver} of of the box&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;First things first, I want to address ‚Äúit‚Äôs not on CRAN.‚Äù You‚Äôre right.
That‚Äôs because it is a Rust crate. Crates don‚Äôt go on CRAN. I‚Äôve made an
R package around it to lower the bar to entry. But it is a CLI tool at
the core.&lt;&#x2F;p&gt;
&lt;p&gt;Obviously, it is new. It is untested. I wish I could tell everyone to
use it, but I can‚Äôt. I think anyone who used it would be floored by its
performance and ease of use. It is SO simple.&lt;&#x2F;p&gt;
&lt;p&gt;I‚Äôll push it to crates.io and CRAN in the coming weeks. Nothing like
h8rs to inspire.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>What&#x27;s so special about `array`s?</title>
        <published>2023-06-11T00:00:00+00:00</published>
        <updated>2023-06-11T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/matrix-bug/"/>
        <id>https://josiah.rs/posts/matrix-bug/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/matrix-bug/">&lt;p&gt;I‚Äôm working on a new video about S3 objects in R and class inheritance &#x2F;
hierarchy. One of my favorite functions for exploring objecs and their
structure is &lt;code&gt;unclass()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The documentation states&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;unclass&lt;&#x2F;code&gt; returns (a copy of) its argument with its class attribute
removed. (It is not allowed for objects which cannot be copied, namely
environments and external pointers.)&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;see &lt;code&gt;?unclass&lt;&#x2F;code&gt; and review &lt;code&gt;Details&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;So, &lt;code&gt;unclass()&lt;&#x2F;code&gt; &lt;em&gt;should&lt;&#x2F;em&gt; remove the class of any and all objects. For
the sake clarity of this post I‚Äôm going to make a helper function.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;class_unclass&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;unclass&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This works for &lt;code&gt;factor&lt;&#x2F;code&gt;s which are just integer vectors which have the
attribute &lt;code&gt;levels&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;class_unclass&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;factor&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;integer&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;and &lt;code&gt;data.frame&lt;&#x2F;code&gt;s are lists (also technically a vector just not atomic
but instead recursive) with attributes &lt;code&gt;row.names&lt;&#x2F;code&gt;, and &lt;code&gt;names&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;class_unclass&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;data.frame&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;list&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;But when we get down to &lt;code&gt;matrix&lt;&#x2F;code&gt; another poser type (just like
data.frame and factor pretending to be something they‚Äôre not actually),
we get something different.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;class_unclass&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;matrix&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;matrix&amp;quot; &amp;quot;array&amp;quot; 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Well, why the heck is that? What about it makes it so special? Let‚Äôs
explore this a bit more.&lt;&#x2F;p&gt;
&lt;p&gt;The two things that make a matrix are the classes &lt;code&gt;c(&quot;matrix&quot;, &quot;array&quot;)&lt;&#x2F;code&gt;
and the &lt;code&gt;dim&lt;&#x2F;code&gt; attribute which specifies the dimensions. Matrixes are two
dimensional arrays, by the way!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;attributes&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;matrix&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$dim
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 1 1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;What is weird is that you can make a matrix just by adding the &lt;code&gt;dim&lt;&#x2F;code&gt;
attribute to a vector.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;m &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;integer&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;dim&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;class_unclass&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;m&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;matrix&amp;quot; &amp;quot;array&amp;quot; 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We didn‚Äôt even specify the class. Why does this happen?&lt;&#x2F;p&gt;
&lt;p&gt;And when we remove the dim attribute‚Ä¶.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;attr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;m&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;dim&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;NULL&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;class_unclass&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;m&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;integer&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;we get an integer vector. This differs from the behavior of other
similar types. Recall that factors are &lt;code&gt;integer&lt;&#x2F;code&gt; vectors with an
attribute of &lt;code&gt;levels&lt;&#x2F;code&gt; that is a character vector.&lt;&#x2F;p&gt;
&lt;p&gt;So let‚Äôs try something here. Let‚Äôs create a factor from scratch.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;integer&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;levels&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;factor&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;factor()
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Levels: 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now, if the behavior is similar to &lt;code&gt;matrix&lt;&#x2F;code&gt; or &lt;code&gt;array&lt;&#x2F;code&gt; we would expect
that by omitting the &lt;code&gt;class&lt;&#x2F;code&gt; attribute R should reconstruct it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;integer&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;levels&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;integer(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;attr(,&amp;quot;levels&amp;quot;)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Nope! Would you look at that!&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;yjunechoe&quot;&gt;&lt;strong&gt;@yjunechoe&lt;&#x2F;strong&gt;&lt;&#x2F;a&gt; pointed me to some
excerpts from &lt;a href=&quot;https:&#x2F;&#x2F;deepr.gagolewski.com&#x2F;&quot;&gt;Deep R Programming&lt;&#x2F;a&gt;, a
book I wish I had read yesterday. It refers to these attributes as
‚Äú&lt;em&gt;special attributes&lt;&#x2F;em&gt;‚Äù. The author, &lt;a href=&quot;https:&#x2F;&#x2F;www.gagolewski.com&#x2F;&quot;&gt;Marek
Gagolewski&lt;&#x2F;a&gt; (author of
&lt;a href=&quot;https:&#x2F;&#x2F;stringi.gagolewski.com&#x2F;&quot;&gt;&lt;code&gt;stringi&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, by the way), makes note of
this special behavior of matrix but leaves it at that.&lt;&#x2F;p&gt;
&lt;p&gt;To me, this is a fundamental inconsistency in the language. Either all
poser types (data.frame, matrix, factor, etc) should be automatically
created if their special attributes are set on the appropriate type or
not at all. What justification is there for &lt;em&gt;only&lt;&#x2F;em&gt; &lt;code&gt;matrix&lt;&#x2F;code&gt; having a
special behavior in &lt;code&gt;unclass()&lt;&#x2F;code&gt;?&lt;&#x2F;p&gt;
&lt;p&gt;To me, this warrants a bug report for &lt;code&gt;unclass()&lt;&#x2F;code&gt;. Based on the
documentation, &lt;code&gt;unclass()&lt;&#x2F;code&gt; should &lt;em&gt;always&lt;&#x2F;em&gt; remove the class attribute
from an object but it fails to do so for &lt;code&gt;arrays&lt;&#x2F;code&gt; and &lt;code&gt;matrix&lt;&#x2F;code&gt;es.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;looking-deeper&quot;&gt;Looking deeper!&lt;&#x2F;h2&gt;
&lt;p&gt;With some further exploratory help of June we can see the internal
representation of these objects.&lt;&#x2F;p&gt;
&lt;p&gt;Let‚Äôs create an object with a &lt;code&gt;dim&lt;&#x2F;code&gt; attribute and a custom class.
Suprisingly, the custom class is respected and &lt;code&gt;matrix&lt;&#x2F;code&gt; and &lt;code&gt;array&lt;&#x2F;code&gt;
aren‚Äôt slapped on it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;x &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;integer&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;dim&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;meep&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;class&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;meep&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If we look at the internal representation using &lt;code&gt;.Internal(inspect(x))&lt;&#x2F;code&gt;
we get to see some of the C goodies.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;.Internal&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;inspect&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;@1310a0d28 13 INTSXP g0c1 [OBJ,REF(2),ATT] (len=1, tl=0) 0
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;ATTRIB:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  @131097930 02 LISTSXP g0c0 [REF(1)] 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    TAG: @156014080 01 SYMSXP g1c0 [MARK,REF(2750),LCK,gp=0x4000] &amp;quot;dim&amp;quot; (has value)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    @1310a0cf0 13 INTSXP g0c1 [REF(65535)] (len=2, tl=0) 1,1
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    TAG: @1560141d0 01 SYMSXP g1c0 [MARK,REF(33684),LCK,gp=0x6000] &amp;quot;class&amp;quot; (has value)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    @131092e08 16 STRSXP g0c1 [REF(65535)] (len=1, tl=0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;      @1462b34a8 09 CHARSXP g0c1 [REF(2),gp=0x60] [ASCII] [cached] &amp;quot;meep&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Just look to the right hand side of these gibberish. See that the &lt;code&gt;dim&lt;&#x2F;code&gt;
has a value of &lt;code&gt;1,1&lt;&#x2F;code&gt; and &lt;code&gt;class&lt;&#x2F;code&gt; has a value of &lt;code&gt;meep&lt;&#x2F;code&gt;. There is no
matrix or array or nothing.&lt;&#x2F;p&gt;
&lt;p&gt;Now we remove the &lt;code&gt;meep&lt;&#x2F;code&gt; class and check again.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;class_unclass&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;matrix&amp;quot; &amp;quot;array&amp;quot; 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Boom matrix and array. But if we look at the internals‚Ä¶&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;.Internal&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;inspect&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;unclass&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;@130620d60 13 INTSXP g0c1 [ATT] (len=1, tl=0) 0
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;ATTRIB:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  @1305255b0 02 LISTSXP g0c0 [REF(1)] 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    TAG: @156014080 01 SYMSXP g1c0 [MARK,REF(2754),LCK,gp=0x4000] &amp;quot;dim&amp;quot; (has value)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    @1310a0cf0 13 INTSXP g0c1 [REF(65535)] (len=2, tl=0) 1,1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;THEY AREN‚ÄôT THERE!!!!!!&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Feeling rusty: counting characters</title>
        <published>2023-04-13T00:00:00+00:00</published>
        <updated>2023-04-13T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/counting-chars/"/>
        <id>https://josiah.rs/posts/counting-chars/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/counting-chars/">&lt;p&gt;I‚Äôm working on a new video for you all on GeoHashes. As I keep working
on my slides and script I keep finding new things I want to explore or
that I need to write. Recently, that was to compare multiple geohashes
to a known geohash. The goal of that is to count how many of the first
characters matched a reference. If there are matching leading characters
between a geohashes that means that they are in the same geohash at some
level of precision. Knowing that number of shared characters tells us at
what level of precision they coexist. The challenge is that there isn‚Äôt
any easy way to do that in base R or packages I could find. So, what do
we do when we can‚Äôt find something to do a task for us? We make it.&lt;&#x2F;p&gt;
&lt;p&gt;For these small tasks that require a lot of iteration and counting, I‚Äôve
been leaning on Rust a lot more. I find it actually &lt;em&gt;easier&lt;&#x2F;em&gt; for the
more computer sciency type tasks.&lt;&#x2F;p&gt;
&lt;p&gt;Here‚Äôs how I solved it.&lt;&#x2F;p&gt;
&lt;p&gt;Define two geohashes to compare:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; x &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;drt2yyy1cxwy&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; y &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;drt2yywg71qc&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next we want to iterate over each of these string slices (represented as
&lt;code&gt;&amp;amp;str&lt;&#x2F;code&gt;). Typically we‚Äôd use the &lt;code&gt;.iter()&lt;&#x2F;code&gt; or &lt;code&gt;.into_iter()&lt;&#x2F;code&gt; methods to
iterate over objects but these are slices and not a vector or array.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;&lt;code&gt;.into_iter()&lt;&#x2F;code&gt; consumes the object you‚Äôre iterating over whereas
&lt;code&gt;.iter()&lt;&#x2F;code&gt; iterates over it without consuming. The former provides
‚Äúowned‚Äù objects at each iteration while the latter provides references‚Äù&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We iterate through the characters of a slice using &lt;code&gt;.chars()&lt;&#x2F;code&gt;. We‚Äôll
want to iterate through both of them at the same time. Then, for each
iteration, we check to see if they‚Äôre the same.&lt;&#x2F;p&gt;
&lt;p&gt;This will instantiate an iterator over each of the strings where each
element is a &lt;code&gt;char&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;  x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;  y&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Important&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This will not compile, it‚Äôs for illustration&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;These iterators will only be able to be iterated over one at a time
using &lt;code&gt;.map()&lt;&#x2F;code&gt; and the like. We can combine them into one iterator using
the &lt;code&gt;.zip()&lt;&#x2F;code&gt; method which &lt;em&gt;zips&lt;&#x2F;em&gt; them together into one iterator.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;zip&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is good! Now we have a single iterator to work through. Each
element in the resultant iterator will be a tuple with the first element
&lt;code&gt;.0&lt;&#x2F;code&gt; being the first character of &lt;code&gt;x&lt;&#x2F;code&gt; and &lt;code&gt;.1&lt;&#x2F;code&gt; being the first character
of &lt;code&gt;y&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Tuple‚Äôs look like &lt;code&gt;let z = (x, y);&lt;&#x2F;code&gt; and are accessed by position like
&lt;code&gt;z.0&lt;&#x2F;code&gt; and &lt;code&gt;z.1&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The approach I took here is to use the &lt;code&gt;.take_while()&lt;&#x2F;code&gt; method which
takes a closure that returns a &lt;code&gt;bool&lt;&#x2F;code&gt; (&lt;code&gt;true&lt;&#x2F;code&gt; or &lt;code&gt;false&lt;&#x2F;code&gt;). It‚Äôll return
another iterator that contains only the elements where that statement
was true.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;zip&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;    &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;take_while&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;a&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;a&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-comparison z-rust&quot;&gt;==&lt;&#x2F;span&gt; a&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;A closure is like an anonymous function. It‚Äôs arguments are defined
between &lt;code&gt;| |&lt;&#x2F;code&gt; and the evaluated expression is to the right of it.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Here, the closure has the argument &lt;code&gt;|a|&lt;&#x2F;code&gt; which is the tuple from &lt;code&gt;x&lt;&#x2F;code&gt; and
&lt;code&gt;y&lt;&#x2F;code&gt;. It checks to see if the characters are equal. The resultant
iterator now only has elements for matching characters. We don‚Äôt really
need to iterate over it, but rather we just need to count how many items
are in the iterator.&lt;&#x2F;p&gt;
&lt;p&gt;We can use the &lt;code&gt;.count()&lt;&#x2F;code&gt; method for that. Shouts out to the Rust
discord for helping me with this one.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Previously I used a &lt;code&gt;fold()&lt;&#x2F;code&gt; method that looked like
&lt;code&gt;.fold(0, |acc, _| acc + 1)&lt;&#x2F;code&gt; which worked but was less ‚Äúelegant‚Äù&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;let&lt;&#x2F;span&gt; res &lt;span class=&quot;z-keyword z-operator z-assignment z-rust&quot;&gt;=&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;zip&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;    &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;take_while&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;a&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;a&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-comparison z-rust&quot;&gt;==&lt;&#x2F;span&gt; a&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;    &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;count&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Let‚Äôs wrap this into a function:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;count_seq_chars&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;str&lt;&#x2F;span&gt;, &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;y&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;str&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;usize&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;  x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;zip&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;      &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;take_while&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;a&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;a&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-comparison z-rust&quot;&gt;==&lt;&#x2F;span&gt; a&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;      &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;count&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We can make it available in R using
&lt;a href=&quot;https:&#x2F;&#x2F;extendr.github.io&#x2F;rextendr&#x2F;reference&#x2F;rust_source.html&quot;&gt;&lt;code&gt;rextendr::rust_function()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;rextendr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;rust_function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;fn count_seq_chars(x: &amp;amp;str, y: &amp;amp;str) -&amp;gt; usize {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  x.chars().zip(y.chars())
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;      .take_while(|a| a.0 == a.1)
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;      .count()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;}&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;drt2yyy1cxwy&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;drt2yywg71qc&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 6
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;But this isn‚Äôt vectorized yet. It only works on two scalars. We can
improve it by changing the &lt;code&gt;x&lt;&#x2F;code&gt; argument to take a vector of strings
&lt;code&gt;Vec&amp;lt;String&amp;gt;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;We have to use &lt;code&gt;Vec&amp;lt;String&amp;gt;&lt;&#x2F;code&gt; instead of &lt;code&gt;Vec&amp;lt;&amp;amp;str&amp;gt;&lt;&#x2F;code&gt; because &lt;code&gt;rextendr&lt;&#x2F;code&gt;
does not know how to take a vector of string slices.&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Essentially, what we do next is take this vector of strings, iterate
over it, convert the string to a &lt;code&gt;&amp;amp;str&lt;&#x2F;code&gt; then just do what we did before!&lt;&#x2F;p&gt;
&lt;p&gt;We use &lt;code&gt;.map()&lt;&#x2F;code&gt; to apply an expression over each element of &lt;code&gt;x&lt;&#x2F;code&gt;. The
closure takes a single argument &lt;code&gt;xi&lt;&#x2F;code&gt; which represents the ith element of
&lt;code&gt;x&lt;&#x2F;code&gt;. We convert it to a slice, then iterate over it‚Äôs characters and the
rest should be similar in there!&lt;&#x2F;p&gt;
&lt;p&gt;Lastly, we collect the resultant &lt;code&gt;usize&lt;&#x2F;code&gt; objects into a vector of them
&lt;code&gt;Vec&amp;lt;usize&amp;gt;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;  &lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;count_seq_chars_to_ref&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Vec&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;, &lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;y&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;str&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-generic z-rust&quot;&gt;&lt;span class=&quot;z-support z-type z-rust&quot;&gt;Vec&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-rust&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-rust&quot;&gt;usize&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-rust&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    x&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;into_iter&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;map&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;xi&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;            &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;xi&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;as_str&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;zip&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;chars&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;            &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;take_while&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;a&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;|&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-closure z-rust&quot;&gt;a&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;0&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-comparison z-rust&quot;&gt;==&lt;&#x2F;span&gt; a&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-rust&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;            &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;count&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;        &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;collect&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;  &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Note that the function definition has &lt;code&gt;-&amp;gt; Vec&amp;lt;usize&amp;gt;&lt;&#x2F;code&gt; this defines what
the ouput object type will be. Something definitely unfamiliar for
Rusers!&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Again, we can use &lt;code&gt;rextendr&lt;&#x2F;code&gt; to wrap this into a single R function that
we can use.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;rextendr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;rust_function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  fn count_seq_chars_to_ref(x: Vec&amp;lt;String&amp;gt;, y: &amp;amp;str) -&amp;gt; Vec&amp;lt;usize&amp;gt; {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    x.into_iter()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        .map(|xi| 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;            xi.as_str().chars().zip(y.chars())
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;            .take_while(|a| a.0 == a.1)
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;            .count()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        )
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        .collect()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  }
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;drt2yyy1cxwy&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;drt2yywg71qc&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 6
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Let‚Äôs test this and see how it works with a larger dataset of 100,000
strings. We create a bunch of sample strings that sample a-e and 1-5,
are sorted, then pasted together. We then can compare them to the
reference string &lt;code&gt;&quot;abcd123&quot;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;sample_strings &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;replicate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;100000&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;paste0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;paste0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sort&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sample&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-constant z-misc z-r&quot;&gt;letters&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;5&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;4&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;collapse&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;paste0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sample&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;5&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;3&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;collapse&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;collapse&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;head&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;acde254&amp;quot; &amp;quot;bcde324&amp;quot; &amp;quot;abce152&amp;quot; &amp;quot;abde231&amp;quot; &amp;quot;abde543&amp;quot; &amp;quot;abcd253&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;head&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 1 0 3 2 2 4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.pmassicotte.com&#x2F;&quot;&gt;Philippe Massicotte&lt;&#x2F;a&gt; was kind enough to
provide an R only example in a reply to a tweet of mine. We can compare
the speed of the two implementations. A pure Rust implementation and an
R native implementation.&lt;&#x2F;p&gt;
&lt;p&gt;{{&amp;lt; tweet philmassicotte 1646191363728240642 &amp;gt;}}&lt;&#x2F;p&gt;
&lt;p&gt;Here we wrap his implementation into a function &lt;code&gt;count_seq_lapply()&lt;&#x2F;code&gt;.
I‚Äôve modified this implementation to handle the scenario where the first
element is not true so we don‚Äôt get a run length of &lt;code&gt;FALSE&lt;&#x2F;code&gt; elements.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;count_seq_lapply&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;ref&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  res &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; \&lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    a &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;unlist&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;strsplit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    x &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;unlist&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;strsplit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;ref&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    comparison &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; a &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;==&lt;&#x2F;span&gt; x
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-conditional z-if z-r&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;comparison&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-control z-flow z-return z-r&quot;&gt;return&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;rle&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;comparison&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-accessor z-dollar z-r&quot;&gt;$&lt;&#x2F;span&gt;lengths&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;unlist&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;res&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_lapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;head&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 1 0 3 2 2 4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;As you can see his works just as well and frankly, better. That‚Äôs
because he inherits the NA handling of the base R functions he is using.
If any NA are introduced into a pure Rust implementation without using
&lt;a href=&quot;https:&#x2F;&#x2F;extendr.github.io&#x2F;extendr&#x2F;extendr_api&#x2F;&quot;&gt;extendr&lt;&#x2F;a&gt; types and
proper handling you‚Äôll get a &lt;code&gt;panic!&lt;&#x2F;code&gt; which will cause the R function to
error.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;bench&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mark&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;lapply&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_lapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;rust&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Warning: Some expressions had a GC in every iteration; so filtering is
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;disabled.
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 2 √ó 6
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  expression      min   median `itr&#x2F;sec` mem_alloc `gc&#x2F;sec`
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;bch:expr&amp;gt; &amp;lt;bch:tm&amp;gt; &amp;lt;bch:tm&amp;gt;     &amp;lt;dbl&amp;gt; &amp;lt;bch:byt&amp;gt;    &amp;lt;dbl&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 lapply        1.17s    1.17s     0.853    1.57MB     47.8
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 rust        53.72ms  53.92ms    18.5     781.3KB      0  
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The R implementation is still super fast. It‚Äôs just that Rust is also
super super fast!&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;h2 id=&quot;addendum-chatgpt-rules-apparently&quot;&gt;Addendum: ChatGPT rules apparently&lt;&#x2F;h2&gt;
&lt;p&gt;So I asked Chat GPT to rewrite my above function but using C++ and the
results are absolutely startling!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;cpp&quot; class=&quot;language-cpp z-code&quot;&gt;&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-double-colon z-c++&quot;&gt;::&lt;&#x2F;span&gt;vector&lt;span class=&quot;z-punctuation z-section z-generic z-begin z-c++&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-sys-types z-c&quot;&gt;size_t&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-generic z-end z-c++&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-toc-list z-full-identifier z-c++&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-c++&quot;&gt;count_seq_chars_to_ref_cpp&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-c++&quot;&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c++&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-c++&quot;&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;std&lt;span class=&quot;z-punctuation z-accessor z-double-colon z-c++&quot;&gt;::&lt;&#x2F;span&gt;vector&lt;span class=&quot;z-punctuation z-section z-generic z-begin z-c++&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;std&lt;span class=&quot;z-punctuation z-accessor z-double-colon z-c++&quot;&gt;::&lt;&#x2F;span&gt;string&lt;span class=&quot;z-punctuation z-section z-generic z-end z-c++&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-c++&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-c++&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-c++&quot;&gt;const&lt;&#x2F;span&gt; std&lt;span class=&quot;z-punctuation z-accessor z-double-colon z-c++&quot;&gt;::&lt;&#x2F;span&gt;string&lt;span class=&quot;z-keyword z-operator z-c&quot;&gt;&amp;amp;&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-c++&quot;&gt;y&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c++&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-c++&quot;&gt;{&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;  std&lt;span class=&quot;z-punctuation z-accessor z-double-colon z-c++&quot;&gt;::&lt;&#x2F;span&gt;vector&lt;span class=&quot;z-punctuation z-section z-generic z-begin z-c++&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-sys-types z-c&quot;&gt;size_t&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-generic z-end z-c++&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; result&lt;span class=&quot;z-punctuation z-terminator z-c++&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-c++&quot;&gt;for&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c++&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-modifier z-c++&quot;&gt;const&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-c&quot;&gt;auto&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-c&quot;&gt;&amp;amp;&lt;&#x2F;span&gt; xi &lt;span class=&quot;z-keyword z-operator z-ternary z-c&quot;&gt;:&lt;&#x2F;span&gt; x&lt;span class=&quot;z-punctuation z-section z-group z-end z-c++&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-c++&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;    &lt;span class=&quot;z-support z-type z-sys-types z-c&quot;&gt;size_t&lt;&#x2F;span&gt; count &lt;span class=&quot;z-keyword z-operator z-assignment z-c&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-integer z-decimal z-c++&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-c++&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;    &lt;span class=&quot;z-storage z-type z-c&quot;&gt;auto&lt;&#x2F;span&gt; it_x &lt;span class=&quot;z-keyword z-operator z-assignment z-c&quot;&gt;=&lt;&#x2F;span&gt; xi&lt;span class=&quot;z-punctuation z-accessor z-dot z-c++&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-variable z-function z-member z-c++&quot;&gt;begin&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c++&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c++&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-c++&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;    &lt;span class=&quot;z-storage z-type z-c&quot;&gt;auto&lt;&#x2F;span&gt; it_y &lt;span class=&quot;z-keyword z-operator z-assignment z-c&quot;&gt;=&lt;&#x2F;span&gt; y&lt;span class=&quot;z-punctuation z-accessor z-dot z-c++&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-variable z-function z-member z-c++&quot;&gt;begin&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c++&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c++&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-c++&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-c++&quot;&gt;while&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c++&quot;&gt;(&lt;&#x2F;span&gt;it_x &lt;span class=&quot;z-keyword z-operator z-comparison z-c&quot;&gt;!=&lt;&#x2F;span&gt; xi&lt;span class=&quot;z-punctuation z-accessor z-dot z-c++&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-variable z-function z-member z-c++&quot;&gt;end&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c++&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c++&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-c&quot;&gt;&amp;amp;&amp;amp;&lt;&#x2F;span&gt; it_y &lt;span class=&quot;z-keyword z-operator z-comparison z-c&quot;&gt;!=&lt;&#x2F;span&gt; y&lt;span class=&quot;z-punctuation z-accessor z-dot z-c++&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-variable z-function z-member z-c++&quot;&gt;end&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c++&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c++&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-c&quot;&gt;&amp;amp;&amp;amp;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-c&quot;&gt;*&lt;&#x2F;span&gt;it_x &lt;span class=&quot;z-keyword z-operator z-comparison z-c&quot;&gt;==&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-c&quot;&gt;*&lt;&#x2F;span&gt;it_y&lt;span class=&quot;z-punctuation z-section z-group z-end z-c++&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-c++&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;      &lt;span class=&quot;z-keyword z-operator z-arithmetic z-c&quot;&gt;++&lt;&#x2F;span&gt;count&lt;span class=&quot;z-punctuation z-terminator z-c++&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;      &lt;span class=&quot;z-keyword z-operator z-arithmetic z-c&quot;&gt;++&lt;&#x2F;span&gt;it_x&lt;span class=&quot;z-punctuation z-terminator z-c++&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;      &lt;span class=&quot;z-keyword z-operator z-arithmetic z-c&quot;&gt;++&lt;&#x2F;span&gt;it_y&lt;span class=&quot;z-punctuation z-terminator z-c++&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-block z-end z-c++&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;    result&lt;span class=&quot;z-punctuation z-accessor z-dot z-c++&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-variable z-function z-member z-c++&quot;&gt;push_back&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c++&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;count&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method-call z-c++&quot;&gt;&lt;span class=&quot;z-meta z-group z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c++&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-c++&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-block z-end z-c++&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;  &lt;span class=&quot;z-keyword z-control z-flow z-return z-c++&quot;&gt;return&lt;&#x2F;span&gt; result&lt;span class=&quot;z-punctuation z-terminator z-c++&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c++&quot;&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-c++&quot;&gt;&lt;span class=&quot;z-meta z-block z-c++&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-c++&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is the code it wrote after only one prompt. I didn‚Äôt correct it. It
worked right off the rip. I did, however, provide ChatGPT with my above
rust code.&lt;&#x2F;p&gt;
&lt;p&gt;Let‚Äôs bench mark this.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;Rcpp&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;cppFunction&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;std::vector&amp;lt;size_t&amp;gt; count_seq_chars_to_ref_cpp(std::vector&amp;lt;std::string&amp;gt; x, const std::string&amp;amp; y) {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  std::vector&amp;lt;size_t&amp;gt; result;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  for (const auto&amp;amp; xi : x) {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    size_t count = 0;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    auto it_x = xi.begin();
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    auto it_y = y.begin();
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    while (it_x != xi.end() &amp;amp;&amp;amp; it_y != y.end() &amp;amp;&amp;amp; *it_x == *it_y) {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;      ++count;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;      ++it_x;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;      ++it_y;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    }
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    result.push_back(count);
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  }
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  return result;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;}&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;bench&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mark&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;GPT_cpp&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref_cpp&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;rust&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 2 √ó 6
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  expression      min   median `itr&#x2F;sec` mem_alloc `gc&#x2F;sec`
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;bch:expr&amp;gt; &amp;lt;bch:tm&amp;gt; &amp;lt;bch:tm&amp;gt;     &amp;lt;dbl&amp;gt; &amp;lt;bch:byt&amp;gt;    &amp;lt;dbl&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 GPT_cpp      2.48ms   2.66ms     375.      781KB     4.58
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 rust        53.46ms  53.84ms      18.5     781KB     2.06
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Absolutely friggin‚Äô bonkers!! If I was better at concurrency and
threading I‚Äôd try to compare that but alas. I‚Äôm stopping here :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;double-addendum&quot;&gt;Double addendum‚Ä¶.&lt;&#x2F;h2&gt;
&lt;p&gt;Okay, after consulting the gods in the extendr discord they pointed to a
number of ways in which this can be improved and made faster.&lt;&#x2F;p&gt;
&lt;p&gt;First off, &lt;code&gt;rust_function()&lt;&#x2F;code&gt; compiled using the &lt;code&gt;dev&lt;&#x2F;code&gt; profile first.
This is used for debugging. If we set &lt;code&gt;profile = &quot;release&quot;&lt;&#x2F;code&gt; we compile
the function for release performance. H&#x2F;t to
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ilia&quot;&gt;@iliak&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;rextendr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;rust_function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  fn count_seq_chars_to_ref(x: Vec&amp;lt;String&amp;gt;, y: &amp;amp;str) -&amp;gt; Vec&amp;lt;usize&amp;gt; {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;    x.into_iter()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        .map(|xi| 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;            xi.as_str().chars().zip(y.chars())
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;            .take_while(|a| a.0 == a.1)
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;            .count()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        )
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        .collect()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  }
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;profile&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;release&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚Ñπ build directory: &amp;#39;&#x2F;private&#x2F;var&#x2F;folders&#x2F;wd&#x2F;xq999jjj3bx2w8cpg7lkfxlm0000gn&#x2F;T&#x2F;RtmprOzrsM&#x2F;file856732f6f8f&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚úî Writing &amp;#39;&#x2F;private&#x2F;var&#x2F;folders&#x2F;wd&#x2F;xq999jjj3bx2w8cpg7lkfxlm0000gn&#x2F;T&#x2F;RtmprOzrsM&#x2F;file856732f6f8f&#x2F;target&#x2F;extendr_wrappers.R&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;bench&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mark&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;GPT_cpp&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref_cpp&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;rust&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 2 √ó 6
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  expression      min   median `itr&#x2F;sec` mem_alloc `gc&#x2F;sec`
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;bch:expr&amp;gt; &amp;lt;bch:tm&amp;gt; &amp;lt;bch:tm&amp;gt;     &amp;lt;dbl&amp;gt; &amp;lt;bch:byt&amp;gt;    &amp;lt;dbl&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 GPT_cpp      2.49ms    2.7ms     363.      781KB     6.19
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 rust         8.67ms   9.36ms      98.1     781KB     2.04
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This brings the run time down a whole lot. The next enhancement pointed
out is that both &lt;code&gt;Vec&amp;lt;String&amp;gt;&lt;&#x2F;code&gt; and &lt;code&gt;Vec&amp;lt;usize&amp;gt;&lt;&#x2F;code&gt; use copies. Instead, I
should be using &lt;code&gt;extendr&lt;&#x2F;code&gt; objects &lt;code&gt;Strings&lt;&#x2F;code&gt; and &lt;code&gt;Integers&lt;&#x2F;code&gt;. Here I:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;change the &lt;code&gt;x&lt;&#x2F;code&gt; to &lt;code&gt;Strings&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;cast usize to i32 using &lt;code&gt;.count() as i32&lt;&#x2F;code&gt; (h&#x2F;t
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;multimeric&quot;&gt;@multimeric&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;use &lt;code&gt;collect_robj()&lt;&#x2F;code&gt; instead of &lt;code&gt;collect()&lt;&#x2F;code&gt; so that it turns into an
&lt;code&gt;Robj&lt;&#x2F;code&gt; (R object)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;rextendr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;rust_function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;    fn count_seq_chars_to_ref(x: Strings, y: &amp;amp;str) -&amp;gt; Robj {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;     x.into_iter()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        .map(|xi| 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;          xi.as_str().chars().zip(y.chars())
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;            .take_while(|a| a.0 == a.1)
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;            .count() as i32
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        )
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        .collect_robj()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;        
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  }&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;profile&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;release&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚Ñπ build directory: &amp;#39;&#x2F;private&#x2F;var&#x2F;folders&#x2F;wd&#x2F;xq999jjj3bx2w8cpg7lkfxlm0000gn&#x2F;T&#x2F;RtmprOzrsM&#x2F;file856732f6f8f&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚úî Writing &amp;#39;&#x2F;private&#x2F;var&#x2F;folders&#x2F;wd&#x2F;xq999jjj3bx2w8cpg7lkfxlm0000gn&#x2F;T&#x2F;RtmprOzrsM&#x2F;file856732f6f8f&#x2F;target&#x2F;extendr_wrappers.R&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;bench&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mark&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;GPT_cpp&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref_cpp&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;rust&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 2 √ó 6
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  expression      min   median `itr&#x2F;sec` mem_alloc `gc&#x2F;sec`
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;bch:expr&amp;gt; &amp;lt;bch:tm&amp;gt; &amp;lt;bch:tm&amp;gt;     &amp;lt;dbl&amp;gt; &amp;lt;bch:byt&amp;gt;    &amp;lt;dbl&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 GPT_cpp      2.49ms   2.69ms      356.     781KB     6.18
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 rust         1.72ms   1.76ms      563.     391KB     4.49
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now rust is faster.&lt;&#x2F;p&gt;
&lt;p&gt;Further, shout out to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;CGMossa&quot;&gt;@cgmossa&lt;&#x2F;a&gt; for this
last implementation that shaves off some more time by using &lt;code&gt;Integers&lt;&#x2F;code&gt;
specifically.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;rextendr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;rust_function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  fn count_seq_chars_to_ref(x: Strings, y: &amp;amp;str) -&amp;gt; Integers {
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;      x.iter()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;          .map(|xi| xi.chars().zip(y.chars()).take_while(|a| a.0 == a.1).count())
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;          .map(|x| Rint::from(x as i32))
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;          .collect()
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;  }
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;profile&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;release&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚Ñπ build directory: &amp;#39;&#x2F;private&#x2F;var&#x2F;folders&#x2F;wd&#x2F;xq999jjj3bx2w8cpg7lkfxlm0000gn&#x2F;T&#x2F;RtmprOzrsM&#x2F;file856732f6f8f&amp;#39;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;‚úî Writing &amp;#39;&#x2F;private&#x2F;var&#x2F;folders&#x2F;wd&#x2F;xq999jjj3bx2w8cpg7lkfxlm0000gn&#x2F;T&#x2F;RtmprOzrsM&#x2F;file856732f6f8f&#x2F;target&#x2F;extendr_wrappers.R&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;bench&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mark&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;GPT_cpp&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref_cpp&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;rust&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count_seq_chars_to_ref&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sample_strings&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;abcd123&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 2 √ó 6
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  expression      min   median `itr&#x2F;sec` mem_alloc `gc&#x2F;sec`
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;bch:expr&amp;gt; &amp;lt;bch:tm&amp;gt; &amp;lt;bch:tm&amp;gt;     &amp;lt;dbl&amp;gt; &amp;lt;bch:byt&amp;gt;    &amp;lt;dbl&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 GPT_cpp       2.5ms   2.68ms      368.     781KB     6.20
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 rust         1.75ms   1.79ms      556.     391KB     6.18
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Rust traits for R users</title>
        <published>2023-03-02T00:00:00+00:00</published>
        <updated>2023-03-02T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/rust-traits-for-r-programmers/"/>
        <id>https://josiah.rs/posts/rust-traits-for-r-programmers/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/rust-traits-for-r-programmers/">&lt;p&gt;In the few months that I‚Äôve been programming in Rust nothing has so
fundamentally shifted the way that I think about programming‚Äîand
specifically R packages‚Äîas Rust traits. I want to talk briefly about
Rust traits and why I think they can make R packages better.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;img src=&quot;feRris.svg&quot; height=&quot;150&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;A trait defines a set of behaviors that can be used by objects of
different kinds. Each trait is a collection of methods (functions) whose
behavior is defined abstractly. The traits can then be &lt;code&gt;impl&lt;&#x2F;code&gt;emented
&lt;em&gt;for&lt;&#x2F;em&gt; different object types. Any object that implements the trait can
then use that method. It‚Äôs kind of confusing, isn‚Äôt it? Let‚Äôs work
through &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;book&#x2F;ch10-02-traits.html&quot;&gt;the example in The
Book‚Ñ¢&lt;&#x2F;a&gt; and how we
can implement it in R.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;defining-a-trait&quot;&gt;Defining a Trait&lt;&#x2F;h2&gt;
&lt;p&gt;We start by defining a trait called &lt;code&gt;Summary&lt;&#x2F;code&gt; which as a single method
that returns a &lt;code&gt;String&lt;&#x2F;code&gt;. Note how the definition is rather abstract. We
know what the function is and what it returns. What happens on the
inside doesn‚Äôt matter to use.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-trait z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-trait z-rust&quot;&gt;trait&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-trait z-rust&quot;&gt;Summary&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-trait z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;summarize&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; String&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-trait z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Analogous in R is the definition of an &lt;a href=&quot;https:&#x2F;&#x2F;adv-r.hadley.nz&#x2F;s3.html&quot;&gt;S3 function
generic&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;It‚Äôs only analogous if the trait implements only one method&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;Summary&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;UseMethod&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Summary&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The S3 function generic is essentially saying that there is a new
function called &lt;code&gt;Summary&lt;&#x2F;code&gt; and it will behave differently based on the
class of object passed to it.&lt;&#x2F;p&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Note that we can‚Äôt specify the output type so we may want to create a
validator function later&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now we want to define a struct called &lt;code&gt;NewsArticle&lt;&#x2F;code&gt; that contains 4
fields related to the news paper itself.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-struct z-rust&quot;&gt;struct&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-entity z-name z-struct z-rust&quot;&gt;NewsArticle&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;headline&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;location&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;author&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is similar to creating a new record in
&lt;a href=&quot;https:&#x2F;&#x2F;vctrs.r-lib.org&#x2F;&quot;&gt;&lt;code&gt;vctrs&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which is rather similar to using
base R.&lt;&#x2F;p&gt;
&lt;div class=&quot;panel-tabset&quot;&gt;
&lt;h2 id=&quot;base-r&quot;&gt;Base R&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;NewsArticle&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$headline
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$location
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$author
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$content
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;attr(,&amp;quot;class&amp;quot;)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;NewsArticle&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;vctrs&quot;&gt;&lt;code&gt;vctrs&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_rcrd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;NewsArticle&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;NewsArticle[0]&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;implementing-a-trait&quot;&gt;&lt;code&gt;impl&lt;&#x2F;code&gt;ementing a trait&lt;&#x2F;h2&gt;
&lt;p&gt;It‚Äôs important that we are able to summarise our newspaper article for
the socials ofc‚Äîso we need to &lt;code&gt;impl&lt;&#x2F;code&gt;ement the &lt;code&gt;Summary&lt;&#x2F;code&gt; trait for the
&lt;code&gt;NewsArticle&lt;&#x2F;code&gt; struct.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-impl z-rust&quot;&gt;impl&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;Summary &lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;for&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt; &lt;span class=&quot;z-entity z-name z-impl z-rust&quot;&gt;NewsArticle&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;summarize&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; String&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;format!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;, by &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt; (&lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-language z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;headline&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-language z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;author&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-language z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;location&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;Notice that the trait is called &lt;code&gt;Summary&lt;&#x2F;code&gt; whereas the method it provides
is called &lt;code&gt;summarize()&lt;&#x2F;code&gt;. For the sake of example I‚Äôm going to call the R
function &lt;code&gt;Summary()&lt;&#x2F;code&gt; throughout the rest of the example. It‚Äôs not
possible to have a perfect 1:1 relationship between Rust and R ;)&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This block defines how the &lt;code&gt;summarize()&lt;&#x2F;code&gt; method will work for a
&lt;code&gt;NewsArticle&lt;&#x2F;code&gt; struct. It will create a string in the format of
&lt;code&gt;&quot;{title}, by {author} ({location})&quot;&lt;&#x2F;code&gt;. In R, we have to define the
&lt;code&gt;NewsArticle&lt;&#x2F;code&gt; method for the &lt;code&gt;Summary&lt;&#x2F;code&gt; function which is done by
creating a function object with the name signature
&lt;code&gt;{Generic}.{class} &amp;lt;- function(...) { . . . }&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;panel-tabset&quot;&gt;
&lt;h2 id=&quot;base-r-1&quot;&gt;Base R&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;Summary.NewsArticle&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;%s, by %s (%s)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    x&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;headline&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    x&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;author&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    x&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;location&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;vctrs-1&quot;&gt;&lt;code&gt;vctrs&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;Summary.NewsArticle&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;%s, by %s (%s)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;headline&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;author&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;location&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Since Musk‚Äôs takeover of twitter, tweets are getting out of hand
becoming ridiculously long so we need to be able to summarize them too!
So if we define a &lt;code&gt;Tweet&lt;&#x2F;code&gt; struct and a corresponding implementation of
&lt;code&gt;Summary&lt;&#x2F;code&gt; we‚Äôll be able to easily summarize them exactly the same way as
news articles.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; define the struct
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-struct z-rust&quot;&gt;struct&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-entity z-name z-struct z-rust&quot;&gt;Tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;username&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; String,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;reply&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;bool&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-member z-rust&quot;&gt;retweet&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-rust&quot;&gt;bool&lt;&#x2F;span&gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-struct z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-comment z-line z-double-slash z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-rust&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; implement the trait
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-impl z-rust&quot;&gt;impl&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;Summary &lt;span class=&quot;z-keyword z-other z-rust&quot;&gt;for&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt; &lt;span class=&quot;z-entity z-name z-impl z-rust&quot;&gt;Tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;summarize&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;span class=&quot;z-meta z-function z-return-type z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt; String&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;        &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;format!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;: &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-language z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;username&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-language z-rust&quot;&gt;self&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;content&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-impl z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Correspondingly in R, we‚Äôre going to be working with both Tweets and
News Articles. So we need to define a tweet class to contain our tweets
and a &lt;code&gt;Summary()&lt;&#x2F;code&gt; method for the new class.&lt;&#x2F;p&gt;
&lt;div class=&quot;panel-tabset&quot;&gt;
&lt;h2 id=&quot;base-r-2&quot;&gt;Base R&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Tweet&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$username
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$content
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;character(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$reply
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;logical(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;$retweet
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;logical(0)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;attr(,&amp;quot;class&amp;quot;)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;Tweet&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;Summary.Tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;%s: %s&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; x&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;username&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; x&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-begin z-r&quot;&gt;[[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;content&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-double z-end z-r&quot;&gt;]]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;vctrs-2&quot;&gt;vctrs&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_rcrd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;character&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;logical&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Tweet&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;Tweet[0]&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;Summary.Tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;%s: %s&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;username&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;content&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can now define a function that utilizes this trait that will produce
consistent &lt;code&gt;String&lt;&#x2F;code&gt; output in the same format for both tweets and new
articles.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;rust&quot; class=&quot;language-rust z-code&quot;&gt;&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-rust&quot;&gt;pub&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-function z-rust&quot;&gt;fn&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function z-rust&quot;&gt;notify&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-rust&quot;&gt;item&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-rust&quot;&gt;&amp;amp;&lt;&#x2F;span&gt;impl Summary&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-parameters z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-rust&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;    &lt;span class=&quot;z-support z-macro z-rust&quot;&gt;println!&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Breaking news! &lt;span class=&quot;z-constant z-other z-placeholder z-rust&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-rust&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-rust&quot;&gt;,&lt;&#x2F;span&gt; item&lt;span class=&quot;z-punctuation z-accessor z-dot z-rust&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function z-rust&quot;&gt;summarize&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-rust&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-rust&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-rust&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-rust&quot;&gt;&lt;span class=&quot;z-meta z-function z-rust&quot;&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-block z-rust&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-rust&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is huge from the R perspective because we can create a &lt;code&gt;notify()&lt;&#x2F;code&gt;
function that calls &lt;code&gt;Summary()&lt;&#x2F;code&gt; and as long as a method if defined for
the input class it will work!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;notify&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;item&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;sprintf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Breaking news! %s&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;Summary&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;item&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To test this out lets create a &lt;code&gt;Tweet&lt;&#x2F;code&gt; and a &lt;code&gt;NewsArticle&lt;&#x2F;code&gt;. First we‚Äôll
create constructor functions for each.&lt;&#x2F;p&gt;
&lt;div class=&quot;panel-tabset&quot;&gt;
&lt;h2 id=&quot;base-r-3&quot;&gt;Base R&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;new_article&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; headline&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; location&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; author&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; content
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;NewsArticle&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;new_tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;structure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; username&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; content&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; reply&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; retweet
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Tweet&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;vctrs-3&quot;&gt;&lt;code&gt;vctrs&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;new_article&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_rcrd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;headline&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; headline&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;location&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; location&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;author&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; author&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; content
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;NewsArticle&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;new_tweet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_rcrd&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;username&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; username&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;content&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; content&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;reply&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; reply&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;retweet&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; retweet
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Tweet&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Using the constructors we can create a tweet and a news article.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; https:&#x2F;&#x2F;www.theonion.com&#x2F;new-absolut-ad-features-swaying-mom-with-one-eye-closed-1850138855
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;article &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_article&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;New Absolut Ad Features Swaying Mom With One Eye Closed Telling Camera She Used To Dance&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Stockholm&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;The Onion&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;The ad concludes abruptly with the mother beginning to cry when, for no particular reason, she suddenly remembers the death of Princess Diana.&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; https:&#x2F;&#x2F;twitter.com&#x2F;TheOnion&#x2F;status&#x2F;1631104570041552896
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;tweet &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_tweet&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;@TheOnion&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Cat Internally Debates Whether Or Not To Rip Head Off Smaller Creature It Just Met https:&#x2F;&#x2F;bit.ly&#x2F;3J1kNzV&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-constant z-language z-r&quot;&gt;FALSE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-constant z-language z-r&quot;&gt;FALSE&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We can see how notify works for both of these.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;notify&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;tweet&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;Breaking news! @TheOnion: Cat Internally Debates Whether Or Not To Rip Head Off Smaller Creature It Just Met https:&#x2F;&#x2F;bit.ly&#x2F;3J1kNzV&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;notify&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;article&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;Breaking news! New Absolut Ad Features Swaying Mom With One Eye Closed Telling Camera She Used To Dance, by The Onion (Stockholm)&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;what-this-means&quot;&gt;what this means&lt;&#x2F;h3&gt;
&lt;p&gt;This is awesome. This means that any object that we create in the
future, as long as it implements the &lt;code&gt;Summary()&lt;&#x2F;code&gt; function for its class
we can utilize the &lt;code&gt;notify()&lt;&#x2F;code&gt; function. This comes with a caveat,
though‚Äîas all good things do.&lt;&#x2F;p&gt;
&lt;p&gt;The Rust compiler ensures that any object that implements the &lt;code&gt;Summary&lt;&#x2F;code&gt;
trait returns a single string. R is far more laissez faire than Rust
with classes and types. One could create a &lt;code&gt;Summary&lt;&#x2F;code&gt; method for an
object that returns a vector of strings. That would break notify. Either
&lt;code&gt;notify()&lt;&#x2F;code&gt; should have type checking or you should make sure that your
method always produces the correct type.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;implications-for-r-packages&quot;&gt;Implications for R packages&lt;&#x2F;h2&gt;
&lt;p&gt;This very simple concept can be transformative for the way that we build
R packages. R packages are, for the most part, bespoke. Each one serves
their own purpose and works only within its own types or types it‚Äôs
aware of. But what if an R package could work with &lt;em&gt;any&lt;&#x2F;em&gt; object type?
Using this idea we can get from Rust traits, we can do that.&lt;&#x2F;p&gt;
&lt;p&gt;Packages that want to be extensible can make it easy to do so by doing
two fairly simple things. Low-level and critical functions should be
exported as generic functions. High level functions that perform some
useful functionality should be built upon those generics.&lt;&#x2F;p&gt;
&lt;p&gt;An example is the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;sdf&quot;&gt;&lt;code&gt;sdf&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; package
I‚Äôve prototyped based on this idea. In this case, I have a spatial data
frame class that can be implemented on any object that implements
methods for the following functions:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;is_geometry()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;bounding_box()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;combine_geometry()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;an-example&quot;&gt;An example&lt;&#x2F;h3&gt;
&lt;p&gt;The &lt;code&gt;sdf&lt;&#x2F;code&gt; class is a &lt;code&gt;tibble&lt;&#x2F;code&gt; with a geometry column and a bounding box
attribute. The function &lt;code&gt;as_sdf()&lt;&#x2F;code&gt; creates an &lt;code&gt;sdf&lt;&#x2F;code&gt; object that tells us
what type of geometry is used and the bounding box of it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sf&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Linking to GEOS 3.13.0, GDAL 3.8.5, PROJ 9.5.1; sf_use_s2() is TRUE
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sdf&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; get some sample data 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;g &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; sfdep&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;guerry&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;region&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;as_sdf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;g&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 85 √ó 2
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   region                                                               geometry
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;fct&amp;gt;                                                          &amp;lt;MULTIPOLYGON&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1 E      (((801150 2092615, 800669 2093190, 800688 2095430, 800780 2095795, 80‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2 N      (((729326 2521619, 729320 2521230, 729280 2518544, 728751 2517520, 72‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3 C      (((710830 2137350, 711746 2136617, 712430 2135212, 712070 2134132, 71‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4 E      (((882701 1920024, 882408 1920733, 881778 1921200, 881526 1922332, 87‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5 E      (((886504 1922890, 885733 1922978, 885479 1923276, 883061 1925266, 88‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6 S      (((747008 1925789, 746630 1925762, 745723 1925138, 744216 1925236, 74‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7 N      (((818893 2514767, 818614 2514515, 817900 2514467, 817327 2514945, 81‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8 S      (((509103 1747787, 508820 1747513, 508154 1747093, 505861 1746627, 50‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9 E      (((775400 2345600, 775068 2345397, 773587 2345177, 772940 2344780, 77‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10 S      (((626230 1810121, 626269 1810496, 627494 1811321, 627681 1812424, 62‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 75 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is super cool because we can group by and summarize the data just
because we have those above functions defined for &lt;code&gt;sfc&lt;&#x2F;code&gt; objects (the
geometry column).&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dplyr&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;as_sdf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;g&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;group_by&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;region&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;summarise&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;n&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 5 √ó 3
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  region     n                                                          geometry
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;fct&amp;gt;  &amp;lt;int&amp;gt;                                                    &amp;lt;MULTIPOLYGON&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 C         17 (((710830 2137350, 711746 2136617, 712430 2135212, 712070 213413‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 E         17 (((801150 2092615, 800669 2093190, 800688 2095430, 800780 209579‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;3 N         17 (((729326 2521619, 729320 2521230, 729280 2518544, 728751 251752‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;4 S         17 (((747008 1925789, 746630 1925762, 745723 1925138, 744216 192523‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;5 W         17 (((456425 2120055, 456229 2120382, 455943 2121064, 456070 212219‚Ä¶
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Say we want to create a custom &lt;code&gt;Point&lt;&#x2F;code&gt; class that we want to be usable
by an &lt;code&gt;sdf&lt;&#x2F;code&gt; object. We can do this rather simply by creating the proper
generics. A &lt;code&gt;Point&lt;&#x2F;code&gt; will be a list of length 2 numeric vectors where the
first element is the x coordinate and the second element is the y
coordinate.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; create some points
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;pnt_data &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-other z-r&quot;&gt;:&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;5&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; \&lt;span class=&quot;z-punctuation z-section z-parens z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-parens z-end z-r&quot;&gt;)&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;runif&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;90&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; create new vector class
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;pnts &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_vctr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;pnt_data&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Point&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;pnts
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;Point[5]&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] 33.37356, 24.34350  80.77240, 41.22992  43.02110, 35.40899 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[4] 26.096064, 1.978444 24.61735, 14.82955 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now we can start defining our methods. &lt;code&gt;is_geometry()&lt;&#x2F;code&gt; should always
return TRUE for our type. We can do this like so:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;is_geometry.Point&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;inherits&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Point&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;aside&quot;&gt;
&lt;p&gt;This method will only be dispatched on &lt;code&gt;Point&lt;&#x2F;code&gt;s so it will always
inherit the &lt;code&gt;Point&lt;&#x2F;code&gt; class. One could just as well always return &lt;code&gt;TRUE&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Next we need to define a method for the bounding box. This is the the
maximum and minimum x and y coordinates. Our method should iterate over
each point and extract the x and y into their own vector and return the
minimum and maxes. These need to be structured in a particular order.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;bounding_box.Point&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  x &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; `[`&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  y &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; `[`&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;xmin&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;min&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;ymin&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;min&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;xmax&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;max&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;ymax&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;max&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Lastly, we need a way to combine the points together. In this case, we
can just ‚Äúcombine‚Äù the points by finding the average point. This is not
geometrically sound but for the sake of example it suffices. Note that
the type it returns always has to be the same! There is not a compiler
forcing us, so we must force ourselves!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;combine_geometry.Point&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  x &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; `[`&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  y &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;vapply&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;.x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; `[`&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_vctr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-r&quot;&gt;list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;mean&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;mean&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Point&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;With only those 3 functions we‚Äôve defined enough to create an &lt;code&gt;sdf&lt;&#x2F;code&gt;
object where the geometry column is a &lt;code&gt;Point&lt;&#x2F;code&gt; vector. To illustrate this
we can use the ggplot2 diamonds data set for example since it has nice x
and y coordinates.&lt;&#x2F;p&gt;
&lt;p&gt;First we create a data frame with a &lt;code&gt;Point&lt;&#x2F;code&gt; column.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;data&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;diamonds&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;package&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;ggplot2&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;diamond_pnts &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; diamonds &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mutate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;pnts&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; vctrs&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;new_vctr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      purrr&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;map2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; y&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; `c`&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;      &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Point&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;select&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;cut&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; pnts&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;head&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;diamond_pnts&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 6 √ó 2
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  cut             pnts
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;ord&amp;gt;        &amp;lt;Point&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 Ideal     3.95, 3.98
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 Premium   3.89, 3.84
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;3 Good      4.05, 4.07
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;4 Premium   4.20, 4.23
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;5 Good      4.34, 4.35
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;6 Very Good 3.94, 3.96
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next we cast it to an &lt;code&gt;sdf&lt;&#x2F;code&gt; object by using &lt;code&gt;as_sdf()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;diamond_sdf &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;as_sdf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;diamond_pnts&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;diamond_sdf
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 53,940 √ó 2
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   cut             pnts
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   &amp;lt;ord&amp;gt;        &amp;lt;Point&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1 Ideal     3.95, 3.98
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2 Premium   3.89, 3.84
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3 Good      4.05, 4.07
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4 Premium   4.20, 4.23
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5 Good      4.34, 4.35
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6 Very Good 3.94, 3.96
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7 Very Good 3.95, 3.98
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8 Very Good 4.07, 4.11
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9 Fair      3.87, 3.78
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10 Very Good 4.00, 4.05
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 53,930 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Notice that the printing method shows &lt;code&gt;Geometry Type: Point&lt;&#x2F;code&gt; and also
has a &lt;code&gt;Bounding box:&lt;&#x2F;code&gt;. That means we have effectively extended the &lt;code&gt;sdf&lt;&#x2F;code&gt;
class by implementing our own methods for the exported generic functions
from &lt;code&gt;sdf&lt;&#x2F;code&gt;. From that alone the &lt;code&gt;sdf&lt;&#x2F;code&gt; methods for dplyr can be used.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;diamond_sdf &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;group_by&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;cut&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;summarise&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;n&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 5 √ó 3
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  cut           n               pnts
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  &amp;lt;ord&amp;gt;     &amp;lt;int&amp;gt;            &amp;lt;Point&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1 Fair       1610 6.246894, 6.182652
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2 Good       4906 5.838785, 5.850744
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;3 Very Good 12082 5.740696, 5.770026
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;4 Premium   13791 5.973887, 5.944879
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;5 Ideal     21551 5.507451, 5.520080
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;why-this-works&quot;&gt;Why this works&lt;&#x2F;h3&gt;
&lt;p&gt;The dplyr &lt;code&gt;sdf&lt;&#x2F;code&gt; methods work like a charm because they use generic
functions. Take the &lt;code&gt;summarise()&lt;&#x2F;code&gt; method for example.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;sdf&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;:::&lt;&#x2F;span&gt;summarise.sdf
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;function (.data, ...) 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    geom_col_name &amp;lt;- attr(.data, &amp;quot;geom_column&amp;quot;)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    geom_col &amp;lt;- .data[[geom_col_name]]
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    gd &amp;lt;- group_data(.data)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    summarized_geoms &amp;lt;- lapply(gd$.rows, function(ids) combine_geometry(geom_col[ids]))
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    res &amp;lt;- NextMethod()
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    res[[geom_col_name]] &amp;lt;- rlang::inject(c(!!!summarized_geoms))
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    as_sdf(res)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;}
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;bytecode: 0x113a2c470&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;&amp;lt;environment: namespace:sdf&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This method uses the &lt;code&gt;combine_geometry()&lt;&#x2F;code&gt; generic function.
&lt;code&gt;combine_geometry()&lt;&#x2F;code&gt; takes a vector of geometries (as determined by
&lt;code&gt;is_geometry()&lt;&#x2F;code&gt;) and returns a single element. The summarise method does
not care which method is used. It only cares that the output is
consistent‚Äîin this case that a scalar value is outputted and that
multiple of those scalars can be combined using &lt;code&gt;c()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;another-example&quot;&gt;Another example&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;sdf#implementing-geos-generics&quot;&gt;For a more detailed example check out the section in the README that
implements an sdf class for geos
geometry&lt;&#x2F;a&gt;.
If you‚Äôre interested in the details I recommend looking at the source
code it is very simple.&lt;&#x2F;p&gt;
&lt;p&gt;First look at the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;sdf&#x2F;blob&#x2F;main&#x2F;R&#x2F;generics.R&quot;&gt;generic method
definitions&lt;&#x2F;a&gt;.
Then look at the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;sdf&#x2F;blob&#x2F;main&#x2F;R&#x2F;sf-compat.R&quot;&gt;&lt;code&gt;sf&lt;&#x2F;code&gt; compatibility
methods&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Raw strings in R</title>
        <published>2023-01-19T00:00:00+00:00</published>
        <updated>2023-01-19T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/raw-strings-in-r/"/>
        <id>https://josiah.rs/posts/raw-strings-in-r/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/raw-strings-in-r/">&lt;p&gt;The one thing about Python I actually really like is the ability to use
raw strings. Raw strings are super helpful for me because at work I use
a windows machine. And windows machines use a silly file path
convention. The &lt;code&gt;\&lt;&#x2F;code&gt; back slack character is used as the file separator
as opposed to the linux &#x2F; unix &lt;code&gt;&#x2F;&lt;&#x2F;code&gt; forward slash.&lt;&#x2F;p&gt;
&lt;p&gt;Using the backslash is so annoying because it‚Äôs also an escape
character. In python I can write the following to hard code a file path.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; class=&quot;language-python z-code&quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;z-source z-python&quot;&gt;&lt;span class=&quot;z-meta z-qualified-name z-python&quot;&gt;&lt;span class=&quot;z-meta z-generic-name z-python&quot;&gt;file_path&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-python&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-string z-python&quot;&gt;r&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-string z-python&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-python&quot;&gt;&lt;span class=&quot;z-source z-regexp z-python&quot;&gt;nav&lt;span class=&quot;z-constant z-character z-escape z-backslash z-regexp&quot;&gt;\t&lt;&#x2F;span&gt;o&lt;span class=&quot;z-constant z-character z-escape z-backslash z-regexp&quot;&gt;\f&lt;&#x2F;span&gt;ile&lt;span class=&quot;z-constant z-character z-escape z-backslash z-regexp&quot;&gt;\p&lt;&#x2F;span&gt;ath&lt;span class=&quot;z-constant z-character z-character-class z-regexp&quot;&gt;.&lt;&#x2F;span&gt;ext&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-python&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Whereas in R typically you would have to write:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;file_path &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;nav&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\\&lt;&#x2F;span&gt;to&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\\&lt;&#x2F;span&gt;file&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\\&lt;&#x2F;span&gt;path.ext&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Since &lt;code&gt;\&lt;&#x2F;code&gt; is an escape character you have to escape it first using
itself. So, its annoying. And
&lt;code&gt;file.path(&quot;nav&quot;, &quot;to&quot;, &quot;file&quot;, &quot;path.ext&quot;, fsep = &quot;\\&quot;)&lt;&#x2F;code&gt; is a wee bit
cumbersome sometimes.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;well-apparently-we-have-all-been-sleeping-on-raw-strings-in-r-since-version-4-0&quot;&gt;WELL APPARENTLY WE HAVE ALL BEEN SLEEPING ON RAW STRINGS IN R SINCE VERSION 4.0.&lt;&#x2F;h1&gt;
&lt;h1 id=&quot;it-s-version-4-2-2&quot;&gt;IT‚Äôs VERSION 4.2.2&lt;&#x2F;h1&gt;
&lt;figure&gt;
&lt;img src=&quot;https:&#x2F;&#x2F;media.giphy.com&#x2F;media&#x2F;3o7TKA3ypeMbOXSrp6&#x2F;giphy.gif&quot;
alt=&quot;Damnit.&quot; &#x2F;&gt;
&lt;figcaption aria-hidden=&quot;true&quot;&gt;Damnit.&lt;&#x2F;figcaption&gt;
&lt;&#x2F;figure&gt;
&lt;h2 id=&quot;aight&quot;&gt;Aight.&lt;&#x2F;h2&gt;
&lt;p&gt;So like, you can use raw strings today.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;span class=&quot;column-margin margin-aside&quot;&gt;How can I get the R-devel news?
I‚Äôm on the mailing list and get it once a week and it‚Äôs like ‚ÄúRe: memory
leak in png() ` not this stuff. Tips?&lt;&#x2F;span&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It was announced in the &lt;a href=&quot;https:&#x2F;&#x2F;cran.r-project.org&#x2F;doc&#x2F;manuals&#x2F;r-devel&#x2F;NEWS.html&quot;&gt;news for version
4.0.0&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;They write:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;There is a new syntax for specifying raw character constants similar
to the one used in C++: r‚Äù(‚Ä¶)‚Äù with ‚Ä¶ any character sequence not
containing the sequence ‚Äò‚Å†)‚Äú‚Å†‚Äô. This makes it easier to write strings
that contain backslashes or both single and double quotes. For more
details see ?Quotes.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;You can write raw strings using the following formats:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;r&quot;( ... )&quot;&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;r&quot;{ ... }&quot;&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;r&quot;[ ... ]&quot;&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;R&quot;( ... )&quot;&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;R&quot;{ ... }&quot;&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;R&quot;[ ... ]&quot;&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;You can even trickier by adding dashes between the quote and the
delimter. The dashes need to be symmetrical though. So the following is
also valid.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;r&quot;-{ ... }&quot;-&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;r&quot;--{ ... }--&quot;&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;r&quot;--{ * _ * }--&quot;&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;span class=&quot;column-margin margin-aside&quot;&gt;It kinda looks like a
crab&lt;&#x2F;span&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Alright so back to the example&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt; r&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;{nav&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\t&lt;&#x2F;span&gt;o&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\f&lt;&#x2F;span&gt;ile&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\p&lt;&#x2F;span&gt;ath.ext}&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[1] &amp;quot;nav\\to\\file\\path.ext&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Hot damn. Thats nice.&lt;&#x2F;p&gt;
&lt;p&gt;I freaked out at first though because R prints two backslashes. But if
you cat the result they go away. So do not worry.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt; r&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;{nav&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\t&lt;&#x2F;span&gt;o&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\f&lt;&#x2F;span&gt;ile&lt;span class=&quot;z-constant z-character z-escape z-r&quot;&gt;\p&lt;&#x2F;span&gt;ath.ext}&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;cat&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;nav\to\file\path.ext
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Programatically Create Formulas in R</title>
        <published>2023-01-17T00:00:00+00:00</published>
        <updated>2023-01-17T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/create-formulae/"/>
        <id>https://josiah.rs/posts/create-formulae/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/create-formulae/">&lt;p&gt;I‚Äôm working on a prototype of a tool using R to create some regressions.
I‚Äôd like to take in independent and dependent variables as character
vectors and use those to create a formula. It took me a minute to figure
out how to programatically create a formula. It‚Äôs a bit tricky because
formula require unquoted objects (symbols).&lt;&#x2F;p&gt;
&lt;p&gt;The trick is to use the function &lt;code&gt;reformulate()&lt;&#x2F;code&gt; (&lt;a href=&quot;https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;12967797&#x2F;is-there-a-better-alternative-than-string-manipulation-to-programmatically-build&quot;&gt;thanks
StackOverflow&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;The syntax is &lt;code&gt;reformulate(x_vars, y_var)&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;form &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;reformulate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;x1&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;x2&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;y&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;form
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;y ~ x1 + x2
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Nice. Throw it into a function.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;make_lm&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;.data&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;y&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  form &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;reformulate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;x&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; y&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lm&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;form&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; .data&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now try it out :)&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;make_lm&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  iris&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;y&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Petal.Width&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;  &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;x&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Sepal.Length&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Petal.Length&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Call:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;lm(formula = form, data = .data)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Coefficients:
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; (Intercept)  Sepal.Length  Petal.Length  
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   -0.008996     -0.082218      0.449376  
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This can be a pretty hand pattern in package development. I hope it
helps you.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Fishnets and overlapping polygons</title>
        <published>2022-11-17T00:00:00+00:00</published>
        <updated>2022-11-17T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/overlapping-polys/"/>
        <id>https://josiah.rs/posts/overlapping-polys/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/overlapping-polys/">&lt;script src=&quot;index_files&#x2F;libs&#x2F;core-js-2.5.3&#x2F;shim.min.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;script src=&quot;index_files&#x2F;libs&#x2F;react-18.2.0&#x2F;react.min.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;script src=&quot;index_files&#x2F;libs&#x2F;react-18.2.0&#x2F;react-dom.min.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;script src=&quot;index_files&#x2F;libs&#x2F;reactwidget-2.0.0&#x2F;react-tools.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;link href=&quot;index_files&#x2F;libs&#x2F;htmltools-fill-0.5.8.1&#x2F;fill.css&quot; rel=&quot;stylesheet&quot; &#x2F;&gt;
&lt;script src=&quot;index_files&#x2F;libs&#x2F;htmlwidgets-1.6.4&#x2F;htmlwidgets.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;link href=&quot;index_files&#x2F;libs&#x2F;reactable-0.4.5&#x2F;reactable.css&quot; rel=&quot;stylesheet&quot; &#x2F;&gt;
&lt;script src=&quot;index_files&#x2F;libs&#x2F;reactable-binding-0.4.5&#x2F;reactable.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;p&gt;Today a question was asked in the geocompr discord. I wanted to share
part of the solution as I think it covers 2 helpful things:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;making a fishnet grid&lt;&#x2F;li&gt;
&lt;li&gt;calculating the area of overlap between two polygons&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;For this example I‚Äôm using data from the &lt;a href=&quot;http:&#x2F;&#x2F;gis.atlantaga.gov&#x2F;?page=OPEN-DATA-HUB&quot;&gt;Atlanta GIS Open Data
Portal&lt;&#x2F;a&gt;. Specifically
using the &lt;a href=&quot;https:&#x2F;&#x2F;dpcd-coaplangis.opendata.arcgis.com&#x2F;maps&#x2F;future-land-use-&quot;&gt;future land use
polygons&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;I‚Äôve downloaded a local copy of the data as a geojson. But you can read
it using the ArcGIS Feature Server it is hosted on.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;objective&quot;&gt;Objective&lt;&#x2F;h3&gt;
&lt;p&gt;Create a map of Atlanta, visualized as a hexagon grid, that displays the
amount of planned mixed use zoning. This will be done in the following
sequence:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Creating a fishnet (hexagon) grid over the city&lt;&#x2F;li&gt;
&lt;li&gt;Creating intersected polygons&lt;&#x2F;li&gt;
&lt;li&gt;Calculate the area of intersected polygons&lt;&#x2F;li&gt;
&lt;li&gt;Join back to the original fishnet grid&lt;&#x2F;li&gt;
&lt;li&gt;visualized.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h3 id=&quot;mixed-use-zoning&quot;&gt;Mixed-use zoning&lt;&#x2F;h3&gt;
&lt;p&gt;Start by loading sf, dplyr, and ggplot2. sf for our spatial work, dplyr
for making our lives easier, and ggplot2 for a bad map later.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;sf&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;dplyr&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;library&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;ggplot2&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We read in our data (mine is local). You can use the commented out code
to read directly from the ArcGIS feature server.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; read from the ArcGIS feature server
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; st_read(&amp;quot;https:&#x2F;&#x2F;services5.arcgis.com&#x2F;5RxyIIJ9boPdptdo&#x2F;arcgis&#x2F;rest&#x2F;services&#x2F;Land_Use_Future&#x2F;FeatureServer&#x2F;0&#x2F;query?outFields=*&amp;amp;where=1%3D1&amp;amp;f=geojson&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;future_land_use &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;read_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Future_Land_Use_.geojson&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mutate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;geometry&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_make_valid&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;geometry&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Let‚Äôs look at the different land use descriptions.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;future_land_use &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_drop_geometry&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;count&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;LANDUSEDESC&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;sort&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  reactable&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;reactable&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;reactable html-widget html-fill-item&quot; id=&quot;htmlwidget-69e006ce736600915a0c&quot; style=&quot;width:auto;height:auto;&quot;&gt;&lt;&#x2F;div&gt;
&lt;script type=&quot;application&#x2F;json&quot; data-for=&quot;htmlwidget-69e006ce736600915a0c&quot;&gt;{&quot;x&quot;:{&quot;tag&quot;:{&quot;name&quot;:&quot;Reactable&quot;,&quot;attribs&quot;:{&quot;data&quot;:{&quot;LANDUSEDESC&quot;:[&quot;Open Space&quot;,&quot;Low-Density Commercial&quot;,&quot;Medium-Density Residential&quot;,&quot;Low-Density Residential&quot;,&quot;Mixed-Use&quot;,&quot;Single-Family Residential&quot;,&quot;High-Density Residential&quot;,&quot;Community Facilities&quot;,&quot;Industrial&quot;,&quot;Office&#x2F;Institutional&quot;,&quot;Mixed-Use Medium-Density&quot;,&quot;Mixed-Use Low-Density&quot;,&quot;Mixed-Use High-Density&quot;,&quot;High-Density Commercial&quot;,&quot;Very High-Density Residential&quot;,&quot;Mixed Use-High Density&quot;,&quot;Transportation&#x2F;Communications&#x2F;Utilities&quot;,&quot;Mixed Use-Low Density&quot;,&quot;Office&#x2F;Institutional&#x2F;Residential&quot;,&quot;Private Open Space&quot;,&quot;High-Density Mixed-Use&quot;,&quot;Mixed Use-Medium Density&quot;,&quot;Business Park&quot;,&quot;Industrial-Mixed Use&quot;,null],&quot;n&quot;:[385,275,266,179,137,115,112,89,81,50,34,33,23,22,22,8,7,6,4,4,3,2,1,1,1]},&quot;columns&quot;:[{&quot;id&quot;:&quot;LANDUSEDESC&quot;,&quot;name&quot;:&quot;LANDUSEDESC&quot;,&quot;type&quot;:&quot;character&quot;},{&quot;id&quot;:&quot;n&quot;,&quot;name&quot;:&quot;n&quot;,&quot;type&quot;:&quot;numeric&quot;}],&quot;dataKey&quot;:&quot;44ca7976bdd855e4c8ea13b049e53c79&quot;},&quot;children&quot;:[]},&quot;class&quot;:&quot;reactR_markup&quot;},&quot;evals&quot;:[],&quot;jsHooks&quot;:[]}&lt;&#x2F;script&gt;
&lt;p&gt;To see a disgusting map with a bad legend run the following.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;future_land_use &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;ggplot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;aes&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fill&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; LANDUSEDESC&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;geom_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;lwd&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;span class=&quot;z-punctuation z-separator z-decimal z-r&quot;&gt;.&lt;&#x2F;span&gt;15&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;color&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;black&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We can see that there are a bunch of different descriptions for
different types of mixed use zoning. Let‚Äôs filter down to descriptions
that have &lt;code&gt;&quot;Mixed-Use&quot;&lt;&#x2F;code&gt; or &lt;code&gt;&quot;Mixed Use&quot;&lt;&#x2F;code&gt; and visualize them.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; how much area of mixed use land use?
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;mixed_use &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; future_land_use &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;filter&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;grepl&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Mixed-Use|Mixed Use&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; LANDUSEDESC&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;ggplot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;geom_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;data&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; mixed_use&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fill&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;blue&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;color&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;NA&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;theme_void&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;overlapping-polys&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-5-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;making-a-fishnet-grid&quot;&gt;Making a fishnet grid&lt;&#x2F;h3&gt;
&lt;p&gt;Having made a fishnet grid quite a few times, I‚Äôve got this handy
function. In essence we create a grid over our target geometry and we
keep only those locations from the grid that intersect eachother. If we
dont‚Äô, we have a square shaped grid.&lt;&#x2F;p&gt;
&lt;p&gt;It is important that you create an ID for the grid, otherwise when we
intersect later you‚Äôll not know what is being intersected.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function z-name z-r&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-r&quot;&gt;make_fishnet&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-r&quot;&gt;&lt;span class=&quot;z-storage z-type z-function z-r&quot;&gt;function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;geometry&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;10&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;hex&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-braces z-begin z-r&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  g &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_make_grid&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;geometry&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;square&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!&lt;&#x2F;span&gt;hex&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; n&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  g&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;lengths&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_intersects&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;g&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; geometry&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;!=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-braces z-end z-r&quot;&gt;}&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;grd &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;make_fishnet&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;future_land_use&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;n&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;40&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_as_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mutate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;hex_id&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;row_number&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;plot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;grd&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;overlapping-polys&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-6-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Man, I love maps of sequential IDs.&lt;&#x2F;p&gt;
&lt;p&gt;Next, we split our mixed use polygons based on the hexagons.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; how much area in each hexagon
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;lu_intersects &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_intersection&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;mixed_use&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; grd&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Warning: attribute variables are assumed to be spatially constant throughout
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;all geometries
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then we calculate the area of each resultant shape.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;overlap_area &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; lu_intersects &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;mutate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;area&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_area&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;geometry&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;plot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;overlap_area&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-begin z-r&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-meta z-item-access z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-parameters z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;area&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-item-access z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-single z-end z-r&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;overlapping-polys&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-8-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The next step here is to take the split polygons, and join the data back
to the hexagons. I use a right join because they don‚Äôt get enough love.
And also because if you try to do a join with two sf objects they‚Äôll
scream!!.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-comment z-line z-number-sign z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-r&quot;&gt;#&lt;&#x2F;span&gt; join it back to the grid
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;hex_area_overlap &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_drop_geometry&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;overlap_area&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;select&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;hex_id&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; area&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;right_join&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;grd&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;by&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;hex_id&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-logical z-r&quot;&gt;&amp;gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;st_as_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;hex_area_overlap
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Simple feature collection with 1381 features and 2 fields
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Geometry type: POLYGON
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Dimension:     XY
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Bounding box:  xmin: -84.55738 ymin: 33.64417 xmax: -84.28635 ymax: 33.88926
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Geodetic CRS:  WGS 84
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# A tibble: 1,381 √ó 3
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;   hex_id    area                                                              x
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    &amp;lt;int&amp;gt;   [m^2]                                                  &amp;lt;POLYGON [¬∞]&amp;gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 1     72 160485. ((-84.5182 33.65548, -84.52146 33.65737, -84.52146 33.66114, ‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 2     84  44538. ((-84.51493 33.64983, -84.5182 33.65171, -84.5182 33.65548, -‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 3     85 176134. ((-84.51493 33.66114, -84.5182 33.66302, -84.5182 33.66679, -‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 4     87   5049. ((-84.51493 33.68376, -84.5182 33.68565, -84.5182 33.68942, -‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 5     97 380145. ((-84.51167 33.65548, -84.51493 33.65737, -84.51493 33.66114,‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 6    100 110821. ((-84.51167 33.68942, -84.51493 33.6913, -84.51493 33.69507, ‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 7    106   8232. ((-84.51167 33.75729, -84.51493 33.75917, -84.51493 33.76294,‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 8    110 109249. ((-84.5084 33.64983, -84.51167 33.65171, -84.51167 33.65548, ‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; 9    111 150687. ((-84.5084 33.66114, -84.51167 33.66302, -84.51167 33.66679, ‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;10    113 141654. ((-84.5084 33.68376, -84.51167 33.68565, -84.51167 33.68942, ‚Ä¶
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# ‚Ñπ 1,371 more rows
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now plot it!&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;r&quot; class=&quot;language-r z-code&quot;&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;ggplot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;hex_area_overlap&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;aes&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fill&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-support z-function z-r&quot;&gt;as.numeric&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;area&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;geom_sf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;color&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;black&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;lwd&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-numeric z-float z-decimal z-r&quot;&gt;0&lt;span class=&quot;z-punctuation z-separator z-decimal z-r&quot;&gt;.&lt;&#x2F;span&gt;15&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;theme_void&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;scale_fill_viridis_c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;option&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;plasma&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt; 
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;na.value&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-r&quot;&gt;NA&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-arguments z-r&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;labels&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; scales&lt;span class=&quot;z-punctuation z-accessor z-colons z-r&quot;&gt;::&lt;&#x2F;span&gt;comma
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-arithmetic z-r&quot;&gt;+&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-r&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-name z-r&quot;&gt;&lt;span class=&quot;z-variable z-function z-r&quot;&gt;labs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-arguments z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-begin z-r&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-r&quot;&gt;fill&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-r&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-r&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Area of mixed-use zoning (m)&lt;span class=&quot;z-punctuation z-definition z-string z-end z-r&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-arguments z-end z-r&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;overlapping-polys&#x2F;index_files&#x2F;figure-commonmark&#x2F;unnamed-chunk-10-1.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Make your R scripts Databricks notebooks</title>
        <published>2022-05-11T00:00:00+00:00</published>
        <updated>2022-05-11T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/r-scripts-as-notebooks/"/>
        <id>https://josiah.rs/posts/r-scripts-as-notebooks/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/r-scripts-as-notebooks/">&lt;p&gt;I&#x27;ve never had a good reason to deviate from the canonical &lt;code&gt;.R&lt;&#x2F;code&gt; file extension until today.&lt;&#x2F;p&gt;
&lt;p&gt;As you may have seen over the past few month from my numerous rage-tweets and &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;JosiahParry&#x2F;status&#x2F;1517195634293489664&quot;&gt;Databricks related threads&lt;&#x2F;a&gt;, I&#x27;ve been doing &lt;em&gt;a lot&lt;&#x2F;em&gt; of work getting figuring out Databricks as an R user so we can get onboard with adoption here at NPD.&lt;&#x2F;p&gt;
&lt;p&gt;One of my biggest qualms about Databricks is that it&#x27;s tailored to their notebooks. The notebooks get magical superpowers that aren&#x27;t available anywhere else. Notebooks get root permissions, they have access to &lt;code&gt;dbutils&lt;&#x2F;code&gt;, and are the only thing that can actually be scheduled by Databricks outside of a jar file or SparkSQL code.&lt;&#x2F;p&gt;
&lt;p&gt;I&#x27;ve spent quite a bit of time thinking about how we can schedule R scripts through a notebook. If you&#x27;re wondering, have the notebook kickoff the R script with a shell command.&lt;&#x2F;p&gt;
&lt;p&gt;But, alas, I&#x27;ve learned something today. If you connect your Git repo to Databricks through their &lt;code&gt;&quot;Repos&quot;&lt;&#x2F;code&gt;, you can have your R scripts be accessible as notebooks with quite literally only two changes.&lt;&#x2F;p&gt;
&lt;p&gt;First, R scripts need to have the less-preferable, though equally functional, file extension &lt;code&gt;.r&lt;&#x2F;code&gt;. Second, the first line of the script should be a comment that says &lt;code&gt;# Databricks notebook source&lt;&#x2F;code&gt;. And that&#x27;s it. Then once the git repo has been connected, it will recognize those as notebooks.&lt;&#x2F;p&gt;
&lt;p&gt;If you want to create cells in your code write a comment &lt;code&gt;# COMMAND ----------&lt;&#x2F;code&gt;‚Äîthat&#x27;s 10 hyphens at the end.&lt;&#x2F;p&gt;
&lt;p&gt;If you create a file &lt;code&gt;main.r&lt;&#x2F;code&gt; which contains the body&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# Databricks notebook source
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;print(&amp;quot;Hello world&amp;quot;)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# COMMAND ---------
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;print(&amp;quot;Databricks! I&amp;#39;ve figured you out‚Äîsorta....&amp;quot;)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# COMMAND ---------
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;print(&amp;quot;I feel powerful.&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You will have an R script that is recognized as a notebook by Databricks that can be scheduled using Databricks&#x27; scheduling wizard.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Color Palette Cinema</title>
        <published>2021-03-14T00:00:00+00:00</published>
        <updated>2021-03-14T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/cpcinema/"/>
        <id>https://josiah.rs/posts/cpcinema/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/cpcinema/">&lt;blockquote&gt;
&lt;p&gt;Note (2022-11-14): This package no longer is functional because of changes to underlying API cpcinema calls. Thus output is no longer rendered for this blog post.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Friday night I found myself trying to make a plot look pretty. When I&#x27;m looking for color palette inspiration I often turn to the Instagram page &lt;a href=&quot;https:&#x2F;&#x2F;www.instagram.com&#x2F;colorpalette.cinema&#x2F;&quot;&gt;@colorpalette.cinema&lt;&#x2F;a&gt; for inspiration. Color Palette Cinema is an awesome page that takes stills from films and creates a nice palette of 10 colors from the image. These can range from bright hues, to monochromatic masterpieces. I settled on the &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Hayao_Miyazaki&quot;&gt;Miyasaki&lt;&#x2F;a&gt; masterpiece &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Spirited_Away&quot;&gt;Spirited Away&lt;&#x2F;a&gt; (streaming on HBO Max, by the way). I extracted the colors with the 3&#x2F;4 baked package &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;cpcinema&#x2F;&quot;&gt;&lt;code&gt;{cpcinema}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; that I created right as the pandemic began at the end of March. (Thinking back, it&#x27;s slightly wild that I wrote this package sitting inside of the Cambridge library without a mask.)&lt;&#x2F;p&gt;
&lt;img src=&quot;https:&#x2F;&#x2F;i.pinimg.com&#x2F;originals&#x2F;90&#x2F;ec&#x2F;34&#x2F;90ec34736dd66d3d38f401aac60893da.png&quot; width=&quot;700px&quot; style=&quot;display: block; margin: auto;&quot; &#x2F;&gt;
&lt;p&gt;Around midnight, I tossed a silly #rstats tweet into the void thinking nothing of it---as I usually do.&lt;&#x2F;p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;
The most wonderful &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;hashtag&#x2F;rstats?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#rstats&lt;&#x2F;a&gt; package I\&#x27;ve ever made for myself. &lt;a href=&quot;https:&#x2F;&#x2F;t.co&#x2F;o4C3g0Mtpj&quot;&gt;pic.twitter.com&#x2F;o4C3g0Mtpj&lt;&#x2F;a&gt;
&lt;&#x2F;p&gt;
--- jo-sigh-ughhh (@JosiahParry) &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;JosiahParry&#x2F;status&#x2F;1370595896405209091?ref_src=twsrc%5Etfw&quot;&gt;March 13, 2021&lt;&#x2F;a&gt;
&lt;&#x2F;blockquote&gt;
&lt;script async src=&quot;https:&#x2F;&#x2F;platform.twitter.com&#x2F;widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;&#x2F;script&gt;
&lt;p&gt;I awoke to what felt celebrity levels of likes and interactions on the tweet. As of right now, there are 343 likes on the tweet. That&#x27;s 340 more likes than I&#x27;m used to. Apparently people thought this package idea was fun. I was surprised. One of the first replies stuck out to me the most:&lt;&#x2F;p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;
Beautiful and private :(
&lt;&#x2F;p&gt;
--- Emil Hvitfeldt (@Emil_Hvitfeldt) &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;Emil_Hvitfeldt&#x2F;status&#x2F;1370597608536743940?ref_src=twsrc%5Etfw&quot;&gt;March 13, 2021&lt;&#x2F;a&gt;
&lt;&#x2F;blockquote&gt;
&lt;script async src=&quot;https:&#x2F;&#x2F;platform.twitter.com&#x2F;widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;&#x2F;script&gt;
&lt;p&gt;It hadn&#x27;t crossed my mind that others would want to utilize this package---hence why I didn&#x27;t share the package URL. The package is public in fact. But I&#x27;ve not once publicized it until this post.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;why-didn-t-i-release-cpcinema&quot;&gt;Why didn&#x27;t I &quot;release&quot; cpcinema?&lt;&#x2F;h2&gt;
&lt;p&gt;There are two distinct reasons why I didn&#x27;t tweet the package into the void.&lt;&#x2F;p&gt;
&lt;p&gt;The first reason is that I struggled for hours on end trying to figure out an easy way to get the color palettes directly from an Instagram post. I am only familiar with one endpoint of an undocumented Instagram API and that only returns the URL for the first image in a post. I want &lt;em&gt;all&lt;&#x2F;em&gt; of them. I then attempted to do this via the official Facebook Instagram API---a truly insurmountable task for those seeking simple &lt;code&gt;GET&lt;&#x2F;code&gt; requests for data. The Instagram Basic API is intended for those who are seeking to build true applications---not for data scientists. The good news is that I&#x27;ve figured this out. h&#x2F;t to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;colearendt&quot;&gt;Cole Arendt&lt;&#x2F;a&gt; for teaching me how to use the networking tab of Chrome. We wouldn&#x27;t be here without him.&lt;&#x2F;p&gt;
&lt;p&gt;The second reason is less technical. The functionality I was (and am) most excited about creating was 1) an S3 vectors class using &lt;code&gt;{vctrs}&lt;&#x2F;code&gt;; 2) a printing method that displayed the colors; and 3) color interpolation for continuous color scales. As I was nearing completion of this package I learned about &lt;a href=&quot;https:&#x2F;&#x2F;www.hvitfeldt.me&#x2F;about&#x2F;&quot;&gt;Emil Hvitfeldt&#x27;s&lt;&#x2F;a&gt; awesome package &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;EmilHvitfeldt&#x2F;paletteer&quot;&gt;&lt;code&gt;{paletteer}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. paletteer accomplishes 1) and 2) through the dependency &lt;a href=&quot;https:&#x2F;&#x2F;emilhvitfeldt.github.io&#x2F;prismatic&#x2F;&quot;&gt;&lt;code&gt;{prismatic}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which Emil, also created---a prolofic software engineer if there ever was one. (Though I will stand on my petty hill that I prefer my printing method üòâ, it&#x27;s something about the squares and the vertical orientation---except it gets out of hand with like 20+ colors.) And 3) is accomplished by paletteer itself.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;using-cpcinema&quot;&gt;Using cpcinema&lt;&#x2F;h2&gt;
&lt;p&gt;cpcinema is a rather somewhat simple package to use!&lt;&#x2F;p&gt;
&lt;p&gt;First things first: install the package.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# install.packages(&quot;remotes&quot;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;remotes&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;remotes.r-lib.org&#x2F;reference&#x2F;install_github.html&#x27;&gt;install_github&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;JosiahParry&#x2F;cpcinema&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Next, find a post from Color Palette Cinema that you really like and grab the URL.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.instagram.com&#x2F;p&#x2F;CEuS3Y_oEbw&#x2F;&quot;&gt;This post&lt;&#x2F;a&gt; with an image of Blade Runner is awesome.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;So I&#x27;ll grab the URL and pass it to &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;cpcinema&#x2F;man&#x2F;pal_from_post.html&quot;&gt;&lt;code&gt;pal_from_post()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;cpcinema&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;blade&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;cpcinema&#x2F;man&#x2F;pal_from_post.html&#x27;&gt;pal_from_post&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;www.instagram.com&#x2F;p&#x2F;CEuS3Y_oEbw&#x2F;&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Unfortunately R Markdown doesn&#x27;t render the beautiful printing. But try it out for yourself!&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# this is stored in a list because sometimes a post &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;# has more than one color palette&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;pal&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;blade&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now we can use the palette for plotting! The below example takes the built in object &lt;code&gt;USArrests&lt;&#x2F;code&gt; and samples 10 random states and creates a ranked bar chart colored by state.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;as_tibble.html&#x27;&gt;as_tibble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;USArrests&lt;&#x2F;span&gt;, rownames &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;state&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;cpcinema&#x2F;man&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;sample_n.html&#x27;&gt;sample_n&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;10&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;cpcinema&#x2F;man&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;state &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;forcats.tidyverse.org&#x2F;reference&#x2F;fct_reorder.html&#x27;&gt;fct_reorder&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;state&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;UrbanPop&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;cpcinema&#x2F;man&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggplot.html&#x27;&gt;ggplot&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;aes.html&#x27;&gt;aes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;UrbanPop&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;state&lt;&#x2F;span&gt;, fill &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;state&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_bar.html&#x27;&gt;geom_col&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggtheme.html&#x27;&gt;theme_light&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;labs.html&#x27;&gt;labs&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;title &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;States ranked by urban population&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# This is where we add the palette&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_manual.html&#x27;&gt;scale_fill_manual&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;values &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;pal&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;You can even use the color palettes for continuous data. The function &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;cpcinema&#x2F;man&#x2F;color_palette.html&quot;&gt;&lt;code&gt;color_palette()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; will create a color palette from a vector of color codes. If &lt;code&gt;n&lt;&#x2F;code&gt; is greater than the number of colors provided, color interpolation will be done to create a smooth palette!&lt;&#x2F;p&gt;
&lt;p&gt;Below we create a heat map with the built it object &lt;code&gt;volcano_df&lt;&#x2F;code&gt;. First we create the new color palette with 100 values, then create the heatmap. The important line is &lt;a href=&quot;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_gradient.html&quot;&gt;&lt;code&gt;scale_fill_gradientn()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;continuous_pal&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;cpcinema&#x2F;man&#x2F;color_palette.html&#x27;&gt;color_palette&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;pal&lt;&#x2F;span&gt;, n &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;100&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;continuous&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggplot.html&#x27;&gt;ggplot&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;volcano_df&lt;&#x2F;span&gt;, &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;aes.html&#x27;&gt;aes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;x &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt;, y &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;y&lt;&#x2F;span&gt;, fill &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;z&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_tile.html&#x27;&gt;geom_tile&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_gradient.html&#x27;&gt;scale_fill_gradientn&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;colours &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;continuous_pal&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_discrete.html&#x27;&gt;scale_x_discrete&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;expand &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_discrete.html&#x27;&gt;scale_y_discrete&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;expand &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;coord_fixed.html&#x27;&gt;coord_equal&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggtheme.html&#x27;&gt;theme_void&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;what-next&quot;&gt;What next?&lt;&#x2F;h2&gt;
&lt;p&gt;Next, I&#x27;ll work to make this package work nicely with &lt;code&gt;prismatic&lt;&#x2F;code&gt; and &lt;code&gt;paletteer&lt;&#x2F;code&gt;. The challenge with the latter is that you can&#x27;t provide character strings directly to the &lt;code&gt;scale_color&#x2F;fill_paletteer_d&#x2F;c()&lt;&#x2F;code&gt; functions directly. They have to be provided as &lt;code&gt;pkgname::palette&lt;&#x2F;code&gt;. I am not too sure how to incorporate cpcinema in there. But I think my preference would be to provide a character vector as that is more flexible.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>R Security Concerns and 2019 CRAN downloads</title>
        <published>2020-02-04T00:00:00+00:00</published>
        <updated>2020-02-04T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/cran-2019/"/>
        <id>https://josiah.rs/posts/cran-2019/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/cran-2019/">&lt;p&gt;The number of downloads that a package has can tell us a number of things. For example, how much other packages rely on it. A great case of this is &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;r-lib&#x2F;rlang&quot;&gt;&lt;code&gt;rlang&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Not many of use &lt;code&gt;rlang&lt;&#x2F;code&gt;, know what it does, or even bother to dive into it. But in reality it is the backbone of so many packages that we know and love and use every day.&lt;&#x2F;p&gt;
&lt;p&gt;The other thing that we can infer from the download numbers is how trusted a package may be. Packages that have been downloaded time and time and again have &lt;em&gt;likely&lt;&#x2F;em&gt; been scoped out thoroughly for any bugs. This can be rather comforting for security conscious groups.&lt;&#x2F;p&gt;
&lt;p&gt;With a little &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tidyverse&#x2F;rvest&quot;&gt;&lt;code&gt;rvest&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;-web-scraping-magic we can obtain the name of every package published to &lt;a href=&quot;https:&#x2F;&#x2F;cran.r-project.org&#x2F;&quot;&gt;CRAN&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;&#x27;&gt;rvest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;url&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;cran.r-project.org&#x2F;web&#x2F;packages&#x2F;available_packages_by_name.html&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;cran_packages&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&#x27;&gt;html_session&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;url&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&#x27;&gt;html_nodes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;table a&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;html_text.html&#x27;&gt;html_text&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;RStudio keeps daily logs of packages downloaded from their CRAN mirror. The package &lt;a href=&quot;https:&#x2F;&#x2F;r-hub.github.io&#x2F;cranlogs&quot;&gt;&lt;code&gt;cranlogs&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; makes the data available via and API and an R package. Below is a lightweight function which sums the total number of downloads for the entire year. &lt;code&gt;furrr&lt;&#x2F;code&gt; was used to speed up the computation a bit. This takes ~40 minutes to run, as such use the exported data in &lt;code&gt;data&#x2F;cran-2019-total-downloads.csv&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;get_year_downloads&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;pkg&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;cranlogs&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;cran_downloads&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;pkg&lt;&#x2F;span&gt;, 
                           from &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;2019-01-01&quot;&lt;&#x2F;span&gt;,
                           to &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;2019-12-31&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;package&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise.html&#x27;&gt;summarise&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;total_downloads &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sum.html&#x27;&gt;sum&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;count&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;total_cran_downloads&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;furrr&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;furrr&#x2F;man&#x2F;future_map.html&#x27;&gt;future_map_dfr&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;cran_packages&lt;&#x2F;span&gt;, 
  .f &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;safely.html&#x27;&gt;possibly&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;get_year_downloads&lt;&#x2F;span&gt;, otherwise &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;tibble.html&#x27;&gt;tibble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;total_cran_downloads&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;data&#x2F;cran-2019-total-downloads.csv&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;pillar.r-lib.org&#x2F;reference&#x2F;glimpse.html&#x27;&gt;glimpse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;total_cran_downloads&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;While this is helpful, these packges also have dependencies, and those dependencies have dependencies. The R core team have built out the &lt;code&gt;tools&lt;&#x2F;code&gt; package which contains, yes, wonderful tools. The function &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;tools&#x2F;package_dependencies.html&quot;&gt;&lt;code&gt;tools::package_dependencies()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; provides us with the dependencies.&lt;&#x2F;p&gt;
&lt;p&gt;The below code identifies the top 500 downloaded packages and their dependencies.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;top_500_cran&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;top_n.html&#x27;&gt;top_n&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;total_cran_downloads&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;500&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;total_downloads&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#pull the package dependencies&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;pkg_deps&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;top_500_cran&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;package&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;tools&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;tools&#x2F;package_dependencies.html&#x27;&gt;package_dependencies&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;recursive &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;utils&#x2F;head.html&#x27;&gt;head&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;pkg_deps&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;package-checks&quot;&gt;Package Checks&lt;&#x2F;h2&gt;
&lt;p&gt;Each package on CRAN goes through a rigorous checking process. The r cmd check is ran on each package for twelve different flavors from a combination of Linux and Windows. If you trust the checks that the R Core team do, I wouldn&#x27;t reinvent the wheel.&lt;&#x2F;p&gt;
&lt;p&gt;The data are not provided directly from CRAN though an individual has provided these data via an API. I recommend using the API as a check against packages on ingest. I&#x27;d also do this process for every time you&#x27;re syncing. Again, this doesn&#x27;t mean that there are no vulnerabilities. But if there are functions that will literally break the machine, then the checks in general shouldn&#x27;t work.&lt;&#x2F;p&gt;
&lt;p&gt;The biggest risk is really in the development and publication of applications. The greatest risk you are likely to face are going to be internal or accidental. For example using base R and Shiny, a developer can make an app unintentionally malicious---i.e.¬†permitting system calls or creating a SQL injection. Though this would be rather difficult to build into an app, it is possible. The process here would be to institute a peer review process for the apps developed. Also, you&#x27;re going to want to sandbox the applications---which Connect does and will improve with launcher in the future.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;instituting-checks&quot;&gt;Instituting Checks&lt;&#x2F;h2&gt;
&lt;p&gt;We can use the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ropenscilabs&#x2F;cchecks&quot;&gt;&lt;code&gt;cchecks&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; packge to interact with R-Hub&#x27;s CRAN check API. They have done a wonderful job aggregating package check data. The data it returns, however, is in a rather deeply nested list. Below is a function defintion which can tidy up some of the important information produced from the API query.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;#devtools::install_github(&quot;ropenscilabs&#x2F;cchecks&quot;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;cchecks&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;tidy_checks&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;checks&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;check_res&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;checks&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;pluck&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;data&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;checks&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;check_pkg&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;checks&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;pluck&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;data&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;package&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;check_deets&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;checks&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;pluck&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;data&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;check_details&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;check_summ&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;checks&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;pluck&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;data&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;summary&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;tibble.html&#x27;&gt;tibble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;pkg &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;unlist.html&#x27;&gt;unlist&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;check_pkg&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
         check_results &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;check_res&lt;&#x2F;span&gt;,
         check_details &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;check_deets&lt;&#x2F;span&gt;,
         check_summary &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;check_summ&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;hoist.html&#x27;&gt;unnest_wider&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;check_summary&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# query the API for packages&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;checks&lt;&#x2F;span&gt;  &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;cch_pkgs&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;spotifyr&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;genius&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;# tidy up the checks&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;clean_checks&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;tidy_checks&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;checks&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;# get check results&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;clean_checks&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;unnest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;check_results&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;# get check details&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;clean_checks&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;hoist.html&#x27;&gt;unnest_wider&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;check_details&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;You can pull these checks for the top 500 packages and their dependencies in a rather straightforward manner now. You can iterate through these all. Note that this is an API and you may see some lag time. So go make some tea.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;top_checks&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;cch_pkgs&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;utils&#x2F;head.html&#x27;&gt;head&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;top_500_cran&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;package&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;tidy_checks&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;top_checks&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;resources&quot;&gt;Resources&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;environments.rstudio.com&#x2F;validation.html&quot;&gt;https:&#x2F;&#x2F;environments.rstudio.com&#x2F;validation.html&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.r-bloggers.com&#x2F;overview-of-the-cran-checks-api&#x2F;amp&quot;&gt;https:&#x2F;&#x2F;www.r-bloggers.com&#x2F;overview-of-the-cran-checks-api&#x2F;amp&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;blog.r-hub.io&#x2F;2019&#x2F;04&#x2F;25&#x2F;r-devel-linux-x86-64-debian-clang&#x2F;&quot;&gt;https:&#x2F;&#x2F;blog.r-hub.io&#x2F;2019&#x2F;04&#x2F;25&#x2F;r-devel-linux-x86-64-debian-clang&#x2F;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Water Quality Analysis</title>
        <published>2019-08-09T00:00:00+00:00</published>
        <updated>2019-08-09T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/epa-waterquality/"/>
        <id>https://josiah.rs/posts/epa-waterquality/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/epa-waterquality/">&lt;p&gt;This small tutorial was developed for a talk &#x2F; workshop that &lt;a href=&quot;https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;philip-bowsher-67151015&#x2F;&quot;&gt;Phil Bowsher&lt;&#x2F;a&gt; gave at the EPA. This serves as a quick example of using the tidyverse for spatial analysis, modeling, and interactive mapping.&lt;&#x2F;p&gt;
&lt;p&gt;The source code and data can be found &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;epa-water-quality&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;epa-water-quality-analysis&quot;&gt;EPA Water Quality Analysis&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;data-cleaning&quot;&gt;Data Cleaning&lt;&#x2F;h2&gt;
&lt;p&gt;This section outlines the process needed for cleaning data taken from EPA.gov.&lt;&#x2F;p&gt;
&lt;p&gt;There are two datasets:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.epa.gov&#x2F;sites&#x2F;production&#x2F;files&#x2F;2014-10&#x2F;nla2007_chemical_conditionestimates_20091123.csv&quot;&gt;Water Chemistry&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.epa.gov&#x2F;sites&#x2F;production&#x2F;files&#x2F;2014-10&#x2F;nla2007_chemical_conditionestimates_20091123.csv&quot;&gt;Sample Site Information&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The first dataset contains data pertaining to water quality samples at a given site. The second data set contains information relating to that site such as latitude and longitude data. We will need to combine these datasets.&lt;&#x2F;p&gt;
&lt;p&gt;In order to join any two datasets there must be a common field(s). This case it is the &lt;code&gt;site_id&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The below code chunk:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Load the &lt;code&gt;tidyverse&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Creates variables that store the URL of the csv files&lt;&#x2F;li&gt;
&lt;li&gt;Read the datasets and standardizes the column names using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function from janitor.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# identify water quality csv&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;water_url&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;www.epa.gov&#x2F;sites&#x2F;production&#x2F;files&#x2F;2014-10&#x2F;nla2007_chemical_conditionestimates_20091123.csv&quot;&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# site info csv (w lat lon data)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;site_url&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;www.epa.gov&#x2F;sites&#x2F;production&#x2F;files&#x2F;2014-01&#x2F;nla2007_sampledlakeinformation_20091113.csv&quot;&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# read sites&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;sites&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;site_url&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;janitor&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# read water&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;water_q&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;water_url&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;janitor&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we have these datasets we will need to join them together.In this case we will join three tables together:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Water Quality dataset&lt;&#x2F;li&gt;
&lt;li&gt;Site location data&lt;&#x2F;li&gt;
&lt;li&gt;State abbreviation and region data&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We first take only a few columns of interest from the &lt;code&gt;sites&lt;&#x2F;code&gt; dataset. This is then piped (&lt;code&gt;%\&amp;gt;%&lt;&#x2F;code&gt; ) into an &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&quot;&gt;&lt;code&gt;inner_join()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; (all columns from x and y where there is a match between x and y). The resultant table is then passed forward into a &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&quot;&gt;&lt;code&gt;left_join()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; (all columns from x and y where returning all rows from x). In this join the y table is explicitly created from the built in R objects &lt;code&gt;state.abb&lt;&#x2F;code&gt; and &lt;code&gt;state.region&lt;&#x2F;code&gt;. Then, a &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&quot;&gt;&lt;code&gt;select()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; statement is used to change some column names, select only the columns of interest. Finally, the tibble is written to the &lt;code&gt;data&lt;&#x2F;code&gt; directory (run &lt;code&gt;mkdir(&quot;data&quot;)&lt;&#x2F;code&gt;) if the directory does not exist.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# join together&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;clean&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sites&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;lon_dd&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;lat_dd&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;lakename&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;site_id&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;state_name&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;st&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&#x27;&gt;inner_join&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;water_q&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;site_id&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# join a table that has region info&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&#x27;&gt;left_join&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;tibble.html&#x27;&gt;tibble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;st &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;state.abb&lt;&#x2F;span&gt;,
           region &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;state.region&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;st.y&quot;&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;st&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# select only data of interest&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyselect.r-lib.org&#x2F;reference&#x2F;starts_with.html&#x27;&gt;contains&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;_cond&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;ptl&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;ntl&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;chla&lt;&#x2F;span&gt;, st &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;st.x&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;region&lt;&#x2F;span&gt;,
         lon_dd &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;lon_dd.x&lt;&#x2F;span&gt;, lat_dd &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;lat_dd.x&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;lakename&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;


&lt;span class=&#x27;c&#x27;&gt;#write_csv(clean, &quot;data&#x2F;water_quality.csv&quot;) &lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h1 id=&quot;exploratory-analysis&quot;&gt;Exploratory analysis&lt;&#x2F;h1&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;water&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;JosiahParry&#x2F;epa-water-quality&#x2F;master&#x2F;data&#x2F;water_quality.csv&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;pillar.r-lib.org&#x2F;reference&#x2F;glimpse.html&#x27;&gt;glimpse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;water&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Rows: 1,442&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Columns: 14&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ ptl_cond      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &quot;1:LEAST DISTURBED&quot;, &quot;2:INTERMEDIATE DISTURBANCE&quot;, &quot;1:LEAST DIST‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ ntl_cond      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &quot;1:LEAST DISTURBED&quot;, &quot;2:INTERMEDIATE DISTURBANCE&quot;, &quot;1:LEAST DIST‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ chla_cond     &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &quot;1:LEAST DISTURBED&quot;, &quot;1:LEAST DISTURBED&quot;, &quot;1:LEAST DISTURBED&quot;, &quot;‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ turb_cond     &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &quot;1:LEAST DISTURBED&quot;, &quot;1:LEAST DISTURBED&quot;, &quot;1:LEAST DISTURBED&quot;, &quot;‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ anc_cond      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &quot;1:LEAST DISTURBED&quot;, &quot;1:LEAST DISTURBED&quot;, &quot;1:LEAST DISTURBED&quot;, &quot;‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ salinity_cond &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &quot;1:LEAST DISTURBED&quot;, &quot;1:LEAST DISTURBED&quot;, &quot;1:LEAST DISTURBED&quot;, &quot;‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ ptl           &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt; 6, 36, 22, 36, 22, 43, 50, 43, 50, 18, 46, 18, 46, 4, 3, 4, 3, 7‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ ntl           &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt; 151, 695, 469, 695, 469, 738, 843, 738, 843, 344, 596, 344, 596,‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ chla          &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt; 0.24, 3.84, 20.88, 3.84, 20.88, 16.96, 12.86, 16.96, 12.86, 4.60‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ st            &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &quot;MT&quot;, &quot;SC&quot;, &quot;SC&quot;, &quot;SC&quot;, &quot;SC&quot;, &quot;TX&quot;, &quot;TX&quot;, &quot;TX&quot;, &quot;TX&quot;, &quot;CO&quot;, &quot;CO&quot;‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ region        &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &quot;West&quot;, &quot;South&quot;, &quot;South&quot;, &quot;South&quot;, &quot;South&quot;, &quot;South&quot;, &quot;South&quot;, &quot;S‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ lon_dd        &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt; -114.02184, -79.98379, -79.98379, -79.98379, -79.98379, -97.8598‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ lat_dd        &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt; 48.97903, 33.03606, 33.03606, 33.03606, 33.03606, 28.04774, 28.0‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; $ lakename      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &quot;Lake Wurdeman&quot;, &quot;Crane Pond&quot;, &quot;Crane Pond&quot;, &quot;Crane Pond&quot;, &quot;Cran‚Ä¶&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Use ggplot2 to explore the relationship between numeric variables.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;water&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggplot.html&#x27;&gt;ggplot&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;aes.html&#x27;&gt;aes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ptl&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;ntl&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_point.html&#x27;&gt;geom_point&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;alpha &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;.25&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggtheme.html&#x27;&gt;theme_minimal&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;img src=&quot;figs&#x2F;unnamed-chunk-5-1.png&quot; width=&quot;700px&quot; style=&quot;display: block; margin: auto;&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Notice the fanning nature of the chart,this alludes to a log normal distribution. Apply log transformations on both axes via &lt;code&gt;scale_x&#x2F;y_log10()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;water&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggplot.html&#x27;&gt;ggplot&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;aes.html&#x27;&gt;aes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ptl&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;ntl&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_point.html&#x27;&gt;geom_point&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;alpha &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;.25&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggtheme.html&#x27;&gt;theme_minimal&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_continuous.html&#x27;&gt;scale_x_log10&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_continuous.html&#x27;&gt;scale_y_log10&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;img src=&quot;figs&#x2F;unnamed-chunk-6-1.png&quot; width=&quot;700px&quot; style=&quot;display: block; margin: auto;&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Wonderful! Now there is a clear linear trend. Try applying a linear regression to the data using &lt;a href=&quot;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_smooth.html&quot;&gt;&lt;code&gt;geom_smooth()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;water&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggplot.html&#x27;&gt;ggplot&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;aes.html&#x27;&gt;aes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ptl&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;ntl&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_point.html&#x27;&gt;geom_point&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;alpha &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;.25&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggtheme.html&#x27;&gt;theme_minimal&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_continuous.html&#x27;&gt;scale_x_log10&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_continuous.html&#x27;&gt;scale_y_log10&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_smooth.html&#x27;&gt;geom_smooth&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;method &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;lm&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; `geom_smooth()` using formula &#x27;y ~ x&#x27;&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;img src=&quot;figs&#x2F;unnamed-chunk-7-1.png&quot; width=&quot;700px&quot; style=&quot;display: block; margin: auto;&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This is great! What are the values of our coefficient though? Fit a model.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;mod&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;lm.html&#x27;&gt;lm&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Log.html&#x27;&gt;log10&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ntl&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Log.html&#x27;&gt;log10&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ptl&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, data &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;water&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;summary.html&#x27;&gt;summary&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;mod&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Call:&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; lm(formula = log10(ntl) ~ log10(ptl), data = water)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Residuals:&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;      Min       1Q   Median       3Q      Max &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; -1.28645 -0.16097 -0.01698  0.15165  1.07904 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Coefficients:&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;             Estimate Std. Error t value Pr(&amp;gt;|t|)    &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; (Intercept)  1.98542    0.01664  119.34   &amp;lt;2e-16 ***&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; log10(ptl)   0.54567    0.01014   53.82   &amp;lt;2e-16 ***&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; ---&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Signif. codes:  0 &#x27;***&#x27; 0.001 &#x27;**&#x27; 0.01 &#x27;*&#x27; 0.05 &#x27;.&#x27; 0.1 &#x27; &#x27; 1&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Residual standard error: 0.2707 on 1440 degrees of freedom&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Multiple R-squared:  0.668,  Adjusted R-squared:  0.6677 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; F-statistic:  2897 on 1 and 1440 DF,  p-value: &amp;lt; 2.2e-16&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;How does this change for a single region? We can filter the data.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;mod_west&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;lm.html&#x27;&gt;lm&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Log.html&#x27;&gt;log10&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ntl&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Log.html&#x27;&gt;log10&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ptl&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, data &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;water&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;region&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;West&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;summary.html&#x27;&gt;summary&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;mod_west&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Call:&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; lm(formula = log10(ntl) ~ log10(ptl), data = filter(water, region == &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;     &quot;West&quot;))&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Residuals:&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;      Min       1Q   Median       3Q      Max &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; -1.18505 -0.15729 -0.00431  0.14501  1.18044 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Coefficients:&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;             Estimate Std. Error t value Pr(&amp;gt;|t|)    &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; (Intercept)  1.88402    0.02912   64.71   &amp;lt;2e-16 ***&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; log10(ptl)   0.51157    0.01854   27.60   &amp;lt;2e-16 ***&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; ---&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Signif. codes:  0 &#x27;***&#x27; 0.001 &#x27;**&#x27; 0.01 &#x27;*&#x27; 0.05 &#x27;.&#x27; 0.1 &#x27; &#x27; 1&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Residual standard error: 0.2827 on 375 degrees of freedom&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Multiple R-squared:  0.6701,  Adjusted R-squared:  0.6692 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; F-statistic: 761.7 on 1 and 375 DF,  p-value: &amp;lt; 2.2e-16&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;There is some variation in this. What about all other regions? We can use &lt;code&gt;purrr&lt;&#x2F;code&gt; to create multiple models.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;region_mods&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;water&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;nest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;region&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;mod &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;.x &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;data&lt;&#x2F;span&gt;, .f &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;lm.html&#x27;&gt;lm&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Log.html&#x27;&gt;log10&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ntl&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Log.html&#x27;&gt;log10&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ptl&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
         &lt;span class=&#x27;c&#x27;&gt;# create a nested tibble for model coefs&lt;&#x2F;span&gt;
         results &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;mod&lt;&#x2F;span&gt;, &lt;span class=&#x27;nf&#x27;&gt;broom&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;generics.r-lib.org&#x2F;reference&#x2F;tidy.html&#x27;&gt;tidy&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
         &lt;span class=&#x27;c&#x27;&gt;# create nested tibble for model metrics&lt;&#x2F;span&gt;
         summary &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;mod&lt;&#x2F;span&gt;, &lt;span class=&#x27;nf&#x27;&gt;broom&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;generics.r-lib.org&#x2F;reference&#x2F;glance.html&#x27;&gt;glance&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Warning: All elements of `...` must be named.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Did you want `data = -region`?&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can unnest different tibbles. For the coefficients unnest the &lt;code&gt;results&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;unnest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;region_mods&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;results&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 8 √ó 9&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   region        data     mod    term          estim‚Ä¶¬π std.e‚Ä¶¬≤ stati‚Ä¶¬≥   p.value summary &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;         &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;list&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;list&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;           &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;     &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;list&amp;gt;&lt;&#x2F;span&gt;  &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt; West          &amp;lt;tibble&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;&amp;lt;lm&amp;gt;&lt;&#x2F;span&gt;   (Intercept)     1.88   0.029&lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;    64.7 1.47&lt;span style=&#x27;color: #555555;&#x27;&gt;e&lt;&#x2F;span&gt;&lt;span style=&#x27;color: #BB0000;&#x27;&gt;-205&lt;&#x2F;span&gt; &amp;lt;tibble&amp;gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;2&lt;&#x2F;span&gt; West          &amp;lt;tibble&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;&amp;lt;lm&amp;gt;&lt;&#x2F;span&gt;   log10(.x$ptl)   0.512  0.018&lt;span style=&#x27;text-decoration: underline;&#x27;&gt;5&lt;&#x2F;span&gt;    27.6 2.52&lt;span style=&#x27;color: #555555;&#x27;&gt;e&lt;&#x2F;span&gt;&lt;span style=&#x27;color: #BB0000;&#x27;&gt;- 92&lt;&#x2F;span&gt; &amp;lt;tibble&amp;gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;3&lt;&#x2F;span&gt; South         &amp;lt;tibble&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;&amp;lt;lm&amp;gt;&lt;&#x2F;span&gt;   (Intercept)     1.99   0.033&lt;span style=&#x27;text-decoration: underline;&#x27;&gt;6&lt;&#x2F;span&gt;    59.3 3.22&lt;span style=&#x27;color: #555555;&#x27;&gt;e&lt;&#x2F;span&gt;&lt;span style=&#x27;color: #BB0000;&#x27;&gt;-186&lt;&#x2F;span&gt; &amp;lt;tibble&amp;gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;4&lt;&#x2F;span&gt; South         &amp;lt;tibble&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;&amp;lt;lm&amp;gt;&lt;&#x2F;span&gt;   log10(.x$ptl)   0.509  0.020&lt;span style=&#x27;text-decoration: underline;&#x27;&gt;3&lt;&#x2F;span&gt;    25.1 1.16&lt;span style=&#x27;color: #555555;&#x27;&gt;e&lt;&#x2F;span&gt;&lt;span style=&#x27;color: #BB0000;&#x27;&gt;- 80&lt;&#x2F;span&gt; &amp;lt;tibble&amp;gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;5&lt;&#x2F;span&gt; Northeast     &amp;lt;tibble&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;&amp;lt;lm&amp;gt;&lt;&#x2F;span&gt;   (Intercept)     2.10   0.032&lt;span style=&#x27;text-decoration: underline;&#x27;&gt;4&lt;&#x2F;span&gt;    65.0 5.09&lt;span style=&#x27;color: #555555;&#x27;&gt;e&lt;&#x2F;span&gt;&lt;span style=&#x27;color: #BB0000;&#x27;&gt;-122&lt;&#x2F;span&gt; &amp;lt;tibble&amp;gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;6&lt;&#x2F;span&gt; Northeast     &amp;lt;tibble&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;&amp;lt;lm&amp;gt;&lt;&#x2F;span&gt;   log10(.x$ptl)   0.417  0.029&lt;span style=&#x27;text-decoration: underline;&#x27;&gt;4&lt;&#x2F;span&gt;    14.2 1.21&lt;span style=&#x27;color: #555555;&#x27;&gt;e&lt;&#x2F;span&gt;&lt;span style=&#x27;color: #BB0000;&#x27;&gt;- 30&lt;&#x2F;span&gt; &amp;lt;tibble&amp;gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;7&lt;&#x2F;span&gt; North Central &amp;lt;tibble&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;&amp;lt;lm&amp;gt;&lt;&#x2F;span&gt;   (Intercept)     2.15   0.028&lt;span style=&#x27;text-decoration: underline;&#x27;&gt;0&lt;&#x2F;span&gt;    76.7 2.15&lt;span style=&#x27;color: #555555;&#x27;&gt;e&lt;&#x2F;span&gt;&lt;span style=&#x27;color: #BB0000;&#x27;&gt;-290&lt;&#x2F;span&gt; &amp;lt;tibble&amp;gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;8&lt;&#x2F;span&gt; North Central &amp;lt;tibble&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;&amp;lt;lm&amp;gt;&lt;&#x2F;span&gt;   log10(.x$ptl)   0.533  0.015&lt;span style=&#x27;text-decoration: underline;&#x27;&gt;4&lt;&#x2F;span&gt;    34.5 4.18&lt;span style=&#x27;color: #555555;&#x27;&gt;e&lt;&#x2F;span&gt;&lt;span style=&#x27;color: #BB0000;&#x27;&gt;-138&lt;&#x2F;span&gt; &amp;lt;tibble&amp;gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with abbreviated variable names ¬π‚Äãestimate, ¬≤‚Äãstd.error, ¬≥‚Äãstatistic&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;mapping-data&quot;&gt;Mapping data&lt;&#x2F;h2&gt;
&lt;p&gt;To map data we can take advantage of &lt;code&gt;leaflet&lt;&#x2F;code&gt; and &lt;code&gt;sf&lt;&#x2F;code&gt;. We will create a simple feature object which has a column containing geometry information. We use &lt;a href=&quot;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;sf&#x2F;reference&#x2F;st_as_sf.html&quot;&gt;&lt;code&gt;st_as_sf()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to convert to a spatial object. Use the argument &lt;code&gt;coords&lt;&#x2F;code&gt; to tell which columns correspond to latitude and logitude.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;sf&#x2F;&#x27;&gt;sf&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;water_sf&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;water&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;sf&#x2F;reference&#x2F;st_as_sf.html&#x27;&gt;st_as_sf&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;coords &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;lon_dd&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;lat_dd&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;class.html&#x27;&gt;class&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;water_sf&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;sf&quot;         &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;## [1] &amp;quot;sf&amp;quot;         &amp;quot;tbl_df&amp;quot;     &amp;quot;tbl&amp;quot;        &amp;quot;data.frame&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You can see now that this is still a data frame but is also of class &lt;code&gt;sf&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;We can use this sf object to plot some markers with leaflet.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rstudio.github.io&#x2F;leaflet&#x2F;&#x27;&gt;leaflet&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;leaflet.html&#x27;&gt;leaflet&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;water_sf&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;leaflet-imports.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
        &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;map-layers.html&#x27;&gt;addTiles&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;leaflet-imports.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
        &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;map-layers.html&#x27;&gt;addMarkers&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

```{=html}
&lt;div id=&quot;htmlwidget-e42fd0980ae591b460f5&quot; style=&quot;width:700px;height:415.296px;&quot; class=&quot;leaflet html-widget&quot;&gt;&lt;&#x2F;div&gt;
&lt;script type=&quot;application&#x2F;json&quot; data-for=&quot;htmlwidget-e42fd0980ae591b460f5&quot;&gt;{&quot;x&quot;:{&quot;options&quot;:{&quot;crs&quot;:{&quot;crsClass&quot;:&quot;L.CRS.EPSG3857&quot;,&quot;code&quot;:null,&quot;proj4def&quot;:null,&quot;projectedBounds&quot;:null,&quot;options&quot;:{}}},&quot;calls&quot;:[{&quot;method&quot;:&quot;addTiles&quot;,&quot;args&quot;:[&quot;&#x2F;&#x2F;{s}.tile.openstreetmap.org&#x2F;{z}&#x2F;{x}&#x2F;{y}.png&quot;,null,null,{&quot;minZoom&quot;:0,&quot;maxZoom&quot;:18,&quot;tileSize&quot;:256,&quot;subdomains&quot;:&quot;abc&quot;,&quot;errorTileUrl&quot;:&quot;&quot;,&quot;tms&quot;:false,&quot;noWrap&quot;:false,&quot;zoomOffset&quot;:0,&quot;zoomReverse&quot;:false,&quot;opacity&quot;:1,&quot;zIndex&quot;:1,&quot;detectRetina&quot;:false,&quot;attribution&quot;:&quot;&amp;copy; &lt;a href=\&quot;http:&#x2F;&#x2F;openstreetmap.org\&quot;&gt;OpenStreetMap&lt;\&#x2F;a&gt; contributors, &lt;a href=\&quot;http:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-sa&#x2F;2.0&#x2F;\&quot;&gt;CC-BY-SA&lt;\&#x2F;a&gt;&quot;}]},{&quot;method&quot;:&quot;addMarkers&quot;,&quot;args&quot;:[[48.97902855,33.03606404,33.03606404,33.03606404,33.03606404,28.04774206,28.04774206,28.04774206,28.04774206,37.41662013,37.41662013,37.41662013,37.41662013,43.92920926,43.92920926,43.92920926,43.92920926,41.68314624,41.68314624,41.68314624,41.68314624,45.58064546,45.58064546,45.58064546,45.58064546,41.29211104,41.29211104,41.29211104,41.29211104,42.61823014,42.61823014,42.61823014,42.61823014,35.99078823,35.99078823,35.99078823,35.99078823,39.97428032,39.97428032,39.97428032,39.97428032,47.83492738,47.83492738,47.83492738,47.83492738,33.0071076,33.0071076,33.0071076,33.0071076,41.03025217,41.03025217,41.03025217,41.03025217,46.36688788,46.36688788,46.36688788,46.36688788,39.40817838,39.40817838,39.40817838,39.40817838,42.77191973,42.77191973,42.77191973,42.77191973,31.14849172,31.14849172,31.14849172,31.14849172,32.1220497,32.1220497,32.1220497,32.1220497,35.20132137,35.20132137,35.20132137,35.20132137,38.75601051,38.75601051,38.75601051,38.75601051,39.77645357,39.77645357,39.77645357,39.77645357,47.31108363,47.31108363,47.31108363,47.31108363,37.47735404,37.47735404,37.47735404,37.47735404,41.69699293,41.69699293,41.69699293,41.69699293,44.79759122,44.79759122,44.79759122,44.79759122,38.22694093,38.22694093,38.22694093,38.22694093,44.45823517,44.45823517,44.45823517,44.45823517,41.553395,41.553395,41.553395,41.553395,42.4048448,42.4048448,42.4048448,42.4048448,37.29320486,37.29320486,37.29320486,37.29320486,36.7872968,36.7872968,36.7872968,36.7872968,45.06232667,43.44601793,43.44601793,43.44601793,43.44601793,43.55819295,43.55819295,43.55819295,43.55819295,34.96189211,34.96189211,34.96189211,34.96189211,34.24558153,34.24558153,34.24558153,34.24558153,47.32067994,47.32067994,47.32067994,47.32067994,48.8940613,48.8940613,48.8940613,48.8940613,48.96243381,48.96243381,48.96243381,48.96243381,39.76851425,39.76851425,39.76851425,39.76851425,37.82447614,37.82447614,37.82447614,37.82447614,28.63735951,28.63735951,28.63735951,28.63735951,31.66683993,31.66683993,31.66683993,31.66683993,32.23766222,32.23766222,32.23766222,32.23766222,39.52477029,39.52477029,39.52477029,39.52477029,39.41441295,39.41441295,39.41441295,39.41441295,40.92704692,40.92704692,40.92704692,40.92704692,48.17781123,48.17781123,48.17781123,48.17781123,39.98585506,39.98585506,39.98585506,39.98585506,34.1200351,34.1200351,34.1200351,34.1200351,48.22612028,48.22612028,48.22612028,48.22612028,45.95096444,45.95096444,45.95096444,45.95096444,43.46045448,43.46045448,43.46045448,43.46045448,45.61657075,45.61657075,45.61657075,45.61657075,35.7733743,35.7733743,35.7733743,35.7733743,42.93075473,42.93075473,42.93075473,42.93075473,41.36944118,41.36944118,41.36944118,41.36944118,43.09951588,43.09951588,43.09951588,43.09951588,42.02167966,44.50713663,37.65529355,37.65529355,37.65529355,37.65529355,38.2350209,38.2350209,38.2350209,38.2350209,41.65016117,46.86973364,41.13540548,39.01266111,44.71864202,44.32355428,35.66653924,36.16292985,36.16292985,36.16292985,36.16292985,42.14001905,47.19305824,47.19305824,47.19305824,47.19305824,34.15364617,48.75289143,48.75289143,48.75289143,48.75289143,48.21240982,48.21240982,48.21240982,48.21240982,31.40138437,36.20871918,41.88000298,38.14855815,41.17205162,39.639176,39.41622694,45.99791162,33.39525121,33.39525121,33.39525121,33.39525121,39.34860511,41.63340269,44.84955975,34.59440722,37.21418362,42.37328848,45.88100581,28.1024337,42.73356694,44.9419591,44.9419591,44.9419591,44.9419591,37.75822313,38.51725431,38.51725431,38.51725431,38.51725431,43.9911006,33.07333126,46.25212358,46.25212358,46.25212358,46.25212358,39.68102041,35.14239477,43.89203643,44.36456222,44.36456222,44.36456222,44.36456222,34.51894059,37.78861101,45.32624711,38.83461964,41.11130456,40.02942387,40.02942387,40.02942387,40.02942387,47.67254307,35.16783478,48.70438576,46.89197546,38.77692521,41.71307603,39.11225012,34.00633269,35.43592446,32.60301252,32.60301252,32.60301252,32.60301252,35.58384499,47.57601003,47.57601003,47.57601003,47.57601003,47.46534213,39.02766863,45.2593824,40.3285507,36.15288306,41.40043649,42.50465482,37.29913592,48.40689317,33.58413004,33.58413004,33.58413004,33.58413004,37.64783657,37.64783657,37.64783657,37.64783657,47.48039976,47.48039976,47.48039976,47.48039976,43.19952563,38.06219707,38.06219707,38.06219707,38.06219707,43.95295544,43.21855689,41.3229061,38.38849036,38.38849036,38.38849036,38.38849036,46.57881675,35.01895093,48.47756954,42.29154287,41.56832304,44.73647289,33.73938795,38.36396781,43.53474213,32.47736836,47.96678307,35.94835771,48.54139505,46.37421211,36.67343618,35.50848975,40.47787067,46.27199075,38.77637097,42.6781739,44.19244227,32.08989492,35.49457482,32.51233098,34.9138437,38.55948746,46.15225085,42.19565154,42.19565154,42.19565154,42.19565154,43.81382063,41.38426053,44.95223074,45.18747233,33.84097049,41.45660059,45.91703876,41.08805669,43.41788272,38.81717464,34.88602671,47.46148555,34.72229815,36.94420902,28.56369452,41.35719487,31.70973689,32.515555,32.515555,32.515555,32.515555,45.06291593,35.64054377,40.62803319,48.31405586,48.39382391,46.11443869,35.69079767,43.20849339,44.87173399,40.96440578,36.6584792,45.7646886,42.51316899,36.5624187,42.31280493,44.84025867,45.40860134,35.02063348,41.93460679,46.94267011,41.36496934,44.58635561,38.4638561,34.25648145,36.30884018,40.86340465,47.55716773,48.71606442,48.24355,40.49157546,36.68164988,36.68164988,36.68164988,36.68164988,37.89444471,33.09780391,42.42304224,47.17784258,42.88974892,42.88974892,42.88974892,42.88974892,47.39595432,41.97137282,45.18038118,45.09335555,34.36882178,36.56057181,46.13180055,42.76982559,43.09504296,38.60231182,43.8382238,34.72092203,44.52251138,45.16826567,34.45197764,45.6434979,36.23894258,48.28610194,34.16578918,40.04075657,38.47961378,48.13580369,39.80684554,28.57332363,41.97098891,33.06325702,31.16378198,34.2269109,46.19906329,42.21176414,43.54592149,39.43240936,41.90973411,43.62308804,45.44015743,34.57061143,35.51629478,39.92061781,37.99433764,37.99433764,37.99433764,37.99433764,29.49147018,36.3106781,37.19249014,38.49363215,41.41314405,38.77124892,46.82219046,38.44681794,48.75171319,42.10765269,41.95095517,34.21452974,37.94635193,42.82731383,43.57477426,33.85862113,40.46163354,48.24775379,38.22555093,48.92434782,40.35740927,46.02793009,43.92368969,47.94850085,40.69518018,47.18441442,31.05988383,46.03407357,42.25218027,37.69558878,35.17104325,38.96504347,45.78575069,42.35496664,44.20672826,43.9575273,45.10823473,41.72092858,46.76330385,35.61858883,44.9484358,41.68686806,41.68686806,41.68686806,41.68686806,35.97472589,37.24525923,34.60517537,45.44213549,46.82469712,37.17718851,43.25263859,41.80079367,31.20627441,39.48658532,41.2184867,41.2184867,41.2184867,41.2184867,39.3320249,45.9076374,34.13761156,48.70867836,32.37834158,45.81215092,39.07986361,43.54705816,30.29008869,45.97262852,36.59009304,28.06126866,42.69132092,42.9654707,43.37864455,36.72480919,35.06360996,31.44842292,42.32382664,45.88174092,41.06227132,39.37683345,44.9542938,44.88675167,35.75956138,46.30058363,38.35723526,47.92494929,40.33649731,40.13391202,48.41877337,42.26770086,38.47603543,44.64209925,33.46835151,45.98738228,46.16790978,44.02383508,48.18807378,39.71571919,41.55549527,45.0802966,44.92721305,35.05246497,40.68974933,38.70179794,42.54198776,42.77239407,43.96358712,44.90724118,38.82349927,45.99294588,38.99691941,41.98943091,41.98943091,41.98943091,41.98943091,40.67141407,37.14727752,34.94582155,46.89269882,28.86654374,41.76026908,30.75107327,32.02985585,39.40384918,40.21848571,39.17533903,46.47746767,39.78368053,46.49728658,42.92255989,39.18947102,43.83495077,45.63873346,41.33744108,37.30165688,47.12976263,43.17765587,45.28365031,37.50728425,38.21777874,35.09506233,42.34421131,42.00008215,45.17198582,34.51995909,43.49635854,40.76263285,47.61486601,41.21443378,40.16155115,47.07388772,47.46561683,33.37648429,46.43678101,31.77844848,43.74155805,40.95244606,47.97490008,40.38121547,46.87138943,33.06586113,37.62556948,42.94295938,42.94295938,42.94295938,42.94295938,39.46727638,42.7054837,37.06496556,41.89706027,44.32604728,45.4544983,37.80850252,34.27511413,41.58503646,31.89213905,32.07003639,36.04195569,45.50212807,36.70285935,37.65022613,39.99512558,33.14557832,47.3145341,35.06242308,48.90066286,33.55658479,35.73708099,43.32535916,44.98259563,33.28828061,45.70558294,40.52821138,48.09040077,40.76400873,45.77329011,34.28490489,36.17652473,42.78877715,41.77555566,41.77555566,41.77555566,41.77555566,46.13959313,40.55157389,38.29933705,28.0262635,37.61578723,41.41393411,44.31668637,45.39184932,37.70523851,34.78754469,43.49984691,42.42600499,33.39339434,46.41279009,39.61349449,44.68029866,33.74732977,41.21839793,48.04237609,41.22739765,40.4600301,34.36024322,46.64962378,38.72322531,42.30712511,39.17160197,43.64334502,46.36895187,44.7665922,47.5788475,38.79133283,45.63536489,35.95443189,44.46680722,42.53263874,36.11204382,46.27836202,40.19262068,46.17967552,43.53424744,43.92762751,43.73612725,44.6510154,43.23106073,41.95740591,47.07143625,34.80731121,48.20653603,41.83996337,43.16774073,41.17631286,39.30139975,47.5916096,47.48939455,41.51816888,43.80089109,42.73174291,43.0004446,40.11693151,35.52857379,46.47568516,43.76802869,37.39564741,44.44651471,33.88536118,31.30046077,41.5778835,37.12269729,46.23667971,44.15403952,43.10063504,36.47751354,43.7347358,34.32056025,47.64355769,42.08118015,37.95715701,47.23309947,38.93435896,47.88008342,41.44985958,40.39202891,42.58198097,43.13964644,35.87344908,47.66725682,47.13645291,48.8960231,42.74496123,43.30580348,39.01484504,40.30650105,47.76285371,33.29231012,47.72869709,34.83840643,42.49353258,31.19359518,39.61456971,39.92081406,38.08837452,47.26690206,42.36491565,44.00551584,37.66794161,37.66794161,37.66794161,37.66794161,46.09726783,45.22936379,45.35264891,39.99374059,47.34437749,35.05636423,47.92615582,46.64554759,42.80283231,39.03618262,41.16921419,48.04272711,40.20925528,45.8905697,39.3479549,39.3479549,39.3479549,39.3479549,44.43065201,35.79847217,30.47158625,41.63897307,40.75775549,37.14689417,42.25855906,36.60379676,41.93751914,34.53807855,42.61644253,41.67158213,46.97285023,34.55063761,45.72351557,40.1114616,40.48406381,42.14994307,48.1652,34.03321325,48.57775125,47.07428203,44.43080897,40.91152674,35.20544322,46.00218518,42.12121846,41.18833129,39.27750349,45.33667139,45.00157961,35.03251939,42.28383032,35.81387892,40.67877769,27.84728979,41.70034673,44.08794072,30.00789769,41.41506353,46.41917873,39.60633701,34.44592488,46.04071508,45.31578279,38.75947482,38.75947482,38.75947482,38.75947482,41.09921102,47.86470218,48.27375687,47.0508466,35.67385009,41.65548495,43.37516208,33.16058732,40.49021653,39.29721636,35.55992713,44.04280484,45.23854717,34.52419902,36.11835531,43.80794846,41.49584791,42.56509972,34.93328103,45.29000323,38.12541781,43.15032025,41.37196888,38.38375695,46.56718218,38.79221156,42.11998183,41.47720752,38.50785067,43.35530141,43.4613315,40.93548087,47.91515143,48.01890447,36.03990354,48.13500634,45.88816389,36.82323361,33.7202532,39.00193733,33.15857155,46.69346715,35.50355494,44.23115242,38.09909757,36.92159955,45.11768598,39.29458754,32.75598701,46.70133763,45.06812814,36.98625493,43.4546224,45.41454518,45.41454518,45.41454518,45.41454518,36.38727183,46.01155947,40.22292361,47.74255874,48.39247752,39.46919944,47.06936125,36.57979268,28.63214331,45.18177616,41.2045164,41.2045164,41.2045164,41.2045164,35.52043358,46.47136195,46.47136195,46.47136195,46.47136195,40.18853553,40.43031936,35.37133652,42.97430171,44.82453402,33.73044411,36.15830485,43.70497197,35.19858711,40.43821209,37.93823147,45.86796274,36.57446101,45.30107859,42.18668508,38.38038763,38.38038763,38.38038763,38.38038763,45.91676304,41.32867877,36.0828954,33.24145034,46.43163694,40.80373555,40.43327881,28.91616949,41.92400456,38.3383223,35.1386532,39.55390324,47.19204698,43.45220479,34.56754654,45.16506431,42.19692077,32.03729676,40.29789402,42.91835392,43.79630195,45.07363846,43.61999552,45.84991802,39.04408399,40.75747354,37.59934642,46.53835681,40.87358233,33.29943972,47.89085231,39.74858029,40.4943852,30.96113096,40.05555836,35.56344263,42.21592161,34.73428918,46.98630288,39.27166676,33.66930447,41.24575191,36.97055086,36.42564729,47.82117438,45.53504992,42.4782951,38.54281635,42.23317529,34.37370438,43.45913401,40.69367958,40.98641214,48.1617266,39.7038049,42.27012122,39.00356446,44.87906853,32.76230788,37.67100497,42.59773028,35.16889537,36.53187298,27.74198501,37.2690553,45.18456035,38.3067683,34.18074648,45.18292402,41.68840425,41.6889871,34.58721435,40.18092494,41.75274586,48.31132355,33.58147205,32.40169424,45.08626125,47.57177224,30.24052123,43.9294318,28.57555508,40.76550232,44.95420653,41.69516992,44.37178143,38.16675267,35.01980463,42.47147986,36.25057107,46.57403434,45.27488186,35.93942679,32.94495679,44.54399881,40.70732923,42.27599914,39.72648692,39.72648692,39.72648692,39.72648692,44.92879744,44.63943331,40.80705076,44.56839036,37.66812885,43.8526781,41.90886578,34.45201248,29.17488107,37.66235766,45.69469839,41.12635244,40.6317324,28.82529643,30.83484459,42.48541393,39.96491779,38.93960606,38.98848369,46.61381657,39.27108433,37.52420141,41.22680207,47.4572505,42.38300259,38.71328174,38.07682398,42.51691372,40.35385773,36.00712806,47.52073005,32.67017525,42.724557,35.56351286,34.53937366,41.37561834,45.85043385,35.41307522,42.92535091,39.21641749,37.38533354,27.94018842,41.58028332,42.40712576,32.48418587,38.94599172,40.07823959,48.96606399,48.2461517,29.45531325,41.9306954,31.10386776,44.78748289,41.04149545,34.95364916,33.32111369,47.48799465,40.95544299,44.53735651,41.79161289,41.40500676,44.02665452,41.8621338,38.06356571,45.87339726,44.10051186,38.79320182,42.53347335,47.09945654,43.66297627,45.74264146,36.89068214,48.13399568,43.34114476,47.44868765,42.20289954,32.45275022,46.60064001,46.60064001,46.60064001,46.60064001,42.29737384,45.75699008,31.19633242,42.23979744,41.43839158,39.58892136,43.10411616,48.02025253,41.46950026,32.25404093,30.43252366,35.15138649,46.25503439,42.15139597,44.76204445,45.55715378,32.35269226,32.71215655,29.09294251,42.2494978,44.8372406,39.68531765,28.62097337,32.59300712,44.32794024,45.89624924,45.89266323,44.70838784,37.85925631,31.26784195,41.627105,41.51134268,47.30587695,48.671943,38.66086617,33.45373979,46.41950629,39.29388434,34.4202345,41.29977616,48.15402125,44.3017541,38.96688176,47.40930776,44.18421481,41.51785892,41.28362106,48.18443003,41.5055322,40.03137931,38.64382658,39.34812677,41.70544844,36.27424052,41.24777405,41.55977063,47.6347722,40.34377825,42.06680514,43.63164375,41.80418482,37.43723737,40.17547463,37.56936135,43.98862837,34.47617113,48.00821961,40.07519519,47.13285576,41.34688657,31.95537014,28.32320111,41.37985994,28.09210404,28.84218233,44.94116736,40.36170146,39.07938034,40.72496185,28.16663717,29.20565727,44.30658171,40.68363702,32.8366626,35.8844838,39.54217646,43.82780189,41.99075603,43.71378677,41.29419937,47.57068723,30.75592819,33.49584507,41.27976472,37.90869352,47.67808029,42.08566286,31.90669248,31.29345058,41.76461732,34.14749294,47.91880419,46.93083483,48.45509278,38.70359768,41.23224913,38.21295517,32.23706223,44.02361323,33.55680923,42.45325719,41.67863226,33.9804795,33.8415669,41.55099685,30.85367701,32.11659958,44.96452667,41.077102,48.66028929,43.54942519,41.03691696,26.93623169,32.57024595,48.05647979,29.24614674,42.12319331,34.9019537,48.45741132,34.62968086,42.62695121,41.97536219,36.05807999,41.78762942,42.41646632,40.15668653,41.89097393,41.39410498,41.58007689,30.53713917,36.14305845,36.84862392,35.92127588,43.49623503,36.74858993,34.72903354,41.92028511,34.8862297,36.73591623,35.49774222,36.81228138,34.48858411,36.5147867,32.71459999,35.39706727,31.37317275,32.09045845,34.96590119,34.58938281,36.07001774,44.64231,44.40788,44.836404,44.348811,43.296358,45.653548,41.848175,42.323799,45.207071,45.219001,44.849882,45.799297,46.375055,46.944636,46.345672,46.994934,45.500526,46.138603,47.122809,45.748209,46.962321,46.353306,45.127611,45.354469,29.080057,29.839332,30.118409,30.211239,30.247737,41.56235,42.398646,47.062841,45.33182,46.928377,47.189468,43.8192,45.813111,44.15457,46.292544,45.490155,43.891574,45.528235,45.768831,44.684008,45.152049,46.965959,44.36243,46.9518,46.961173,46.944789,45.752816,43.840363,43.023373,40.592943,41.026475,37.301656,39.707435,40.080755,44.299985,44.412769,43.7447,46.266753,43.819275,42.736902,42.46935,48.501411,42.040047,47.427764,44.000621,39.39897,37.394115,38.328785,37.315287,37.344722,39.510833,36.807826,36.841537,37.357963,37.43234,37.042659,37.303695,39.514306,37.974885,40.270346,46.381969,46.083918,42.526174,42.578207,42.526966,40.630491,42.535944,42.479229,37.09209,38.791331,38.522226,38.50443,38.494153,38.1274,39.469161,38.948542,37.232374,37.726925,36.636707,37.386994,38.428911,38.228213,42.458365,42.5433,41.779509,41.731631,41.734746,30.751822,30.751822,32.441373,31.917152,32.044428,31.49062,31.003513,33.249977,28.503123,43.218375,43.958982],[-114.0218399,-79.98379054,-79.98379054,-79.98379054,-79.98379054,-97.85986605,-97.85986605,-97.85986605,-97.85986605,-108.4045832,-108.4045832,-108.4045832,-108.4045832,-114.8403862,-114.8403862,-114.8403862,-114.8403862,-73.1465177,-73.1465177,-73.1465177,-73.1465177,-92.04001797,-92.04001797,-92.04001797,-92.04001797,-93.59040488,-93.59040488,-93.59040488,-93.59040488,-83.50588771,-83.50588771,-83.50588771,-83.50588771,-96.87178731,-96.87178731,-96.87178731,-96.87178731,-74.56255123,-74.56255123,-74.56255123,-74.56255123,-100.5756807,-100.5756807,-100.5756807,-100.5756807,-107.2747938,-107.2747938,-107.2747938,-107.2747938,-100.7797567,-100.7797567,-100.7797567,-100.7797567,-99.51185877,-99.51185877,-99.51185877,-99.51185877,-87.81380832,-87.81380832,-87.81380832,-87.81380832,-77.3095481,-77.3095481,-77.3095481,-77.3095481,-97.745332,-97.745332,-97.745332,-97.745332,-95.48843409,-95.48843409,-95.48843409,-95.48843409,-81.34573084,-81.34573084,-81.34573084,-81.34573084,-75.21503793,-75.21503793,-75.21503793,-75.21503793,-81.51745185,-81.51745185,-81.51745185,-81.51745185,-121.2990598,-121.2990598,-121.2990598,-121.2990598,-88.32737922,-88.32737922,-88.32737922,-88.32737922,-73.36398551,-73.36398551,-73.36398551,-73.36398551,-71.86971736,-71.86971736,-71.86971736,-71.86971736,-80.85405519,-80.85405519,-80.85405519,-80.85405519,-107.0403753,-107.0403753,-107.0403753,-107.0403753,-85.44424168,-85.44424168,-85.44424168,-85.44424168,-101.7024805,-101.7024805,-101.7024805,-101.7024805,-77.88986113,-77.88986113,-77.88986113,-77.88986113,-89.17572548,-89.17572548,-89.17572548,-89.17572548,-117.1533553,-71.80868659,-71.80868659,-71.80868659,-71.80868659,-73.43960723,-73.43960723,-73.43960723,-73.43960723,-80.51686138,-80.51686138,-80.51686138,-80.51686138,-113.5793644,-113.5793644,-113.5793644,-113.5793644,-99.74629427,-99.74629427,-99.74629427,-99.74629427,-112.1680165,-112.1680165,-112.1680165,-112.1680165,-115.116608,-115.116608,-115.116608,-115.116608,-79.38081778,-79.38081778,-79.38081778,-79.38081778,-107.8853911,-107.8853911,-107.8853911,-107.8853911,-81.13759704,-81.13759704,-81.13759704,-81.13759704,-91.50916933,-91.50916933,-91.50916933,-91.50916933,-98.40515204,-98.40515204,-98.40515204,-98.40515204,-118.878391,-118.878391,-118.878391,-118.878391,-94.49793062,-94.49793062,-94.49793062,-94.49793062,-74.53388264,-74.53388264,-74.53388264,-74.53388264,-100.2942095,-100.2942095,-100.2942095,-100.2942095,-107.2317809,-107.2317809,-107.2317809,-107.2317809,-91.56105203,-91.56105203,-91.56105203,-91.56105203,-122.1241675,-122.1241675,-122.1241675,-122.1241675,-99.13645049,-99.13645049,-99.13645049,-99.13645049,-116.1414317,-116.1414317,-116.1414317,-116.1414317,-122.4260347,-122.4260347,-122.4260347,-122.4260347,-81.54174586,-81.54174586,-81.54174586,-81.54174586,-109.6534609,-109.6534609,-109.6534609,-109.6534609,-87.43213825,-87.43213825,-87.43213825,-87.43213825,-88.45255303,-88.45255303,-88.45255303,-88.45255303,-73.48227989,-70.72328312,-98.26265148,-98.26265148,-98.26265148,-98.26265148,-112.2015025,-112.2015025,-112.2015025,-112.2015025,-85.08175821,-95.72856324,-81.13692241,-89.14408234,-72.23412171,-89.19099056,-106.3013899,-96.36834536,-96.36834536,-96.36834536,-96.36834536,-101.8094915,-99.32424356,-99.32424356,-99.32424356,-99.32424356,-109.3063643,-109.2416928,-109.2416928,-109.2416928,-109.2416928,-114.5994561,-114.5994561,-114.5994561,-114.5994561,-111.0870104,-109.0936327,-73.04056323,-119.3636363,-85.93794192,-95.45270584,-75.68870871,-89.54369029,-99.39138265,-99.39138265,-99.39138265,-99.39138265,-86.1080157,-76.84081042,-69.2311707,-97.68636485,-78.62538711,-88.12714851,-91.24994528,-82.72114525,-72.10321054,-94.03191284,-94.03191284,-94.03191284,-94.03191284,-94.85392322,-111.5318192,-111.5318192,-111.5318192,-111.5318192,-86.10688883,-115.5092281,-96.0363618,-96.0363618,-96.0363618,-96.0363618,-84.68705386,-90.45779851,-73.05232335,-101.0545158,-101.0545158,-101.0545158,-101.0545158,-98.88132868,-119.0740544,-92.42496232,-94.74900513,-75.45750462,-80.57939847,-80.57939847,-80.57939847,-80.57939847,-93.75949137,-83.66709127,-121.1758404,-99.08101063,-88.06164584,-70.08954132,-120.4416484,-87.31609868,-99.24197456,-84.81807605,-84.81807605,-84.81807605,-84.81807605,-90.96329594,-122.0836788,-122.0836788,-122.0836788,-122.0836788,-95.76982211,-86.46847503,-94.96441345,-96.52877618,-79.1460479,-85.37102925,-100.5303638,-76.82122952,-102.9398075,-84.20752986,-84.20752986,-84.20752986,-84.20752986,-90.58984208,-90.58984208,-90.58984208,-90.58984208,-112.5389845,-112.5389845,-112.5389845,-112.5389845,-71.24740864,-103.6093941,-103.6093941,-103.6093941,-103.6093941,-74.449008,-85.46799659,-85.75477789,-115.1177953,-115.1177953,-115.1177953,-115.1177953,-94.17531685,-85.55980719,-107.5902123,-111.7292621,-71.91051169,-100.7421974,-99.23199838,-122.1300516,-96.96004,-81.83068716,-99.09494995,-85.31930179,-115.2253416,-98.99123974,-106.6907196,-96.32121976,-83.87906608,-99.38087643,-105.0043919,-113.4006122,-93.8978566,-95.89426355,-80.57559837,-87.85257456,-98.73027981,-75.56227311,-88.82970363,-120.5256858,-120.5256858,-120.5256858,-120.5256858,-88.99784821,-73.50316356,-72.11517323,-97.63176411,-81.67207159,-85.2449775,-97.02426153,-82.72837965,-119.4133477,-95.54639054,-79.6893777,-92.43469487,-83.11204858,-82.20271516,-81.43794893,-72.04012641,-91.37124941,-93.87023429,-93.87023429,-93.87023429,-93.87023429,-83.45698555,-94.96969524,-74.85056841,-100.758717,-122.6562431,-99.42452982,-105.8760128,-75.93516194,-96.63532038,-96.87657153,-79.84411222,-90.6606696,-71.80704144,-104.5942811,-73.13778739,-71.13479653,-96.62636247,-81.04741516,-85.33088977,-95.26723865,-81.22089462,-72.31186438,-105.0515471,-117.1853787,-96.12859695,-76.77414252,-112.4475051,-103.1433201,-112.8672712,-78.46066192,-83.70494798,-83.70494798,-83.70494798,-83.70494798,-120.5721188,-86.48006432,-83.99670111,-68.23140034,-124.0780934,-124.0780934,-124.0780934,-124.0780934,-94.56183848,-75.87948445,-121.7044304,-97.75438416,-97.28183273,-77.7454141,-91.61045649,-71.9999278,-73.76674325,-111.8406157,-85.07388127,-90.07170002,-73.29262702,-90.69813817,-92.9382529,-99.23111059,-97.34810228,-101.9047579,-89.91161609,-81.01548859,-82.87603537,-117.6915241,-105.0360311,-81.77025392,-71.19898937,-96.47583806,-83.54189637,-86.84234494,-89.29397704,-83.52098213,-89.36445641,-106.6003635,-75.33783928,-71.2654292,-97.2623188,-96.23835676,-80.20338458,-83.00425479,-90.54213897,-90.54213897,-90.54213897,-90.54213897,-101.1563449,-88.48981792,-95.98672528,-78.00762524,-85.734175,-77.64555522,-94.53354023,-107.4380582,-108.0524686,-111.8159376,-71.95133091,-94.21467091,-122.6247455,-83.7469401,-97.0587349,-90.54209875,-79.56745425,-98.8914836,-107.5377617,-100.3053493,-78.11907346,-98.94484753,-96.95103624,-91.39296143,-99.85563998,-119.3639845,-81.41308684,-99.16791062,-78.29237084,-81.05483233,-99.37115228,-77.33745683,-88.36579346,-71.47978934,-89.83486415,-71.96791311,-94.16801923,-85.00769013,-96.21518776,-101.6607655,-116.0893222,-71.61087837,-71.61087837,-71.61087837,-71.61087837,-105.9168212,-121.9668773,-112.4389242,-109.2242066,-99.7794296,-82.39104876,-114.3827885,-72.52468392,-91.54690118,-118.7255216,-86.59115603,-86.59115603,-86.59115603,-86.59115603,-97.37482305,-89.91696268,-84.64323654,-122.3277089,-82.0648507,-99.76603988,-106.3650807,-116.6654946,-96.59781441,-90.50816425,-89.26975098,-82.27729181,-71.3703595,-89.25185174,-123.2686178,-98.88888117,-111.4965509,-86.43728338,-85.4673404,-95.33234259,-81.31730025,-89.02743535,-118.185992,-88.48011849,-105.1444706,-87.77935818,-94.63514177,-101.229344,-105.1268527,-111.0580729,-117.6640499,-99.24832126,-119.9997761,-111.3963618,-86.64445451,-89.35046545,-69.00206052,-124.0796101,-98.0662251,-86.21162845,-75.70704866,-71.35188791,-97.43982726,-79.20867259,-110.3847622,-90.09502746,-72.95778821,-118.446839,-121.7804825,-93.24237251,-80.61407853,-95.68760607,-108.0510627,-71.5975535,-71.5975535,-71.5975535,-71.5975535,-99.05552208,-119.5155897,-97.4757382,-99.41665043,-81.68245579,-70.65792119,-93.11140261,-97.62566712,-120.0976296,-105.3784913,-75.53217241,-103.2176549,-99.96360846,-122.4056376,-102.0383947,-85.98220181,-71.09335145,-97.34187361,-85.59855169,-115.1266278,-88.31643187,-72.06616228,-93.84703784,-96.22952255,-77.66963872,-84.60955737,-79.32038612,-71.76889368,-100.0637661,-97.81889401,-94.58564751,-74.28597177,-100.8270609,-101.6522363,-79.05296653,-98.58682039,-116.6021502,-111.9196013,-93.95778373,-99.48680479,-97.60321373,-74.78073603,-90.74589983,-84.32400254,-119.5708717,-96.98715489,-81.09987899,-109.8067241,-109.8067241,-109.8067241,-109.8067241,-114.854418,-71.92427314,-87.66339204,-73.4471959,-72.33303748,-97.67084235,-94.20630504,-110.0619092,-84.93075504,-90.60093891,-84.29700265,-85.58909082,-92.42758598,-96.42019136,-113.5241332,-105.1124639,-90.35508478,-99.4057224,-82.68737992,-113.79482,-111.5104323,-109.5195801,-113.9237405,-109.5385322,-87.1410494,-89.89123137,-84.49692799,-124.6325273,-111.3907566,-99.64100853,-97.17112636,-79.76105079,-88.21979209,-91.58457902,-91.58457902,-91.58457902,-91.58457902,-90.20943735,-81.23795266,-102.7554334,-81.90969367,-87.85835615,-75.02535883,-122.0463775,-96.09372175,-97.05592896,-111.2309008,-86.02363273,-84.93952274,-114.7186101,-95.49202478,-102.1976293,-118.0456408,-117.4401855,-116.5205894,-90.41206384,-103.8250886,-81.16283175,-109.3628312,-99.42139052,-88.7625553,-96.33164966,-119.9011897,-110.796597,-69.22774755,-67.69930253,-96.23531854,-105.1064368,-70.35478251,-78.57809968,-106.7540577,-100.5912717,-114.4484101,-91.03611959,-109.6839624,-113.2957121,-71.50524998,-118.1504274,-122.0382458,-93.4604842,-86.2884379,-103.5255076,-94.60247265,-84.26596921,-108.0879027,-72.19612696,-108.1947009,-105.2328863,-80.56008707,-93.39164891,-116.6865573,-111.7317,-99.23771294,-94.90058432,-109.8706018,-85.28406916,-98.02578504,-88.19188615,-103.5206581,-88.68475272,-71.81133018,-94.93952456,-89.43472797,-85.66354429,-77.63605473,-94.33981178,-74.44475781,-72.08861587,-104.8975432,-73.1843614,-80.6282663,-109.1837945,-86.21029029,-77.88158812,-100.0594809,-83.77648752,-112.3069538,-73.28915784,-93.85323148,-83.84598941,-94.66049019,-96.55655629,-90.98970016,-99.05940629,-99.71392205,-83.3105724,-94.69023855,-95.2899994,-74.13720525,-91.60874473,-84.47502308,-119.5926045,-87.94670174,-77.14037466,-94.30727333,-99.18240152,-81.46928239,-91.45201074,-121.094003,-122.2142097,-88.41583313,-88.83968274,-88.83968274,-88.83968274,-88.83968274,-97.23731774,-117.2723703,-89.47240376,-104.5793379,-100.0458254,-82.33960673,-114.4032969,-99.56622833,-98.6667271,-94.76922848,-74.46409963,-91.80243774,-83.14039964,-99.03925508,-88.46818961,-88.46818961,-88.46818961,-88.46818961,-96.29030059,-81.29840323,-88.61259404,-87.52959736,-109.6229151,-90.79086629,-71.89175564,-104.6397618,-73.45450471,-111.2044517,-85.20168529,-85.0498935,-95.6552124,-118.1208238,-92.16793858,-75.86456997,-104.9010317,-101.8384538,-92.1073,-109.4367421,-113.9310021,-99.63068806,-83.92048752,-86.33837152,-96.55493352,-89.61298609,-84.32304093,-111.3838226,-86.21179967,-70.66748588,-94.33240543,-79.04177704,-88.12382987,-78.52879549,-110.7617077,-82.77867302,-74.67614714,-123.3000758,-97.8223278,-86.47388358,-95.84076097,-84.96745506,-93.11174318,-86.80571961,-92.56439548,-97.16290101,-97.16290101,-97.16290101,-97.16290101,-75.52182529,-101.5137215,-117.3323799,-99.45309149,-88.31948013,-70.3351834,-93.46829619,-96.10401913,-86.00305553,-91.00152146,-105.1611962,-70.52697713,-94.95289584,-96.50308213,-79.31994397,-87.97829791,-85.4335164,-100.4927777,-77.102743,-98.76204738,-96.31123963,-85.47563891,-106.250251,-115.1046656,-94.32426564,-84.64320588,-119.9976109,-92.46019565,-121.5362609,-109.3834683,-95.17278405,-74.25538694,-90.34231242,-98.89293534,-106.8487839,-116.1556177,-93.27559075,-107.4638244,-94.00429471,-95.7860147,-107.2214132,-119.6483226,-104.225471,-93.52895007,-91.05983943,-87.45542965,-97.52639653,-111.2808196,-86.38310821,-95.74771639,-116.1697398,-87.20570041,-73.59007456,-84.80370819,-84.80370819,-84.80370819,-84.80370819,-96.82324072,-109.1798402,-104.9523623,-92.04084194,-112.5192316,-79.49911328,-92.0010507,-81.99701482,-81.35534067,-108.1327104,-86.40554386,-86.40554386,-86.40554386,-86.40554386,-94.97046064,-89.57932002,-89.57932002,-89.57932002,-89.57932002,-83.96549218,-101.5543964,-86.3816758,-76.06888458,-96.61488782,-96.77580307,-79.8531667,-86.4262233,-98.49130804,-82.97903314,-90.92375999,-113.5499319,-104.6630512,-95.11805454,-85.5734717,-75.59661445,-75.59661445,-75.59661445,-75.59661445,-95.39655084,-81.3860772,-87.28855765,-116.7467274,-87.08228263,-77.17855996,-105.0337077,-81.73898503,-72.21921899,-121.0935467,-96.23064723,-75.71879453,-122.9725593,-124.2460047,-96.87937904,-84.97760482,-88.10342481,-99.51438874,-110.2260262,-118.8521689,-122.0175362,-93.1265767,-85.28224429,-95.71390587,-107.9174634,-93.23879955,-118.7415562,-106.0071156,-75.58090694,-81.89267614,-116.8933801,-105.0447684,-121.1629233,-83.65565657,-105.7469295,-93.63792628,-83.58492288,-99.69530507,-122.5690307,-85.19021469,-97.58547265,-85.4301129,-90.35313417,-103.6053539,-105.0491133,-98.61521182,-86.06684183,-77.39673538,-111.8535786,-98.33930518,-94.94774508,-118.2702746,-90.39676778,-116.6384102,-78.65197531,-93.63628619,-87.18335673,-68.22649939,-94.60523041,-81.07000814,-110.2208282,-99.07349782,-99.56836014,-81.49933161,-87.52287716,-97.78599752,-93.9527628,-110.0007541,-104.9019583,-85.03064639,-71.64332202,-112.4185161,-105.0386785,-102.414217,-109.0848391,-111.2821257,-93.38700366,-109.7887823,-122.7050326,-96.811485,-86.43464751,-100.125119,-109.297264,-112.8818444,-75.13142213,-121.8732089,-92.96597494,-111.4026965,-85.52570292,-87.19195879,-87.46065203,-99.20744764,-83.36502827,-96.45333515,-110.8356239,-106.4529904,-84.21804073,-86.7140735,-86.7140735,-86.7140735,-86.7140735,-97.20984727,-85.78652164,-110.4052879,-98.12948201,-94.41073448,-84.77214787,-85.89436967,-84.28783121,-100.6327156,-120.2096368,-99.36144816,-104.6435242,-89.74974737,-81.8367232,-93.43654813,-94.63032824,-105.4935103,-93.59341677,-75.51763692,-88.57570293,-106.3934507,-112.7840699,-85.65000607,-88.09978566,-86.04986016,-84.27550077,-122.730427,-83.79582456,-78.62336887,-84.89743874,-116.5643475,-94.07719555,-83.0854123,-97.59469662,-92.27375111,-112.0878211,-99.26440854,-88.07467739,-109.5044313,-76.8537467,-99.78514802,-81.65126772,-84.92309094,-102.4533862,-83.65078368,-89.35469451,-105.2232407,-109.75936,-114.1200149,-81.49557857,-119.1737894,-92.47015483,-109.2607748,-85.97905159,-96.71830238,-85.8149094,-123.2647195,-111.4149738,-97.15487079,-91.53532783,-117.1542995,-121.7456252,-71.55317818,-86.6622935,-87.80067574,-111.4734759,-90.78180772,-100.645836,-113.4075253,-122.4216059,-98.27345753,-95.95265017,-108.1899505,-95.12645329,-116.7986927,-114.8909997,-96.06121126,-88.11725533,-88.11725533,-88.11725533,-88.11725533,-116.1124743,-97.32017864,-89.30335606,-105.6303731,-93.5509726,-118.6723206,-94.8984756,-115.0345388,-93.92037248,-95.80076799,-84.54449705,-93.42662016,-88.08997243,-122.6008217,-71.95362413,-97.41707065,-86.4904329,-91.70157522,-97.08741125,-109.4410083,-99.90500153,-79.23033272,-81.62199477,-98.31569017,-97.1167168,-99.10161914,-122.7435687,-96.47788918,-93.32597024,-86.94775581,-85.02364851,-71.57318015,-112.4310378,-114.7318229,-119.5263528,-87.35441691,-124.0354961,-86.46070725,-111.0896969,-86.40845658,-117.3189991,-110.6285367,-75.50048849,-122.7843969,-106.7589307,-85.30057505,-85.78969754,-116.5279847,-111.3273337,-99.30406582,-75.54742044,-110.9481455,-71.45889451,-109.2028896,-105.7229345,-71.4790807,-110.4842973,-111.0606041,-119.5634013,-124.1790441,-116.2369826,-113.0490711,-110.4849079,-115.2249025,-119.3927622,-89.66897642,-116.9701212,-86.05550077,-122.5619208,-85.42886396,-91.220466,-81.22725223,-71.79479768,-81.70713268,-81.27307172,-109.5249202,-100.7051997,-85.24189644,-109.1845335,-81.83272347,-95.35917721,-118.6850367,-110.9547924,-96.71956089,-100.1852787,-86.49533079,-104.1093535,-103.61424,-121.7665432,-98.90220683,-117.6889884,-98.68391282,-96.95936703,-85.70517583,-114.264347,-112.4771506,-112.689224,-97.41861663,-92.74143447,-98.66083463,-85.7918613,-120.164879,-111.9632243,-114.388,-118.7179736,-85.98525778,-87.11602237,-101.3181565,-111.6037333,-86.14384613,-100.649942,-86.36950208,-98.7099336,-97.25082795,-85.2868168,-95.34226168,-96.14918065,-116.4623588,-86.46356279,-122.81678,-115.7987142,-96.83981345,-80.86630109,-99.68261832,-117.40861,-98.37720987,-111.8362486,-94.76570179,-116.824496,-97.08993955,-100.6121255,-97.23610354,-99.92247803,-102.5219427,-99.29106061,-96.77970247,-71.68494167,-71.66573009,-71.79802709,-92.4431037,-98.62856545,-102.875142,-97.41304704,-72.91848548,-96.85512233,-97.77308405,-71.76906052,-95.16322141,-97.03497789,-97.67930222,-96.04132091,-96.98139727,-96.19116581,-92.44501566,-98.70752087,-92.74402455,-93.48976305,-97.67551876,-96.60527506,-95.55881188,-71.651789,-68.268509,-67.881905,-74.401491,-71.428103,-69.927263,-70.617682,-72.092123,-68.209171,-68.077773,-68.429254,-69.889944,-68.35754,-68.871133,-68.594335,-88.759164,-88.794652,-89.552886,-93.880503,-69.222522,-68.89108,-69.056968,-67.997826,-67.922498,-81.441106,-81.95812,-82.409214,-82.834414,-82.913722,-85.392434,-84.056809,-95.181199,-96.135669,-94.040807,-95.21841,-94.078777,-94.636969,-95.767078,-95.748497,-95.364908,-93.349755,-96.074082,-94.670256,-95.532331,-68.094876,-68.856993,-69.111684,-68.843,-68.84294,-68.853062,-69.077222,-71.127398,-72.01599,-115.394285,-115.087017,-115.126627,-84.269652,-83.032824,-115.253959,-115.130707,-121.972108,-121.629648,-121.893625,-118.647249,-122.258622,-120.737873,-123.020334,-123.074122,-114.875721,-76.98388,-78.637447,-79.227717,-79.819212,-77.1802,-79.142764,-80.079728,-76.649661,-76.830652,-76.906472,-80.87554,-76.707685,-78.156495,-80.953739,-78.682256,-88.724713,-88.76232,-100.668437,-100.688615,-100.717256,-96.583853,-92.4014,-92.388594,-96.798912,-95.979428,-96.42668,-94.68362,-95.815771,-94.8906,-96.410034,-98.568716,-96.195593,-90.917282,-91.054054,-91.261113,-91.480991,-90.53646,-103.116433,-100.7275,-102.446229,-102.436342,-102.397543,-98.408858,-98.408858,-98.99129,-95.293713,-94.464052,-100.50987,-97.609119,-94.332424,-98.389969,-88.311533,-87.943978],null,null,null,{&quot;interactive&quot;:true,&quot;draggable&quot;:false,&quot;keyboard&quot;:true,&quot;title&quot;:&quot;&quot;,&quot;alt&quot;:&quot;&quot;,&quot;zIndexOffset&quot;:0,&quot;opacity&quot;:1,&quot;riseOnHover&quot;:false,&quot;riseOffset&quot;:250},null,null,null,null,null,{&quot;interactive&quot;:false,&quot;permanent&quot;:false,&quot;direction&quot;:&quot;auto&quot;,&quot;opacity&quot;:1,&quot;offset&quot;:[0,0],&quot;textsize&quot;:&quot;10px&quot;,&quot;textOnly&quot;:false,&quot;className&quot;:&quot;&quot;,&quot;sticky&quot;:true},null]}],&quot;limits&quot;:{&quot;lat&quot;:[26.93623169,48.97902855],&quot;lng&quot;:[-124.6325273,-67.69930253]}},&quot;evals&quot;:[],&quot;jsHooks&quot;:[]}&lt;&#x2F;script&gt;
```&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This creates markers for each measurement, but it would be nice to have a popup message associated with each one. We can create a message with &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&quot;&gt;&lt;code&gt;mutate()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;glue.tidyverse.org&#x2F;reference&#x2F;glue.html&quot;&gt;&lt;code&gt;glue()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Note that the &lt;code&gt;&amp;lt;br&amp;gt;&lt;&#x2F;code&gt; tag is an html tag that creates a new line.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;water_sf&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;leaflet-imports.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;msg &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;glue&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;glue.tidyverse.org&#x2F;reference&#x2F;glue.html&#x27;&gt;glue&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;s&#x27;&gt;&quot;Name: &amp;#123;lakename&amp;#125;&amp;lt;br&amp;gt;
    Chlorphylla: &amp;#123;chla&amp;#125;&amp;lt;br&amp;gt;
    Nitrogen: &amp;#123;ntl&amp;#125;&amp;lt;br&amp;gt;
    Phosphorus: &amp;#123;ptl&amp;#125;&amp;lt;br&amp;gt;&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;leaflet-imports.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;leaflet.html&#x27;&gt;leaflet&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;leaflet-imports.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;map-layers.html&#x27;&gt;addTiles&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;leaflet-imports.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;leaflet&#x2F;man&#x2F;map-layers.html&#x27;&gt;addMarkers&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;popup &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;msg&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

```{=html}
&lt;div id=&quot;htmlwidget-80adeab6c6e752bfb306&quot; style=&quot;width:700px;height:415.296px;&quot; class=&quot;leaflet html-widget&quot;&gt;&lt;&#x2F;div&gt;
&lt;script type=&quot;application&#x2F;json&quot; data-for=&quot;htmlwidget-80adeab6c6e752bfb306&quot;&gt;{&quot;x&quot;:{&quot;options&quot;:{&quot;crs&quot;:{&quot;crsClass&quot;:&quot;L.CRS.EPSG3857&quot;,&quot;code&quot;:null,&quot;proj4def&quot;:null,&quot;projectedBounds&quot;:null,&quot;options&quot;:{}}},&quot;calls&quot;:[{&quot;method&quot;:&quot;addTiles&quot;,&quot;args&quot;:[&quot;&#x2F;&#x2F;{s}.tile.openstreetmap.org&#x2F;{z}&#x2F;{x}&#x2F;{y}.png&quot;,null,null,{&quot;minZoom&quot;:0,&quot;maxZoom&quot;:18,&quot;tileSize&quot;:256,&quot;subdomains&quot;:&quot;abc&quot;,&quot;errorTileUrl&quot;:&quot;&quot;,&quot;tms&quot;:false,&quot;noWrap&quot;:false,&quot;zoomOffset&quot;:0,&quot;zoomReverse&quot;:false,&quot;opacity&quot;:1,&quot;zIndex&quot;:1,&quot;detectRetina&quot;:false,&quot;attribution&quot;:&quot;&amp;copy; &lt;a href=\&quot;http:&#x2F;&#x2F;openstreetmap.org\&quot;&gt;OpenStreetMap&lt;\&#x2F;a&gt; contributors, &lt;a href=\&quot;http:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-sa&#x2F;2.0&#x2F;\&quot;&gt;CC-BY-SA&lt;\&#x2F;a&gt;&quot;}]},{&quot;method&quot;:&quot;addMarkers&quot;,&quot;args&quot;:[[48.97902855,33.03606404,33.03606404,33.03606404,33.03606404,28.04774206,28.04774206,28.04774206,28.04774206,37.41662013,37.41662013,37.41662013,37.41662013,43.92920926,43.92920926,43.92920926,43.92920926,41.68314624,41.68314624,41.68314624,41.68314624,45.58064546,45.58064546,45.58064546,45.58064546,41.29211104,41.29211104,41.29211104,41.29211104,42.61823014,42.61823014,42.61823014,42.61823014,35.99078823,35.99078823,35.99078823,35.99078823,39.97428032,39.97428032,39.97428032,39.97428032,47.83492738,47.83492738,47.83492738,47.83492738,33.0071076,33.0071076,33.0071076,33.0071076,41.03025217,41.03025217,41.03025217,41.03025217,46.36688788,46.36688788,46.36688788,46.36688788,39.40817838,39.40817838,39.40817838,39.40817838,42.77191973,42.77191973,42.77191973,42.77191973,31.14849172,31.14849172,31.14849172,31.14849172,32.1220497,32.1220497,32.1220497,32.1220497,35.20132137,35.20132137,35.20132137,35.20132137,38.75601051,38.75601051,38.75601051,38.75601051,39.77645357,39.77645357,39.77645357,39.77645357,47.31108363,47.31108363,47.31108363,47.31108363,37.47735404,37.47735404,37.47735404,37.47735404,41.69699293,41.69699293,41.69699293,41.69699293,44.79759122,44.79759122,44.79759122,44.79759122,38.22694093,38.22694093,38.22694093,38.22694093,44.45823517,44.45823517,44.45823517,44.45823517,41.553395,41.553395,41.553395,41.553395,42.4048448,42.4048448,42.4048448,42.4048448,37.29320486,37.29320486,37.29320486,37.29320486,36.7872968,36.7872968,36.7872968,36.7872968,45.06232667,43.44601793,43.44601793,43.44601793,43.44601793,43.55819295,43.55819295,43.55819295,43.55819295,34.96189211,34.96189211,34.96189211,34.96189211,34.24558153,34.24558153,34.24558153,34.24558153,47.32067994,47.32067994,47.32067994,47.32067994,48.8940613,48.8940613,48.8940613,48.8940613,48.96243381,48.96243381,48.96243381,48.96243381,39.76851425,39.76851425,39.76851425,39.76851425,37.82447614,37.82447614,37.82447614,37.82447614,28.63735951,28.63735951,28.63735951,28.63735951,31.66683993,31.66683993,31.66683993,31.66683993,32.23766222,32.23766222,32.23766222,32.23766222,39.52477029,39.52477029,39.52477029,39.52477029,39.41441295,39.41441295,39.41441295,39.41441295,40.92704692,40.92704692,40.92704692,40.92704692,48.17781123,48.17781123,48.17781123,48.17781123,39.98585506,39.98585506,39.98585506,39.98585506,34.1200351,34.1200351,34.1200351,34.1200351,48.22612028,48.22612028,48.22612028,48.22612028,45.95096444,45.95096444,45.95096444,45.95096444,43.46045448,43.46045448,43.46045448,43.46045448,45.61657075,45.61657075,45.61657075,45.61657075,35.7733743,35.7733743,35.7733743,35.7733743,42.93075473,42.93075473,42.93075473,42.93075473,41.36944118,41.36944118,41.36944118,41.36944118,43.09951588,43.09951588,43.09951588,43.09951588,42.02167966,44.50713663,37.65529355,37.65529355,37.65529355,37.65529355,38.2350209,38.2350209,38.2350209,38.2350209,41.65016117,46.86973364,41.13540548,39.01266111,44.71864202,44.32355428,35.66653924,36.16292985,36.16292985,36.16292985,36.16292985,42.14001905,47.19305824,47.19305824,47.19305824,47.19305824,34.15364617,48.75289143,48.75289143,48.75289143,48.75289143,48.21240982,48.21240982,48.21240982,48.21240982,31.40138437,36.20871918,41.88000298,38.14855815,41.17205162,39.639176,39.41622694,45.99791162,33.39525121,33.39525121,33.39525121,33.39525121,39.34860511,41.63340269,44.84955975,34.59440722,37.21418362,42.37328848,45.88100581,28.1024337,42.73356694,44.9419591,44.9419591,44.9419591,44.9419591,37.75822313,38.51725431,38.51725431,38.51725431,38.51725431,43.9911006,33.07333126,46.25212358,46.25212358,46.25212358,46.25212358,39.68102041,35.14239477,43.89203643,44.36456222,44.36456222,44.36456222,44.36456222,34.51894059,37.78861101,45.32624711,38.83461964,41.11130456,40.02942387,40.02942387,40.02942387,40.02942387,47.67254307,35.16783478,48.70438576,46.89197546,38.77692521,41.71307603,39.11225012,34.00633269,35.43592446,32.60301252,32.60301252,32.60301252,32.60301252,35.58384499,47.57601003,47.57601003,47.57601003,47.57601003,47.46534213,39.02766863,45.2593824,40.3285507,36.15288306,41.40043649,42.50465482,37.29913592,48.40689317,33.58413004,33.58413004,33.58413004,33.58413004,37.64783657,37.64783657,37.64783657,37.64783657,47.48039976,47.48039976,47.48039976,47.48039976,43.19952563,38.06219707,38.06219707,38.06219707,38.06219707,43.95295544,43.21855689,41.3229061,38.38849036,38.38849036,38.38849036,38.38849036,46.57881675,35.01895093,48.47756954,42.29154287,41.56832304,44.73647289,33.73938795,38.36396781,43.53474213,32.47736836,47.96678307,35.94835771,48.54139505,46.37421211,36.67343618,35.50848975,40.47787067,46.27199075,38.77637097,42.6781739,44.19244227,32.08989492,35.49457482,32.51233098,34.9138437,38.55948746,46.15225085,42.19565154,42.19565154,42.19565154,42.19565154,43.81382063,41.38426053,44.95223074,45.18747233,33.84097049,41.45660059,45.91703876,41.08805669,43.41788272,38.81717464,34.88602671,47.46148555,34.72229815,36.94420902,28.56369452,41.35719487,31.70973689,32.515555,32.515555,32.515555,32.515555,45.06291593,35.64054377,40.62803319,48.31405586,48.39382391,46.11443869,35.69079767,43.20849339,44.87173399,40.96440578,36.6584792,45.7646886,42.51316899,36.5624187,42.31280493,44.84025867,45.40860134,35.02063348,41.93460679,46.94267011,41.36496934,44.58635561,38.4638561,34.25648145,36.30884018,40.86340465,47.55716773,48.71606442,48.24355,40.49157546,36.68164988,36.68164988,36.68164988,36.68164988,37.89444471,33.09780391,42.42304224,47.17784258,42.88974892,42.88974892,42.88974892,42.88974892,47.39595432,41.97137282,45.18038118,45.09335555,34.36882178,36.56057181,46.13180055,42.76982559,43.09504296,38.60231182,43.8382238,34.72092203,44.52251138,45.16826567,34.45197764,45.6434979,36.23894258,48.28610194,34.16578918,40.04075657,38.47961378,48.13580369,39.80684554,28.57332363,41.97098891,33.06325702,31.16378198,34.2269109,46.19906329,42.21176414,43.54592149,39.43240936,41.90973411,43.62308804,45.44015743,34.57061143,35.51629478,39.92061781,37.99433764,37.99433764,37.99433764,37.99433764,29.49147018,36.3106781,37.19249014,38.49363215,41.41314405,38.77124892,46.82219046,38.44681794,48.75171319,42.10765269,41.95095517,34.21452974,37.94635193,42.82731383,43.57477426,33.85862113,40.46163354,48.24775379,38.22555093,48.92434782,40.35740927,46.02793009,43.92368969,47.94850085,40.69518018,47.18441442,31.05988383,46.03407357,42.25218027,37.69558878,35.17104325,38.96504347,45.78575069,42.35496664,44.20672826,43.9575273,45.10823473,41.72092858,46.76330385,35.61858883,44.9484358,41.68686806,41.68686806,41.68686806,41.68686806,35.97472589,37.24525923,34.60517537,45.44213549,46.82469712,37.17718851,43.25263859,41.80079367,31.20627441,39.48658532,41.2184867,41.2184867,41.2184867,41.2184867,39.3320249,45.9076374,34.13761156,48.70867836,32.37834158,45.81215092,39.07986361,43.54705816,30.29008869,45.97262852,36.59009304,28.06126866,42.69132092,42.9654707,43.37864455,36.72480919,35.06360996,31.44842292,42.32382664,45.88174092,41.06227132,39.37683345,44.9542938,44.88675167,35.75956138,46.30058363,38.35723526,47.92494929,40.33649731,40.13391202,48.41877337,42.26770086,38.47603543,44.64209925,33.46835151,45.98738228,46.16790978,44.02383508,48.18807378,39.71571919,41.55549527,45.0802966,44.92721305,35.05246497,40.68974933,38.70179794,42.54198776,42.77239407,43.96358712,44.90724118,38.82349927,45.99294588,38.99691941,41.98943091,41.98943091,41.98943091,41.98943091,40.67141407,37.14727752,34.94582155,46.89269882,28.86654374,41.76026908,30.75107327,32.02985585,39.40384918,40.21848571,39.17533903,46.47746767,39.78368053,46.49728658,42.92255989,39.18947102,43.83495077,45.63873346,41.33744108,37.30165688,47.12976263,43.17765587,45.28365031,37.50728425,38.21777874,35.09506233,42.34421131,42.00008215,45.17198582,34.51995909,43.49635854,40.76263285,47.61486601,41.21443378,40.16155115,47.07388772,47.46561683,33.37648429,46.43678101,31.77844848,43.74155805,40.95244606,47.97490008,40.38121547,46.87138943,33.06586113,37.62556948,42.94295938,42.94295938,42.94295938,42.94295938,39.46727638,42.7054837,37.06496556,41.89706027,44.32604728,45.4544983,37.80850252,34.27511413,41.58503646,31.89213905,32.07003639,36.04195569,45.50212807,36.70285935,37.65022613,39.99512558,33.14557832,47.3145341,35.06242308,48.90066286,33.55658479,35.73708099,43.32535916,44.98259563,33.28828061,45.70558294,40.52821138,48.09040077,40.76400873,45.77329011,34.28490489,36.17652473,42.78877715,41.77555566,41.77555566,41.77555566,41.77555566,46.13959313,40.55157389,38.29933705,28.0262635,37.61578723,41.41393411,44.31668637,45.39184932,37.70523851,34.78754469,43.49984691,42.42600499,33.39339434,46.41279009,39.61349449,44.68029866,33.74732977,41.21839793,48.04237609,41.22739765,40.4600301,34.36024322,46.64962378,38.72322531,42.30712511,39.17160197,43.64334502,46.36895187,44.7665922,47.5788475,38.79133283,45.63536489,35.95443189,44.46680722,42.53263874,36.11204382,46.27836202,40.19262068,46.17967552,43.53424744,43.92762751,43.73612725,44.6510154,43.23106073,41.95740591,47.07143625,34.80731121,48.20653603,41.83996337,43.16774073,41.17631286,39.30139975,47.5916096,47.48939455,41.51816888,43.80089109,42.73174291,43.0004446,40.11693151,35.52857379,46.47568516,43.76802869,37.39564741,44.44651471,33.88536118,31.30046077,41.5778835,37.12269729,46.23667971,44.15403952,43.10063504,36.47751354,43.7347358,34.32056025,47.64355769,42.08118015,37.95715701,47.23309947,38.93435896,47.88008342,41.44985958,40.39202891,42.58198097,43.13964644,35.87344908,47.66725682,47.13645291,48.8960231,42.74496123,43.30580348,39.01484504,40.30650105,47.76285371,33.29231012,47.72869709,34.83840643,42.49353258,31.19359518,39.61456971,39.92081406,38.08837452,47.26690206,42.36491565,44.00551584,37.66794161,37.66794161,37.66794161,37.66794161,46.09726783,45.22936379,45.35264891,39.99374059,47.34437749,35.05636423,47.92615582,46.64554759,42.80283231,39.03618262,41.16921419,48.04272711,40.20925528,45.8905697,39.3479549,39.3479549,39.3479549,39.3479549,44.43065201,35.79847217,30.47158625,41.63897307,40.75775549,37.14689417,42.25855906,36.60379676,41.93751914,34.53807855,42.61644253,41.67158213,46.97285023,34.55063761,45.72351557,40.1114616,40.48406381,42.14994307,48.1652,34.03321325,48.57775125,47.07428203,44.43080897,40.91152674,35.20544322,46.00218518,42.12121846,41.18833129,39.27750349,45.33667139,45.00157961,35.03251939,42.28383032,35.81387892,40.67877769,27.84728979,41.70034673,44.08794072,30.00789769,41.41506353,46.41917873,39.60633701,34.44592488,46.04071508,45.31578279,38.75947482,38.75947482,38.75947482,38.75947482,41.09921102,47.86470218,48.27375687,47.0508466,35.67385009,41.65548495,43.37516208,33.16058732,40.49021653,39.29721636,35.55992713,44.04280484,45.23854717,34.52419902,36.11835531,43.80794846,41.49584791,42.56509972,34.93328103,45.29000323,38.12541781,43.15032025,41.37196888,38.38375695,46.56718218,38.79221156,42.11998183,41.47720752,38.50785067,43.35530141,43.4613315,40.93548087,47.91515143,48.01890447,36.03990354,48.13500634,45.88816389,36.82323361,33.7202532,39.00193733,33.15857155,46.69346715,35.50355494,44.23115242,38.09909757,36.92159955,45.11768598,39.29458754,32.75598701,46.70133763,45.06812814,36.98625493,43.4546224,45.41454518,45.41454518,45.41454518,45.41454518,36.38727183,46.01155947,40.22292361,47.74255874,48.39247752,39.46919944,47.06936125,36.57979268,28.63214331,45.18177616,41.2045164,41.2045164,41.2045164,41.2045164,35.52043358,46.47136195,46.47136195,46.47136195,46.47136195,40.18853553,40.43031936,35.37133652,42.97430171,44.82453402,33.73044411,36.15830485,43.70497197,35.19858711,40.43821209,37.93823147,45.86796274,36.57446101,45.30107859,42.18668508,38.38038763,38.38038763,38.38038763,38.38038763,45.91676304,41.32867877,36.0828954,33.24145034,46.43163694,40.80373555,40.43327881,28.91616949,41.92400456,38.3383223,35.1386532,39.55390324,47.19204698,43.45220479,34.56754654,45.16506431,42.19692077,32.03729676,40.29789402,42.91835392,43.79630195,45.07363846,43.61999552,45.84991802,39.04408399,40.75747354,37.59934642,46.53835681,40.87358233,33.29943972,47.89085231,39.74858029,40.4943852,30.96113096,40.05555836,35.56344263,42.21592161,34.73428918,46.98630288,39.27166676,33.66930447,41.24575191,36.97055086,36.42564729,47.82117438,45.53504992,42.4782951,38.54281635,42.23317529,34.37370438,43.45913401,40.69367958,40.98641214,48.1617266,39.7038049,42.27012122,39.00356446,44.87906853,32.76230788,37.67100497,42.59773028,35.16889537,36.53187298,27.74198501,37.2690553,45.18456035,38.3067683,34.18074648,45.18292402,41.68840425,41.6889871,34.58721435,40.18092494,41.75274586,48.31132355,33.58147205,32.40169424,45.08626125,47.57177224,30.24052123,43.9294318,28.57555508,40.76550232,44.95420653,41.69516992,44.37178143,38.16675267,35.01980463,42.47147986,36.25057107,46.57403434,45.27488186,35.93942679,32.94495679,44.54399881,40.70732923,42.27599914,39.72648692,39.72648692,39.72648692,39.72648692,44.92879744,44.63943331,40.80705076,44.56839036,37.66812885,43.8526781,41.90886578,34.45201248,29.17488107,37.66235766,45.69469839,41.12635244,40.6317324,28.82529643,30.83484459,42.48541393,39.96491779,38.93960606,38.98848369,46.61381657,39.27108433,37.52420141,41.22680207,47.4572505,42.38300259,38.71328174,38.07682398,42.51691372,40.35385773,36.00712806,47.52073005,32.67017525,42.724557,35.56351286,34.53937366,41.37561834,45.85043385,35.41307522,42.92535091,39.21641749,37.38533354,27.94018842,41.58028332,42.40712576,32.48418587,38.94599172,40.07823959,48.96606399,48.2461517,29.45531325,41.9306954,31.10386776,44.78748289,41.04149545,34.95364916,33.32111369,47.48799465,40.95544299,44.53735651,41.79161289,41.40500676,44.02665452,41.8621338,38.06356571,45.87339726,44.10051186,38.79320182,42.53347335,47.09945654,43.66297627,45.74264146,36.89068214,48.13399568,43.34114476,47.44868765,42.20289954,32.45275022,46.60064001,46.60064001,46.60064001,46.60064001,42.29737384,45.75699008,31.19633242,42.23979744,41.43839158,39.58892136,43.10411616,48.02025253,41.46950026,32.25404093,30.43252366,35.15138649,46.25503439,42.15139597,44.76204445,45.55715378,32.35269226,32.71215655,29.09294251,42.2494978,44.8372406,39.68531765,28.62097337,32.59300712,44.32794024,45.89624924,45.89266323,44.70838784,37.85925631,31.26784195,41.627105,41.51134268,47.30587695,48.671943,38.66086617,33.45373979,46.41950629,39.29388434,34.4202345,41.29977616,48.15402125,44.3017541,38.96688176,47.40930776,44.18421481,41.51785892,41.28362106,48.18443003,41.5055322,40.03137931,38.64382658,39.34812677,41.70544844,36.27424052,41.24777405,41.55977063,47.6347722,40.34377825,42.06680514,43.63164375,41.80418482,37.43723737,40.17547463,37.56936135,43.98862837,34.47617113,48.00821961,40.07519519,47.13285576,41.34688657,31.95537014,28.32320111,41.37985994,28.09210404,28.84218233,44.94116736,40.36170146,39.07938034,40.72496185,28.16663717,29.20565727,44.30658171,40.68363702,32.8366626,35.8844838,39.54217646,43.82780189,41.99075603,43.71378677,41.29419937,47.57068723,30.75592819,33.49584507,41.27976472,37.90869352,47.67808029,42.08566286,31.90669248,31.29345058,41.76461732,34.14749294,47.91880419,46.93083483,48.45509278,38.70359768,41.23224913,38.21295517,32.23706223,44.02361323,33.55680923,42.45325719,41.67863226,33.9804795,33.8415669,41.55099685,30.85367701,32.11659958,44.96452667,41.077102,48.66028929,43.54942519,41.03691696,26.93623169,32.57024595,48.05647979,29.24614674,42.12319331,34.9019537,48.45741132,34.62968086,42.62695121,41.97536219,36.05807999,41.78762942,42.41646632,40.15668653,41.89097393,41.39410498,41.58007689,30.53713917,36.14305845,36.84862392,35.92127588,43.49623503,36.74858993,34.72903354,41.92028511,34.8862297,36.73591623,35.49774222,36.81228138,34.48858411,36.5147867,32.71459999,35.39706727,31.37317275,32.09045845,34.96590119,34.58938281,36.07001774,44.64231,44.40788,44.836404,44.348811,43.296358,45.653548,41.848175,42.323799,45.207071,45.219001,44.849882,45.799297,46.375055,46.944636,46.345672,46.994934,45.500526,46.138603,47.122809,45.748209,46.962321,46.353306,45.127611,45.354469,29.080057,29.839332,30.118409,30.211239,30.247737,41.56235,42.398646,47.062841,45.33182,46.928377,47.189468,43.8192,45.813111,44.15457,46.292544,45.490155,43.891574,45.528235,45.768831,44.684008,45.152049,46.965959,44.36243,46.9518,46.961173,46.944789,45.752816,43.840363,43.023373,40.592943,41.026475,37.301656,39.707435,40.080755,44.299985,44.412769,43.7447,46.266753,43.819275,42.736902,42.46935,48.501411,42.040047,47.427764,44.000621,39.39897,37.394115,38.328785,37.315287,37.344722,39.510833,36.807826,36.841537,37.357963,37.43234,37.042659,37.303695,39.514306,37.974885,40.270346,46.381969,46.083918,42.526174,42.578207,42.526966,40.630491,42.535944,42.479229,37.09209,38.791331,38.522226,38.50443,38.494153,38.1274,39.469161,38.948542,37.232374,37.726925,36.636707,37.386994,38.428911,38.228213,42.458365,42.5433,41.779509,41.731631,41.734746,30.751822,30.751822,32.441373,31.917152,32.044428,31.49062,31.003513,33.249977,28.503123,43.218375,43.958982],[-114.0218399,-79.98379054,-79.98379054,-79.98379054,-79.98379054,-97.85986605,-97.85986605,-97.85986605,-97.85986605,-108.4045832,-108.4045832,-108.4045832,-108.4045832,-114.8403862,-114.8403862,-114.8403862,-114.8403862,-73.1465177,-73.1465177,-73.1465177,-73.1465177,-92.04001797,-92.04001797,-92.04001797,-92.04001797,-93.59040488,-93.59040488,-93.59040488,-93.59040488,-83.50588771,-83.50588771,-83.50588771,-83.50588771,-96.87178731,-96.87178731,-96.87178731,-96.87178731,-74.56255123,-74.56255123,-74.56255123,-74.56255123,-100.5756807,-100.5756807,-100.5756807,-100.5756807,-107.2747938,-107.2747938,-107.2747938,-107.2747938,-100.7797567,-100.7797567,-100.7797567,-100.7797567,-99.51185877,-99.51185877,-99.51185877,-99.51185877,-87.81380832,-87.81380832,-87.81380832,-87.81380832,-77.3095481,-77.3095481,-77.3095481,-77.3095481,-97.745332,-97.745332,-97.745332,-97.745332,-95.48843409,-95.48843409,-95.48843409,-95.48843409,-81.34573084,-81.34573084,-81.34573084,-81.34573084,-75.21503793,-75.21503793,-75.21503793,-75.21503793,-81.51745185,-81.51745185,-81.51745185,-81.51745185,-121.2990598,-121.2990598,-121.2990598,-121.2990598,-88.32737922,-88.32737922,-88.32737922,-88.32737922,-73.36398551,-73.36398551,-73.36398551,-73.36398551,-71.86971736,-71.86971736,-71.86971736,-71.86971736,-80.85405519,-80.85405519,-80.85405519,-80.85405519,-107.0403753,-107.0403753,-107.0403753,-107.0403753,-85.44424168,-85.44424168,-85.44424168,-85.44424168,-101.7024805,-101.7024805,-101.7024805,-101.7024805,-77.88986113,-77.88986113,-77.88986113,-77.88986113,-89.17572548,-89.17572548,-89.17572548,-89.17572548,-117.1533553,-71.80868659,-71.80868659,-71.80868659,-71.80868659,-73.43960723,-73.43960723,-73.43960723,-73.43960723,-80.51686138,-80.51686138,-80.51686138,-80.51686138,-113.5793644,-113.5793644,-113.5793644,-113.5793644,-99.74629427,-99.74629427,-99.74629427,-99.74629427,-112.1680165,-112.1680165,-112.1680165,-112.1680165,-115.116608,-115.116608,-115.116608,-115.116608,-79.38081778,-79.38081778,-79.38081778,-79.38081778,-107.8853911,-107.8853911,-107.8853911,-107.8853911,-81.13759704,-81.13759704,-81.13759704,-81.13759704,-91.50916933,-91.50916933,-91.50916933,-91.50916933,-98.40515204,-98.40515204,-98.40515204,-98.40515204,-118.878391,-118.878391,-118.878391,-118.878391,-94.49793062,-94.49793062,-94.49793062,-94.49793062,-74.53388264,-74.53388264,-74.53388264,-74.53388264,-100.2942095,-100.2942095,-100.2942095,-100.2942095,-107.2317809,-107.2317809,-107.2317809,-107.2317809,-91.56105203,-91.56105203,-91.56105203,-91.56105203,-122.1241675,-122.1241675,-122.1241675,-122.1241675,-99.13645049,-99.13645049,-99.13645049,-99.13645049,-116.1414317,-116.1414317,-116.1414317,-116.1414317,-122.4260347,-122.4260347,-122.4260347,-122.4260347,-81.54174586,-81.54174586,-81.54174586,-81.54174586,-109.6534609,-109.6534609,-109.6534609,-109.6534609,-87.43213825,-87.43213825,-87.43213825,-87.43213825,-88.45255303,-88.45255303,-88.45255303,-88.45255303,-73.48227989,-70.72328312,-98.26265148,-98.26265148,-98.26265148,-98.26265148,-112.2015025,-112.2015025,-112.2015025,-112.2015025,-85.08175821,-95.72856324,-81.13692241,-89.14408234,-72.23412171,-89.19099056,-106.3013899,-96.36834536,-96.36834536,-96.36834536,-96.36834536,-101.8094915,-99.32424356,-99.32424356,-99.32424356,-99.32424356,-109.3063643,-109.2416928,-109.2416928,-109.2416928,-109.2416928,-114.5994561,-114.5994561,-114.5994561,-114.5994561,-111.0870104,-109.0936327,-73.04056323,-119.3636363,-85.93794192,-95.45270584,-75.68870871,-89.54369029,-99.39138265,-99.39138265,-99.39138265,-99.39138265,-86.1080157,-76.84081042,-69.2311707,-97.68636485,-78.62538711,-88.12714851,-91.24994528,-82.72114525,-72.10321054,-94.03191284,-94.03191284,-94.03191284,-94.03191284,-94.85392322,-111.5318192,-111.5318192,-111.5318192,-111.5318192,-86.10688883,-115.5092281,-96.0363618,-96.0363618,-96.0363618,-96.0363618,-84.68705386,-90.45779851,-73.05232335,-101.0545158,-101.0545158,-101.0545158,-101.0545158,-98.88132868,-119.0740544,-92.42496232,-94.74900513,-75.45750462,-80.57939847,-80.57939847,-80.57939847,-80.57939847,-93.75949137,-83.66709127,-121.1758404,-99.08101063,-88.06164584,-70.08954132,-120.4416484,-87.31609868,-99.24197456,-84.81807605,-84.81807605,-84.81807605,-84.81807605,-90.96329594,-122.0836788,-122.0836788,-122.0836788,-122.0836788,-95.76982211,-86.46847503,-94.96441345,-96.52877618,-79.1460479,-85.37102925,-100.5303638,-76.82122952,-102.9398075,-84.20752986,-84.20752986,-84.20752986,-84.20752986,-90.58984208,-90.58984208,-90.58984208,-90.58984208,-112.5389845,-112.5389845,-112.5389845,-112.5389845,-71.24740864,-103.6093941,-103.6093941,-103.6093941,-103.6093941,-74.449008,-85.46799659,-85.75477789,-115.1177953,-115.1177953,-115.1177953,-115.1177953,-94.17531685,-85.55980719,-107.5902123,-111.7292621,-71.91051169,-100.7421974,-99.23199838,-122.1300516,-96.96004,-81.83068716,-99.09494995,-85.31930179,-115.2253416,-98.99123974,-106.6907196,-96.32121976,-83.87906608,-99.38087643,-105.0043919,-113.4006122,-93.8978566,-95.89426355,-80.57559837,-87.85257456,-98.73027981,-75.56227311,-88.82970363,-120.5256858,-120.5256858,-120.5256858,-120.5256858,-88.99784821,-73.50316356,-72.11517323,-97.63176411,-81.67207159,-85.2449775,-97.02426153,-82.72837965,-119.4133477,-95.54639054,-79.6893777,-92.43469487,-83.11204858,-82.20271516,-81.43794893,-72.04012641,-91.37124941,-93.87023429,-93.87023429,-93.87023429,-93.87023429,-83.45698555,-94.96969524,-74.85056841,-100.758717,-122.6562431,-99.42452982,-105.8760128,-75.93516194,-96.63532038,-96.87657153,-79.84411222,-90.6606696,-71.80704144,-104.5942811,-73.13778739,-71.13479653,-96.62636247,-81.04741516,-85.33088977,-95.26723865,-81.22089462,-72.31186438,-105.0515471,-117.1853787,-96.12859695,-76.77414252,-112.4475051,-103.1433201,-112.8672712,-78.46066192,-83.70494798,-83.70494798,-83.70494798,-83.70494798,-120.5721188,-86.48006432,-83.99670111,-68.23140034,-124.0780934,-124.0780934,-124.0780934,-124.0780934,-94.56183848,-75.87948445,-121.7044304,-97.75438416,-97.28183273,-77.7454141,-91.61045649,-71.9999278,-73.76674325,-111.8406157,-85.07388127,-90.07170002,-73.29262702,-90.69813817,-92.9382529,-99.23111059,-97.34810228,-101.9047579,-89.91161609,-81.01548859,-82.87603537,-117.6915241,-105.0360311,-81.77025392,-71.19898937,-96.47583806,-83.54189637,-86.84234494,-89.29397704,-83.52098213,-89.36445641,-106.6003635,-75.33783928,-71.2654292,-97.2623188,-96.23835676,-80.20338458,-83.00425479,-90.54213897,-90.54213897,-90.54213897,-90.54213897,-101.1563449,-88.48981792,-95.98672528,-78.00762524,-85.734175,-77.64555522,-94.53354023,-107.4380582,-108.0524686,-111.8159376,-71.95133091,-94.21467091,-122.6247455,-83.7469401,-97.0587349,-90.54209875,-79.56745425,-98.8914836,-107.5377617,-100.3053493,-78.11907346,-98.94484753,-96.95103624,-91.39296143,-99.85563998,-119.3639845,-81.41308684,-99.16791062,-78.29237084,-81.05483233,-99.37115228,-77.33745683,-88.36579346,-71.47978934,-89.83486415,-71.96791311,-94.16801923,-85.00769013,-96.21518776,-101.6607655,-116.0893222,-71.61087837,-71.61087837,-71.61087837,-71.61087837,-105.9168212,-121.9668773,-112.4389242,-109.2242066,-99.7794296,-82.39104876,-114.3827885,-72.52468392,-91.54690118,-118.7255216,-86.59115603,-86.59115603,-86.59115603,-86.59115603,-97.37482305,-89.91696268,-84.64323654,-122.3277089,-82.0648507,-99.76603988,-106.3650807,-116.6654946,-96.59781441,-90.50816425,-89.26975098,-82.27729181,-71.3703595,-89.25185174,-123.2686178,-98.88888117,-111.4965509,-86.43728338,-85.4673404,-95.33234259,-81.31730025,-89.02743535,-118.185992,-88.48011849,-105.1444706,-87.77935818,-94.63514177,-101.229344,-105.1268527,-111.0580729,-117.6640499,-99.24832126,-119.9997761,-111.3963618,-86.64445451,-89.35046545,-69.00206052,-124.0796101,-98.0662251,-86.21162845,-75.70704866,-71.35188791,-97.43982726,-79.20867259,-110.3847622,-90.09502746,-72.95778821,-118.446839,-121.7804825,-93.24237251,-80.61407853,-95.68760607,-108.0510627,-71.5975535,-71.5975535,-71.5975535,-71.5975535,-99.05552208,-119.5155897,-97.4757382,-99.41665043,-81.68245579,-70.65792119,-93.11140261,-97.62566712,-120.0976296,-105.3784913,-75.53217241,-103.2176549,-99.96360846,-122.4056376,-102.0383947,-85.98220181,-71.09335145,-97.34187361,-85.59855169,-115.1266278,-88.31643187,-72.06616228,-93.84703784,-96.22952255,-77.66963872,-84.60955737,-79.32038612,-71.76889368,-100.0637661,-97.81889401,-94.58564751,-74.28597177,-100.8270609,-101.6522363,-79.05296653,-98.58682039,-116.6021502,-111.9196013,-93.95778373,-99.48680479,-97.60321373,-74.78073603,-90.74589983,-84.32400254,-119.5708717,-96.98715489,-81.09987899,-109.8067241,-109.8067241,-109.8067241,-109.8067241,-114.854418,-71.92427314,-87.66339204,-73.4471959,-72.33303748,-97.67084235,-94.20630504,-110.0619092,-84.93075504,-90.60093891,-84.29700265,-85.58909082,-92.42758598,-96.42019136,-113.5241332,-105.1124639,-90.35508478,-99.4057224,-82.68737992,-113.79482,-111.5104323,-109.5195801,-113.9237405,-109.5385322,-87.1410494,-89.89123137,-84.49692799,-124.6325273,-111.3907566,-99.64100853,-97.17112636,-79.76105079,-88.21979209,-91.58457902,-91.58457902,-91.58457902,-91.58457902,-90.20943735,-81.23795266,-102.7554334,-81.90969367,-87.85835615,-75.02535883,-122.0463775,-96.09372175,-97.05592896,-111.2309008,-86.02363273,-84.93952274,-114.7186101,-95.49202478,-102.1976293,-118.0456408,-117.4401855,-116.5205894,-90.41206384,-103.8250886,-81.16283175,-109.3628312,-99.42139052,-88.7625553,-96.33164966,-119.9011897,-110.796597,-69.22774755,-67.69930253,-96.23531854,-105.1064368,-70.35478251,-78.57809968,-106.7540577,-100.5912717,-114.4484101,-91.03611959,-109.6839624,-113.2957121,-71.50524998,-118.1504274,-122.0382458,-93.4604842,-86.2884379,-103.5255076,-94.60247265,-84.26596921,-108.0879027,-72.19612696,-108.1947009,-105.2328863,-80.56008707,-93.39164891,-116.6865573,-111.7317,-99.23771294,-94.90058432,-109.8706018,-85.28406916,-98.02578504,-88.19188615,-103.5206581,-88.68475272,-71.81133018,-94.93952456,-89.43472797,-85.66354429,-77.63605473,-94.33981178,-74.44475781,-72.08861587,-104.8975432,-73.1843614,-80.6282663,-109.1837945,-86.21029029,-77.88158812,-100.0594809,-83.77648752,-112.3069538,-73.28915784,-93.85323148,-83.84598941,-94.66049019,-96.55655629,-90.98970016,-99.05940629,-99.71392205,-83.3105724,-94.69023855,-95.2899994,-74.13720525,-91.60874473,-84.47502308,-119.5926045,-87.94670174,-77.14037466,-94.30727333,-99.18240152,-81.46928239,-91.45201074,-121.094003,-122.2142097,-88.41583313,-88.83968274,-88.83968274,-88.83968274,-88.83968274,-97.23731774,-117.2723703,-89.47240376,-104.5793379,-100.0458254,-82.33960673,-114.4032969,-99.56622833,-98.6667271,-94.76922848,-74.46409963,-91.80243774,-83.14039964,-99.03925508,-88.46818961,-88.46818961,-88.46818961,-88.46818961,-96.29030059,-81.29840323,-88.61259404,-87.52959736,-109.6229151,-90.79086629,-71.89175564,-104.6397618,-73.45450471,-111.2044517,-85.20168529,-85.0498935,-95.6552124,-118.1208238,-92.16793858,-75.86456997,-104.9010317,-101.8384538,-92.1073,-109.4367421,-113.9310021,-99.63068806,-83.92048752,-86.33837152,-96.55493352,-89.61298609,-84.32304093,-111.3838226,-86.21179967,-70.66748588,-94.33240543,-79.04177704,-88.12382987,-78.52879549,-110.7617077,-82.77867302,-74.67614714,-123.3000758,-97.8223278,-86.47388358,-95.84076097,-84.96745506,-93.11174318,-86.80571961,-92.56439548,-97.16290101,-97.16290101,-97.16290101,-97.16290101,-75.52182529,-101.5137215,-117.3323799,-99.45309149,-88.31948013,-70.3351834,-93.46829619,-96.10401913,-86.00305553,-91.00152146,-105.1611962,-70.52697713,-94.95289584,-96.50308213,-79.31994397,-87.97829791,-85.4335164,-100.4927777,-77.102743,-98.76204738,-96.31123963,-85.47563891,-106.250251,-115.1046656,-94.32426564,-84.64320588,-119.9976109,-92.46019565,-121.5362609,-109.3834683,-95.17278405,-74.25538694,-90.34231242,-98.89293534,-106.8487839,-116.1556177,-93.27559075,-107.4638244,-94.00429471,-95.7860147,-107.2214132,-119.6483226,-104.225471,-93.52895007,-91.05983943,-87.45542965,-97.52639653,-111.2808196,-86.38310821,-95.74771639,-116.1697398,-87.20570041,-73.59007456,-84.80370819,-84.80370819,-84.80370819,-84.80370819,-96.82324072,-109.1798402,-104.9523623,-92.04084194,-112.5192316,-79.49911328,-92.0010507,-81.99701482,-81.35534067,-108.1327104,-86.40554386,-86.40554386,-86.40554386,-86.40554386,-94.97046064,-89.57932002,-89.57932002,-89.57932002,-89.57932002,-83.96549218,-101.5543964,-86.3816758,-76.06888458,-96.61488782,-96.77580307,-79.8531667,-86.4262233,-98.49130804,-82.97903314,-90.92375999,-113.5499319,-104.6630512,-95.11805454,-85.5734717,-75.59661445,-75.59661445,-75.59661445,-75.59661445,-95.39655084,-81.3860772,-87.28855765,-116.7467274,-87.08228263,-77.17855996,-105.0337077,-81.73898503,-72.21921899,-121.0935467,-96.23064723,-75.71879453,-122.9725593,-124.2460047,-96.87937904,-84.97760482,-88.10342481,-99.51438874,-110.2260262,-118.8521689,-122.0175362,-93.1265767,-85.28224429,-95.71390587,-107.9174634,-93.23879955,-118.7415562,-106.0071156,-75.58090694,-81.89267614,-116.8933801,-105.0447684,-121.1629233,-83.65565657,-105.7469295,-93.63792628,-83.58492288,-99.69530507,-122.5690307,-85.19021469,-97.58547265,-85.4301129,-90.35313417,-103.6053539,-105.0491133,-98.61521182,-86.06684183,-77.39673538,-111.8535786,-98.33930518,-94.94774508,-118.2702746,-90.39676778,-116.6384102,-78.65197531,-93.63628619,-87.18335673,-68.22649939,-94.60523041,-81.07000814,-110.2208282,-99.07349782,-99.56836014,-81.49933161,-87.52287716,-97.78599752,-93.9527628,-110.0007541,-104.9019583,-85.03064639,-71.64332202,-112.4185161,-105.0386785,-102.414217,-109.0848391,-111.2821257,-93.38700366,-109.7887823,-122.7050326,-96.811485,-86.43464751,-100.125119,-109.297264,-112.8818444,-75.13142213,-121.8732089,-92.96597494,-111.4026965,-85.52570292,-87.19195879,-87.46065203,-99.20744764,-83.36502827,-96.45333515,-110.8356239,-106.4529904,-84.21804073,-86.7140735,-86.7140735,-86.7140735,-86.7140735,-97.20984727,-85.78652164,-110.4052879,-98.12948201,-94.41073448,-84.77214787,-85.89436967,-84.28783121,-100.6327156,-120.2096368,-99.36144816,-104.6435242,-89.74974737,-81.8367232,-93.43654813,-94.63032824,-105.4935103,-93.59341677,-75.51763692,-88.57570293,-106.3934507,-112.7840699,-85.65000607,-88.09978566,-86.04986016,-84.27550077,-122.730427,-83.79582456,-78.62336887,-84.89743874,-116.5643475,-94.07719555,-83.0854123,-97.59469662,-92.27375111,-112.0878211,-99.26440854,-88.07467739,-109.5044313,-76.8537467,-99.78514802,-81.65126772,-84.92309094,-102.4533862,-83.65078368,-89.35469451,-105.2232407,-109.75936,-114.1200149,-81.49557857,-119.1737894,-92.47015483,-109.2607748,-85.97905159,-96.71830238,-85.8149094,-123.2647195,-111.4149738,-97.15487079,-91.53532783,-117.1542995,-121.7456252,-71.55317818,-86.6622935,-87.80067574,-111.4734759,-90.78180772,-100.645836,-113.4075253,-122.4216059,-98.27345753,-95.95265017,-108.1899505,-95.12645329,-116.7986927,-114.8909997,-96.06121126,-88.11725533,-88.11725533,-88.11725533,-88.11725533,-116.1124743,-97.32017864,-89.30335606,-105.6303731,-93.5509726,-118.6723206,-94.8984756,-115.0345388,-93.92037248,-95.80076799,-84.54449705,-93.42662016,-88.08997243,-122.6008217,-71.95362413,-97.41707065,-86.4904329,-91.70157522,-97.08741125,-109.4410083,-99.90500153,-79.23033272,-81.62199477,-98.31569017,-97.1167168,-99.10161914,-122.7435687,-96.47788918,-93.32597024,-86.94775581,-85.02364851,-71.57318015,-112.4310378,-114.7318229,-119.5263528,-87.35441691,-124.0354961,-86.46070725,-111.0896969,-86.40845658,-117.3189991,-110.6285367,-75.50048849,-122.7843969,-106.7589307,-85.30057505,-85.78969754,-116.5279847,-111.3273337,-99.30406582,-75.54742044,-110.9481455,-71.45889451,-109.2028896,-105.7229345,-71.4790807,-110.4842973,-111.0606041,-119.5634013,-124.1790441,-116.2369826,-113.0490711,-110.4849079,-115.2249025,-119.3927622,-89.66897642,-116.9701212,-86.05550077,-122.5619208,-85.42886396,-91.220466,-81.22725223,-71.79479768,-81.70713268,-81.27307172,-109.5249202,-100.7051997,-85.24189644,-109.1845335,-81.83272347,-95.35917721,-118.6850367,-110.9547924,-96.71956089,-100.1852787,-86.49533079,-104.1093535,-103.61424,-121.7665432,-98.90220683,-117.6889884,-98.68391282,-96.95936703,-85.70517583,-114.264347,-112.4771506,-112.689224,-97.41861663,-92.74143447,-98.66083463,-85.7918613,-120.164879,-111.9632243,-114.388,-118.7179736,-85.98525778,-87.11602237,-101.3181565,-111.6037333,-86.14384613,-100.649942,-86.36950208,-98.7099336,-97.25082795,-85.2868168,-95.34226168,-96.14918065,-116.4623588,-86.46356279,-122.81678,-115.7987142,-96.83981345,-80.86630109,-99.68261832,-117.40861,-98.37720987,-111.8362486,-94.76570179,-116.824496,-97.08993955,-100.6121255,-97.23610354,-99.92247803,-102.5219427,-99.29106061,-96.77970247,-71.68494167,-71.66573009,-71.79802709,-92.4431037,-98.62856545,-102.875142,-97.41304704,-72.91848548,-96.85512233,-97.77308405,-71.76906052,-95.16322141,-97.03497789,-97.67930222,-96.04132091,-96.98139727,-96.19116581,-92.44501566,-98.70752087,-92.74402455,-93.48976305,-97.67551876,-96.60527506,-95.55881188,-71.651789,-68.268509,-67.881905,-74.401491,-71.428103,-69.927263,-70.617682,-72.092123,-68.209171,-68.077773,-68.429254,-69.889944,-68.35754,-68.871133,-68.594335,-88.759164,-88.794652,-89.552886,-93.880503,-69.222522,-68.89108,-69.056968,-67.997826,-67.922498,-81.441106,-81.95812,-82.409214,-82.834414,-82.913722,-85.392434,-84.056809,-95.181199,-96.135669,-94.040807,-95.21841,-94.078777,-94.636969,-95.767078,-95.748497,-95.364908,-93.349755,-96.074082,-94.670256,-95.532331,-68.094876,-68.856993,-69.111684,-68.843,-68.84294,-68.853062,-69.077222,-71.127398,-72.01599,-115.394285,-115.087017,-115.126627,-84.269652,-83.032824,-115.253959,-115.130707,-121.972108,-121.629648,-121.893625,-118.647249,-122.258622,-120.737873,-123.020334,-123.074122,-114.875721,-76.98388,-78.637447,-79.227717,-79.819212,-77.1802,-79.142764,-80.079728,-76.649661,-76.830652,-76.906472,-80.87554,-76.707685,-78.156495,-80.953739,-78.682256,-88.724713,-88.76232,-100.668437,-100.688615,-100.717256,-96.583853,-92.4014,-92.388594,-96.798912,-95.979428,-96.42668,-94.68362,-95.815771,-94.8906,-96.410034,-98.568716,-96.195593,-90.917282,-91.054054,-91.261113,-91.480991,-90.53646,-103.116433,-100.7275,-102.446229,-102.436342,-102.397543,-98.408858,-98.408858,-98.99129,-95.293713,-94.464052,-100.50987,-97.609119,-94.332424,-98.389969,-88.311533,-87.943978],null,null,null,{&quot;interactive&quot;:true,&quot;draggable&quot;:false,&quot;keyboard&quot;:true,&quot;title&quot;:&quot;&quot;,&quot;alt&quot;:&quot;&quot;,&quot;zIndexOffset&quot;:0,&quot;opacity&quot;:1,&quot;riseOnHover&quot;:false,&quot;riseOffset&quot;:250},[&quot;Name: Lake Wurdeman&lt;br&gt;\nChlorphylla: 0.24&lt;br&gt;\nNitrogen: 151&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Crane Pond&lt;br&gt;\nChlorphylla: 3.84&lt;br&gt;\nNitrogen: 695&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: Crane Pond&lt;br&gt;\nChlorphylla: 20.88&lt;br&gt;\nNitrogen: 469&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Crane Pond&lt;br&gt;\nChlorphylla: 3.84&lt;br&gt;\nNitrogen: 695&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: Crane Pond&lt;br&gt;\nChlorphylla: 20.88&lt;br&gt;\nNitrogen: 469&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Wilderness Lake&lt;br&gt;\nChlorphylla: 16.96&lt;br&gt;\nNitrogen: 738&lt;br&gt;\nPhosphorus: 43&lt;br&gt;&quot;,&quot;Name: Wilderness Lake&lt;br&gt;\nChlorphylla: 12.86&lt;br&gt;\nNitrogen: 843&lt;br&gt;\nPhosphorus: 50&lt;br&gt;&quot;,&quot;Name: Wilderness Lake&lt;br&gt;\nChlorphylla: 16.96&lt;br&gt;\nNitrogen: 738&lt;br&gt;\nPhosphorus: 43&lt;br&gt;&quot;,&quot;Name: Wilderness Lake&lt;br&gt;\nChlorphylla: 12.86&lt;br&gt;\nNitrogen: 843&lt;br&gt;\nPhosphorus: 50&lt;br&gt;&quot;,&quot;Name: Puett Reservoir&lt;br&gt;\nChlorphylla: 4.6&lt;br&gt;\nNitrogen: 344&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Puett Reservoir&lt;br&gt;\nChlorphylla: 14.72&lt;br&gt;\nNitrogen: 596&lt;br&gt;\nPhosphorus: 46&lt;br&gt;&quot;,&quot;Name: Puett Reservoir&lt;br&gt;\nChlorphylla: 4.6&lt;br&gt;\nNitrogen: 344&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Puett Reservoir&lt;br&gt;\nChlorphylla: 14.72&lt;br&gt;\nNitrogen: 596&lt;br&gt;\nPhosphorus: 46&lt;br&gt;&quot;,&quot;Name: Perkins Lake&lt;br&gt;\nChlorphylla: 1.21&lt;br&gt;\nNitrogen: 85&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Perkins Lake&lt;br&gt;\nChlorphylla: 0.4&lt;br&gt;\nNitrogen: 68&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Perkins Lake&lt;br&gt;\nChlorphylla: 1.21&lt;br&gt;\nNitrogen: 85&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Perkins Lake&lt;br&gt;\nChlorphylla: 0.4&lt;br&gt;\nNitrogen: 68&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Morris Reservoir&lt;br&gt;\nChlorphylla: 4.08&lt;br&gt;\nNitrogen: 184&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Morris Reservoir&lt;br&gt;\nChlorphylla: 3.22&lt;br&gt;\nNitrogen: 223&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Morris Reservoir&lt;br&gt;\nChlorphylla: 4.08&lt;br&gt;\nNitrogen: 184&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Morris Reservoir&lt;br&gt;\nChlorphylla: 3.22&lt;br&gt;\nNitrogen: 223&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Spring Lake&lt;br&gt;\nChlorphylla: 2.43&lt;br&gt;\nNitrogen: 493&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Spring Lake&lt;br&gt;\nChlorphylla: 4.09&lt;br&gt;\nNitrogen: 523&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Spring Lake&lt;br&gt;\nChlorphylla: 2.43&lt;br&gt;\nNitrogen: 493&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Spring Lake&lt;br&gt;\nChlorphylla: 4.09&lt;br&gt;\nNitrogen: 523&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Ahquabi&lt;br&gt;\nChlorphylla: 30.24&lt;br&gt;\nNitrogen: 801&lt;br&gt;\nPhosphorus: 66&lt;br&gt;&quot;,&quot;Name: Lake Ahquabi&lt;br&gt;\nChlorphylla: 148.2&lt;br&gt;\nNitrogen: 1525&lt;br&gt;\nPhosphorus: 79&lt;br&gt;&quot;,&quot;Name: Lake Ahquabi&lt;br&gt;\nChlorphylla: 30.24&lt;br&gt;\nNitrogen: 801&lt;br&gt;\nPhosphorus: 66&lt;br&gt;&quot;,&quot;Name: Lake Ahquabi&lt;br&gt;\nChlorphylla: 148.2&lt;br&gt;\nNitrogen: 1525&lt;br&gt;\nPhosphorus: 79&lt;br&gt;&quot;,&quot;Name: Bogie Lake&lt;br&gt;\nChlorphylla: 4.38&lt;br&gt;\nNitrogen: 473&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Bogie Lake&lt;br&gt;\nChlorphylla: 3.33&lt;br&gt;\nNitrogen: 485&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Bogie Lake&lt;br&gt;\nChlorphylla: 4.38&lt;br&gt;\nNitrogen: 473&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Bogie Lake&lt;br&gt;\nChlorphylla: 3.33&lt;br&gt;\nNitrogen: 485&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Cushing Lake&lt;br&gt;\nChlorphylla: 4.9&lt;br&gt;\nNitrogen: 1026&lt;br&gt;\nPhosphorus: 159&lt;br&gt;&quot;,&quot;Name: Cushing Lake&lt;br&gt;\nChlorphylla: 21.28&lt;br&gt;\nNitrogen: 1052&lt;br&gt;\nPhosphorus: 142&lt;br&gt;&quot;,&quot;Name: Cushing Lake&lt;br&gt;\nChlorphylla: 4.9&lt;br&gt;\nNitrogen: 1026&lt;br&gt;\nPhosphorus: 159&lt;br&gt;&quot;,&quot;Name: Cushing Lake&lt;br&gt;\nChlorphylla: 21.28&lt;br&gt;\nNitrogen: 1052&lt;br&gt;\nPhosphorus: 142&lt;br&gt;&quot;,&quot;Name: Mirror Lake&lt;br&gt;\nChlorphylla: 16.03&lt;br&gt;\nNitrogen: 384&lt;br&gt;\nPhosphorus: 28&lt;br&gt;&quot;,&quot;Name: Mirror Lake&lt;br&gt;\nChlorphylla: 8.8&lt;br&gt;\nNitrogen: 264&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Mirror Lake&lt;br&gt;\nChlorphylla: 16.03&lt;br&gt;\nNitrogen: 384&lt;br&gt;\nPhosphorus: 28&lt;br&gt;&quot;,&quot;Name: Mirror Lake&lt;br&gt;\nChlorphylla: 8.8&lt;br&gt;\nNitrogen: 264&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Unnamed Lake&lt;br&gt;\nChlorphylla: 8.75&lt;br&gt;\nNitrogen: 4147&lt;br&gt;\nPhosphorus: 175&lt;br&gt;&quot;,&quot;Name: Unnamed Lake&lt;br&gt;\nChlorphylla: 20.52&lt;br&gt;\nNitrogen: 4456&lt;br&gt;\nPhosphorus: 175&lt;br&gt;&quot;,&quot;Name: Unnamed Lake&lt;br&gt;\nChlorphylla: 8.75&lt;br&gt;\nNitrogen: 4147&lt;br&gt;\nPhosphorus: 175&lt;br&gt;&quot;,&quot;Name: Unnamed Lake&lt;br&gt;\nChlorphylla: 20.52&lt;br&gt;\nNitrogen: 4456&lt;br&gt;\nPhosphorus: 175&lt;br&gt;&quot;,&quot;Name: Caballo Reservoir&lt;br&gt;\nChlorphylla: 20&lt;br&gt;\nNitrogen: 470&lt;br&gt;\nPhosphorus: 109&lt;br&gt;&quot;,&quot;Name: Caballo Reservoir&lt;br&gt;\nChlorphylla: 13.65&lt;br&gt;\nNitrogen: 423&lt;br&gt;\nPhosphorus: 98&lt;br&gt;&quot;,&quot;Name: Caballo Reservoir&lt;br&gt;\nChlorphylla: 20&lt;br&gt;\nNitrogen: 470&lt;br&gt;\nPhosphorus: 109&lt;br&gt;&quot;,&quot;Name: Caballo Reservoir&lt;br&gt;\nChlorphylla: 13.65&lt;br&gt;\nNitrogen: 423&lt;br&gt;\nPhosphorus: 98&lt;br&gt;&quot;,&quot;Name: Lake Maloney&lt;br&gt;\nChlorphylla: 13&lt;br&gt;\nNitrogen: 490&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Lake Maloney&lt;br&gt;\nChlorphylla: 16.64&lt;br&gt;\nNitrogen: 704&lt;br&gt;\nPhosphorus: 39&lt;br&gt;&quot;,&quot;Name: Lake Maloney&lt;br&gt;\nChlorphylla: 13&lt;br&gt;\nNitrogen: 490&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Lake Maloney&lt;br&gt;\nChlorphylla: 16.64&lt;br&gt;\nNitrogen: 704&lt;br&gt;\nPhosphorus: 39&lt;br&gt;&quot;,&quot;Name: Doyles Lake&lt;br&gt;\nChlorphylla: 4.03&lt;br&gt;\nNitrogen: 7047&lt;br&gt;\nPhosphorus: 801&lt;br&gt;&quot;,&quot;Name: Doyles Lake&lt;br&gt;\nChlorphylla: 44.26&lt;br&gt;\nNitrogen: 6578&lt;br&gt;\nPhosphorus: 1376&lt;br&gt;&quot;,&quot;Name: Doyles Lake&lt;br&gt;\nChlorphylla: 4.03&lt;br&gt;\nNitrogen: 7047&lt;br&gt;\nPhosphorus: 801&lt;br&gt;&quot;,&quot;Name: Doyles Lake&lt;br&gt;\nChlorphylla: 44.26&lt;br&gt;\nNitrogen: 6578&lt;br&gt;\nPhosphorus: 1376&lt;br&gt;&quot;,&quot;Name: Mill Creek Lake&lt;br&gt;\nChlorphylla: 20.24&lt;br&gt;\nNitrogen: 605&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: Mill Creek Lake&lt;br&gt;\nChlorphylla: 13.03&lt;br&gt;\nNitrogen: 466&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Mill Creek Lake&lt;br&gt;\nChlorphylla: 20.24&lt;br&gt;\nNitrogen: 605&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: Mill Creek Lake&lt;br&gt;\nChlorphylla: 13.03&lt;br&gt;\nNitrogen: 466&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Canandaigua Lake&lt;br&gt;\nChlorphylla: 2.29&lt;br&gt;\nNitrogen: 390&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Canandaigua Lake&lt;br&gt;\nChlorphylla: 3.95&lt;br&gt;\nNitrogen: 463&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Canandaigua Lake&lt;br&gt;\nChlorphylla: 2.29&lt;br&gt;\nNitrogen: 390&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Canandaigua Lake&lt;br&gt;\nChlorphylla: 3.95&lt;br&gt;\nNitrogen: 463&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Birdbath Lake&lt;br&gt;\nChlorphylla: 2.78&lt;br&gt;\nNitrogen: 349&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Birdbath Lake&lt;br&gt;\nChlorphylla: 2.82&lt;br&gt;\nNitrogen: 562&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Birdbath Lake&lt;br&gt;\nChlorphylla: 2.78&lt;br&gt;\nNitrogen: 349&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Birdbath Lake&lt;br&gt;\nChlorphylla: 2.82&lt;br&gt;\nNitrogen: 562&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Lake Palestine&lt;br&gt;\nChlorphylla: 44.15&lt;br&gt;\nNitrogen: 860&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: Lake Palestine&lt;br&gt;\nChlorphylla: 25.4&lt;br&gt;\nNitrogen: 943&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: Lake Palestine&lt;br&gt;\nChlorphylla: 44.15&lt;br&gt;\nNitrogen: 860&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: Lake Palestine&lt;br&gt;\nChlorphylla: 25.4&lt;br&gt;\nNitrogen: 943&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: Kings Mountian #1 Lake&lt;br&gt;\nChlorphylla: 1.3&lt;br&gt;\nNitrogen: 195&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Kings Mountian #1 Lake&lt;br&gt;\nChlorphylla: 1.83&lt;br&gt;\nNitrogen: 97&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Kings Mountian #1 Lake&lt;br&gt;\nChlorphylla: 1.3&lt;br&gt;\nNitrogen: 195&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Kings Mountian #1 Lake&lt;br&gt;\nChlorphylla: 1.83&lt;br&gt;\nNitrogen: 97&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Red Mill Pond&lt;br&gt;\nChlorphylla: 123.12&lt;br&gt;\nNitrogen: 2106&lt;br&gt;\nPhosphorus: 247&lt;br&gt;&quot;,&quot;Name: Red Mill Pond&lt;br&gt;\nChlorphylla: 106.8&lt;br&gt;\nNitrogen: 2146&lt;br&gt;\nPhosphorus: 162&lt;br&gt;&quot;,&quot;Name: Red Mill Pond&lt;br&gt;\nChlorphylla: 123.12&lt;br&gt;\nNitrogen: 2106&lt;br&gt;\nPhosphorus: 247&lt;br&gt;&quot;,&quot;Name: Red Mill Pond&lt;br&gt;\nChlorphylla: 106.8&lt;br&gt;\nNitrogen: 2146&lt;br&gt;\nPhosphorus: 162&lt;br&gt;&quot;,&quot;Name: Caldwell Lake&lt;br&gt;\nChlorphylla: 5.26&lt;br&gt;\nNitrogen: 428&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Caldwell Lake&lt;br&gt;\nChlorphylla: 8.5&lt;br&gt;\nNitrogen: 394&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Caldwell Lake&lt;br&gt;\nChlorphylla: 5.26&lt;br&gt;\nNitrogen: 428&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Caldwell Lake&lt;br&gt;\nChlorphylla: 8.5&lt;br&gt;\nNitrogen: 394&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Swamp&lt;br&gt;\nChlorphylla: 8.92&lt;br&gt;\nNitrogen: 835&lt;br&gt;\nPhosphorus: 67&lt;br&gt;&quot;,&quot;Name: Swamp&lt;br&gt;\nChlorphylla: 4.84&lt;br&gt;\nNitrogen: 440&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Swamp&lt;br&gt;\nChlorphylla: 8.92&lt;br&gt;\nNitrogen: 835&lt;br&gt;\nPhosphorus: 67&lt;br&gt;&quot;,&quot;Name: Swamp&lt;br&gt;\nChlorphylla: 4.84&lt;br&gt;\nNitrogen: 440&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Whoople Cat Lake&lt;br&gt;\nChlorphylla: 5.07&lt;br&gt;\nNitrogen: 178&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Whoople Cat Lake&lt;br&gt;\nChlorphylla: 3.02&lt;br&gt;\nNitrogen: 241&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Whoople Cat Lake&lt;br&gt;\nChlorphylla: 5.07&lt;br&gt;\nNitrogen: 178&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Whoople Cat Lake&lt;br&gt;\nChlorphylla: 3.02&lt;br&gt;\nNitrogen: 241&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Lake Waramaug&lt;br&gt;\nChlorphylla: 8.02&lt;br&gt;\nNitrogen: 239&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Lake Waramaug&lt;br&gt;\nChlorphylla: 5.26&lt;br&gt;\nNitrogen: 338&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Lake Waramaug&lt;br&gt;\nChlorphylla: 8.02&lt;br&gt;\nNitrogen: 239&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Lake Waramaug&lt;br&gt;\nChlorphylla: 5.26&lt;br&gt;\nNitrogen: 338&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Island Pond&lt;br&gt;\nChlorphylla: 4.33&lt;br&gt;\nNitrogen: 158&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Island Pond&lt;br&gt;\nChlorphylla: 2.07&lt;br&gt;\nNitrogen: 113&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Island Pond&lt;br&gt;\nChlorphylla: 4.33&lt;br&gt;\nNitrogen: 158&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Island Pond&lt;br&gt;\nChlorphylla: 2.07&lt;br&gt;\nNitrogen: 113&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Summersville Lake&lt;br&gt;\nChlorphylla: 0.88&lt;br&gt;\nNitrogen: 476&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Summersville Lake&lt;br&gt;\nChlorphylla: 1.14&lt;br&gt;\nNitrogen: 370&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Summersville Lake&lt;br&gt;\nChlorphylla: 0.88&lt;br&gt;\nNitrogen: 476&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Summersville Lake&lt;br&gt;\nChlorphylla: 1.14&lt;br&gt;\nNitrogen: 370&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Willow Park Reservoir&lt;br&gt;\nChlorphylla: 2.21&lt;br&gt;\nNitrogen: 213&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Willow Park Reservoir&lt;br&gt;\nChlorphylla: 1.28&lt;br&gt;\nNitrogen: 147&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Willow Park Reservoir&lt;br&gt;\nChlorphylla: 2.21&lt;br&gt;\nNitrogen: 213&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Willow Park Reservoir&lt;br&gt;\nChlorphylla: 1.28&lt;br&gt;\nNitrogen: 147&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Messick Lake&lt;br&gt;\nChlorphylla: 5.41&lt;br&gt;\nNitrogen: 645&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Messick Lake&lt;br&gt;\nChlorphylla: 5.32&lt;br&gt;\nNitrogen: 714&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Messick Lake&lt;br&gt;\nChlorphylla: 5.41&lt;br&gt;\nNitrogen: 645&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Messick Lake&lt;br&gt;\nChlorphylla: 5.32&lt;br&gt;\nNitrogen: 714&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Steverson Lake&lt;br&gt;\nChlorphylla: 135.61&lt;br&gt;\nNitrogen: 4108&lt;br&gt;\nPhosphorus: 601&lt;br&gt;&quot;,&quot;Name: Steverson Lake&lt;br&gt;\nChlorphylla: 130.4&lt;br&gt;\nNitrogen: 6741&lt;br&gt;\nPhosphorus: 523&lt;br&gt;&quot;,&quot;Name: Steverson Lake&lt;br&gt;\nChlorphylla: 135.61&lt;br&gt;\nNitrogen: 4108&lt;br&gt;\nPhosphorus: 601&lt;br&gt;&quot;,&quot;Name: Steverson Lake&lt;br&gt;\nChlorphylla: 130.4&lt;br&gt;\nNitrogen: 6741&lt;br&gt;\nPhosphorus: 523&lt;br&gt;&quot;,&quot;Name: Beaver Pond&lt;br&gt;\nChlorphylla: 20.16&lt;br&gt;\nNitrogen: 648&lt;br&gt;\nPhosphorus: 54&lt;br&gt;&quot;,&quot;Name: Beaver Pond&lt;br&gt;\nChlorphylla: 21.12&lt;br&gt;\nNitrogen: 430&lt;br&gt;\nPhosphorus: 60&lt;br&gt;&quot;,&quot;Name: Beaver Pond&lt;br&gt;\nChlorphylla: 20.16&lt;br&gt;\nNitrogen: 648&lt;br&gt;\nPhosphorus: 54&lt;br&gt;&quot;,&quot;Name: Beaver Pond&lt;br&gt;\nChlorphylla: 21.12&lt;br&gt;\nNitrogen: 430&lt;br&gt;\nPhosphorus: 60&lt;br&gt;&quot;,&quot;Name: Nolen Blue Hole&lt;br&gt;\nChlorphylla: 54&lt;br&gt;\nNitrogen: 773&lt;br&gt;\nPhosphorus: 111&lt;br&gt;&quot;,&quot;Name: Nolen Blue Hole&lt;br&gt;\nChlorphylla: 22.69&lt;br&gt;\nNitrogen: 1004&lt;br&gt;\nPhosphorus: 84&lt;br&gt;&quot;,&quot;Name: Nolen Blue Hole&lt;br&gt;\nChlorphylla: 54&lt;br&gt;\nNitrogen: 773&lt;br&gt;\nPhosphorus: 111&lt;br&gt;&quot;,&quot;Name: Nolen Blue Hole&lt;br&gt;\nChlorphylla: 22.69&lt;br&gt;\nNitrogen: 1004&lt;br&gt;\nPhosphorus: 84&lt;br&gt;&quot;,&quot;Name: Clear Creek Reservoir&lt;br&gt;\nChlorphylla: 1.14&lt;br&gt;\nNitrogen: 256&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Adder Pond&lt;br&gt;\nChlorphylla: 3.95&lt;br&gt;\nNitrogen: 303&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Adder Pond&lt;br&gt;\nChlorphylla: 10.08&lt;br&gt;\nNitrogen: 399&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Adder Pond&lt;br&gt;\nChlorphylla: 3.95&lt;br&gt;\nNitrogen: 303&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Adder Pond&lt;br&gt;\nChlorphylla: 10.08&lt;br&gt;\nNitrogen: 399&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: South Bay Lake Champlain&lt;br&gt;\nChlorphylla: 6.26&lt;br&gt;\nNitrogen: 246&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: South Bay Lake Champlain&lt;br&gt;\nChlorphylla: 5.01&lt;br&gt;\nNitrogen: 275&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: South Bay Lake Champlain&lt;br&gt;\nChlorphylla: 6.26&lt;br&gt;\nNitrogen: 246&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: South Bay Lake Champlain&lt;br&gt;\nChlorphylla: 5.01&lt;br&gt;\nNitrogen: 275&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Lake Lee&lt;br&gt;\nChlorphylla: 125.4&lt;br&gt;\nNitrogen: 1756&lt;br&gt;\nPhosphorus: 218&lt;br&gt;&quot;,&quot;Name: Lake Lee&lt;br&gt;\nChlorphylla: 70.8&lt;br&gt;\nNitrogen: 939&lt;br&gt;\nPhosphorus: 212&lt;br&gt;&quot;,&quot;Name: Lake Lee&lt;br&gt;\nChlorphylla: 125.4&lt;br&gt;\nNitrogen: 1756&lt;br&gt;\nPhosphorus: 218&lt;br&gt;&quot;,&quot;Name: Lake Lee&lt;br&gt;\nChlorphylla: 70.8&lt;br&gt;\nNitrogen: 939&lt;br&gt;\nPhosphorus: 212&lt;br&gt;&quot;,&quot;Name: Alamo&lt;br&gt;\nChlorphylla: 3.5&lt;br&gt;\nNitrogen: 481&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Alamo&lt;br&gt;\nChlorphylla: 9.65&lt;br&gt;\nNitrogen: 562&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Alamo&lt;br&gt;\nChlorphylla: 3.5&lt;br&gt;\nNitrogen: 481&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Alamo&lt;br&gt;\nChlorphylla: 9.65&lt;br&gt;\nNitrogen: 562&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: (Unnamed Lake)&lt;br&gt;\nChlorphylla: 2.18&lt;br&gt;\nNitrogen: 2834&lt;br&gt;\nPhosphorus: 152&lt;br&gt;&quot;,&quot;Name: (Unnamed Lake)&lt;br&gt;\nChlorphylla: 58.8&lt;br&gt;\nNitrogen: 2813&lt;br&gt;\nPhosphorus: 120&lt;br&gt;&quot;,&quot;Name: (Unnamed Lake)&lt;br&gt;\nChlorphylla: 2.18&lt;br&gt;\nNitrogen: 2834&lt;br&gt;\nPhosphorus: 152&lt;br&gt;&quot;,&quot;Name: (Unnamed Lake)&lt;br&gt;\nChlorphylla: 58.8&lt;br&gt;\nNitrogen: 2813&lt;br&gt;\nPhosphorus: 120&lt;br&gt;&quot;,&quot;Name: Fitzpatrick Lake&lt;br&gt;\nChlorphylla: 19.04&lt;br&gt;\nNitrogen: 3366&lt;br&gt;\nPhosphorus: 2047&lt;br&gt;&quot;,&quot;Name: Fitzpatrick Lake&lt;br&gt;\nChlorphylla: 13.79&lt;br&gt;\nNitrogen: 3663&lt;br&gt;\nPhosphorus: 1331&lt;br&gt;&quot;,&quot;Name: Fitzpatrick Lake&lt;br&gt;\nChlorphylla: 19.04&lt;br&gt;\nNitrogen: 3366&lt;br&gt;\nPhosphorus: 2047&lt;br&gt;&quot;,&quot;Name: Fitzpatrick Lake&lt;br&gt;\nChlorphylla: 13.79&lt;br&gt;\nNitrogen: 3663&lt;br&gt;\nPhosphorus: 1331&lt;br&gt;&quot;,&quot;Name: Sophie Lake&lt;br&gt;\nChlorphylla: 0.57&lt;br&gt;\nNitrogen: 71&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Sophie Lake&lt;br&gt;\nChlorphylla: 0.9&lt;br&gt;\nNitrogen: 55&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Sophie Lake&lt;br&gt;\nChlorphylla: 0.57&lt;br&gt;\nNitrogen: 71&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Sophie Lake&lt;br&gt;\nChlorphylla: 0.9&lt;br&gt;\nNitrogen: 55&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Youghiogheny River Lake&lt;br&gt;\nChlorphylla: 1.75&lt;br&gt;\nNitrogen: 665&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Youghiogheny River Lake&lt;br&gt;\nChlorphylla: 6.6&lt;br&gt;\nNitrogen: 574&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Youghiogheny River Lake&lt;br&gt;\nChlorphylla: 1.75&lt;br&gt;\nNitrogen: 665&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Youghiogheny River Lake&lt;br&gt;\nChlorphylla: 6.6&lt;br&gt;\nNitrogen: 574&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Trout Lake&lt;br&gt;\nChlorphylla: 0.95&lt;br&gt;\nNitrogen: 168&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Trout Lake&lt;br&gt;\nChlorphylla: 0.46&lt;br&gt;\nNitrogen: 131&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Trout Lake&lt;br&gt;\nChlorphylla: 0.95&lt;br&gt;\nNitrogen: 168&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Trout Lake&lt;br&gt;\nChlorphylla: 0.46&lt;br&gt;\nNitrogen: 131&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Horseshoe Lake&lt;br&gt;\nChlorphylla: 7.41&lt;br&gt;\nNitrogen: 420&lt;br&gt;\nPhosphorus: 39&lt;br&gt;&quot;,&quot;Name: Horseshoe Lake&lt;br&gt;\nChlorphylla: 4.11&lt;br&gt;\nNitrogen: 771&lt;br&gt;\nPhosphorus: 45&lt;br&gt;&quot;,&quot;Name: Horseshoe Lake&lt;br&gt;\nChlorphylla: 7.41&lt;br&gt;\nNitrogen: 420&lt;br&gt;\nPhosphorus: 39&lt;br&gt;&quot;,&quot;Name: Horseshoe Lake&lt;br&gt;\nChlorphylla: 4.11&lt;br&gt;\nNitrogen: 771&lt;br&gt;\nPhosphorus: 45&lt;br&gt;&quot;,&quot;Name: Lake Concordia&lt;br&gt;\nChlorphylla: 198.72&lt;br&gt;\nNitrogen: 2441&lt;br&gt;\nPhosphorus: 415&lt;br&gt;&quot;,&quot;Name: Lake Concordia&lt;br&gt;\nChlorphylla: 200.16&lt;br&gt;\nNitrogen: 2268&lt;br&gt;\nPhosphorus: 390&lt;br&gt;&quot;,&quot;Name: Lake Concordia&lt;br&gt;\nChlorphylla: 198.72&lt;br&gt;\nNitrogen: 2441&lt;br&gt;\nPhosphorus: 415&lt;br&gt;&quot;,&quot;Name: Lake Concordia&lt;br&gt;\nChlorphylla: 200.16&lt;br&gt;\nNitrogen: 2268&lt;br&gt;\nPhosphorus: 390&lt;br&gt;&quot;,&quot;Name: NRCS Site #6&lt;br&gt;\nChlorphylla: 10.13&lt;br&gt;\nNitrogen: 1724&lt;br&gt;\nPhosphorus: 174&lt;br&gt;&quot;,&quot;Name: NRCS Site #6&lt;br&gt;\nChlorphylla: 146.88&lt;br&gt;\nNitrogen: 2265&lt;br&gt;\nPhosphorus: 176&lt;br&gt;&quot;,&quot;Name: NRCS Site #6&lt;br&gt;\nChlorphylla: 10.13&lt;br&gt;\nNitrogen: 1724&lt;br&gt;\nPhosphorus: 174&lt;br&gt;&quot;,&quot;Name: NRCS Site #6&lt;br&gt;\nChlorphylla: 146.88&lt;br&gt;\nNitrogen: 2265&lt;br&gt;\nPhosphorus: 176&lt;br&gt;&quot;,&quot;Name: Soda Lake&lt;br&gt;\nChlorphylla: 0.49&lt;br&gt;\nNitrogen: 1055&lt;br&gt;\nPhosphorus: 4679&lt;br&gt;&quot;,&quot;Name: Soda Lake&lt;br&gt;\nChlorphylla: 2.18&lt;br&gt;\nNitrogen: 1750&lt;br&gt;\nPhosphorus: 4865&lt;br&gt;&quot;,&quot;Name: Soda Lake&lt;br&gt;\nChlorphylla: 0.49&lt;br&gt;\nNitrogen: 1055&lt;br&gt;\nPhosphorus: 4679&lt;br&gt;&quot;,&quot;Name: Soda Lake&lt;br&gt;\nChlorphylla: 2.18&lt;br&gt;\nNitrogen: 1750&lt;br&gt;\nPhosphorus: 4865&lt;br&gt;&quot;,&quot;Name: Smithville&lt;br&gt;\nChlorphylla: 10.88&lt;br&gt;\nNitrogen: 436&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Smithville&lt;br&gt;\nChlorphylla: 28.8&lt;br&gt;\nNitrogen: 710&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Smithville&lt;br&gt;\nChlorphylla: 10.88&lt;br&gt;\nNitrogen: 436&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Smithville&lt;br&gt;\nChlorphylla: 28.8&lt;br&gt;\nNitrogen: 710&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Mount Hope Lake&lt;br&gt;\nChlorphylla: 67.97&lt;br&gt;\nNitrogen: 1461&lt;br&gt;\nPhosphorus: 116&lt;br&gt;&quot;,&quot;Name: Mount Hope Lake&lt;br&gt;\nChlorphylla: 94.61&lt;br&gt;\nNitrogen: 1630&lt;br&gt;\nPhosphorus: 151&lt;br&gt;&quot;,&quot;Name: Mount Hope Lake&lt;br&gt;\nChlorphylla: 67.97&lt;br&gt;\nNitrogen: 1461&lt;br&gt;\nPhosphorus: 116&lt;br&gt;&quot;,&quot;Name: Mount Hope Lake&lt;br&gt;\nChlorphylla: 94.61&lt;br&gt;\nNitrogen: 1630&lt;br&gt;\nPhosphorus: 151&lt;br&gt;&quot;,&quot;Name: Unknown&lt;br&gt;\nChlorphylla: 10.02&lt;br&gt;\nNitrogen: 4747&lt;br&gt;\nPhosphorus: 136&lt;br&gt;&quot;,&quot;Name: Unknown&lt;br&gt;\nChlorphylla: 13.25&lt;br&gt;\nNitrogen: 4294&lt;br&gt;\nPhosphorus: 108&lt;br&gt;&quot;,&quot;Name: Unknown&lt;br&gt;\nChlorphylla: 10.02&lt;br&gt;\nNitrogen: 4747&lt;br&gt;\nPhosphorus: 136&lt;br&gt;&quot;,&quot;Name: Unknown&lt;br&gt;\nChlorphylla: 13.25&lt;br&gt;\nNitrogen: 4294&lt;br&gt;\nPhosphorus: 108&lt;br&gt;&quot;,&quot;Name: Trappers Lake&lt;br&gt;\nChlorphylla: 2.35&lt;br&gt;\nNitrogen: 97&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Trappers Lake&lt;br&gt;\nChlorphylla: 1.4&lt;br&gt;\nNitrogen: 108&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Trappers Lake&lt;br&gt;\nChlorphylla: 2.35&lt;br&gt;\nNitrogen: 97&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Trappers Lake&lt;br&gt;\nChlorphylla: 1.4&lt;br&gt;\nNitrogen: 108&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Hannaberry Lake&lt;br&gt;\nChlorphylla: 58.46&lt;br&gt;\nNitrogen: 956&lt;br&gt;\nPhosphorus: 100&lt;br&gt;&quot;,&quot;Name: Hannaberry Lake&lt;br&gt;\nChlorphylla: 62.64&lt;br&gt;\nNitrogen: 1047&lt;br&gt;\nPhosphorus: 113&lt;br&gt;&quot;,&quot;Name: Hannaberry Lake&lt;br&gt;\nChlorphylla: 58.46&lt;br&gt;\nNitrogen: 956&lt;br&gt;\nPhosphorus: 100&lt;br&gt;&quot;,&quot;Name: Hannaberry Lake&lt;br&gt;\nChlorphylla: 62.64&lt;br&gt;\nNitrogen: 1047&lt;br&gt;\nPhosphorus: 113&lt;br&gt;&quot;,&quot;Name: Armstrong Lake&lt;br&gt;\nChlorphylla: 6.66&lt;br&gt;\nNitrogen: 741&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Armstrong Lake&lt;br&gt;\nChlorphylla: 62.02&lt;br&gt;\nNitrogen: 826&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Armstrong Lake&lt;br&gt;\nChlorphylla: 6.66&lt;br&gt;\nNitrogen: 741&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Armstrong Lake&lt;br&gt;\nChlorphylla: 62.02&lt;br&gt;\nNitrogen: 826&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Camp Lake&lt;br&gt;\nChlorphylla: 3.74&lt;br&gt;\nNitrogen: 3925&lt;br&gt;\nPhosphorus: 50&lt;br&gt;&quot;,&quot;Name: Camp Lake&lt;br&gt;\nChlorphylla: 6.08&lt;br&gt;\nNitrogen: 4009&lt;br&gt;\nPhosphorus: 60&lt;br&gt;&quot;,&quot;Name: Camp Lake&lt;br&gt;\nChlorphylla: 3.74&lt;br&gt;\nNitrogen: 3925&lt;br&gt;\nPhosphorus: 50&lt;br&gt;&quot;,&quot;Name: Camp Lake&lt;br&gt;\nChlorphylla: 6.08&lt;br&gt;\nNitrogen: 4009&lt;br&gt;\nPhosphorus: 60&lt;br&gt;&quot;,&quot;Name: Blacks Creek Reservoir&lt;br&gt;\nChlorphylla: 4.04&lt;br&gt;\nNitrogen: 1581&lt;br&gt;\nPhosphorus: 417&lt;br&gt;&quot;,&quot;Name: Blacks Creek Reservoir&lt;br&gt;\nChlorphylla: 45.2&lt;br&gt;\nNitrogen: 1518&lt;br&gt;\nPhosphorus: 395&lt;br&gt;&quot;,&quot;Name: Blacks Creek Reservoir&lt;br&gt;\nChlorphylla: 4.04&lt;br&gt;\nNitrogen: 1581&lt;br&gt;\nPhosphorus: 417&lt;br&gt;&quot;,&quot;Name: Blacks Creek Reservoir&lt;br&gt;\nChlorphylla: 45.2&lt;br&gt;\nNitrogen: 1518&lt;br&gt;\nPhosphorus: 395&lt;br&gt;&quot;,&quot;Name: Lacamas Lake&lt;br&gt;\nChlorphylla: 18.24&lt;br&gt;\nNitrogen: 288&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Lacamas Lake&lt;br&gt;\nChlorphylla: 52.56&lt;br&gt;\nNitrogen: 865&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Lacamas Lake&lt;br&gt;\nChlorphylla: 18.24&lt;br&gt;\nNitrogen: 288&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Lacamas Lake&lt;br&gt;\nChlorphylla: 52.56&lt;br&gt;\nNitrogen: 865&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Rhodhiss&lt;br&gt;\nChlorphylla: 11.36&lt;br&gt;\nNitrogen: 333&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: Rhodhiss&lt;br&gt;\nChlorphylla: 31.2&lt;br&gt;\nNitrogen: 478&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Rhodhiss&lt;br&gt;\nChlorphylla: 11.36&lt;br&gt;\nNitrogen: 333&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: Rhodhiss&lt;br&gt;\nChlorphylla: 31.2&lt;br&gt;\nNitrogen: 478&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Black Lake&lt;br&gt;\nChlorphylla: 4.36&lt;br&gt;\nNitrogen: 253&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Black Lake&lt;br&gt;\nChlorphylla: 1.54&lt;br&gt;\nNitrogen: 350&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Black Lake&lt;br&gt;\nChlorphylla: 4.36&lt;br&gt;\nNitrogen: 253&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Black Lake&lt;br&gt;\nChlorphylla: 1.54&lt;br&gt;\nNitrogen: 350&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Cedar Lake&lt;br&gt;\nChlorphylla: 118.8&lt;br&gt;\nNitrogen: 2021&lt;br&gt;\nPhosphorus: 170&lt;br&gt;&quot;,&quot;Name: Cedar Lake&lt;br&gt;\nChlorphylla: 131.4&lt;br&gt;\nNitrogen: 2411&lt;br&gt;\nPhosphorus: 164&lt;br&gt;&quot;,&quot;Name: Cedar Lake&lt;br&gt;\nChlorphylla: 118.8&lt;br&gt;\nNitrogen: 2021&lt;br&gt;\nPhosphorus: 170&lt;br&gt;&quot;,&quot;Name: Cedar Lake&lt;br&gt;\nChlorphylla: 131.4&lt;br&gt;\nNitrogen: 2411&lt;br&gt;\nPhosphorus: 164&lt;br&gt;&quot;,&quot;Name: Lake Oconomowoc&lt;br&gt;\nChlorphylla: 4.6&lt;br&gt;\nNitrogen: 601&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Lake Oconomowoc&lt;br&gt;\nChlorphylla: 2.66&lt;br&gt;\nNitrogen: 623&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Lake Oconomowoc&lt;br&gt;\nChlorphylla: 4.6&lt;br&gt;\nNitrogen: 601&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Lake Oconomowoc&lt;br&gt;\nChlorphylla: 2.66&lt;br&gt;\nNitrogen: 623&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Riga Lake&lt;br&gt;\nChlorphylla: 0.7&lt;br&gt;\nNitrogen: 63&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: HOWARD POND&lt;br&gt;\nChlorphylla: 1.2&lt;br&gt;\nNitrogen: 137&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Kingman County State Lake&lt;br&gt;\nChlorphylla: 38.2&lt;br&gt;\nNitrogen: 1076&lt;br&gt;\nPhosphorus: 102&lt;br&gt;&quot;,&quot;Name: Kingman County State Lake&lt;br&gt;\nChlorphylla: 36.26&lt;br&gt;\nNitrogen: 1101&lt;br&gt;\nPhosphorus: 90&lt;br&gt;&quot;,&quot;Name: Kingman County State Lake&lt;br&gt;\nChlorphylla: 38.2&lt;br&gt;\nNitrogen: 1076&lt;br&gt;\nPhosphorus: 102&lt;br&gt;&quot;,&quot;Name: Kingman County State Lake&lt;br&gt;\nChlorphylla: 36.26&lt;br&gt;\nNitrogen: 1101&lt;br&gt;\nPhosphorus: 90&lt;br&gt;&quot;,&quot;Name: Piute Reservoir&lt;br&gt;\nChlorphylla: 5.98&lt;br&gt;\nNitrogen: 339&lt;br&gt;\nPhosphorus: 45&lt;br&gt;&quot;,&quot;Name: Piute Reservoir&lt;br&gt;\nChlorphylla: 22.4&lt;br&gt;\nNitrogen: 433&lt;br&gt;\nPhosphorus: 134&lt;br&gt;&quot;,&quot;Name: Piute Reservoir&lt;br&gt;\nChlorphylla: 5.98&lt;br&gt;\nNitrogen: 339&lt;br&gt;\nPhosphorus: 45&lt;br&gt;&quot;,&quot;Name: Piute Reservoir&lt;br&gt;\nChlorphylla: 22.4&lt;br&gt;\nNitrogen: 433&lt;br&gt;\nPhosphorus: 134&lt;br&gt;&quot;,&quot;Name: Cheeseboro Lake&lt;br&gt;\nChlorphylla: 2.32&lt;br&gt;\nNitrogen: 520&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Pickerel&lt;br&gt;\nChlorphylla: 1.77&lt;br&gt;\nNitrogen: 491&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: West Branch Reservoir (AKA M.J.Kirwan Reservoir)&lt;br&gt;\nChlorphylla: 3.26&lt;br&gt;\nNitrogen: 343&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Lake Vandalia&lt;br&gt;\nChlorphylla: 84.76&lt;br&gt;\nNitrogen: 1266&lt;br&gt;\nPhosphorus: 96&lt;br&gt;&quot;,&quot;Name: Lake Parker&lt;br&gt;\nChlorphylla: 4.69&lt;br&gt;\nNitrogen: 190&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Marl Lake&lt;br&gt;\nChlorphylla: 1.35&lt;br&gt;\nNitrogen: 540&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Cochiti Lake&lt;br&gt;\nChlorphylla: 2.82&lt;br&gt;\nNitrogen: 271&lt;br&gt;\nPhosphorus: 26&lt;br&gt;&quot;,&quot;Name: Keystone&lt;br&gt;\nChlorphylla: 2.54&lt;br&gt;\nNitrogen: 1174&lt;br&gt;\nPhosphorus: 315&lt;br&gt;&quot;,&quot;Name: Keystone&lt;br&gt;\nChlorphylla: 1.78&lt;br&gt;\nNitrogen: 1256&lt;br&gt;\nPhosphorus: 180&lt;br&gt;&quot;,&quot;Name: Keystone&lt;br&gt;\nChlorphylla: 2.54&lt;br&gt;\nNitrogen: 1174&lt;br&gt;\nPhosphorus: 315&lt;br&gt;&quot;,&quot;Name: Keystone&lt;br&gt;\nChlorphylla: 1.78&lt;br&gt;\nNitrogen: 1256&lt;br&gt;\nPhosphorus: 180&lt;br&gt;&quot;,&quot;Name: North Twin Lake&lt;br&gt;\nChlorphylla: 31.59&lt;br&gt;\nNitrogen: 340&lt;br&gt;\nPhosphorus: 213&lt;br&gt;&quot;,&quot;Name: Unnamed Lake&lt;br&gt;\nChlorphylla: 228.24&lt;br&gt;\nNitrogen: 5728&lt;br&gt;\nPhosphorus: 502&lt;br&gt;&quot;,&quot;Name: Unnamed Lake&lt;br&gt;\nChlorphylla: 381.6&lt;br&gt;\nNitrogen: 7019&lt;br&gt;\nPhosphorus: 609&lt;br&gt;&quot;,&quot;Name: Unnamed Lake&lt;br&gt;\nChlorphylla: 228.24&lt;br&gt;\nNitrogen: 5728&lt;br&gt;\nPhosphorus: 502&lt;br&gt;&quot;,&quot;Name: Unnamed Lake&lt;br&gt;\nChlorphylla: 381.6&lt;br&gt;\nNitrogen: 7019&lt;br&gt;\nPhosphorus: 609&lt;br&gt;&quot;,&quot;Name: Becker Lake&lt;br&gt;\nChlorphylla: 5.92&lt;br&gt;\nNitrogen: 641&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Twin Reservoir&lt;br&gt;\nChlorphylla: 0.46&lt;br&gt;\nNitrogen: 1356&lt;br&gt;\nPhosphorus: 76&lt;br&gt;&quot;,&quot;Name: Twin Reservoir&lt;br&gt;\nChlorphylla: 271.44&lt;br&gt;\nNitrogen: 3956&lt;br&gt;\nPhosphorus: 480&lt;br&gt;&quot;,&quot;Name: Twin Reservoir&lt;br&gt;\nChlorphylla: 0.46&lt;br&gt;\nNitrogen: 1356&lt;br&gt;\nPhosphorus: 76&lt;br&gt;&quot;,&quot;Name: Twin Reservoir&lt;br&gt;\nChlorphylla: 271.44&lt;br&gt;\nNitrogen: 3956&lt;br&gt;\nPhosphorus: 480&lt;br&gt;&quot;,&quot;Name: Ashley Lake&lt;br&gt;\nChlorphylla: 0.43&lt;br&gt;\nNitrogen: 108&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Ashley Lake&lt;br&gt;\nChlorphylla: 0.66&lt;br&gt;\nNitrogen: 150&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Ashley Lake&lt;br&gt;\nChlorphylla: 0.43&lt;br&gt;\nNitrogen: 108&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Ashley Lake&lt;br&gt;\nChlorphylla: 0.66&lt;br&gt;\nNitrogen: 150&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Pena Blanca Lake&lt;br&gt;\nChlorphylla: 12.91&lt;br&gt;\nNitrogen: 2234&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: Wheatfields Lake&lt;br&gt;\nChlorphylla: 8.11&lt;br&gt;\nNitrogen: 466&lt;br&gt;\nPhosphorus: 56&lt;br&gt;&quot;,&quot;Name: West Hill Pond&lt;br&gt;\nChlorphylla: 1.58&lt;br&gt;\nNitrogen: 156&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Upper Twin Lakes&lt;br&gt;\nChlorphylla: 1.33&lt;br&gt;\nNitrogen: 82&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Palestine Lake&lt;br&gt;\nChlorphylla: 12.8&lt;br&gt;\nNitrogen: 763&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Clear Creek Lake&lt;br&gt;\nChlorphylla: 52.56&lt;br&gt;\nNitrogen: 1158&lt;br&gt;\nPhosphorus: 173&lt;br&gt;&quot;,&quot;Name: Noxontown Pond&lt;br&gt;\nChlorphylla: 110.16&lt;br&gt;\nNitrogen: 975&lt;br&gt;\nPhosphorus: 73&lt;br&gt;&quot;,&quot;Name: Plum Lake&lt;br&gt;\nChlorphylla: 1.36&lt;br&gt;\nNitrogen: 293&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Miller Creek Reservoir&lt;br&gt;\nChlorphylla: 22.25&lt;br&gt;\nNitrogen: 898&lt;br&gt;\nPhosphorus: 69&lt;br&gt;&quot;,&quot;Name: Miller Creek Reservoir&lt;br&gt;\nChlorphylla: 5.83&lt;br&gt;\nNitrogen: 751&lt;br&gt;\nPhosphorus: 68&lt;br&gt;&quot;,&quot;Name: Miller Creek Reservoir&lt;br&gt;\nChlorphylla: 22.25&lt;br&gt;\nNitrogen: 898&lt;br&gt;\nPhosphorus: 69&lt;br&gt;&quot;,&quot;Name: Miller Creek Reservoir&lt;br&gt;\nChlorphylla: 5.83&lt;br&gt;\nNitrogen: 751&lt;br&gt;\nPhosphorus: 68&lt;br&gt;&quot;,&quot;Name: Princes East&lt;br&gt;\nChlorphylla: 1.87&lt;br&gt;\nNitrogen: 342&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Lake Nephawin&lt;br&gt;\nChlorphylla: 4.18&lt;br&gt;\nNitrogen: 220&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Sebasticook Lake&lt;br&gt;\nChlorphylla: 8.22&lt;br&gt;\nNitrogen: 366&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Fuqua&lt;br&gt;\nChlorphylla: 5.2&lt;br&gt;\nNitrogen: 521&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Spring Creek&lt;br&gt;\nChlorphylla: 10.4&lt;br&gt;\nNitrogen: 656&lt;br&gt;\nPhosphorus: 34&lt;br&gt;&quot;,&quot;Name: Long Lake&lt;br&gt;\nChlorphylla: 79.8&lt;br&gt;\nNitrogen: 1520&lt;br&gt;\nPhosphorus: 114&lt;br&gt;&quot;,&quot;Name: Blueberry Lake&lt;br&gt;\nChlorphylla: 3.14&lt;br&gt;\nNitrogen: 651&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Lake Tarpon&lt;br&gt;\nChlorphylla: 39&lt;br&gt;\nNitrogen: 1069&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: Sip Pond&lt;br&gt;\nChlorphylla: 2.56&lt;br&gt;\nNitrogen: 244&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: South Lake&lt;br&gt;\nChlorphylla: 936&lt;br&gt;\nNitrogen: 15625&lt;br&gt;\nPhosphorus: 1184&lt;br&gt;&quot;,&quot;Name: South Lake&lt;br&gt;\nChlorphylla: 643.68&lt;br&gt;\nNitrogen: 14450&lt;br&gt;\nPhosphorus: 1061&lt;br&gt;&quot;,&quot;Name: South Lake&lt;br&gt;\nChlorphylla: 936&lt;br&gt;\nNitrogen: 15625&lt;br&gt;\nPhosphorus: 1184&lt;br&gt;&quot;,&quot;Name: South Lake&lt;br&gt;\nChlorphylla: 643.68&lt;br&gt;\nNitrogen: 14450&lt;br&gt;\nPhosphorus: 1061&lt;br&gt;&quot;,&quot;Name: Elm Creek Lake&lt;br&gt;\nChlorphylla: 21.76&lt;br&gt;\nNitrogen: 866&lt;br&gt;\nPhosphorus: 61&lt;br&gt;&quot;,&quot;Name: Forsyth Reservoir&lt;br&gt;\nChlorphylla: 2.59&lt;br&gt;\nNitrogen: 353&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Forsyth Reservoir&lt;br&gt;\nChlorphylla: 26.35&lt;br&gt;\nNitrogen: 726&lt;br&gt;\nPhosphorus: 95&lt;br&gt;&quot;,&quot;Name: Forsyth Reservoir&lt;br&gt;\nChlorphylla: 2.59&lt;br&gt;\nNitrogen: 353&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Forsyth Reservoir&lt;br&gt;\nChlorphylla: 26.35&lt;br&gt;\nNitrogen: 726&lt;br&gt;\nPhosphorus: 95&lt;br&gt;&quot;,&quot;Name: Tallman Lake&lt;br&gt;\nChlorphylla: 1.44&lt;br&gt;\nNitrogen: 780&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Ramer Lake&lt;br&gt;\nChlorphylla: 70.4&lt;br&gt;\nNitrogen: 2218&lt;br&gt;\nPhosphorus: 57&lt;br&gt;&quot;,&quot;Name: Pebble Lake&lt;br&gt;\nChlorphylla: 6.75&lt;br&gt;\nNitrogen: 1002&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Pebble Lake&lt;br&gt;\nChlorphylla: 6.03&lt;br&gt;\nNitrogen: 803&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Pebble Lake&lt;br&gt;\nChlorphylla: 6.75&lt;br&gt;\nNitrogen: 1002&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Pebble Lake&lt;br&gt;\nChlorphylla: 6.03&lt;br&gt;\nNitrogen: 803&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Lake Lakengren&lt;br&gt;\nChlorphylla: 19.68&lt;br&gt;\nNitrogen: 698&lt;br&gt;\nPhosphorus: 55&lt;br&gt;&quot;,&quot;Name: Blackfish Lake&lt;br&gt;\nChlorphylla: 25.76&lt;br&gt;\nNitrogen: 848&lt;br&gt;\nPhosphorus: 207&lt;br&gt;&quot;,&quot;Name: Silver&lt;br&gt;\nChlorphylla: 3.58&lt;br&gt;\nNitrogen: 177&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 18.4&lt;br&gt;\nNitrogen: 5181&lt;br&gt;\nPhosphorus: 209&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 104.4&lt;br&gt;\nNitrogen: 8013&lt;br&gt;\nPhosphorus: 263&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 18.4&lt;br&gt;\nNitrogen: 5181&lt;br&gt;\nPhosphorus: 209&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 104.4&lt;br&gt;\nNitrogen: 8013&lt;br&gt;\nPhosphorus: 263&lt;br&gt;&quot;,&quot;Name: Frederick Lake&lt;br&gt;\nChlorphylla: 30.62&lt;br&gt;\nNitrogen: 721&lt;br&gt;\nPhosphorus: 61&lt;br&gt;&quot;,&quot;Name: June Lake&lt;br&gt;\nChlorphylla: 1.38&lt;br&gt;\nNitrogen: 514&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Wapogasset Lake&lt;br&gt;\nChlorphylla: 30.1&lt;br&gt;\nNitrogen: 907&lt;br&gt;\nPhosphorus: 68&lt;br&gt;&quot;,&quot;Name: Heritage Park Lake&lt;br&gt;\nChlorphylla: 40.75&lt;br&gt;\nNitrogen: 1049&lt;br&gt;\nPhosphorus: 100&lt;br&gt;&quot;,&quot;Name: Lake Naomi&lt;br&gt;\nChlorphylla: 3.13&lt;br&gt;\nNitrogen: 284&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Middle Wheeling Creek&lt;br&gt;\nChlorphylla: 32.26&lt;br&gt;\nNitrogen: 871&lt;br&gt;\nPhosphorus: 77&lt;br&gt;&quot;,&quot;Name: Middle Wheeling Creek&lt;br&gt;\nChlorphylla: 47.23&lt;br&gt;\nNitrogen: 648&lt;br&gt;\nPhosphorus: 65&lt;br&gt;&quot;,&quot;Name: Middle Wheeling Creek&lt;br&gt;\nChlorphylla: 32.26&lt;br&gt;\nNitrogen: 871&lt;br&gt;\nPhosphorus: 77&lt;br&gt;&quot;,&quot;Name: Middle Wheeling Creek&lt;br&gt;\nChlorphylla: 47.23&lt;br&gt;\nNitrogen: 648&lt;br&gt;\nPhosphorus: 65&lt;br&gt;&quot;,&quot;Name: Upper Hatch&lt;br&gt;\nChlorphylla: 5.17&lt;br&gt;\nNitrogen: 666&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Lake Natahala&lt;br&gt;\nChlorphylla: 1.13&lt;br&gt;\nNitrogen: 48&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Gorge&lt;br&gt;\nChlorphylla: 0.3&lt;br&gt;\nNitrogen: 71&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 15.55&lt;br&gt;\nNitrogen: 1955&lt;br&gt;\nPhosphorus: 447&lt;br&gt;&quot;,&quot;Name: MD Borah Lake&lt;br&gt;\nChlorphylla: 31.4&lt;br&gt;\nNitrogen: 1250&lt;br&gt;\nPhosphorus: 94&lt;br&gt;&quot;,&quot;Name: Hinkley&#x27;s Pond&lt;br&gt;\nChlorphylla: 10.67&lt;br&gt;\nNitrogen: 353&lt;br&gt;\nPhosphorus: 25&lt;br&gt;&quot;,&quot;Name: French Meadows Reservoir&lt;br&gt;\nChlorphylla: 0.8&lt;br&gt;\nNitrogen: 40&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Lewis Smith Reservoir&lt;br&gt;\nChlorphylla: 0.77&lt;br&gt;\nNitrogen: 239&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Turkey Creek Site 6 Reservoir&lt;br&gt;\nChlorphylla: 68.85&lt;br&gt;\nNitrogen: 1355&lt;br&gt;\nPhosphorus: 125&lt;br&gt;&quot;,&quot;Name: Mahaffey Lake&lt;br&gt;\nChlorphylla: 6.52&lt;br&gt;\nNitrogen: 384&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Mahaffey Lake&lt;br&gt;\nChlorphylla: 7.79&lt;br&gt;\nNitrogen: 419&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Mahaffey Lake&lt;br&gt;\nChlorphylla: 6.52&lt;br&gt;\nNitrogen: 384&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Mahaffey Lake&lt;br&gt;\nChlorphylla: 7.79&lt;br&gt;\nNitrogen: 419&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Lake Hogue&lt;br&gt;\nChlorphylla: 65.6&lt;br&gt;\nNitrogen: 1687&lt;br&gt;\nPhosphorus: 162&lt;br&gt;&quot;,&quot;Name: Lake Sammamish&lt;br&gt;\nChlorphylla: 2.41&lt;br&gt;\nNitrogen: 205&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Lake Sammamish&lt;br&gt;\nChlorphylla: 4.11&lt;br&gt;\nNitrogen: 201&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Lake Sammamish&lt;br&gt;\nChlorphylla: 2.41&lt;br&gt;\nNitrogen: 205&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Lake Sammamish&lt;br&gt;\nChlorphylla: 4.11&lt;br&gt;\nNitrogen: 201&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Allen Lake&lt;br&gt;\nChlorphylla: 9.07&lt;br&gt;\nNitrogen: 1340&lt;br&gt;\nPhosphorus: 42&lt;br&gt;&quot;,&quot;Name: Monroe Lake&lt;br&gt;\nChlorphylla: 4.36&lt;br&gt;\nNitrogen: 88&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Nest Lake&lt;br&gt;\nChlorphylla: 58.46&lt;br&gt;\nNitrogen: 1463&lt;br&gt;\nPhosphorus: 83&lt;br&gt;&quot;,&quot;Name: Cedar Creek Lake&lt;br&gt;\nChlorphylla: 19.2&lt;br&gt;\nNitrogen: 1367&lt;br&gt;\nPhosphorus: 619&lt;br&gt;&quot;,&quot;Name: Lake Orange&lt;br&gt;\nChlorphylla: 17.6&lt;br&gt;\nNitrogen: 508&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Skinner Lake&lt;br&gt;\nChlorphylla: 55.58&lt;br&gt;\nNitrogen: 1826&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: East Twin Lake&lt;br&gt;\nChlorphylla: 871.2&lt;br&gt;\nNitrogen: 22613&lt;br&gt;\nPhosphorus: 872&lt;br&gt;&quot;,&quot;Name: Jolly Pond&lt;br&gt;\nChlorphylla: 31.68&lt;br&gt;\nNitrogen: 594&lt;br&gt;\nPhosphorus: 38&lt;br&gt;&quot;,&quot;Name: Tioga Dam&lt;br&gt;\nChlorphylla: 38.74&lt;br&gt;\nNitrogen: 2008&lt;br&gt;\nPhosphorus: 114&lt;br&gt;&quot;,&quot;Name: Swan Lake&lt;br&gt;\nChlorphylla: 21.92&lt;br&gt;\nNitrogen: 569&lt;br&gt;\nPhosphorus: 45&lt;br&gt;&quot;,&quot;Name: Swan Lake&lt;br&gt;\nChlorphylla: 60.91&lt;br&gt;\nNitrogen: 705&lt;br&gt;\nPhosphorus: 44&lt;br&gt;&quot;,&quot;Name: Swan Lake&lt;br&gt;\nChlorphylla: 21.92&lt;br&gt;\nNitrogen: 569&lt;br&gt;\nPhosphorus: 45&lt;br&gt;&quot;,&quot;Name: Swan Lake&lt;br&gt;\nChlorphylla: 60.91&lt;br&gt;\nNitrogen: 705&lt;br&gt;\nPhosphorus: 44&lt;br&gt;&quot;,&quot;Name: Lake Hanna&lt;br&gt;\nChlorphylla: 1.88&lt;br&gt;\nNitrogen: 283&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Lake Hanna&lt;br&gt;\nChlorphylla: 2.74&lt;br&gt;\nNitrogen: 385&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Hanna&lt;br&gt;\nChlorphylla: 1.88&lt;br&gt;\nNitrogen: 283&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Lake Hanna&lt;br&gt;\nChlorphylla: 2.74&lt;br&gt;\nNitrogen: 385&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Nilan Reservoir&lt;br&gt;\nChlorphylla: 0.88&lt;br&gt;\nNitrogen: 130&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Nilan Reservoir&lt;br&gt;\nChlorphylla: 1.67&lt;br&gt;\nNitrogen: 506&lt;br&gt;\nPhosphorus: 46&lt;br&gt;&quot;,&quot;Name: Nilan Reservoir&lt;br&gt;\nChlorphylla: 0.88&lt;br&gt;\nNitrogen: 130&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Nilan Reservoir&lt;br&gt;\nChlorphylla: 1.67&lt;br&gt;\nNitrogen: 506&lt;br&gt;\nPhosphorus: 46&lt;br&gt;&quot;,&quot;Name: Voydatch Pond&lt;br&gt;\nChlorphylla: 5.89&lt;br&gt;\nNitrogen: 328&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Holbrook Reservoir&lt;br&gt;\nChlorphylla: 1.43&lt;br&gt;\nNitrogen: 408&lt;br&gt;\nPhosphorus: 25&lt;br&gt;&quot;,&quot;Name: Holbrook Reservoir&lt;br&gt;\nChlorphylla: 17.42&lt;br&gt;\nNitrogen: 710&lt;br&gt;\nPhosphorus: 96&lt;br&gt;&quot;,&quot;Name: Holbrook Reservoir&lt;br&gt;\nChlorphylla: 1.43&lt;br&gt;\nNitrogen: 408&lt;br&gt;\nPhosphorus: 25&lt;br&gt;&quot;,&quot;Name: Holbrook Reservoir&lt;br&gt;\nChlorphylla: 17.42&lt;br&gt;\nNitrogen: 710&lt;br&gt;\nPhosphorus: 96&lt;br&gt;&quot;,&quot;Name: Long Lake&lt;br&gt;\nChlorphylla: 3.6&lt;br&gt;\nNitrogen: 219&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Pine Lake&lt;br&gt;\nChlorphylla: 4.78&lt;br&gt;\nNitrogen: 584&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Tippecanoe Lake&lt;br&gt;\nChlorphylla: 7.8&lt;br&gt;\nNitrogen: 626&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Dacey Reservoir Lower&lt;br&gt;\nChlorphylla: 1.86&lt;br&gt;\nNitrogen: 678&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Dacey Reservoir Lower&lt;br&gt;\nChlorphylla: 4.23&lt;br&gt;\nNitrogen: 588&lt;br&gt;\nPhosphorus: 25&lt;br&gt;&quot;,&quot;Name: Dacey Reservoir Lower&lt;br&gt;\nChlorphylla: 1.86&lt;br&gt;\nNitrogen: 678&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Dacey Reservoir Lower&lt;br&gt;\nChlorphylla: 4.23&lt;br&gt;\nNitrogen: 588&lt;br&gt;\nPhosphorus: 25&lt;br&gt;&quot;,&quot;Name: Pelican Lake&lt;br&gt;\nChlorphylla: 2.98&lt;br&gt;\nNitrogen: 265&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Nickajack Lake&lt;br&gt;\nChlorphylla: 2.66&lt;br&gt;\nNitrogen: 383&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: Nelson Reservoir&lt;br&gt;\nChlorphylla: 2.1&lt;br&gt;\nNitrogen: 396&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Oneida Narrows&lt;br&gt;\nChlorphylla: 9.74&lt;br&gt;\nNitrogen: 774&lt;br&gt;\nPhosphorus: 80&lt;br&gt;&quot;,&quot;Name: Pachaug Pond&lt;br&gt;\nChlorphylla: 2.87&lt;br&gt;\nNitrogen: 300&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Lake Oahe&lt;br&gt;\nChlorphylla: 1.82&lt;br&gt;\nNitrogen: 203&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Kemp&lt;br&gt;\nChlorphylla: 6&lt;br&gt;\nNitrogen: 436&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Lake Curry&lt;br&gt;\nChlorphylla: 2.66&lt;br&gt;\nNitrogen: 329&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Wall Lake&lt;br&gt;\nChlorphylla: 55.8&lt;br&gt;\nNitrogen: 1625&lt;br&gt;\nPhosphorus: 202&lt;br&gt;&quot;,&quot;Name: HZ Smith Lake&lt;br&gt;\nChlorphylla: 32.54&lt;br&gt;\nNitrogen: 968&lt;br&gt;\nPhosphorus: 127&lt;br&gt;&quot;,&quot;Name: Twin Lakes&lt;br&gt;\nChlorphylla: 49.6&lt;br&gt;\nNitrogen: 2816&lt;br&gt;\nPhosphorus: 175&lt;br&gt;&quot;,&quot;Name: Wonder Lake&lt;br&gt;\nChlorphylla: 2.44&lt;br&gt;\nNitrogen: 276&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Koocanusa Reservoir&lt;br&gt;\nChlorphylla: 1.15&lt;br&gt;\nNitrogen: 79&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 48.24&lt;br&gt;\nNitrogen: 3172&lt;br&gt;\nPhosphorus: 613&lt;br&gt;&quot;,&quot;Name: Heron Reservoir&lt;br&gt;\nChlorphylla: 1.27&lt;br&gt;\nNitrogen: 136&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Okemah Lake&lt;br&gt;\nChlorphylla: 7.7&lt;br&gt;\nNitrogen: 464&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Lucys Pond&lt;br&gt;\nChlorphylla: 30.04&lt;br&gt;\nNitrogen: 857&lt;br&gt;\nPhosphorus: 99&lt;br&gt;&quot;,&quot;Name: Mud Lake&lt;br&gt;\nChlorphylla: 6.72&lt;br&gt;\nNitrogen: 3084&lt;br&gt;\nPhosphorus: 331&lt;br&gt;&quot;,&quot;Name: McReynolds Reservoir&lt;br&gt;\nChlorphylla: 1.98&lt;br&gt;\nNitrogen: 254&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Walcott&lt;br&gt;\nChlorphylla: 12.93&lt;br&gt;\nNitrogen: 451&lt;br&gt;\nPhosphorus: 117&lt;br&gt;&quot;,&quot;Name: North Eagle&lt;br&gt;\nChlorphylla: 126.27&lt;br&gt;\nNitrogen: 4600&lt;br&gt;\nPhosphorus: 239&lt;br&gt;&quot;,&quot;Name: McElvaney Lake&lt;br&gt;\nChlorphylla: 20.95&lt;br&gt;\nNitrogen: 1229&lt;br&gt;\nPhosphorus: 81&lt;br&gt;&quot;,&quot;Name: Lake Fisher&lt;br&gt;\nChlorphylla: 25.1&lt;br&gt;\nNitrogen: 639&lt;br&gt;\nPhosphorus: 44&lt;br&gt;&quot;,&quot;Name: Lake Demopolis&lt;br&gt;\nChlorphylla: 9.86&lt;br&gt;\nNitrogen: 381&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 20.8&lt;br&gt;\nNitrogen: 865&lt;br&gt;\nPhosphorus: 79&lt;br&gt;&quot;,&quot;Name: Records Pond&lt;br&gt;\nChlorphylla: 35.28&lt;br&gt;\nNitrogen: 4222&lt;br&gt;\nPhosphorus: 138&lt;br&gt;&quot;,&quot;Name: Silver Lake&lt;br&gt;\nChlorphylla: 2.22&lt;br&gt;\nNitrogen: 413&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Junipers Reservoir&lt;br&gt;\nChlorphylla: 4.3&lt;br&gt;\nNitrogen: 273&lt;br&gt;\nPhosphorus: 178&lt;br&gt;&quot;,&quot;Name: Junipers Reservoir&lt;br&gt;\nChlorphylla: 15.6&lt;br&gt;\nNitrogen: 1231&lt;br&gt;\nPhosphorus: 629&lt;br&gt;&quot;,&quot;Name: Junipers Reservoir&lt;br&gt;\nChlorphylla: 4.3&lt;br&gt;\nNitrogen: 273&lt;br&gt;\nPhosphorus: 178&lt;br&gt;&quot;,&quot;Name: Junipers Reservoir&lt;br&gt;\nChlorphylla: 15.6&lt;br&gt;\nNitrogen: 1231&lt;br&gt;\nPhosphorus: 629&lt;br&gt;&quot;,&quot;Name: Green Lake&lt;br&gt;\nChlorphylla: 3.62&lt;br&gt;\nNitrogen: 553&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Lake Kenosia&lt;br&gt;\nChlorphylla: 21.89&lt;br&gt;\nNitrogen: 759&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: Derby Lake&lt;br&gt;\nChlorphylla: 2.34&lt;br&gt;\nNitrogen: 343&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Long Lake&lt;br&gt;\nChlorphylla: 5.73&lt;br&gt;\nNitrogen: 2026&lt;br&gt;\nPhosphorus: 242&lt;br&gt;&quot;,&quot;Name: Boatwright Farm Pond&lt;br&gt;\nChlorphylla: 14.13&lt;br&gt;\nNitrogen: 587&lt;br&gt;\nPhosphorus: 31&lt;br&gt;&quot;,&quot;Name: Round Lake&lt;br&gt;\nChlorphylla: 3.78&lt;br&gt;\nNitrogen: 915&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 203.76&lt;br&gt;\nNitrogen: 6934&lt;br&gt;\nPhosphorus: 1871&lt;br&gt;&quot;,&quot;Name: Holiday Lake&lt;br&gt;\nChlorphylla: 84.24&lt;br&gt;\nNitrogen: 1523&lt;br&gt;\nPhosphorus: 79&lt;br&gt;&quot;,&quot;Name: Moon Reservoir&lt;br&gt;\nChlorphylla: 38.73&lt;br&gt;\nNitrogen: 1525&lt;br&gt;\nPhosphorus: 271&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 19.2&lt;br&gt;\nNitrogen: 355&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: City Lake&lt;br&gt;\nChlorphylla: 15.08&lt;br&gt;\nNitrogen: 279&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Lost Lake&lt;br&gt;\nChlorphylla: 13.89&lt;br&gt;\nNitrogen: 847&lt;br&gt;\nPhosphorus: 43&lt;br&gt;&quot;,&quot;Name: Coneross Creek Reservoir&lt;br&gt;\nChlorphylla: 4.48&lt;br&gt;\nNitrogen: 251&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Lake Bonaventure&lt;br&gt;\nChlorphylla: 4.82&lt;br&gt;\nNitrogen: 248&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Lawne Lake&lt;br&gt;\nChlorphylla: 46&lt;br&gt;\nNitrogen: 814&lt;br&gt;\nPhosphorus: 50&lt;br&gt;&quot;,&quot;Name: Groton Reservoir&lt;br&gt;\nChlorphylla: 1.26&lt;br&gt;\nNitrogen: 225&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Thornburg Lake&lt;br&gt;\nChlorphylla: 56.74&lt;br&gt;\nNitrogen: 281&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Cross Lake&lt;br&gt;\nChlorphylla: 117.5&lt;br&gt;\nNitrogen: 1093&lt;br&gt;\nPhosphorus: 82&lt;br&gt;&quot;,&quot;Name: Cross Lake&lt;br&gt;\nChlorphylla: 97.49&lt;br&gt;\nNitrogen: 1078&lt;br&gt;\nPhosphorus: 73&lt;br&gt;&quot;,&quot;Name: Cross Lake&lt;br&gt;\nChlorphylla: 117.5&lt;br&gt;\nNitrogen: 1093&lt;br&gt;\nPhosphorus: 82&lt;br&gt;&quot;,&quot;Name: Cross Lake&lt;br&gt;\nChlorphylla: 97.49&lt;br&gt;\nNitrogen: 1078&lt;br&gt;\nPhosphorus: 73&lt;br&gt;&quot;,&quot;Name: Lake Besser&lt;br&gt;\nChlorphylla: 1.1&lt;br&gt;\nNitrogen: 289&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Tenkiller Ferry Lake&lt;br&gt;\nChlorphylla: 6.44&lt;br&gt;\nNitrogen: 260&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Round Valley Reservoir&lt;br&gt;\nChlorphylla: 5.04&lt;br&gt;\nNitrogen: 282&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Buffalo Lodge Lake&lt;br&gt;\nChlorphylla: 5.88&lt;br&gt;\nNitrogen: 1834&lt;br&gt;\nPhosphorus: 142&lt;br&gt;&quot;,&quot;Name: Cranberry&lt;br&gt;\nChlorphylla: 7.84&lt;br&gt;\nNitrogen: 586&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 7.44&lt;br&gt;\nNitrogen: 1659&lt;br&gt;\nPhosphorus: 376&lt;br&gt;&quot;,&quot;Name: Nichols Reservoir&lt;br&gt;\nChlorphylla: 9.9&lt;br&gt;\nNitrogen: 333&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Oneida Lake&lt;br&gt;\nChlorphylla: 5.28&lt;br&gt;\nNitrogen: 333&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Lake Alice&lt;br&gt;\nChlorphylla: 45.36&lt;br&gt;\nNitrogen: 2606&lt;br&gt;\nPhosphorus: 117&lt;br&gt;&quot;,&quot;Name: Branched Oak Lake&lt;br&gt;\nChlorphylla: 24.8&lt;br&gt;\nNitrogen: 848&lt;br&gt;\nPhosphorus: 53&lt;br&gt;&quot;,&quot;Name: Lake Lanier&lt;br&gt;\nChlorphylla: 6.05&lt;br&gt;\nNitrogen: 511&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Price Lake&lt;br&gt;\nChlorphylla: 17.44&lt;br&gt;\nNitrogen: 902&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Haynes Reservoir&lt;br&gt;\nChlorphylla: 2.09&lt;br&gt;\nNitrogen: 188&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Lake Number Twelve&lt;br&gt;\nChlorphylla: 110.7&lt;br&gt;\nNitrogen: 2897&lt;br&gt;\nPhosphorus: 167&lt;br&gt;&quot;,&quot;Name: Buckley-Dunton&lt;br&gt;\nChlorphylla: 5.62&lt;br&gt;\nNitrogen: 276&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Little Greenough Pond&lt;br&gt;\nChlorphylla: 3.69&lt;br&gt;\nNitrogen: 209&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Big Stone Lake&lt;br&gt;\nChlorphylla: 42.66&lt;br&gt;\nNitrogen: 1296&lt;br&gt;\nPhosphorus: 191&lt;br&gt;&quot;,&quot;Name: Lake Wylie&lt;br&gt;\nChlorphylla: 11.86&lt;br&gt;\nNitrogen: 171&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Palmer Lake&lt;br&gt;\nChlorphylla: 11.68&lt;br&gt;\nNitrogen: 567&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Straight Lake&lt;br&gt;\nChlorphylla: 7.57&lt;br&gt;\nNitrogen: 601&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: La Due Reservoir&lt;br&gt;\nChlorphylla: 59.4&lt;br&gt;\nNitrogen: 2157&lt;br&gt;\nPhosphorus: 54&lt;br&gt;&quot;,&quot;Name: Caspian Lake&lt;br&gt;\nChlorphylla: 1.74&lt;br&gt;\nNitrogen: 163&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Brush Hollow Reservoir&lt;br&gt;\nChlorphylla: 3.16&lt;br&gt;\nNitrogen: 229&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Lake Arrowhead&lt;br&gt;\nChlorphylla: 0.68&lt;br&gt;\nNitrogen: 104&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Skiatook Lake&lt;br&gt;\nChlorphylla: 4.25&lt;br&gt;\nNitrogen: 324&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Sunbury WS #5&lt;br&gt;\nChlorphylla: 44.93&lt;br&gt;\nNitrogen: 850&lt;br&gt;\nPhosphorus: 46&lt;br&gt;&quot;,&quot;Name: Willow Creek Reservoir&lt;br&gt;\nChlorphylla: 0.55&lt;br&gt;\nNitrogen: 223&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Willow Lake&lt;br&gt;\nChlorphylla: 3.39&lt;br&gt;\nNitrogen: 4291&lt;br&gt;\nPhosphorus: 68&lt;br&gt;&quot;,&quot;Name: Green Lake&lt;br&gt;\nChlorphylla: 2.31&lt;br&gt;\nNitrogen: 1834&lt;br&gt;\nPhosphorus: 51&lt;br&gt;&quot;,&quot;Name: Lake Altoona&lt;br&gt;\nChlorphylla: 0.83&lt;br&gt;\nNitrogen: 475&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Cannon Creek Lake&lt;br&gt;\nChlorphylla: 0.33&lt;br&gt;\nNitrogen: 85&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Cannon Creek Lake&lt;br&gt;\nChlorphylla: 0.35&lt;br&gt;\nNitrogen: 35&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Cannon Creek Lake&lt;br&gt;\nChlorphylla: 0.33&lt;br&gt;\nNitrogen: 85&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Cannon Creek Lake&lt;br&gt;\nChlorphylla: 0.35&lt;br&gt;\nNitrogen: 35&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Tulloch Reservoir&lt;br&gt;\nChlorphylla: 1.24&lt;br&gt;\nNitrogen: 101&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Lay Reservoir&lt;br&gt;\nChlorphylla: 30.4&lt;br&gt;\nNitrogen: 231&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Hi-Land Lake&lt;br&gt;\nChlorphylla: 3.35&lt;br&gt;\nNitrogen: 586&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Long Lake&lt;br&gt;\nChlorphylla: 16.16&lt;br&gt;\nNitrogen: 279&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Powers Pond&lt;br&gt;\nChlorphylla: 73.73&lt;br&gt;\nNitrogen: 2287&lt;br&gt;\nPhosphorus: 176&lt;br&gt;&quot;,&quot;Name: Powers Pond&lt;br&gt;\nChlorphylla: 81.5&lt;br&gt;\nNitrogen: 1027&lt;br&gt;\nPhosphorus: 96&lt;br&gt;&quot;,&quot;Name: Powers Pond&lt;br&gt;\nChlorphylla: 73.73&lt;br&gt;\nNitrogen: 2287&lt;br&gt;\nPhosphorus: 176&lt;br&gt;&quot;,&quot;Name: Powers Pond&lt;br&gt;\nChlorphylla: 81.5&lt;br&gt;\nNitrogen: 1027&lt;br&gt;\nPhosphorus: 96&lt;br&gt;&quot;,&quot;Name: Cass Lake&lt;br&gt;\nChlorphylla: 5.36&lt;br&gt;\nNitrogen: 485&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Lake Stanmore&lt;br&gt;\nChlorphylla: 8.56&lt;br&gt;\nNitrogen: 458&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Clear Lake&lt;br&gt;\nChlorphylla: 1.23&lt;br&gt;\nNitrogen: 172&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 1.81&lt;br&gt;\nNitrogen: 2872&lt;br&gt;\nPhosphorus: 762&lt;br&gt;&quot;,&quot;Name: Mountian Lake&lt;br&gt;\nChlorphylla: 5.67&lt;br&gt;\nNitrogen: 270&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Rainey Pond&lt;br&gt;\nChlorphylla: 108.58&lt;br&gt;\nNitrogen: 581&lt;br&gt;\nPhosphorus: 106&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 6.69&lt;br&gt;\nNitrogen: 1296&lt;br&gt;\nPhosphorus: 40&lt;br&gt;&quot;,&quot;Name: Grassy Pond&lt;br&gt;\nChlorphylla: 2.18&lt;br&gt;\nNitrogen: 296&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Loughberry Lake&lt;br&gt;\nChlorphylla: 2.18&lt;br&gt;\nNitrogen: 537&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Koosharem Reservoir&lt;br&gt;\nChlorphylla: 16.16&lt;br&gt;\nNitrogen: 1433&lt;br&gt;\nPhosphorus: 234&lt;br&gt;&quot;,&quot;Name: Eight Point Lake&lt;br&gt;\nChlorphylla: 3.12&lt;br&gt;\nNitrogen: 574&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Arkabutla Lake&lt;br&gt;\nChlorphylla: 24.8&lt;br&gt;\nNitrogen: 644&lt;br&gt;\nPhosphorus: 218&lt;br&gt;&quot;,&quot;Name: Lake Champlain&lt;br&gt;\nChlorphylla: 1.68&lt;br&gt;\nNitrogen: 422&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Chequamegon Flowage&lt;br&gt;\nChlorphylla: 23.2&lt;br&gt;\nNitrogen: 1824&lt;br&gt;\nPhosphorus: 78&lt;br&gt;&quot;,&quot;Name: Lake Catherine&lt;br&gt;\nChlorphylla: 18.22&lt;br&gt;\nNitrogen: 398&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 377.28&lt;br&gt;\nNitrogen: 19200&lt;br&gt;\nPhosphorus: 1056&lt;br&gt;&quot;,&quot;Name: Perry Lake&lt;br&gt;\nChlorphylla: 5.46&lt;br&gt;\nNitrogen: 853&lt;br&gt;\nPhosphorus: 182&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 4.5&lt;br&gt;\nNitrogen: 6559&lt;br&gt;\nPhosphorus: 385&lt;br&gt;&quot;,&quot;Name: Enid View Drive Lake&lt;br&gt;\nChlorphylla: 10.27&lt;br&gt;\nNitrogen: 383&lt;br&gt;\nPhosphorus: 42&lt;br&gt;&quot;,&quot;Name: Belmont Lake&lt;br&gt;\nChlorphylla: 6.85&lt;br&gt;\nNitrogen: 336&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Greenbo Lake&lt;br&gt;\nChlorphylla: 1.21&lt;br&gt;\nNitrogen: 79&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Jump-off Joe Lake&lt;br&gt;\nChlorphylla: 4.39&lt;br&gt;\nNitrogen: 404&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Jim Baker Reservoir&lt;br&gt;\nChlorphylla: 7.25&lt;br&gt;\nNitrogen: 604&lt;br&gt;\nPhosphorus: 37&lt;br&gt;&quot;,&quot;Name: Lake Minneola&lt;br&gt;\nChlorphylla: 4.31&lt;br&gt;\nNitrogen: 1056&lt;br&gt;\nPhosphorus: 48&lt;br&gt;&quot;,&quot;Name: Norton Reservoir&lt;br&gt;\nChlorphylla: 3.2&lt;br&gt;\nNitrogen: 367&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Lavon Lake&lt;br&gt;\nChlorphylla: 25.1&lt;br&gt;\nNitrogen: 681&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: Reed Bingham Lake&lt;br&gt;\nChlorphylla: 15.06&lt;br&gt;\nNitrogen: 947&lt;br&gt;\nPhosphorus: 39&lt;br&gt;&quot;,&quot;Name: Lake George&lt;br&gt;\nChlorphylla: 3.98&lt;br&gt;\nNitrogen: 200&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Loon Lake&lt;br&gt;\nChlorphylla: NA&lt;br&gt;\nNitrogen: 194&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Belleville Lake&lt;br&gt;\nChlorphylla: 30.72&lt;br&gt;\nNitrogen: 1031&lt;br&gt;\nPhosphorus: 82&lt;br&gt;&quot;,&quot;Name: Swan Lake&lt;br&gt;\nChlorphylla: 12.72&lt;br&gt;\nNitrogen: 788&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Eagle Lake&lt;br&gt;\nChlorphylla: 0.64&lt;br&gt;\nNitrogen: 179&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Starlight Lake&lt;br&gt;\nChlorphylla: 3.35&lt;br&gt;\nNitrogen: 191&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Mirror Lake&lt;br&gt;\nChlorphylla: 1.51&lt;br&gt;\nNitrogen: 193&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Enemy Swim Lake&lt;br&gt;\nChlorphylla: 5.52&lt;br&gt;\nNitrogen: 839&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Coalgate Reservoir&lt;br&gt;\nChlorphylla: 19.2&lt;br&gt;\nNitrogen: 803&lt;br&gt;\nPhosphorus: 78&lt;br&gt;&quot;,&quot;Name: Tuckertown Reservoir&lt;br&gt;\nChlorphylla: 36.82&lt;br&gt;\nNitrogen: 714&lt;br&gt;\nPhosphorus: 55&lt;br&gt;&quot;,&quot;Name: Anderson Lake&lt;br&gt;\nChlorphylla: 5.3&lt;br&gt;\nNitrogen: 318&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Lake Timberline&lt;br&gt;\nChlorphylla: 1.52&lt;br&gt;\nNitrogen: 194&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Lake Timberline&lt;br&gt;\nChlorphylla: 1.32&lt;br&gt;\nNitrogen: 232&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Lake Timberline&lt;br&gt;\nChlorphylla: 1.52&lt;br&gt;\nNitrogen: 194&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Lake Timberline&lt;br&gt;\nChlorphylla: 1.32&lt;br&gt;\nNitrogen: 232&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Amistad Reservoir&lt;br&gt;\nChlorphylla: 3.84&lt;br&gt;\nNitrogen: 461&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Barrs Chapel Lake&lt;br&gt;\nChlorphylla: 126.4&lt;br&gt;\nNitrogen: 1519&lt;br&gt;\nPhosphorus: 190&lt;br&gt;&quot;,&quot;Name: Bee Creek Lake&lt;br&gt;\nChlorphylla: 49.68&lt;br&gt;\nNitrogen: 1070&lt;br&gt;\nPhosphorus: 162&lt;br&gt;&quot;,&quot;Name: Bald Run Reservoir&lt;br&gt;\nChlorphylla: 24.32&lt;br&gt;\nNitrogen: 1275&lt;br&gt;\nPhosphorus: 107&lt;br&gt;&quot;,&quot;Name: Mud Lake&lt;br&gt;\nChlorphylla: 7.2&lt;br&gt;\nNitrogen: 665&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Manassas&lt;br&gt;\nChlorphylla: 9.47&lt;br&gt;\nNitrogen: 353&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Pine Mountian Lake&lt;br&gt;\nChlorphylla: 24.64&lt;br&gt;\nNitrogen: 401&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Morrow Point Reservoir&lt;br&gt;\nChlorphylla: 1.77&lt;br&gt;\nNitrogen: 136&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 0.69&lt;br&gt;\nNitrogen: 4372&lt;br&gt;\nPhosphorus: 620&lt;br&gt;&quot;,&quot;Name: Lamont Reservoir&lt;br&gt;\nChlorphylla: 0.86&lt;br&gt;\nNitrogen: 156&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Roseland Lake&lt;br&gt;\nChlorphylla: 26.42&lt;br&gt;\nNitrogen: 820&lt;br&gt;\nPhosphorus: 44&lt;br&gt;&quot;,&quot;Name: Gillam Lake&lt;br&gt;\nChlorphylla: 13.12&lt;br&gt;\nNitrogen: 266&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Alpine Lake&lt;br&gt;\nChlorphylla: 0.63&lt;br&gt;\nNitrogen: 182&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Squaw Lake&lt;br&gt;\nChlorphylla: 2.28&lt;br&gt;\nNitrogen: 648&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Rehfeldt Slough&lt;br&gt;\nChlorphylla: 244.8&lt;br&gt;\nNitrogen: 5916&lt;br&gt;\nPhosphorus: 430&lt;br&gt;&quot;,&quot;Name: Grittman Lake&lt;br&gt;\nChlorphylla: 28&lt;br&gt;\nNitrogen: 756&lt;br&gt;\nPhosphorus: 283&lt;br&gt;&quot;,&quot;Name: Beaver Run Reservoir&lt;br&gt;\nChlorphylla: 1.23&lt;br&gt;\nNitrogen: 821&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Cavanaugh Lake&lt;br&gt;\nChlorphylla: 71.2&lt;br&gt;\nNitrogen: 2916&lt;br&gt;\nPhosphorus: 165&lt;br&gt;&quot;,&quot;Name: Silver Jack Reservoir&lt;br&gt;\nChlorphylla: 2.35&lt;br&gt;\nNitrogen: 112&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: South Loon Lake&lt;br&gt;\nChlorphylla: 11.84&lt;br&gt;\nNitrogen: 2447&lt;br&gt;\nPhosphorus: 61&lt;br&gt;&quot;,&quot;Name: Raystown Lake&lt;br&gt;\nChlorphylla: 3.86&lt;br&gt;\nNitrogen: 1009&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Minnow Lake&lt;br&gt;\nChlorphylla: 5.92&lt;br&gt;\nNitrogen: 4984&lt;br&gt;\nPhosphorus: 335&lt;br&gt;&quot;,&quot;Name: Brant Lake&lt;br&gt;\nChlorphylla: 48.6&lt;br&gt;\nNitrogen: 1738&lt;br&gt;\nPhosphorus: 115&lt;br&gt;&quot;,&quot;Name: Becoosin Lake&lt;br&gt;\nChlorphylla: 11.01&lt;br&gt;\nNitrogen: 651&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Johnson Lake&lt;br&gt;\nChlorphylla: 11.79&lt;br&gt;\nNitrogen: 814&lt;br&gt;\nPhosphorus: 65&lt;br&gt;&quot;,&quot;Name: Moses Lake&lt;br&gt;\nChlorphylla: 26.08&lt;br&gt;\nNitrogen: 508&lt;br&gt;\nPhosphorus: 42&lt;br&gt;&quot;,&quot;Name: Oleander Lake&lt;br&gt;\nChlorphylla: 17.76&lt;br&gt;\nNitrogen: 1016&lt;br&gt;\nPhosphorus: 117&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 3.81&lt;br&gt;\nNitrogen: 2697&lt;br&gt;\nPhosphorus: 57&lt;br&gt;&quot;,&quot;Name: Cuba Lake&lt;br&gt;\nChlorphylla: 3.18&lt;br&gt;\nNitrogen: 178&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Glade Creek Reservoir (Lower)&lt;br&gt;\nChlorphylla: 2.34&lt;br&gt;\nNitrogen: 256&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Elk City Lake&lt;br&gt;\nChlorphylla: 95.04&lt;br&gt;\nNitrogen: 2250&lt;br&gt;\nPhosphorus: 235&lt;br&gt;&quot;,&quot;Name: Lake Anne&lt;br&gt;\nChlorphylla: 6.02&lt;br&gt;\nNitrogen: 329&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Buckskin Lake&lt;br&gt;\nChlorphylla: 3.18&lt;br&gt;\nNitrogen: 1303&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Grist Millpond&lt;br&gt;\nChlorphylla: 14.94&lt;br&gt;\nNitrogen: 4022&lt;br&gt;\nPhosphorus: 181&lt;br&gt;&quot;,&quot;Name: Arrowhead Lake&lt;br&gt;\nChlorphylla: 2.11&lt;br&gt;\nNitrogen: 519&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Armington Lake&lt;br&gt;\nChlorphylla: 1.31&lt;br&gt;\nNitrogen: 234&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Cokato Lake&lt;br&gt;\nChlorphylla: 16.8&lt;br&gt;\nNitrogen: 1361&lt;br&gt;\nPhosphorus: 54&lt;br&gt;&quot;,&quot;Name: Little Otter&lt;br&gt;\nChlorphylla: 5.65&lt;br&gt;\nNitrogen: 578&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: North Mayfield&lt;br&gt;\nChlorphylla: 7.22&lt;br&gt;\nNitrogen: 1154&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Lake Meredith&lt;br&gt;\nChlorphylla: 12.96&lt;br&gt;\nNitrogen: 532&lt;br&gt;\nPhosphorus: 27&lt;br&gt;&quot;,&quot;Name: Payette Lake&lt;br&gt;\nChlorphylla: 0.14&lt;br&gt;\nNitrogen: 86&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Flat River Reservoir&lt;br&gt;\nChlorphylla: 2.08&lt;br&gt;\nNitrogen: 334&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Flat River Reservoir&lt;br&gt;\nChlorphylla: 2.35&lt;br&gt;\nNitrogen: 280&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Flat River Reservoir&lt;br&gt;\nChlorphylla: 2.08&lt;br&gt;\nNitrogen: 334&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Flat River Reservoir&lt;br&gt;\nChlorphylla: 2.35&lt;br&gt;\nNitrogen: 280&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Santa Cruz Lake&lt;br&gt;\nChlorphylla: 6.65&lt;br&gt;\nNitrogen: 217&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Vasona Reservoir&lt;br&gt;\nChlorphylla: 40.9&lt;br&gt;\nNitrogen: 704&lt;br&gt;\nPhosphorus: 81&lt;br&gt;&quot;,&quot;Name: Willow Creek Reservoir&lt;br&gt;\nChlorphylla: 54&lt;br&gt;\nNitrogen: 2188&lt;br&gt;\nPhosphorus: 518&lt;br&gt;&quot;,&quot;Name: Cooney Reservoir&lt;br&gt;\nChlorphylla: 3.49&lt;br&gt;\nNitrogen: 300&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Alkaline Lake&lt;br&gt;\nChlorphylla: 7.14&lt;br&gt;\nNitrogen: 2694&lt;br&gt;\nPhosphorus: 229&lt;br&gt;&quot;,&quot;Name: Flanagan Reservoir&lt;br&gt;\nChlorphylla: 1.82&lt;br&gt;\nNitrogen: 183&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Magic Reservoir&lt;br&gt;\nChlorphylla: 1.93&lt;br&gt;\nNitrogen: 241&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Union Pond&lt;br&gt;\nChlorphylla: 15.7&lt;br&gt;\nNitrogen: 2709&lt;br&gt;\nPhosphorus: 315&lt;br&gt;&quot;,&quot;Name: Blue Lake&lt;br&gt;\nChlorphylla: 326.88&lt;br&gt;\nNitrogen: 4897&lt;br&gt;\nPhosphorus: 590&lt;br&gt;&quot;,&quot;Name: S. Line Reservoir&lt;br&gt;\nChlorphylla: 2.53&lt;br&gt;\nNitrogen: 505&lt;br&gt;\nPhosphorus: 105&lt;br&gt;&quot;,&quot;Name: Bass Lake&lt;br&gt;\nChlorphylla: 15.28&lt;br&gt;\nNitrogen: 1153&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: Bass Lake&lt;br&gt;\nChlorphylla: 20.92&lt;br&gt;\nNitrogen: 1271&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: Bass Lake&lt;br&gt;\nChlorphylla: 15.28&lt;br&gt;\nNitrogen: 1153&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: Bass Lake&lt;br&gt;\nChlorphylla: 20.92&lt;br&gt;\nNitrogen: 1271&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 7.47&lt;br&gt;\nNitrogen: 1729&lt;br&gt;\nPhosphorus: 589&lt;br&gt;&quot;,&quot;Name: Haskell Lake&lt;br&gt;\nChlorphylla: NA&lt;br&gt;\nNitrogen: 884&lt;br&gt;\nPhosphorus: 46&lt;br&gt;&quot;,&quot;Name: Lake Allatoona&lt;br&gt;\nChlorphylla: 5.81&lt;br&gt;\nNitrogen: 182&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Lake Louise&lt;br&gt;\nChlorphylla: 10.69&lt;br&gt;\nNitrogen: 203&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Banks Lake&lt;br&gt;\nChlorphylla: 20.64&lt;br&gt;\nNitrogen: 821&lt;br&gt;\nPhosphorus: 41&lt;br&gt;&quot;,&quot;Name: Mutske&lt;br&gt;\nChlorphylla: 106.56&lt;br&gt;\nNitrogen: 3828&lt;br&gt;\nPhosphorus: 258&lt;br&gt;&quot;,&quot;Name: West Twin Lake&lt;br&gt;\nChlorphylla: 0.99&lt;br&gt;\nNitrogen: 96&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Lake Lowell&lt;br&gt;\nChlorphylla: 7.8&lt;br&gt;\nNitrogen: 361&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Lake Somerville&lt;br&gt;\nChlorphylla: 50.26&lt;br&gt;\nNitrogen: 1012&lt;br&gt;\nPhosphorus: 90&lt;br&gt;&quot;,&quot;Name: Schnur Lake&lt;br&gt;\nChlorphylla: 5.82&lt;br&gt;\nNitrogen: 708&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 102.6&lt;br&gt;\nNitrogen: 2184&lt;br&gt;\nPhosphorus: 327&lt;br&gt;&quot;,&quot;Name: Lake Thonotosass&lt;br&gt;\nChlorphylla: 187.92&lt;br&gt;\nNitrogen: 3334&lt;br&gt;\nPhosphorus: 239&lt;br&gt;&quot;,&quot;Name: Long Pond&lt;br&gt;\nChlorphylla: 5.81&lt;br&gt;\nNitrogen: 549&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Lake Kegonsa&lt;br&gt;\nChlorphylla: 20.64&lt;br&gt;\nNitrogen: 903&lt;br&gt;\nPhosphorus: 53&lt;br&gt;&quot;,&quot;Name: Cooper Creek Reservoir&lt;br&gt;\nChlorphylla: 1.22&lt;br&gt;\nNitrogen: 259&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: McGill&lt;br&gt;\nChlorphylla: 1.69&lt;br&gt;\nNitrogen: 483&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Upper Lake Mary&lt;br&gt;\nChlorphylla: 2.44&lt;br&gt;\nNitrogen: 513&lt;br&gt;\nPhosphorus: 40&lt;br&gt;&quot;,&quot;Name: Gantt Reservoir&lt;br&gt;\nChlorphylla: 10.17&lt;br&gt;\nNitrogen: 257&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Campbell Lake&lt;br&gt;\nChlorphylla: 2.95&lt;br&gt;\nNitrogen: 733&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Victoria&lt;br&gt;\nChlorphylla: 4.4&lt;br&gt;\nNitrogen: 508&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Mogadore Reservoir&lt;br&gt;\nChlorphylla: 23.2&lt;br&gt;\nNitrogen: 628&lt;br&gt;\nPhosphorus: 43&lt;br&gt;&quot;,&quot;Name: Lake Pana&lt;br&gt;\nChlorphylla: 35.2&lt;br&gt;\nNitrogen: 1274&lt;br&gt;\nPhosphorus: 49&lt;br&gt;&quot;,&quot;Name: Van Patten Lake&lt;br&gt;\nChlorphylla: 0.62&lt;br&gt;\nNitrogen: 55&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Berry Lake&lt;br&gt;\nChlorphylla: 3.19&lt;br&gt;\nNitrogen: 616&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Lake Isabel&lt;br&gt;\nChlorphylla: 2.3&lt;br&gt;\nNitrogen: 793&lt;br&gt;\nPhosphorus: 40&lt;br&gt;&quot;,&quot;Name: Dewey Lake&lt;br&gt;\nChlorphylla: 2.62&lt;br&gt;\nNitrogen: 771&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: La Cygnes Lake&lt;br&gt;\nChlorphylla: 34&lt;br&gt;\nNitrogen: 746&lt;br&gt;\nPhosphorus: 44&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 139.68&lt;br&gt;\nNitrogen: 6800&lt;br&gt;\nPhosphorus: 288&lt;br&gt;&quot;,&quot;Name: Lonetree Reservoir&lt;br&gt;\nChlorphylla: 5.15&lt;br&gt;\nNitrogen: 224&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Strawberry Reservoir&lt;br&gt;\nChlorphylla: 7.41&lt;br&gt;\nNitrogen: 454&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Bayley&lt;br&gt;\nChlorphylla: 25.44&lt;br&gt;\nNitrogen: 737&lt;br&gt;\nPhosphorus: 49&lt;br&gt;&quot;,&quot;Name: Clear Lake&lt;br&gt;\nChlorphylla: 78.29&lt;br&gt;\nNitrogen: 8603&lt;br&gt;\nPhosphorus: 349&lt;br&gt;&quot;,&quot;Name: Lake Alpine&lt;br&gt;\nChlorphylla: 3.64&lt;br&gt;\nNitrogen: 95&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Henry&#x27;s Lake&lt;br&gt;\nChlorphylla: 6.9&lt;br&gt;\nNitrogen: 466&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Lake Purdy&lt;br&gt;\nChlorphylla: 12.96&lt;br&gt;\nNitrogen: 290&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: McLeod Lake&lt;br&gt;\nChlorphylla: 9.15&lt;br&gt;\nNitrogen: 698&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: HUDSON POND&lt;br&gt;\nChlorphylla: 12.48&lt;br&gt;\nNitrogen: 559&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Clear Lake&lt;br&gt;\nChlorphylla: 1.12&lt;br&gt;\nNitrogen: 110&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Whitman Lake&lt;br&gt;\nChlorphylla: 24.14&lt;br&gt;\nNitrogen: 1593&lt;br&gt;\nPhosphorus: 432&lt;br&gt;&quot;,&quot;Name: Strakis Lake&lt;br&gt;\nChlorphylla: 2.9&lt;br&gt;\nNitrogen: 1546&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Lackawanna Lake&lt;br&gt;\nChlorphylla: 25.92&lt;br&gt;\nNitrogen: 601&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Back Lake&lt;br&gt;\nChlorphylla: 2.97&lt;br&gt;\nNitrogen: 256&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 273.6&lt;br&gt;\nNitrogen: 6603&lt;br&gt;\nPhosphorus: 618&lt;br&gt;&quot;,&quot;Name: Mott Lake&lt;br&gt;\nChlorphylla: 2.5&lt;br&gt;\nNitrogen: 86&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Twin Lakes&lt;br&gt;\nChlorphylla: 1.12&lt;br&gt;\nNitrogen: 380&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Horseshoe Lake&lt;br&gt;\nChlorphylla: 63.36&lt;br&gt;\nNitrogen: 2273&lt;br&gt;\nPhosphorus: 213&lt;br&gt;&quot;,&quot;Name: Plainfield Pond&lt;br&gt;\nChlorphylla: 1.02&lt;br&gt;\nNitrogen: 243&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Mann Lake&lt;br&gt;\nChlorphylla: 25.72&lt;br&gt;\nNitrogen: 1864&lt;br&gt;\nPhosphorus: 150&lt;br&gt;&quot;,&quot;Name: Hosmer Lake&lt;br&gt;\nChlorphylla: 8.27&lt;br&gt;\nNitrogen: 462&lt;br&gt;\nPhosphorus: 52&lt;br&gt;&quot;,&quot;Name: Lake Nokomis&lt;br&gt;\nChlorphylla: 12.11&lt;br&gt;\nNitrogen: 635&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Hulls Lake&lt;br&gt;\nChlorphylla: 3.44&lt;br&gt;\nNitrogen: 249&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Fanny Lake&lt;br&gt;\nChlorphylla: 4.21&lt;br&gt;\nNitrogen: 1343&lt;br&gt;\nPhosphorus: 122&lt;br&gt;&quot;,&quot;Name: Big Battlement Lake&lt;br&gt;\nChlorphylla: 2.28&lt;br&gt;\nNitrogen: 198&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Slatersville&lt;br&gt;\nChlorphylla: 4.61&lt;br&gt;\nNitrogen: 479&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Slatersville&lt;br&gt;\nChlorphylla: 4.77&lt;br&gt;\nNitrogen: 352&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Slatersville&lt;br&gt;\nChlorphylla: 4.61&lt;br&gt;\nNitrogen: 479&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Slatersville&lt;br&gt;\nChlorphylla: 4.77&lt;br&gt;\nNitrogen: 352&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 13.76&lt;br&gt;\nNitrogen: 631&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Kerckhoff Lake&lt;br&gt;\nChlorphylla: 1.46&lt;br&gt;\nNitrogen: 79&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 32.62&lt;br&gt;\nNitrogen: 829&lt;br&gt;\nPhosphorus: 252&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 5.6&lt;br&gt;\nNitrogen: 4034&lt;br&gt;\nPhosphorus: 127&lt;br&gt;&quot;,&quot;Name: Trout Lake&lt;br&gt;\nChlorphylla: 98.46&lt;br&gt;\nNitrogen: 2492&lt;br&gt;\nPhosphorus: 202&lt;br&gt;&quot;,&quot;Name: Dick&#x27;s Pond&lt;br&gt;\nChlorphylla: 7.44&lt;br&gt;\nNitrogen: 302&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Bunkick Lake&lt;br&gt;\nChlorphylla: 16.32&lt;br&gt;\nNitrogen: 523&lt;br&gt;\nPhosphorus: 74&lt;br&gt;&quot;,&quot;Name: Diamond M Ranch Lake&lt;br&gt;\nChlorphylla: 3.06&lt;br&gt;\nNitrogen: 417&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Boca Reservoir&lt;br&gt;\nChlorphylla: 1.65&lt;br&gt;\nNitrogen: 138&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Button Rock Reservoir&lt;br&gt;\nChlorphylla: 3.55&lt;br&gt;\nNitrogen: 123&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Silver Lake Dover&lt;br&gt;\nChlorphylla: 216&lt;br&gt;\nNitrogen: 2030&lt;br&gt;\nPhosphorus: 225&lt;br&gt;&quot;,&quot;Name: White Lake&lt;br&gt;\nChlorphylla: 2.64&lt;br&gt;\nNitrogen: 1869&lt;br&gt;\nPhosphorus: 616&lt;br&gt;&quot;,&quot;Name: Keith Sebelius Lake&lt;br&gt;\nChlorphylla: 19.2&lt;br&gt;\nNitrogen: 1435&lt;br&gt;\nPhosphorus: 195&lt;br&gt;&quot;,&quot;Name: Swofford Pond&lt;br&gt;\nChlorphylla: 7.1&lt;br&gt;\nNitrogen: 441&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Shell Lake&lt;br&gt;\nChlorphylla: 5.65&lt;br&gt;\nNitrogen: 1433&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Tipton Lakes&lt;br&gt;\nChlorphylla: 2.97&lt;br&gt;\nNitrogen: 273&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Upper Dan Forth Ponds&lt;br&gt;\nChlorphylla: 1.5&lt;br&gt;\nNitrogen: 202&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Lake Isabella&lt;br&gt;\nChlorphylla: 130.4&lt;br&gt;\nNitrogen: 3722&lt;br&gt;\nPhosphorus: 191&lt;br&gt;&quot;,&quot;Name: Harper Lake&lt;br&gt;\nChlorphylla: 2.88&lt;br&gt;\nNitrogen: 1221&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Upper Pahranagat Lake&lt;br&gt;\nChlorphylla: 2.85&lt;br&gt;\nNitrogen: 993&lt;br&gt;\nPhosphorus: 28&lt;br&gt;&quot;,&quot;Name: Mud Lake&lt;br&gt;\nChlorphylla: 3.15&lt;br&gt;\nNitrogen: 364&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Island Pond&lt;br&gt;\nChlorphylla: 1.7&lt;br&gt;\nNitrogen: 223&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Long Lake&lt;br&gt;\nChlorphylla: 6.03&lt;br&gt;\nNitrogen: 406&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 97.49&lt;br&gt;\nNitrogen: 1243&lt;br&gt;\nPhosphorus: 100&lt;br&gt;&quot;,&quot;Name: Wrights Pond&lt;br&gt;\nChlorphylla: 13.74&lt;br&gt;\nNitrogen: 464&lt;br&gt;\nPhosphorus: 50&lt;br&gt;&quot;,&quot;Name: Ocoee Lake&lt;br&gt;\nChlorphylla: 3.62&lt;br&gt;\nNitrogen: 99&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Cassadaga Lake&lt;br&gt;\nChlorphylla: 8.8&lt;br&gt;\nNitrogen: 367&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Wallum Lake&lt;br&gt;\nChlorphylla: 1.15&lt;br&gt;\nNitrogen: 251&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 114.6&lt;br&gt;\nNitrogen: 2216&lt;br&gt;\nPhosphorus: 1104&lt;br&gt;&quot;,&quot;Name: Lake Duncan&lt;br&gt;\nChlorphylla: 10.96&lt;br&gt;\nNitrogen: 326&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Okamanpeedan&lt;br&gt;\nChlorphylla: 185.4&lt;br&gt;\nNitrogen: 4153&lt;br&gt;\nPhosphorus: 360&lt;br&gt;&quot;,&quot;Name: Orange Reservoir&lt;br&gt;\nChlorphylla: 54&lt;br&gt;\nNitrogen: 403&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Cottonwood Lake&lt;br&gt;\nChlorphylla: 133.2&lt;br&gt;\nNitrogen: 3940&lt;br&gt;\nPhosphorus: 264&lt;br&gt;&quot;,&quot;Name: Ogallala Lake&lt;br&gt;\nChlorphylla: 24.26&lt;br&gt;\nNitrogen: 1386&lt;br&gt;\nPhosphorus: 58&lt;br&gt;&quot;,&quot;Name: Stoughton Lake&lt;br&gt;\nChlorphylla: 11.39&lt;br&gt;\nNitrogen: 507&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: Spiritwood Lake&lt;br&gt;\nChlorphylla: 33.94&lt;br&gt;\nNitrogen: 1673&lt;br&gt;\nPhosphorus: 40&lt;br&gt;&quot;,&quot;Name: Cave Lake&lt;br&gt;\nChlorphylla: 15.36&lt;br&gt;\nNitrogen: 384&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Tempe Lakes&lt;br&gt;\nChlorphylla: 6.82&lt;br&gt;\nNitrogen: 1455&lt;br&gt;\nPhosphorus: 28&lt;br&gt;&quot;,&quot;Name: Lookout Lake&lt;br&gt;\nChlorphylla: 6.4&lt;br&gt;\nNitrogen: 622&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Soil Conservation Service Site 5 Reservoir&lt;br&gt;\nChlorphylla: 1.82&lt;br&gt;\nNitrogen: 569&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Lake Eli&lt;br&gt;\nChlorphylla: 98.5&lt;br&gt;\nNitrogen: 3916&lt;br&gt;\nPhosphorus: 1543&lt;br&gt;&quot;,&quot;Name: Lake Tranquility&lt;br&gt;\nChlorphylla: 17.92&lt;br&gt;\nNitrogen: 729&lt;br&gt;\nPhosphorus: 34&lt;br&gt;&quot;,&quot;Name: Vesper Lake&lt;br&gt;\nChlorphylla: 3.28&lt;br&gt;\nNitrogen: 443&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Lorraine&lt;br&gt;\nChlorphylla: 50.93&lt;br&gt;\nNitrogen: 1896&lt;br&gt;\nPhosphorus: 819&lt;br&gt;&quot;,&quot;Name: Red Rock Lake&lt;br&gt;\nChlorphylla: 6.57&lt;br&gt;\nNitrogen: 2621&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Lake Lewisville&lt;br&gt;\nChlorphylla: 30.24&lt;br&gt;\nNitrogen: 760&lt;br&gt;\nPhosphorus: 47&lt;br&gt;&quot;,&quot;Name: Flat Top Lake&lt;br&gt;\nChlorphylla: 3.07&lt;br&gt;\nNitrogen: 340&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Freemont Lake&lt;br&gt;\nChlorphylla: 1.06&lt;br&gt;\nNitrogen: 91&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Freemont Lake&lt;br&gt;\nChlorphylla: 0.46&lt;br&gt;\nNitrogen: 69&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Freemont Lake&lt;br&gt;\nChlorphylla: 1.06&lt;br&gt;\nNitrogen: 91&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Freemont Lake&lt;br&gt;\nChlorphylla: 0.46&lt;br&gt;\nNitrogen: 69&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Bassett Lake&lt;br&gt;\nChlorphylla: 4.24&lt;br&gt;\nNitrogen: 418&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Wallace Pond&lt;br&gt;\nChlorphylla: 5.23&lt;br&gt;\nNitrogen: 361&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Pennyrile Lake&lt;br&gt;\nChlorphylla: 5.01&lt;br&gt;\nNitrogen: 335&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Beardsley Pond&lt;br&gt;\nChlorphylla: 2.27&lt;br&gt;\nNitrogen: 755&lt;br&gt;\nPhosphorus: 51&lt;br&gt;&quot;,&quot;Name: Turtlehead Pond&lt;br&gt;\nChlorphylla: 8.32&lt;br&gt;\nNitrogen: 427&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Lynn Lake&lt;br&gt;\nChlorphylla: 27.5&lt;br&gt;\nNitrogen: 1505&lt;br&gt;\nPhosphorus: 511&lt;br&gt;&quot;,&quot;Name: Pennock&lt;br&gt;\nChlorphylla: 76.8&lt;br&gt;\nNitrogen: 1748&lt;br&gt;\nPhosphorus: 126&lt;br&gt;&quot;,&quot;Name: Fools Hollow Lake&lt;br&gt;\nChlorphylla: 3.01&lt;br&gt;\nNitrogen: 546&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Johnson Lake&lt;br&gt;\nChlorphylla: 50.04&lt;br&gt;\nNitrogen: 1224&lt;br&gt;\nPhosphorus: 51&lt;br&gt;&quot;,&quot;Name: Lake Warren Hood&lt;br&gt;\nChlorphylla: 6.45&lt;br&gt;\nNitrogen: 357&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: McMath Millpond&lt;br&gt;\nChlorphylla: 27.2&lt;br&gt;\nNitrogen: 269&lt;br&gt;\nPhosphorus: 39&lt;br&gt;&quot;,&quot;Name: Burgess Falls Lake&lt;br&gt;\nChlorphylla: 120.8&lt;br&gt;\nNitrogen: 2841&lt;br&gt;\nPhosphorus: 323&lt;br&gt;&quot;,&quot;Name: Half Moon Lake&lt;br&gt;\nChlorphylla: 2.08&lt;br&gt;\nNitrogen: 331&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Bluestem Lake&lt;br&gt;\nChlorphylla: 6.23&lt;br&gt;\nNitrogen: 309&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Newcastle Reservoir&lt;br&gt;\nChlorphylla: 39.7&lt;br&gt;\nNitrogen: 1001&lt;br&gt;\nPhosphorus: 88&lt;br&gt;&quot;,&quot;Name: Waneka Reservoir&lt;br&gt;\nChlorphylla: 11.6&lt;br&gt;\nNitrogen: 543&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Eagle Lake&lt;br&gt;\nChlorphylla: 68.4&lt;br&gt;\nNitrogen: 1510&lt;br&gt;\nPhosphorus: 114&lt;br&gt;&quot;,&quot;Name: Unnamed Lake&lt;br&gt;\nChlorphylla: 272&lt;br&gt;\nNitrogen: 15563&lt;br&gt;\nPhosphorus: 1617&lt;br&gt;&quot;,&quot;Name: Table Rock Reservoir&lt;br&gt;\nChlorphylla: 1.3&lt;br&gt;\nNitrogen: 44&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Glenns Lake&lt;br&gt;\nChlorphylla: 0.79&lt;br&gt;\nNitrogen: 104&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Saguaro Lake&lt;br&gt;\nChlorphylla: 8.05&lt;br&gt;\nNitrogen: 583&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Ganado Lake&lt;br&gt;\nChlorphylla: 2.7&lt;br&gt;\nNitrogen: 1184&lt;br&gt;\nPhosphorus: 51&lt;br&gt;&quot;,&quot;Name: Carey Lake&lt;br&gt;\nChlorphylla: 55.58&lt;br&gt;\nNitrogen: 1460&lt;br&gt;\nPhosphorus: 109&lt;br&gt;&quot;,&quot;Name: Heart Lake&lt;br&gt;\nChlorphylla: 1.56&lt;br&gt;\nNitrogen: 71&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Ski Lake&lt;br&gt;\nChlorphylla: 2.57&lt;br&gt;\nNitrogen: 196&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Willow Reservoir&lt;br&gt;\nChlorphylla: 31.84&lt;br&gt;\nNitrogen: 875&lt;br&gt;\nPhosphorus: 39&lt;br&gt;&quot;,&quot;Name: Grand Lake St. Marys&lt;br&gt;\nChlorphylla: 189.36&lt;br&gt;\nNitrogen: 3572&lt;br&gt;\nPhosphorus: 395&lt;br&gt;&quot;,&quot;Name: Ozette Lake&lt;br&gt;\nChlorphylla: 4.7&lt;br&gt;\nNitrogen: 189&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Rockport Reservoir&lt;br&gt;\nChlorphylla: 2.3&lt;br&gt;\nNitrogen: 486&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Eureka Lake&lt;br&gt;\nChlorphylla: 7.8&lt;br&gt;\nNitrogen: 1104&lt;br&gt;\nPhosphorus: 44&lt;br&gt;&quot;,&quot;Name: Jean Neustadt&lt;br&gt;\nChlorphylla: 9.47&lt;br&gt;\nNitrogen: 483&lt;br&gt;\nPhosphorus: 31&lt;br&gt;&quot;,&quot;Name: Lake Townsend&lt;br&gt;\nChlorphylla: 12.72&lt;br&gt;\nNitrogen: 469&lt;br&gt;\nPhosphorus: 31&lt;br&gt;&quot;,&quot;Name: Tichigan Lake&lt;br&gt;\nChlorphylla: 11.47&lt;br&gt;\nNitrogen: 913&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Coralville Lake&lt;br&gt;\nChlorphylla: 11.17&lt;br&gt;\nNitrogen: 6672&lt;br&gt;\nPhosphorus: 222&lt;br&gt;&quot;,&quot;Name: Coralville Lake&lt;br&gt;\nChlorphylla: 6.67&lt;br&gt;\nNitrogen: 1710&lt;br&gt;\nPhosphorus: 232&lt;br&gt;&quot;,&quot;Name: Coralville Lake&lt;br&gt;\nChlorphylla: 11.17&lt;br&gt;\nNitrogen: 6672&lt;br&gt;\nPhosphorus: 222&lt;br&gt;&quot;,&quot;Name: Coralville Lake&lt;br&gt;\nChlorphylla: 6.67&lt;br&gt;\nNitrogen: 1710&lt;br&gt;\nPhosphorus: 232&lt;br&gt;&quot;,&quot;Name: Fox Lake&lt;br&gt;\nChlorphylla: 3.57&lt;br&gt;\nNitrogen: 654&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Atwood Lake&lt;br&gt;\nChlorphylla: 14.38&lt;br&gt;\nNitrogen: 446&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: Neegronda Reservoir&lt;br&gt;\nChlorphylla: 9.22&lt;br&gt;\nNitrogen: 973&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Crystal Lake&lt;br&gt;\nChlorphylla: 83.52&lt;br&gt;\nNitrogen: 1489&lt;br&gt;\nPhosphorus: 100&lt;br&gt;&quot;,&quot;Name: Cap Mauzy Lake&lt;br&gt;\nChlorphylla: 29.48&lt;br&gt;\nNitrogen: 1184&lt;br&gt;\nPhosphorus: 61&lt;br&gt;&quot;,&quot;Name: Lake Greeley&lt;br&gt;\nChlorphylla: 11.66&lt;br&gt;\nNitrogen: 479&lt;br&gt;\nPhosphorus: 44&lt;br&gt;&quot;,&quot;Name: Smith Reservoir&lt;br&gt;\nChlorphylla: 0.49&lt;br&gt;\nNitrogen: 87&lt;br&gt;\nPhosphorus: 43&lt;br&gt;&quot;,&quot;Name: South Dry Wood Lake&lt;br&gt;\nChlorphylla: 256.32&lt;br&gt;\nNitrogen: 5378&lt;br&gt;\nPhosphorus: 407&lt;br&gt;&quot;,&quot;Name: Santa Fe Lake&lt;br&gt;\nChlorphylla: 14.32&lt;br&gt;\nNitrogen: 1129&lt;br&gt;\nPhosphorus: 276&lt;br&gt;&quot;,&quot;Name: Soldiers Annex&lt;br&gt;\nChlorphylla: 9.98&lt;br&gt;\nNitrogen: 433&lt;br&gt;\nPhosphorus: 141&lt;br&gt;&quot;,&quot;Name: Martin Lake&lt;br&gt;\nChlorphylla: 14.16&lt;br&gt;\nNitrogen: 3441&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: Pine Lake&lt;br&gt;\nChlorphylla: 6.14&lt;br&gt;\nNitrogen: 720&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Imperial Rerservoir&lt;br&gt;\nChlorphylla: 11.8&lt;br&gt;\nNitrogen: 878&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: West Leaf Lake&lt;br&gt;\nChlorphylla: 6.11&lt;br&gt;\nNitrogen: 630&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: O&#x27;Brien Reservoir Number 1&lt;br&gt;\nChlorphylla: 41.6&lt;br&gt;\nNitrogen: 1463&lt;br&gt;\nPhosphorus: 134&lt;br&gt;&quot;,&quot;Name: Phillips Reservoir&lt;br&gt;\nChlorphylla: 15.89&lt;br&gt;\nNitrogen: 513&lt;br&gt;\nPhosphorus: 42&lt;br&gt;&quot;,&quot;Name: Corona Lake&lt;br&gt;\nChlorphylla: 23.04&lt;br&gt;\nNitrogen: 865&lt;br&gt;\nPhosphorus: 1386&lt;br&gt;&quot;,&quot;Name: Willow Creek Reservoir&lt;br&gt;\nChlorphylla: 11.93&lt;br&gt;\nNitrogen: 404&lt;br&gt;\nPhosphorus: 204&lt;br&gt;&quot;,&quot;Name: Aspen Lake&lt;br&gt;\nChlorphylla: 3.38&lt;br&gt;\nNitrogen: 449&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Oliver Reservoir&lt;br&gt;\nChlorphylla: 30.68&lt;br&gt;\nNitrogen: 1137&lt;br&gt;\nPhosphorus: 133&lt;br&gt;&quot;,&quot;Name: Leesville Lake&lt;br&gt;\nChlorphylla: 6.96&lt;br&gt;\nNitrogen: 303&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Lyman Lake&lt;br&gt;\nChlorphylla: 13.86&lt;br&gt;\nNitrogen: 520&lt;br&gt;\nPhosphorus: 237&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 69.19&lt;br&gt;\nNitrogen: 4472&lt;br&gt;\nPhosphorus: 495&lt;br&gt;&quot;,&quot;Name: Forbes Lake&lt;br&gt;\nChlorphylla: 15.65&lt;br&gt;\nNitrogen: 700&lt;br&gt;\nPhosphorus: 48&lt;br&gt;&quot;,&quot;Name: Browns Lake&lt;br&gt;\nChlorphylla: 77.2&lt;br&gt;\nNitrogen: 1603&lt;br&gt;\nPhosphorus: 135&lt;br&gt;&quot;,&quot;Name: Marlette Lake&lt;br&gt;\nChlorphylla: 1.29&lt;br&gt;\nNitrogen: 358&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Phelps Lake&lt;br&gt;\nChlorphylla: 0.83&lt;br&gt;\nNitrogen: 111&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Soper Pond&lt;br&gt;\nChlorphylla: 3.44&lt;br&gt;\nNitrogen: 697&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Peaked Mountian Pond&lt;br&gt;\nChlorphylla: 1.29&lt;br&gt;\nNitrogen: 171&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 37.87&lt;br&gt;\nNitrogen: 1410&lt;br&gt;\nPhosphorus: 102&lt;br&gt;&quot;,&quot;Name: Cripple Creek #2&lt;br&gt;\nChlorphylla: 1.73&lt;br&gt;\nNitrogen: 237&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Little Big Wood Pond&lt;br&gt;\nChlorphylla: 2.38&lt;br&gt;\nNitrogen: 244&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Falls Lake&lt;br&gt;\nChlorphylla: 19.5&lt;br&gt;\nNitrogen: 340&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake De Smet&lt;br&gt;\nChlorphylla: 1.24&lt;br&gt;\nNitrogen: 226&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: McKeel Lake&lt;br&gt;\nChlorphylla: 98&lt;br&gt;\nNitrogen: 14400&lt;br&gt;\nPhosphorus: 447&lt;br&gt;&quot;,&quot;Name: Lake Mead&lt;br&gt;\nChlorphylla: 1.02&lt;br&gt;\nNitrogen: 1160&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Atkins Lake&lt;br&gt;\nChlorphylla: 1.47&lt;br&gt;\nNitrogen: 252&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Pelican Lake&lt;br&gt;\nChlorphylla: 2.72&lt;br&gt;\nNitrogen: 498&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Georgetown Lake&lt;br&gt;\nChlorphylla: 1.56&lt;br&gt;\nNitrogen: 354&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Winnisquam Lake&lt;br&gt;\nChlorphylla: 1.3&lt;br&gt;\nNitrogen: 174&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Beulah Reservoir&lt;br&gt;\nChlorphylla: 8.16&lt;br&gt;\nNitrogen: 775&lt;br&gt;\nPhosphorus: 136&lt;br&gt;&quot;,&quot;Name: Waldo Lake&lt;br&gt;\nChlorphylla: 0.07&lt;br&gt;\nNitrogen: 5&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Fish Lake&lt;br&gt;\nChlorphylla: 18.72&lt;br&gt;\nNitrogen: 1198&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: Muskegon Lake&lt;br&gt;\nChlorphylla: 11.89&lt;br&gt;\nNitrogen: 519&lt;br&gt;\nPhosphorus: 34&lt;br&gt;&quot;,&quot;Name: Winters Creek Lake&lt;br&gt;\nChlorphylla: 22.56&lt;br&gt;\nNitrogen: 866&lt;br&gt;\nPhosphorus: 37&lt;br&gt;&quot;,&quot;Name: Long Lake&lt;br&gt;\nChlorphylla: 2.38&lt;br&gt;\nNitrogen: 306&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Blue Ridge Lake&lt;br&gt;\nChlorphylla: 2.29&lt;br&gt;\nNitrogen: 93&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: West Alkali Reservoir&lt;br&gt;\nChlorphylla: 25.23&lt;br&gt;\nNitrogen: 1419&lt;br&gt;\nPhosphorus: 523&lt;br&gt;&quot;,&quot;Name: Knowlton Pond&lt;br&gt;\nChlorphylla: 14.96&lt;br&gt;\nNitrogen: 552&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: Boysen Reservoir&lt;br&gt;\nChlorphylla: 1.72&lt;br&gt;\nNitrogen: 234&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Granite Springs Reservoir&lt;br&gt;\nChlorphylla: 2.78&lt;br&gt;\nNitrogen: 288&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Upper Dog Run&lt;br&gt;\nChlorphylla: 2.16&lt;br&gt;\nNitrogen: 276&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Long Lake (Main Bay)&lt;br&gt;\nChlorphylla: 8.56&lt;br&gt;\nNitrogen: 511&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Blue Lake&lt;br&gt;\nChlorphylla: 3.64&lt;br&gt;\nNitrogen: 189&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Porcupine Reservoir&lt;br&gt;\nChlorphylla: 1.4&lt;br&gt;\nNitrogen: 190&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Lake Wanalain&lt;br&gt;\nChlorphylla: 15.5&lt;br&gt;\nNitrogen: 1998&lt;br&gt;\nPhosphorus: 1016&lt;br&gt;&quot;,&quot;Name: Little Clear Lake&lt;br&gt;\nChlorphylla: 47.6&lt;br&gt;\nNitrogen: 3553&lt;br&gt;\nPhosphorus: 145&lt;br&gt;&quot;,&quot;Name: Willow Lake&lt;br&gt;\nChlorphylla: 0.86&lt;br&gt;\nNitrogen: 140&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Prairie Creek&lt;br&gt;\nChlorphylla: 28.58&lt;br&gt;\nNitrogen: 787&lt;br&gt;\nPhosphorus: 54&lt;br&gt;&quot;,&quot;Name: Lake Rolla&lt;br&gt;\nChlorphylla: 13.36&lt;br&gt;\nNitrogen: 938&lt;br&gt;\nPhosphorus: 619&lt;br&gt;&quot;,&quot;Name: Fence Lake&lt;br&gt;\nChlorphylla: 1.68&lt;br&gt;\nNitrogen: 101&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Stockade&lt;br&gt;\nChlorphylla: 3.75&lt;br&gt;\nNitrogen: 952&lt;br&gt;\nPhosphorus: 68&lt;br&gt;&quot;,&quot;Name: Sugar Creek Lake&lt;br&gt;\nChlorphylla: 84&lt;br&gt;\nNitrogen: 923&lt;br&gt;\nPhosphorus: 176&lt;br&gt;&quot;,&quot;Name: Miles Pond&lt;br&gt;\nChlorphylla: 2.08&lt;br&gt;\nNitrogen: 248&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Whitegrass-Waterhole Creeks Site 9 Reservoir&lt;br&gt;\nChlorphylla: 32.64&lt;br&gt;\nNitrogen: 878&lt;br&gt;\nPhosphorus: 115&lt;br&gt;&quot;,&quot;Name: Lake Hennington&lt;br&gt;\nChlorphylla: 5.22&lt;br&gt;\nNitrogen: 186&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Fish Lake&lt;br&gt;\nChlorphylla: 38.3&lt;br&gt;\nNitrogen: 1800&lt;br&gt;\nPhosphorus: 40&lt;br&gt;&quot;,&quot;Name: Wheeler&#x27;s Pond&lt;br&gt;\nChlorphylla: 65.2&lt;br&gt;\nNitrogen: 856&lt;br&gt;\nPhosphorus: 56&lt;br&gt;&quot;,&quot;Name: Crow Wing&lt;br&gt;\nChlorphylla: 20.32&lt;br&gt;\nNitrogen: 960&lt;br&gt;\nPhosphorus: 40&lt;br&gt;&quot;,&quot;Name: Little Simer Pond&lt;br&gt;\nChlorphylla: 0.53&lt;br&gt;\nNitrogen: 551&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Highland Lake&lt;br&gt;\nChlorphylla: 3.74&lt;br&gt;\nNitrogen: 214&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Lewis Lake&lt;br&gt;\nChlorphylla: 2.35&lt;br&gt;\nNitrogen: 449&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Beebe Lake&lt;br&gt;\nChlorphylla: 1.5&lt;br&gt;\nNitrogen: 204&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Vaughn Pond&lt;br&gt;\nChlorphylla: 5.28&lt;br&gt;\nNitrogen: 416&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 1.14&lt;br&gt;\nNitrogen: 1536&lt;br&gt;\nPhosphorus: 378&lt;br&gt;&quot;,&quot;Name: Round Lake&lt;br&gt;\nChlorphylla: 3.82&lt;br&gt;\nNitrogen: 524&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Little River Reservoir&lt;br&gt;\nChlorphylla: 22.88&lt;br&gt;\nNitrogen: 425&lt;br&gt;\nPhosphorus: 40&lt;br&gt;&quot;,&quot;Name: Lake Helen&lt;br&gt;\nChlorphylla: 34.2&lt;br&gt;\nNitrogen: 3391&lt;br&gt;\nPhosphorus: 278&lt;br&gt;&quot;,&quot;Name: Lake Waynoka&lt;br&gt;\nChlorphylla: 9.26&lt;br&gt;\nNitrogen: 479&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: Eureka Reservoir&lt;br&gt;\nChlorphylla: 0.52&lt;br&gt;\nNitrogen: 86&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Lake Zoar&lt;br&gt;\nChlorphylla: 22.72&lt;br&gt;\nNitrogen: 901&lt;br&gt;\nPhosphorus: 38&lt;br&gt;&quot;,&quot;Name: Reeder Lake&lt;br&gt;\nChlorphylla: 7.19&lt;br&gt;\nNitrogen: 880&lt;br&gt;\nPhosphorus: 41&lt;br&gt;&quot;,&quot;Name: Lake Chemung&lt;br&gt;\nChlorphylla: 9.81&lt;br&gt;\nNitrogen: 568&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Five Island Lake&lt;br&gt;\nChlorphylla: 66.24&lt;br&gt;\nNitrogen: 1704&lt;br&gt;\nPhosphorus: 77&lt;br&gt;&quot;,&quot;Name: Little Deep Fork Creek Site 10 Reservoir&lt;br&gt;\nChlorphylla: 21.44&lt;br&gt;\nNitrogen: 749&lt;br&gt;\nPhosphorus: 69&lt;br&gt;&quot;,&quot;Name: Richey Lake&lt;br&gt;\nChlorphylla: 7.56&lt;br&gt;\nNitrogen: 1174&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 138.24&lt;br&gt;\nNitrogen: 5003&lt;br&gt;\nPhosphorus: 553&lt;br&gt;&quot;,&quot;Name: Fayant Lake&lt;br&gt;\nChlorphylla: 6.66&lt;br&gt;\nNitrogen: 439&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Mill Lake&lt;br&gt;\nChlorphylla: 1.98&lt;br&gt;\nNitrogen: 563&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Ingham Lake&lt;br&gt;\nChlorphylla: 255.6&lt;br&gt;\nNitrogen: 4348&lt;br&gt;\nPhosphorus: 160&lt;br&gt;&quot;,&quot;Name: Lake View Lake&lt;br&gt;\nChlorphylla: 39.89&lt;br&gt;\nNitrogen: 856&lt;br&gt;\nPhosphorus: 94&lt;br&gt;&quot;,&quot;Name: Swimming River Reservoir&lt;br&gt;\nChlorphylla: 10.56&lt;br&gt;\nNitrogen: 441&lt;br&gt;\nPhosphorus: 25&lt;br&gt;&quot;,&quot;Name: August Lake&lt;br&gt;\nChlorphylla: 4&lt;br&gt;\nNitrogen: 561&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Kelly Lake&lt;br&gt;\nChlorphylla: 125.28&lt;br&gt;\nNitrogen: 1454&lt;br&gt;\nPhosphorus: 81&lt;br&gt;&quot;,&quot;Name: Grimes&lt;br&gt;\nChlorphylla: 3.31&lt;br&gt;\nNitrogen: 1878&lt;br&gt;\nPhosphorus: 190&lt;br&gt;&quot;,&quot;Name: Pickwick Lake&lt;br&gt;\nChlorphylla: 18.4&lt;br&gt;\nNitrogen: 344&lt;br&gt;\nPhosphorus: 54&lt;br&gt;&quot;,&quot;Name: Keula Lake&lt;br&gt;\nChlorphylla: 1.26&lt;br&gt;\nNitrogen: 236&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Sam Rayburn&lt;br&gt;\nChlorphylla: 9.6&lt;br&gt;\nNitrogen: 285&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Kirwin Reservoir&lt;br&gt;\nChlorphylla: 28.66&lt;br&gt;\nNitrogen: 1329&lt;br&gt;\nPhosphorus: 295&lt;br&gt;&quot;,&quot;Name: Camp Seneca Lake&lt;br&gt;\nChlorphylla: 89.71&lt;br&gt;\nNitrogen: 1477&lt;br&gt;\nPhosphorus: 88&lt;br&gt;&quot;,&quot;Name: Indian Lake&lt;br&gt;\nChlorphylla: 8.75&lt;br&gt;\nNitrogen: 464&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Cle Elum Lake&lt;br&gt;\nChlorphylla: 0.15&lt;br&gt;\nNitrogen: 28&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Lake of the Woods&lt;br&gt;\nChlorphylla: 0.8&lt;br&gt;\nNitrogen: 171&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Lake Winnebago&lt;br&gt;\nChlorphylla: 39.8&lt;br&gt;\nNitrogen: 1406&lt;br&gt;\nPhosphorus: 161&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 155.52&lt;br&gt;\nNitrogen: 2372&lt;br&gt;\nPhosphorus: 243&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 165.6&lt;br&gt;\nNitrogen: 2213&lt;br&gt;\nPhosphorus: 246&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 155.52&lt;br&gt;\nNitrogen: 2372&lt;br&gt;\nPhosphorus: 243&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 165.6&lt;br&gt;\nNitrogen: 2213&lt;br&gt;\nPhosphorus: 246&lt;br&gt;&quot;,&quot;Name: Grass Lake&lt;br&gt;\nChlorphylla: 23.11&lt;br&gt;\nNitrogen: 1183&lt;br&gt;\nPhosphorus: 774&lt;br&gt;&quot;,&quot;Name: Ice Lake&lt;br&gt;\nChlorphylla: 0.34&lt;br&gt;\nNitrogen: 68&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Echo Lake&lt;br&gt;\nChlorphylla: 4.53&lt;br&gt;\nNitrogen: 406&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Horse Creek Reservoir&lt;br&gt;\nChlorphylla: 318.24&lt;br&gt;\nNitrogen: 2784&lt;br&gt;\nPhosphorus: 530&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 13.86&lt;br&gt;\nNitrogen: 3950&lt;br&gt;\nPhosphorus: 92&lt;br&gt;&quot;,&quot;Name: Pennoyer Farm Pond&lt;br&gt;\nChlorphylla: 3.58&lt;br&gt;\nNitrogen: 273&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Lake Mary Ronan&lt;br&gt;\nChlorphylla: 1.04&lt;br&gt;\nNitrogen: 293&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Alkaline Lake&lt;br&gt;\nChlorphylla: 12.67&lt;br&gt;\nNitrogen: 2503&lt;br&gt;\nPhosphorus: 90&lt;br&gt;&quot;,&quot;Name: Spencer Dam Reservoir&lt;br&gt;\nChlorphylla: 36.17&lt;br&gt;\nNitrogen: 665&lt;br&gt;\nPhosphorus: 171&lt;br&gt;&quot;,&quot;Name: Quivira Lake&lt;br&gt;\nChlorphylla: 2.9&lt;br&gt;\nNitrogen: 262&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Highland Lake&lt;br&gt;\nChlorphylla: 128.74&lt;br&gt;\nNitrogen: 1713&lt;br&gt;\nPhosphorus: 109&lt;br&gt;&quot;,&quot;Name: Alruss&lt;br&gt;\nChlorphylla: 2.1&lt;br&gt;\nNitrogen: 230&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: O&#x27;Shaughnessey Reservoir&lt;br&gt;\nChlorphylla: 10.98&lt;br&gt;\nNitrogen: 6469&lt;br&gt;\nPhosphorus: 224&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 49.03&lt;br&gt;\nNitrogen: 7750&lt;br&gt;\nPhosphorus: 733&lt;br&gt;&quot;,&quot;Name: Lake Mattoon&lt;br&gt;\nChlorphylla: 53.64&lt;br&gt;\nNitrogen: 1328&lt;br&gt;\nPhosphorus: 126&lt;br&gt;&quot;,&quot;Name: Lake Mattoon&lt;br&gt;\nChlorphylla: 61.02&lt;br&gt;\nNitrogen: 1083&lt;br&gt;\nPhosphorus: 102&lt;br&gt;&quot;,&quot;Name: Lake Mattoon&lt;br&gt;\nChlorphylla: 53.64&lt;br&gt;\nNitrogen: 1328&lt;br&gt;\nPhosphorus: 126&lt;br&gt;&quot;,&quot;Name: Lake Mattoon&lt;br&gt;\nChlorphylla: 61.02&lt;br&gt;\nNitrogen: 1083&lt;br&gt;\nPhosphorus: 102&lt;br&gt;&quot;,&quot;Name: North Ash Lake&lt;br&gt;\nChlorphylla: 46.22&lt;br&gt;\nNitrogen: 1500&lt;br&gt;\nPhosphorus: 193&lt;br&gt;&quot;,&quot;Name: Lake Hickory&lt;br&gt;\nChlorphylla: 7.57&lt;br&gt;\nNitrogen: 118&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Moon Lake&lt;br&gt;\nChlorphylla: 12.5&lt;br&gt;\nNitrogen: 558&lt;br&gt;\nPhosphorus: 63&lt;br&gt;&quot;,&quot;Name: Powderhorn&lt;br&gt;\nChlorphylla: 4.42&lt;br&gt;\nNitrogen: 1041&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Oaks Park Reservoir&lt;br&gt;\nChlorphylla: 2.21&lt;br&gt;\nNitrogen: 265&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Clearwater Lake&lt;br&gt;\nChlorphylla: 8.02&lt;br&gt;\nNitrogen: 165&lt;br&gt;\nPhosphorus: 144&lt;br&gt;&quot;,&quot;Name: Kettle Brook Reservoir #1&lt;br&gt;\nChlorphylla: 5.92&lt;br&gt;\nNitrogen: 318&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Laguna Madre&lt;br&gt;\nChlorphylla: 1.18&lt;br&gt;\nNitrogen: 433&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Wononpakook Lake&lt;br&gt;\nChlorphylla: 4.18&lt;br&gt;\nNitrogen: 315&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Blue Ridge&lt;br&gt;\nChlorphylla: 4.32&lt;br&gt;\nNitrogen: 336&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Thornapple Lake&lt;br&gt;\nChlorphylla: 23.68&lt;br&gt;\nNitrogen: 634&lt;br&gt;\nPhosphorus: 65&lt;br&gt;&quot;,&quot;Name: Crooked Lake&lt;br&gt;\nChlorphylla: 6.19&lt;br&gt;\nNitrogen: 504&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Flat Lake&lt;br&gt;\nChlorphylla: 9.43&lt;br&gt;\nNitrogen: 826&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Lake Palmdale&lt;br&gt;\nChlorphylla: 10.16&lt;br&gt;\nNitrogen: 824&lt;br&gt;\nPhosphorus: 45&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 9.52&lt;br&gt;\nNitrogen: 768&lt;br&gt;\nPhosphorus: 59&lt;br&gt;&quot;,&quot;Name: Struble Lake&lt;br&gt;\nChlorphylla: 17.83&lt;br&gt;\nNitrogen: 724&lt;br&gt;\nPhosphorus: 60&lt;br&gt;&quot;,&quot;Name: Windsor Lake&lt;br&gt;\nChlorphylla: 42.24&lt;br&gt;\nNitrogen: 1414&lt;br&gt;\nPhosphorus: 775&lt;br&gt;&quot;,&quot;Name: Mother Lake&lt;br&gt;\nChlorphylla: 48&lt;br&gt;\nNitrogen: 6934&lt;br&gt;\nPhosphorus: 242&lt;br&gt;&quot;,&quot;Name: Lamb Lake&lt;br&gt;\nChlorphylla: 3.79&lt;br&gt;\nNitrogen: 500&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: River Reservoir&lt;br&gt;\nChlorphylla: 13.72&lt;br&gt;\nNitrogen: 648&lt;br&gt;\nPhosphorus: 129&lt;br&gt;&quot;,&quot;Name: Lake McDonald&lt;br&gt;\nChlorphylla: 0.25&lt;br&gt;\nNitrogen: 224&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 28.68&lt;br&gt;\nNitrogen: 3069&lt;br&gt;\nPhosphorus: 122&lt;br&gt;&quot;,&quot;Name: Lake Au Sable&lt;br&gt;\nChlorphylla: 3.08&lt;br&gt;\nNitrogen: 541&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Fletcher Lake&lt;br&gt;\nChlorphylla: 4.01&lt;br&gt;\nNitrogen: 778&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Sportsman Lake&lt;br&gt;\nChlorphylla: 8.08&lt;br&gt;\nNitrogen: 424&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Crystal Lake&lt;br&gt;\nChlorphylla: 1.15&lt;br&gt;\nNitrogen: 197&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Clark Lake&lt;br&gt;\nChlorphylla: 2.62&lt;br&gt;\nNitrogen: 461&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Lost Creek Reservoir&lt;br&gt;\nChlorphylla: 1.22&lt;br&gt;\nNitrogen: 240&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Woodland Lake&lt;br&gt;\nChlorphylla: 3&lt;br&gt;\nNitrogen: 241&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Long Pond&lt;br&gt;\nChlorphylla: 2.76&lt;br&gt;\nNitrogen: 298&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Lake Jennie&lt;br&gt;\nChlorphylla: 32.11&lt;br&gt;\nNitrogen: 1328&lt;br&gt;\nPhosphorus: 69&lt;br&gt;&quot;,&quot;Name: Lake Rim&lt;br&gt;\nChlorphylla: 16.64&lt;br&gt;\nNitrogen: 328&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Mutton Lake&lt;br&gt;\nChlorphylla: 349.2&lt;br&gt;\nNitrogen: 2741&lt;br&gt;\nPhosphorus: 133&lt;br&gt;&quot;,&quot;Name: Beaverdam Lake&lt;br&gt;\nChlorphylla: 82.22&lt;br&gt;\nNitrogen: 251&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Dean Lake&lt;br&gt;\nChlorphylla: 1.81&lt;br&gt;\nNitrogen: 133&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Lake Seminole&lt;br&gt;\nChlorphylla: 104.53&lt;br&gt;\nNitrogen: 2869&lt;br&gt;\nPhosphorus: 62&lt;br&gt;&quot;,&quot;Name: Anawana Lake&lt;br&gt;\nChlorphylla: 1.87&lt;br&gt;\nNitrogen: 281&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Fern Ridge Lake&lt;br&gt;\nChlorphylla: 6.18&lt;br&gt;\nNitrogen: 96&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Soil Conservation Service Site 6 Reservoir&lt;br&gt;\nChlorphylla: 48.96&lt;br&gt;\nNitrogen: 984&lt;br&gt;\nPhosphorus: 152&lt;br&gt;&quot;,&quot;Name: Koontz Lake&lt;br&gt;\nChlorphylla: 16.57&lt;br&gt;\nNitrogen: 753&lt;br&gt;\nPhosphorus: 26&lt;br&gt;&quot;,&quot;Name: Round Lake&lt;br&gt;\nChlorphylla: 2.64&lt;br&gt;\nNitrogen: 611&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Whitewater Lake&lt;br&gt;\nChlorphylla: 49.58&lt;br&gt;\nNitrogen: 836&lt;br&gt;\nPhosphorus: 44&lt;br&gt;&quot;,&quot;Name: Hamilton Lake&lt;br&gt;\nChlorphylla: 5.04&lt;br&gt;\nNitrogen: 230&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: McDonald&lt;br&gt;\nChlorphylla: 2.98&lt;br&gt;\nNitrogen: 834&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Round Lake&lt;br&gt;\nChlorphylla: 2.5&lt;br&gt;\nNitrogen: 240&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 138.82&lt;br&gt;\nNitrogen: 1340&lt;br&gt;\nPhosphorus: 182&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 43.78&lt;br&gt;\nNitrogen: 1237&lt;br&gt;\nPhosphorus: 148&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 138.82&lt;br&gt;\nNitrogen: 1340&lt;br&gt;\nPhosphorus: 182&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 43.78&lt;br&gt;\nNitrogen: 1237&lt;br&gt;\nPhosphorus: 148&lt;br&gt;&quot;,&quot;Name: Pocono Lake&lt;br&gt;\nChlorphylla: 6.55&lt;br&gt;\nNitrogen: 437&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Douglas Pond?&lt;br&gt;\nChlorphylla: 5.72&lt;br&gt;\nNitrogen: 4184&lt;br&gt;\nPhosphorus: 75&lt;br&gt;&quot;,&quot;Name: Calispell&lt;br&gt;\nChlorphylla: 21.6&lt;br&gt;\nNitrogen: 547&lt;br&gt;\nPhosphorus: 64&lt;br&gt;&quot;,&quot;Name: Lake Louise&lt;br&gt;\nChlorphylla: 38.87&lt;br&gt;\nNitrogen: 3794&lt;br&gt;\nPhosphorus: 99&lt;br&gt;&quot;,&quot;Name: Cedar Lake&lt;br&gt;\nChlorphylla: 22.4&lt;br&gt;\nNitrogen: 478&lt;br&gt;\nPhosphorus: 31&lt;br&gt;&quot;,&quot;Name: Long Pond&lt;br&gt;\nChlorphylla: 10.4&lt;br&gt;\nNitrogen: 391&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Rice Lake&lt;br&gt;\nChlorphylla: 81.6&lt;br&gt;\nNitrogen: 4053&lt;br&gt;\nPhosphorus: 422&lt;br&gt;&quot;,&quot;Name: Greenville Reservoir #5&lt;br&gt;\nChlorphylla: NA&lt;br&gt;\nNitrogen: 616&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Kokomo Reservoir No. 1&lt;br&gt;\nChlorphylla: 5.08&lt;br&gt;\nNitrogen: 487&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 5.65&lt;br&gt;\nNitrogen: 483&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Bentley Lake&lt;br&gt;\nChlorphylla: 4.75&lt;br&gt;\nNitrogen: 504&lt;br&gt;\nPhosphorus: 52&lt;br&gt;&quot;,&quot;Name: Pleasant Lake&lt;br&gt;\nChlorphylla: 1.83&lt;br&gt;\nNitrogen: 131&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: East Woodcock Lake&lt;br&gt;\nChlorphylla: 83.38&lt;br&gt;\nNitrogen: 3309&lt;br&gt;\nPhosphorus: 117&lt;br&gt;&quot;,&quot;Name: Upper Clear Boggy Creek Site 9 Reservoir&lt;br&gt;\nChlorphylla: 28.87&lt;br&gt;\nNitrogen: 771&lt;br&gt;\nPhosphorus: 141&lt;br&gt;&quot;,&quot;Name: Graham-Mebane Lake&lt;br&gt;\nChlorphylla: 14.08&lt;br&gt;\nNitrogen: 526&lt;br&gt;\nPhosphorus: 34&lt;br&gt;&quot;,&quot;Name: Little Elkhart Lake&lt;br&gt;\nChlorphylla: 2.9&lt;br&gt;\nNitrogen: 849&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Waldron Lake&lt;br&gt;\nChlorphylla: 35.28&lt;br&gt;\nNitrogen: 949&lt;br&gt;\nPhosphorus: 42&lt;br&gt;&quot;,&quot;Name: Red Deer Lake&lt;br&gt;\nChlorphylla: 103.9&lt;br&gt;\nNitrogen: 3772&lt;br&gt;\nPhosphorus: 253&lt;br&gt;&quot;,&quot;Name: Catfish Lake&lt;br&gt;\nChlorphylla: 17.44&lt;br&gt;\nNitrogen: 596&lt;br&gt;\nPhosphorus: 25&lt;br&gt;&quot;,&quot;Name: Grass Lake&lt;br&gt;\nChlorphylla: 516&lt;br&gt;\nNitrogen: 13825&lt;br&gt;\nPhosphorus: 1326&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 2.58&lt;br&gt;\nNitrogen: 346&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Stoner Lake&lt;br&gt;\nChlorphylla: 4.35&lt;br&gt;\nNitrogen: 712&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Brooklyn Lake&lt;br&gt;\nChlorphylla: 3.01&lt;br&gt;\nNitrogen: 129&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Adams-McGill Reservoir&lt;br&gt;\nChlorphylla: 16.06&lt;br&gt;\nNitrogen: 1014&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Mayo Lake&lt;br&gt;\nChlorphylla: 20.8&lt;br&gt;\nNitrogen: 788&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Bullock Pen Lake&lt;br&gt;\nChlorphylla: 14&lt;br&gt;\nNitrogen: 453&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Lucky Reservoir&lt;br&gt;\nChlorphylla: 0.93&lt;br&gt;\nNitrogen: 2228&lt;br&gt;\nPhosphorus: 933&lt;br&gt;&quot;,&quot;Name: Hawthorn Lake&lt;br&gt;\nChlorphylla: 37.84&lt;br&gt;\nNitrogen: 990&lt;br&gt;\nPhosphorus: 69&lt;br&gt;&quot;,&quot;Name: Lake Greenhaven&lt;br&gt;\nChlorphylla: 113.14&lt;br&gt;\nNitrogen: 1911&lt;br&gt;\nPhosphorus: 646&lt;br&gt;&quot;,&quot;Name: Upper Dinwoody Lake&lt;br&gt;\nChlorphylla: 1.6&lt;br&gt;\nNitrogen: 223&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Welsh Lake&lt;br&gt;\nChlorphylla: 98.88&lt;br&gt;\nNitrogen: 3534&lt;br&gt;\nPhosphorus: 604&lt;br&gt;&quot;,&quot;Name: Packanack Lake&lt;br&gt;\nChlorphylla: 195.84&lt;br&gt;\nNitrogen: 2297&lt;br&gt;\nPhosphorus: 197&lt;br&gt;&quot;,&quot;Name: Musquash&lt;br&gt;\nChlorphylla: 1.9&lt;br&gt;\nNitrogen: 285&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Devils Lake&lt;br&gt;\nChlorphylla: 29.09&lt;br&gt;\nNitrogen: 1965&lt;br&gt;\nPhosphorus: 303&lt;br&gt;&quot;,&quot;Name: San Gregorio Lake&lt;br&gt;\nChlorphylla: 10.67&lt;br&gt;\nNitrogen: 496&lt;br&gt;\nPhosphorus: 40&lt;br&gt;&quot;,&quot;Name: Antelope Lake&lt;br&gt;\nChlorphylla: 1.19&lt;br&gt;\nNitrogen: 400&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Spring Lake&lt;br&gt;\nChlorphylla: 46.37&lt;br&gt;\nNitrogen: 1012&lt;br&gt;\nPhosphorus: 68&lt;br&gt;&quot;,&quot;Name: Navajo Reservoir&lt;br&gt;\nChlorphylla: 1.19&lt;br&gt;\nNitrogen: 180&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Millwood Lake&lt;br&gt;\nChlorphylla: 45.22&lt;br&gt;\nNitrogen: 619&lt;br&gt;\nPhosphorus: 86&lt;br&gt;&quot;,&quot;Name: Sherwood Lake&lt;br&gt;\nChlorphylla: 7.08&lt;br&gt;\nNitrogen: 395&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Mims Lake&lt;br&gt;\nChlorphylla: 26.08&lt;br&gt;\nNitrogen: 740&lt;br&gt;\nPhosphorus: 138&lt;br&gt;&quot;,&quot;Name: Saddle Mountain Lake&lt;br&gt;\nChlorphylla: 6.06&lt;br&gt;\nNitrogen: 1235&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Conchas Lake&lt;br&gt;\nChlorphylla: 1.59&lt;br&gt;\nNitrogen: 229&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Upper Sakatah Lake&lt;br&gt;\nChlorphylla: 7.65&lt;br&gt;\nNitrogen: 2338&lt;br&gt;\nPhosphorus: 817&lt;br&gt;&quot;,&quot;Name: Crystal Lake&lt;br&gt;\nChlorphylla: 1.6&lt;br&gt;\nNitrogen: 287&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Lake Morris&lt;br&gt;\nChlorphylla: 62.4&lt;br&gt;\nNitrogen: 2606&lt;br&gt;\nPhosphorus: 269&lt;br&gt;&quot;,&quot;Name: Heggs&lt;br&gt;\nChlorphylla: 169.63&lt;br&gt;\nNitrogen: 4791&lt;br&gt;\nPhosphorus: 241&lt;br&gt;&quot;,&quot;Name: Joe&#x27;s Valley Reservoir&lt;br&gt;\nChlorphylla: 1.57&lt;br&gt;\nNitrogen: 168&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Jordan Lake&lt;br&gt;\nChlorphylla: 15.38&lt;br&gt;\nNitrogen: 233&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Fairy Lake&lt;br&gt;\nChlorphylla: 1.68&lt;br&gt;\nNitrogen: 854&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Goose Lake&lt;br&gt;\nChlorphylla: 0.11&lt;br&gt;\nNitrogen: 181&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: East Fork Pond River&lt;br&gt;\nChlorphylla: 19.64&lt;br&gt;\nNitrogen: 932&lt;br&gt;\nPhosphorus: 148&lt;br&gt;&quot;,&quot;Name: Sly Pond&lt;br&gt;\nChlorphylla: 1.34&lt;br&gt;\nNitrogen: 166&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Crooked Lake&lt;br&gt;\nChlorphylla: 3&lt;br&gt;\nNitrogen: 388&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Crooked Lake&lt;br&gt;\nChlorphylla: 2.85&lt;br&gt;\nNitrogen: 314&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Crooked Lake&lt;br&gt;\nChlorphylla: 3&lt;br&gt;\nNitrogen: 388&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Crooked Lake&lt;br&gt;\nChlorphylla: 2.85&lt;br&gt;\nNitrogen: 314&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lower Black Bear Creek Site 4 Reservoir&lt;br&gt;\nChlorphylla: 49.86&lt;br&gt;\nNitrogen: 1136&lt;br&gt;\nPhosphorus: 94&lt;br&gt;&quot;,&quot;Name: Hailstone Lake&lt;br&gt;\nChlorphylla: 4.09&lt;br&gt;\nNitrogen: 4316&lt;br&gt;\nPhosphorus: 182&lt;br&gt;&quot;,&quot;Name: Lake Thomas&lt;br&gt;\nChlorphylla: 147.6&lt;br&gt;\nNitrogen: 3372&lt;br&gt;\nPhosphorus: 184&lt;br&gt;&quot;,&quot;Name: Arthur Lake&lt;br&gt;\nChlorphylla: 3.78&lt;br&gt;\nNitrogen: 279&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 6.3&lt;br&gt;\nNitrogen: 419&lt;br&gt;\nPhosphorus: 27&lt;br&gt;&quot;,&quot;Name: Alpine (Hulls) Lake&lt;br&gt;\nChlorphylla: 2.16&lt;br&gt;\nNitrogen: 125&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Sprinq Lake&lt;br&gt;\nChlorphylla: 5.07&lt;br&gt;\nNitrogen: 551&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: South Holston Lake&lt;br&gt;\nChlorphylla: 1.31&lt;br&gt;\nNitrogen: 396&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Lake Minnehaha&lt;br&gt;\nChlorphylla: 27.2&lt;br&gt;\nNitrogen: 804&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: Bighorn Lake&lt;br&gt;\nChlorphylla: 3.63&lt;br&gt;\nNitrogen: 480&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Lake Maxin Kuckee&lt;br&gt;\nChlorphylla: 3.84&lt;br&gt;\nNitrogen: 584&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Lake Maxin Kuckee&lt;br&gt;\nChlorphylla: 3.42&lt;br&gt;\nNitrogen: 462&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Lake Maxin Kuckee&lt;br&gt;\nChlorphylla: 3.84&lt;br&gt;\nNitrogen: 584&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Lake Maxin Kuckee&lt;br&gt;\nChlorphylla: 3.42&lt;br&gt;\nNitrogen: 462&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Vian Lake&lt;br&gt;\nChlorphylla: 4.92&lt;br&gt;\nNitrogen: 416&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Lake Gogebic&lt;br&gt;\nChlorphylla: 7.64&lt;br&gt;\nNitrogen: 288&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Lake Gogebic&lt;br&gt;\nChlorphylla: 4.64&lt;br&gt;\nNitrogen: 359&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Gogebic&lt;br&gt;\nChlorphylla: 7.64&lt;br&gt;\nNitrogen: 288&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Lake Gogebic&lt;br&gt;\nChlorphylla: 4.64&lt;br&gt;\nNitrogen: 359&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Kiser Lake&lt;br&gt;\nChlorphylla: 34.85&lt;br&gt;\nNitrogen: 1166&lt;br&gt;\nPhosphorus: 108&lt;br&gt;&quot;,&quot;Name: Enders Reservoir&lt;br&gt;\nChlorphylla: 49.92&lt;br&gt;\nNitrogen: 734&lt;br&gt;\nPhosphorus: 60&lt;br&gt;&quot;,&quot;Name: Elaine Lake&lt;br&gt;\nChlorphylla: 103.2&lt;br&gt;\nNitrogen: 2072&lt;br&gt;\nPhosphorus: 213&lt;br&gt;&quot;,&quot;Name: Jamesville Reservoir&lt;br&gt;\nChlorphylla: 5.36&lt;br&gt;\nNitrogen: 257&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Rush Lake&lt;br&gt;\nChlorphylla: 184&lt;br&gt;\nNitrogen: 5338&lt;br&gt;\nPhosphorus: 242&lt;br&gt;&quot;,&quot;Name: Steedman Marsh&lt;br&gt;\nChlorphylla: 32.2&lt;br&gt;\nNitrogen: 1180&lt;br&gt;\nPhosphorus: 110&lt;br&gt;&quot;,&quot;Name: Lake Brandt&lt;br&gt;\nChlorphylla: 30.08&lt;br&gt;\nNitrogen: 679&lt;br&gt;\nPhosphorus: 50&lt;br&gt;&quot;,&quot;Name: Wyckoff Lake&lt;br&gt;\nChlorphylla: 16.16&lt;br&gt;\nNitrogen: 1063&lt;br&gt;\nPhosphorus: 39&lt;br&gt;&quot;,&quot;Name: Fort Cobb Reservoir&lt;br&gt;\nChlorphylla: 62.64&lt;br&gt;\nNitrogen: 878&lt;br&gt;\nPhosphorus: 113&lt;br&gt;&quot;,&quot;Name: Deleware Lake&lt;br&gt;\nChlorphylla: 63.94&lt;br&gt;\nNitrogen: 2169&lt;br&gt;\nPhosphorus: 79&lt;br&gt;&quot;,&quot;Name: Sunnen Lake&lt;br&gt;\nChlorphylla: 9.12&lt;br&gt;\nNitrogen: 346&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Mystic Lake&lt;br&gt;\nChlorphylla: 0.87&lt;br&gt;\nNitrogen: 101&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Stubblefield Reservoir&lt;br&gt;\nChlorphylla: 2.77&lt;br&gt;\nNitrogen: 524&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Norway Lake&lt;br&gt;\nChlorphylla: 21.28&lt;br&gt;\nNitrogen: 1444&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: West Lake&lt;br&gt;\nChlorphylla: 9.97&lt;br&gt;\nNitrogen: 994&lt;br&gt;\nPhosphorus: 25&lt;br&gt;&quot;,&quot;Name: Johnson Pond&lt;br&gt;\nChlorphylla: 52.85&lt;br&gt;\nNitrogen: 2506&lt;br&gt;\nPhosphorus: 86&lt;br&gt;&quot;,&quot;Name: Johnson Pond&lt;br&gt;\nChlorphylla: 67.68&lt;br&gt;\nNitrogen: 2919&lt;br&gt;\nPhosphorus: 51&lt;br&gt;&quot;,&quot;Name: Johnson Pond&lt;br&gt;\nChlorphylla: 52.85&lt;br&gt;\nNitrogen: 2506&lt;br&gt;\nPhosphorus: 86&lt;br&gt;&quot;,&quot;Name: Johnson Pond&lt;br&gt;\nChlorphylla: 67.68&lt;br&gt;\nNitrogen: 2919&lt;br&gt;\nPhosphorus: 51&lt;br&gt;&quot;,&quot;Name: Darling&lt;br&gt;\nChlorphylla: 5.59&lt;br&gt;\nNitrogen: 553&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Aurora Pond&lt;br&gt;\nChlorphylla: 67.97&lt;br&gt;\nNitrogen: 1360&lt;br&gt;\nPhosphorus: 172&lt;br&gt;&quot;,&quot;Name: Lake Woodhaven&lt;br&gt;\nChlorphylla: 5.12&lt;br&gt;\nNitrogen: 255&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Lake Henshaw&lt;br&gt;\nChlorphylla: 210.6&lt;br&gt;\nNitrogen: 3559&lt;br&gt;\nPhosphorus: 367&lt;br&gt;&quot;,&quot;Name: Howe Lake&lt;br&gt;\nChlorphylla: 7.87&lt;br&gt;\nNitrogen: 624&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Walker Lake&lt;br&gt;\nChlorphylla: 37.3&lt;br&gt;\nNitrogen: 494&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: Boyd Lake&lt;br&gt;\nChlorphylla: 1.93&lt;br&gt;\nNitrogen: 389&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Yale&lt;br&gt;\nChlorphylla: 49.2&lt;br&gt;\nNitrogen: 1614&lt;br&gt;\nPhosphorus: 25&lt;br&gt;&quot;,&quot;Name: Bissonnette Pond&lt;br&gt;\nChlorphylla: 10.48&lt;br&gt;\nNitrogen: 319&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Rancho Seco&lt;br&gt;\nChlorphylla: 1.99&lt;br&gt;\nNitrogen: 251&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Little Wewoka Creek Site 15 Reservoir&lt;br&gt;\nChlorphylla: 13.38&lt;br&gt;\nNitrogen: 1154&lt;br&gt;\nPhosphorus: 112&lt;br&gt;&quot;,&quot;Name: Lums Pond&lt;br&gt;\nChlorphylla: 75.6&lt;br&gt;\nNitrogen: 1100&lt;br&gt;\nPhosphorus: 41&lt;br&gt;&quot;,&quot;Name: Forbes Lake&lt;br&gt;\nChlorphylla: 9.71&lt;br&gt;\nNitrogen: 468&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Horsfall Lake&lt;br&gt;\nChlorphylla: 12.37&lt;br&gt;\nNitrogen: 557&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: Mill Creek Watershed 2 Reservoir&lt;br&gt;\nChlorphylla: 5.16&lt;br&gt;\nNitrogen: 754&lt;br&gt;\nPhosphorus: 91&lt;br&gt;&quot;,&quot;Name: Deer Lake&lt;br&gt;\nChlorphylla: 2.31&lt;br&gt;\nNitrogen: 458&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Lake Zurick&lt;br&gt;\nChlorphylla: 9.4&lt;br&gt;\nNitrogen: 1260&lt;br&gt;\nPhosphorus: 50&lt;br&gt;&quot;,&quot;Name: LAKE COLEMAN&lt;br&gt;\nChlorphylla: 4.72&lt;br&gt;\nNitrogen: 478&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Big Sand Wash&lt;br&gt;\nChlorphylla: 3.33&lt;br&gt;\nNitrogen: 273&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Baca Lake&lt;br&gt;\nChlorphylla: 16.67&lt;br&gt;\nNitrogen: 5009&lt;br&gt;\nPhosphorus: 2670&lt;br&gt;&quot;,&quot;Name: Torrey Lake&lt;br&gt;\nChlorphylla: 0.78&lt;br&gt;\nNitrogen: 228&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Snail Lake&lt;br&gt;\nChlorphylla: 5.09&lt;br&gt;\nNitrogen: 760&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Blue Lake&lt;br&gt;\nChlorphylla: 2.94&lt;br&gt;\nNitrogen: 469&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Red Rock&lt;br&gt;\nChlorphylla: 2.82&lt;br&gt;\nNitrogen: 2341&lt;br&gt;\nPhosphorus: 125&lt;br&gt;&quot;,&quot;Name: Youngs Creek Reservoir Number 3&lt;br&gt;\nChlorphylla: 8.8&lt;br&gt;\nNitrogen: 429&lt;br&gt;\nPhosphorus: 37&lt;br&gt;&quot;,&quot;Name: Heritage Point Lake&lt;br&gt;\nChlorphylla: 4.46&lt;br&gt;\nNitrogen: 781&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Lake Crowley&lt;br&gt;\nChlorphylla: 18.22&lt;br&gt;\nNitrogen: 708&lt;br&gt;\nPhosphorus: 47&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 26.8&lt;br&gt;\nNitrogen: 1404&lt;br&gt;\nPhosphorus: 450&lt;br&gt;&quot;,&quot;Name: Beltzville Lake&lt;br&gt;\nChlorphylla: 5.97&lt;br&gt;\nNitrogen: 497&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Brierpatch Lake&lt;br&gt;\nChlorphylla: 65.52&lt;br&gt;\nNitrogen: 576&lt;br&gt;\nPhosphorus: 112&lt;br&gt;&quot;,&quot;Name: Lower Twin Lake&lt;br&gt;\nChlorphylla: 2.01&lt;br&gt;\nNitrogen: 181&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Sloans Lake&lt;br&gt;\nChlorphylla: 62&lt;br&gt;\nNitrogen: 1891&lt;br&gt;\nPhosphorus: 183&lt;br&gt;&quot;,&quot;Name: Silver Lake&lt;br&gt;\nChlorphylla: 0.49&lt;br&gt;\nNitrogen: 135&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Lake Nichols&lt;br&gt;\nChlorphylla: 23.52&lt;br&gt;\nNitrogen: 1099&lt;br&gt;\nPhosphorus: 80&lt;br&gt;&quot;,&quot;Name: Meadow Creek Reservoir&lt;br&gt;\nChlorphylla: 4.81&lt;br&gt;\nNitrogen: 274&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Horsehead Lake&lt;br&gt;\nChlorphylla: 3.8&lt;br&gt;\nNitrogen: 105&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Ford Lake&lt;br&gt;\nChlorphylla: 14.59&lt;br&gt;\nNitrogen: 1071&lt;br&gt;\nPhosphorus: 61&lt;br&gt;&quot;,&quot;Name: Tri-County Turkey Creek Site 7 Reservoir&lt;br&gt;\nChlorphylla: 114.62&lt;br&gt;\nNitrogen: 3409&lt;br&gt;\nPhosphorus: 160&lt;br&gt;&quot;,&quot;Name: Lewis Lake&lt;br&gt;\nChlorphylla: 17.94&lt;br&gt;\nNitrogen: 721&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Bischoff Reservoir&lt;br&gt;\nChlorphylla: 40.61&lt;br&gt;\nNitrogen: 758&lt;br&gt;\nPhosphorus: 41&lt;br&gt;&quot;,&quot;Name: Soil Conservation Service Site 6 Reservoir&lt;br&gt;\nChlorphylla: 12.98&lt;br&gt;\nNitrogen: 356&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Round Lake&lt;br&gt;\nChlorphylla: 2.91&lt;br&gt;\nNitrogen: 483&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Lake Wappapello&lt;br&gt;\nChlorphylla: 155.08&lt;br&gt;\nNitrogen: 1199&lt;br&gt;\nPhosphorus: 68&lt;br&gt;&quot;,&quot;Name: Snyder Lake&lt;br&gt;\nChlorphylla: 11.74&lt;br&gt;\nNitrogen: 1680&lt;br&gt;\nPhosphorus: 313&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 28.48&lt;br&gt;\nNitrogen: 2440&lt;br&gt;\nPhosphorus: 653&lt;br&gt;&quot;,&quot;Name: Richmond&lt;br&gt;\nChlorphylla: 5.24&lt;br&gt;\nNitrogen: 1446&lt;br&gt;\nPhosphorus: 373&lt;br&gt;&quot;,&quot;Name: Upper Scott&lt;br&gt;\nChlorphylla: 11.6&lt;br&gt;\nNitrogen: 845&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Breckinridge Reservoir&lt;br&gt;\nChlorphylla: 6.38&lt;br&gt;\nNitrogen: 339&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Treasureton Reservoir&lt;br&gt;\nChlorphylla: 82.51&lt;br&gt;\nNitrogen: 1351&lt;br&gt;\nPhosphorus: 113&lt;br&gt;&quot;,&quot;Name: Dave Boyer Lake&lt;br&gt;\nChlorphylla: 7.72&lt;br&gt;\nNitrogen: 968&lt;br&gt;\nPhosphorus: 157&lt;br&gt;&quot;,&quot;Name: Swan Lake&lt;br&gt;\nChlorphylla: 381.6&lt;br&gt;\nNitrogen: 5191&lt;br&gt;\nPhosphorus: 587&lt;br&gt;&quot;,&quot;Name: Rye Patch Reservoir&lt;br&gt;\nChlorphylla: 6.04&lt;br&gt;\nNitrogen: 649&lt;br&gt;\nPhosphorus: 55&lt;br&gt;&quot;,&quot;Name: Storey Lake&lt;br&gt;\nChlorphylla: 42.66&lt;br&gt;\nNitrogen: 6203&lt;br&gt;\nPhosphorus: 59&lt;br&gt;&quot;,&quot;Name: Round Lake&lt;br&gt;\nChlorphylla: 2.18&lt;br&gt;\nNitrogen: 138&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Lake Habeeb&lt;br&gt;\nChlorphylla: 2.62&lt;br&gt;\nNitrogen: 252&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Little Wall Lake&lt;br&gt;\nChlorphylla: 26.64&lt;br&gt;\nNitrogen: 2228&lt;br&gt;\nPhosphorus: 69&lt;br&gt;&quot;,&quot;Name: Hert Lake&lt;br&gt;\nChlorphylla: 5.39&lt;br&gt;\nNitrogen: 474&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Lower Middle Branch&lt;br&gt;\nChlorphylla: 2.98&lt;br&gt;\nNitrogen: 280&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Lake O&#x27; the Pines&lt;br&gt;\nChlorphylla: 27.47&lt;br&gt;\nNitrogen: 852&lt;br&gt;\nPhosphorus: 42&lt;br&gt;&quot;,&quot;Name: Glade Creek (Upper)&lt;br&gt;\nChlorphylla: 3.24&lt;br&gt;\nNitrogen: 263&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Sixtyseven Reservoir&lt;br&gt;\nChlorphylla: 2.94&lt;br&gt;\nNitrogen: 348&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Lake Hobart&lt;br&gt;\nChlorphylla: 12.8&lt;br&gt;\nNitrogen: 1159&lt;br&gt;\nPhosphorus: 161&lt;br&gt;&quot;,&quot;Name: Ford Supply Lake&lt;br&gt;\nChlorphylla: 11.49&lt;br&gt;\nNitrogen: 760&lt;br&gt;\nPhosphorus: 115&lt;br&gt;&quot;,&quot;Name: Reedy Lake&lt;br&gt;\nChlorphylla: 19.47&lt;br&gt;\nNitrogen: 978&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Loch Mary Reservoir&lt;br&gt;\nChlorphylla: 4.45&lt;br&gt;\nNitrogen: 420&lt;br&gt;\nPhosphorus: 26&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 88.2&lt;br&gt;\nNitrogen: 2503&lt;br&gt;\nPhosphorus: 215&lt;br&gt;&quot;,&quot;Name: Montrose Lake&lt;br&gt;\nChlorphylla: 68.4&lt;br&gt;\nNitrogen: 1344&lt;br&gt;\nPhosphorus: 255&lt;br&gt;&quot;,&quot;Name: Show Low Lake&lt;br&gt;\nChlorphylla: 4.32&lt;br&gt;\nNitrogen: 484&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 23.36&lt;br&gt;\nNitrogen: 1062&lt;br&gt;\nPhosphorus: 110&lt;br&gt;&quot;,&quot;Name: James Lake&lt;br&gt;\nChlorphylla: 2.26&lt;br&gt;\nNitrogen: 501&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Stump Pond&lt;br&gt;\nChlorphylla: 2.96&lt;br&gt;\nNitrogen: 369&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Watson Lake&lt;br&gt;\nChlorphylla: 6.34&lt;br&gt;\nNitrogen: 746&lt;br&gt;\nPhosphorus: 126&lt;br&gt;&quot;,&quot;Name: Union Reservoir&lt;br&gt;\nChlorphylla: 5&lt;br&gt;\nNitrogen: 392&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Roundup Lake&lt;br&gt;\nChlorphylla: 684&lt;br&gt;\nNitrogen: 26100&lt;br&gt;\nPhosphorus: 1491&lt;br&gt;&quot;,&quot;Name: McCann Reservoir&lt;br&gt;\nChlorphylla: 13.01&lt;br&gt;\nNitrogen: 1011&lt;br&gt;\nPhosphorus: 63&lt;br&gt;&quot;,&quot;Name: Apache Lake&lt;br&gt;\nChlorphylla: 4.25&lt;br&gt;\nNitrogen: 474&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Lake Bistineau&lt;br&gt;\nChlorphylla: 31.52&lt;br&gt;\nNitrogen: 498&lt;br&gt;\nPhosphorus: 64&lt;br&gt;&quot;,&quot;Name: Fossil Lake&lt;br&gt;\nChlorphylla: 0.5&lt;br&gt;\nNitrogen: 48&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Kitsap Lake&lt;br&gt;\nChlorphylla: 7.25&lt;br&gt;\nNitrogen: 239&lt;br&gt;\nPhosphorus: 45&lt;br&gt;&quot;,&quot;Name: Vernon Lake&lt;br&gt;\nChlorphylla: 24.16&lt;br&gt;\nNitrogen: 1231&lt;br&gt;\nPhosphorus: 134&lt;br&gt;&quot;,&quot;Name: Pere Marquette Lake&lt;br&gt;\nChlorphylla: 14.78&lt;br&gt;\nNitrogen: 623&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: Farias Lake&lt;br&gt;\nChlorphylla: 21.44&lt;br&gt;\nNitrogen: 806&lt;br&gt;\nPhosphorus: 57&lt;br&gt;&quot;,&quot;Name: Matt Warner&lt;br&gt;\nChlorphylla: 27.58&lt;br&gt;\nNitrogen: 1209&lt;br&gt;\nPhosphorus: 130&lt;br&gt;&quot;,&quot;Name: Clark Canyon Reservoir&lt;br&gt;\nChlorphylla: 1.52&lt;br&gt;\nNitrogen: 366&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Laurel Lake&lt;br&gt;\nChlorphylla: 19.87&lt;br&gt;\nNitrogen: 440&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Big Lake&lt;br&gt;\nChlorphylla: 0.23&lt;br&gt;\nNitrogen: 50&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Lake of the Ozarks&lt;br&gt;\nChlorphylla: 23.2&lt;br&gt;\nNitrogen: 777&lt;br&gt;\nPhosphorus: 90&lt;br&gt;&quot;,&quot;Name: Ashurst&lt;br&gt;\nChlorphylla: 5.66&lt;br&gt;\nNitrogen: 845&lt;br&gt;\nPhosphorus: 185&lt;br&gt;&quot;,&quot;Name: Warner Lake&lt;br&gt;\nChlorphylla: 3.17&lt;br&gt;\nNitrogen: 488&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Cheatham Lake&lt;br&gt;\nChlorphylla: 57.2&lt;br&gt;\nNitrogen: 848&lt;br&gt;\nPhosphorus: 99&lt;br&gt;&quot;,&quot;Name: Forestville Basin&lt;br&gt;\nChlorphylla: 4.48&lt;br&gt;\nNitrogen: 354&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Loyalton Dam&lt;br&gt;\nChlorphylla: 542.4&lt;br&gt;\nNitrogen: 12241&lt;br&gt;\nPhosphorus: 896&lt;br&gt;&quot;,&quot;Name: Douglas Lake&lt;br&gt;\nChlorphylla: 18.72&lt;br&gt;\nNitrogen: 269&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Caruth Lake&lt;br&gt;\nChlorphylla: 100.51&lt;br&gt;\nNitrogen: 510&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Feather Lake&lt;br&gt;\nChlorphylla: 2.32&lt;br&gt;\nNitrogen: 1043&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: East Delaney Reservoir&lt;br&gt;\nChlorphylla: 3.01&lt;br&gt;\nNitrogen: 521&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Tims Lake&lt;br&gt;\nChlorphylla: 3.12&lt;br&gt;\nNitrogen: 366&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Heritage Lake&lt;br&gt;\nChlorphylla: 22.63&lt;br&gt;\nNitrogen: 338&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Heritage Lake&lt;br&gt;\nChlorphylla: 25.16&lt;br&gt;\nNitrogen: 612&lt;br&gt;\nPhosphorus: 53&lt;br&gt;&quot;,&quot;Name: Heritage Lake&lt;br&gt;\nChlorphylla: 22.63&lt;br&gt;\nNitrogen: 338&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Heritage Lake&lt;br&gt;\nChlorphylla: 25.16&lt;br&gt;\nNitrogen: 612&lt;br&gt;\nPhosphorus: 53&lt;br&gt;&quot;,&quot;Name: Lake Kampeska&lt;br&gt;\nChlorphylla: 7.52&lt;br&gt;\nNitrogen: 918&lt;br&gt;\nPhosphorus: 441&lt;br&gt;&quot;,&quot;Name: Bridge Lake&lt;br&gt;\nChlorphylla: 4.63&lt;br&gt;\nNitrogen: 317&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Blanchard&lt;br&gt;\nChlorphylla: 2.29&lt;br&gt;\nNitrogen: 216&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Lake Byron&lt;br&gt;\nChlorphylla: 32.04&lt;br&gt;\nNitrogen: 1949&lt;br&gt;\nPhosphorus: 304&lt;br&gt;&quot;,&quot;Name: Bushwacker&lt;br&gt;\nChlorphylla: 32.54&lt;br&gt;\nNitrogen: 749&lt;br&gt;\nPhosphorus: 42&lt;br&gt;&quot;,&quot;Name: Clark Co. Lake&lt;br&gt;\nChlorphylla: 2.32&lt;br&gt;\nNitrogen: 563&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Donnell Lake&lt;br&gt;\nChlorphylla: 3.29&lt;br&gt;\nNitrogen: 723&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Sconti Lake&lt;br&gt;\nChlorphylla: 4.32&lt;br&gt;\nNitrogen: 190&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Arrow Tank&lt;br&gt;\nChlorphylla: 8.8&lt;br&gt;\nNitrogen: 582&lt;br&gt;\nPhosphorus: 27&lt;br&gt;&quot;,&quot;Name: Lake Mcclure&lt;br&gt;\nChlorphylla: 0.88&lt;br&gt;\nNitrogen: 79&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 314.61&lt;br&gt;\nNitrogen: 8803&lt;br&gt;\nPhosphorus: 441&lt;br&gt;&quot;,&quot;Name: Wyoming Hereford Ranch Reservoir Number 2&lt;br&gt;\nChlorphylla: 2.82&lt;br&gt;\nNitrogen: 3516&lt;br&gt;\nPhosphorus: 1537&lt;br&gt;&quot;,&quot;Name: Lake Lancelot&lt;br&gt;\nChlorphylla: 55.28&lt;br&gt;\nNitrogen: 1282&lt;br&gt;\nPhosphorus: 55&lt;br&gt;&quot;,&quot;Name: Lake Griffin&lt;br&gt;\nChlorphylla: 167.04&lt;br&gt;\nNitrogen: 3516&lt;br&gt;\nPhosphorus: 45&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 62&lt;br&gt;\nNitrogen: 679&lt;br&gt;\nPhosphorus: 60&lt;br&gt;&quot;,&quot;Name: North Turn Lake&lt;br&gt;\nChlorphylla: 38.2&lt;br&gt;\nNitrogen: 1453&lt;br&gt;\nPhosphorus: 53&lt;br&gt;&quot;,&quot;Name: Barker Reservoir&lt;br&gt;\nChlorphylla: 2.23&lt;br&gt;\nNitrogen: 157&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Edwin A Pape&lt;br&gt;\nChlorphylla: 27.13&lt;br&gt;\nNitrogen: 949&lt;br&gt;\nPhosphorus: 67&lt;br&gt;&quot;,&quot;Name: Coursey Pond&lt;br&gt;\nChlorphylla: 116.4&lt;br&gt;\nNitrogen: 2156&lt;br&gt;\nPhosphorus: 124&lt;br&gt;&quot;,&quot;Name: Big Lake&lt;br&gt;\nChlorphylla: 3.37&lt;br&gt;\nNitrogen: 244&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Turquoise Lake&lt;br&gt;\nChlorphylla: 1.04&lt;br&gt;\nNitrogen: 131&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Navajo Lake&lt;br&gt;\nChlorphylla: 1.06&lt;br&gt;\nNitrogen: 267&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Robinson Lake&lt;br&gt;\nChlorphylla: 12.6&lt;br&gt;\nNitrogen: 646&lt;br&gt;\nPhosphorus: 30&lt;br&gt;&quot;,&quot;Name: Lake Bailey&lt;br&gt;\nChlorphylla: 3.06&lt;br&gt;\nNitrogen: 892&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Saddle Lake&lt;br&gt;\nChlorphylla: 4.03&lt;br&gt;\nNitrogen: 603&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Kincaid Lake&lt;br&gt;\nChlorphylla: 23&lt;br&gt;\nNitrogen: 548&lt;br&gt;\nPhosphorus: 74&lt;br&gt;&quot;,&quot;Name: Nicasio Reservoir&lt;br&gt;\nChlorphylla: 14.56&lt;br&gt;\nNitrogen: 789&lt;br&gt;\nPhosphorus: 58&lt;br&gt;&quot;,&quot;Name: Lake Brighton&lt;br&gt;\nChlorphylla: 17.44&lt;br&gt;\nNitrogen: 606&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Portage Reservoir&lt;br&gt;\nChlorphylla: 1.35&lt;br&gt;\nNitrogen: 501&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Lake Catherine&lt;br&gt;\nChlorphylla: 1.63&lt;br&gt;\nNitrogen: 401&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Killarney Lake&lt;br&gt;\nChlorphylla: 5.45&lt;br&gt;\nNitrogen: 139&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Caddo Lake&lt;br&gt;\nChlorphylla: 43.63&lt;br&gt;\nNitrogen: 604&lt;br&gt;\nPhosphorus: 50&lt;br&gt;&quot;,&quot;Name: Stony Creek Lake&lt;br&gt;\nChlorphylla: 5.3&lt;br&gt;\nNitrogen: 536&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Lake Hefner&lt;br&gt;\nChlorphylla: 25.47&lt;br&gt;\nNitrogen: 699&lt;br&gt;\nPhosphorus: 120&lt;br&gt;&quot;,&quot;Name: Ferguson Lake&lt;br&gt;\nChlorphylla: 24.8&lt;br&gt;\nNitrogen: 628&lt;br&gt;\nPhosphorus: 48&lt;br&gt;&quot;,&quot;Name: Willard Bay Reservoir&lt;br&gt;\nChlorphylla: 14.8&lt;br&gt;\nNitrogen: 611&lt;br&gt;\nPhosphorus: 69&lt;br&gt;&quot;,&quot;Name: Long Lake2&lt;br&gt;\nChlorphylla: 7.57&lt;br&gt;\nNitrogen: 1558&lt;br&gt;\nPhosphorus: 27&lt;br&gt;&quot;,&quot;Name: Kentucky Lake&lt;br&gt;\nChlorphylla: 13.68&lt;br&gt;\nNitrogen: 303&lt;br&gt;\nPhosphorus: 61&lt;br&gt;&quot;,&quot;Name: North Fork Lake&lt;br&gt;\nChlorphylla: 0.68&lt;br&gt;\nNitrogen: 90&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Kittamagundi&lt;br&gt;\nChlorphylla: 197&lt;br&gt;\nNitrogen: 2709&lt;br&gt;\nPhosphorus: 255&lt;br&gt;&quot;,&quot;Name: Clark State Fishing Lake&lt;br&gt;\nChlorphylla: 25.14&lt;br&gt;\nNitrogen: 824&lt;br&gt;\nPhosphorus: 56&lt;br&gt;&quot;,&quot;Name: Lake Myrtle&lt;br&gt;\nChlorphylla: 16.2&lt;br&gt;\nNitrogen: 839&lt;br&gt;\nPhosphorus: 45&lt;br&gt;&quot;,&quot;Name: Round Lake&lt;br&gt;\nChlorphylla: 2.02&lt;br&gt;\nNitrogen: 531&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Smith Lake&lt;br&gt;\nChlorphylla: 115.56&lt;br&gt;\nNitrogen: 2766&lt;br&gt;\nPhosphorus: 246&lt;br&gt;&quot;,&quot;Name: Mossy Lake&lt;br&gt;\nChlorphylla: 12.53&lt;br&gt;\nNitrogen: 420&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Governor Bond Lake&lt;br&gt;\nChlorphylla: 72&lt;br&gt;\nNitrogen: 1361&lt;br&gt;\nPhosphorus: 216&lt;br&gt;&quot;,&quot;Name: Boulder Reservoir&lt;br&gt;\nChlorphylla: 6.05&lt;br&gt;\nNitrogen: 228&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Creedman Reservoir&lt;br&gt;\nChlorphylla: 5.18&lt;br&gt;\nNitrogen: 3159&lt;br&gt;\nPhosphorus: 1129&lt;br&gt;&quot;,&quot;Name: Lake Blaine&lt;br&gt;\nChlorphylla: 1.25&lt;br&gt;\nNitrogen: 198&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Crescent Lake&lt;br&gt;\nChlorphylla: 55.32&lt;br&gt;\nNitrogen: 1216&lt;br&gt;\nPhosphorus: 75&lt;br&gt;&quot;,&quot;Name: Big Spring Reservoir&lt;br&gt;\nChlorphylla: 7.6&lt;br&gt;\nNitrogen: 1058&lt;br&gt;\nPhosphorus: 520&lt;br&gt;&quot;,&quot;Name: Indian Creek Reservoir&lt;br&gt;\nChlorphylla: 61.44&lt;br&gt;\nNitrogen: 506&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Hogan Reservoir&lt;br&gt;\nChlorphylla: 4.36&lt;br&gt;\nNitrogen: 232&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Rock Lake&lt;br&gt;\nChlorphylla: 52.7&lt;br&gt;\nNitrogen: 2091&lt;br&gt;\nPhosphorus: 74&lt;br&gt;&quot;,&quot;Name: Lake Konawa&lt;br&gt;\nChlorphylla: 9&lt;br&gt;\nNitrogen: 676&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Crooked Cr Watershed #3&lt;br&gt;\nChlorphylla: 3.1&lt;br&gt;\nNitrogen: 139&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Cushman Lake&lt;br&gt;\nChlorphylla: 0.46&lt;br&gt;\nNitrogen: 37&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Echo Reservoir&lt;br&gt;\nChlorphylla: 3.56&lt;br&gt;\nNitrogen: 374&lt;br&gt;\nPhosphorus: 26&lt;br&gt;&quot;,&quot;Name: Lake Albert&lt;br&gt;\nChlorphylla: 109.66&lt;br&gt;\nNitrogen: 4075&lt;br&gt;\nPhosphorus: 328&lt;br&gt;&quot;,&quot;Name: Lake McBride&lt;br&gt;\nChlorphylla: 25.44&lt;br&gt;\nNitrogen: 2334&lt;br&gt;\nPhosphorus: 39&lt;br&gt;&quot;,&quot;Name: Chimney Reservoir&lt;br&gt;\nChlorphylla: 6.94&lt;br&gt;\nNitrogen: 581&lt;br&gt;\nPhosphorus: 302&lt;br&gt;&quot;,&quot;Name: Sparks Lake&lt;br&gt;\nChlorphylla: 0.45&lt;br&gt;\nNitrogen: 162&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: Slack Reservoir&lt;br&gt;\nChlorphylla: 2.1&lt;br&gt;\nNitrogen: 368&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Saddle Lake&lt;br&gt;\nChlorphylla: 0.94&lt;br&gt;\nNitrogen: 185&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Blomgren&lt;br&gt;\nChlorphylla: 22.24&lt;br&gt;\nNitrogen: 830&lt;br&gt;\nPhosphorus: 37&lt;br&gt;&quot;,&quot;Name: Ashton Reservoir&lt;br&gt;\nChlorphylla: 1.48&lt;br&gt;\nNitrogen: 178&lt;br&gt;\nPhosphorus: 31&lt;br&gt;&quot;,&quot;Name: Lake St. Louis&lt;br&gt;\nChlorphylla: 31.4&lt;br&gt;\nNitrogen: 788&lt;br&gt;\nPhosphorus: 89&lt;br&gt;&quot;,&quot;Name: Whitewater Lake&lt;br&gt;\nChlorphylla: 20.88&lt;br&gt;\nNitrogen: 2981&lt;br&gt;\nPhosphorus: 486&lt;br&gt;&quot;,&quot;Name: Salmon Lake&lt;br&gt;\nChlorphylla: 9.17&lt;br&gt;\nNitrogen: 226&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Hills Creek Reservoir&lt;br&gt;\nChlorphylla: 0.67&lt;br&gt;\nNitrogen: 18&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Columbia&lt;br&gt;\nChlorphylla: 17.49&lt;br&gt;\nNitrogen: 1494&lt;br&gt;\nPhosphorus: 493&lt;br&gt;&quot;,&quot;Name: Copan Lake&lt;br&gt;\nChlorphylla: 14.85&lt;br&gt;\nNitrogen: 403&lt;br&gt;\nPhosphorus: 108&lt;br&gt;&quot;,&quot;Name: Wild Horse Reservoir&lt;br&gt;\nChlorphylla: 94.93&lt;br&gt;\nNitrogen: 2076&lt;br&gt;\nPhosphorus: 255&lt;br&gt;&quot;,&quot;Name: West Okoboji Lake&lt;br&gt;\nChlorphylla: 4.98&lt;br&gt;\nNitrogen: 739&lt;br&gt;\nPhosphorus: 18&lt;br&gt;&quot;,&quot;Name: Lake Coeur D&#x27;Alene&lt;br&gt;\nChlorphylla: 0.66&lt;br&gt;\nNitrogen: 27&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Cedar Creek Reservoir&lt;br&gt;\nChlorphylla: 17.12&lt;br&gt;\nNitrogen: 658&lt;br&gt;\nPhosphorus: 71&lt;br&gt;&quot;,&quot;Name: Soil Conservation Service Site 137 Reservoir&lt;br&gt;\nChlorphylla: 104.4&lt;br&gt;\nNitrogen: 2041&lt;br&gt;\nPhosphorus: 108&lt;br&gt;&quot;,&quot;Name: Lake Keewaydin&lt;br&gt;\nChlorphylla: 3.32&lt;br&gt;\nNitrogen: 430&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Lake Keewaydin&lt;br&gt;\nChlorphylla: 5.32&lt;br&gt;\nNitrogen: 326&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Lake Keewaydin&lt;br&gt;\nChlorphylla: 3.32&lt;br&gt;\nNitrogen: 430&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Lake Keewaydin&lt;br&gt;\nChlorphylla: 5.32&lt;br&gt;\nNitrogen: 326&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Little Blue Creek Reservoir&lt;br&gt;\nChlorphylla: 194.4&lt;br&gt;\nNitrogen: 1398&lt;br&gt;\nPhosphorus: 276&lt;br&gt;&quot;,&quot;Name: Turtlefoot Lake&lt;br&gt;\nChlorphylla: 6.72&lt;br&gt;\nNitrogen: 1331&lt;br&gt;\nPhosphorus: 59&lt;br&gt;&quot;,&quot;Name: Elks Lake&lt;br&gt;\nChlorphylla: 14.3&lt;br&gt;\nNitrogen: 494&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: McFarlane Reservoir&lt;br&gt;\nChlorphylla: 3.95&lt;br&gt;\nNitrogen: 551&lt;br&gt;\nPhosphorus: 49&lt;br&gt;&quot;,&quot;Name: South Banner Lake&lt;br&gt;\nChlorphylla: 4.41&lt;br&gt;\nNitrogen: 278&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Likes Lake&lt;br&gt;\nChlorphylla: 19.2&lt;br&gt;\nNitrogen: 1190&lt;br&gt;\nPhosphorus: 175&lt;br&gt;&quot;,&quot;Name: Virgin Lake&lt;br&gt;\nChlorphylla: 338.4&lt;br&gt;\nNitrogen: 4691&lt;br&gt;\nPhosphorus: 277&lt;br&gt;&quot;,&quot;Name: Lower Thompson Lake&lt;br&gt;\nChlorphylla: 1.42&lt;br&gt;\nNitrogen: 276&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Badger Creek Lake&lt;br&gt;\nChlorphylla: 92.16&lt;br&gt;\nNitrogen: 2082&lt;br&gt;\nPhosphorus: 572&lt;br&gt;&quot;,&quot;Name: Mills Lake&lt;br&gt;\nChlorphylla: 105.84&lt;br&gt;\nNitrogen: 1134&lt;br&gt;\nPhosphorus: 78&lt;br&gt;&quot;,&quot;Name: J T Budd Pond&lt;br&gt;\nChlorphylla: 61.09&lt;br&gt;\nNitrogen: 1004&lt;br&gt;\nPhosphorus: 72&lt;br&gt;&quot;,&quot;Name: Spring Lake&lt;br&gt;\nChlorphylla: 3.59&lt;br&gt;\nNitrogen: 124&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Lotto Lake&lt;br&gt;\nChlorphylla: 8.64&lt;br&gt;\nNitrogen: 569&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Emigrant Lake&lt;br&gt;\nChlorphylla: 3.57&lt;br&gt;\nNitrogen: 496&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Jobs Pond&lt;br&gt;\nChlorphylla: 1.59&lt;br&gt;\nNitrogen: 276&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Nutleg East&lt;br&gt;\nChlorphylla: 64.51&lt;br&gt;\nNitrogen: 2859&lt;br&gt;\nPhosphorus: 197&lt;br&gt;&quot;,&quot;Name: R E &#x27;Bob&#x27; Woodruff Reservoir&lt;br&gt;\nChlorphylla: 20.43&lt;br&gt;\nNitrogen: 401&lt;br&gt;\nPhosphorus: 53&lt;br&gt;&quot;,&quot;Name: Horseshoe Lake&lt;br&gt;\nChlorphylla: 84.96&lt;br&gt;\nNitrogen: 1804&lt;br&gt;\nPhosphorus: 135&lt;br&gt;&quot;,&quot;Name: Musselman Cattle Company Lake Number 2&lt;br&gt;\nChlorphylla: 20.64&lt;br&gt;\nNitrogen: 438&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: Big Sandy Reservoir&lt;br&gt;\nChlorphylla: 2.89&lt;br&gt;\nNitrogen: 316&lt;br&gt;\nPhosphorus: 48&lt;br&gt;&quot;,&quot;Name: Cottonwood&lt;br&gt;\nChlorphylla: 8.13&lt;br&gt;\nNitrogen: 3503&lt;br&gt;\nPhosphorus: 170&lt;br&gt;&quot;,&quot;Name: Lake Louise&lt;br&gt;\nChlorphylla: 3.41&lt;br&gt;\nNitrogen: 402&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Lake Apopka&lt;br&gt;\nChlorphylla: 149.6&lt;br&gt;\nNitrogen: 5572&lt;br&gt;\nPhosphorus: 169&lt;br&gt;&quot;,&quot;Name: JAMES LAKE&lt;br&gt;\nChlorphylla: 13.47&lt;br&gt;\nNitrogen: 869&lt;br&gt;\nPhosphorus: 28&lt;br&gt;&quot;,&quot;Name: Brush Lake&lt;br&gt;\nChlorphylla: 166.63&lt;br&gt;\nNitrogen: 3009&lt;br&gt;\nPhosphorus: 613&lt;br&gt;&quot;,&quot;Name: Rath Lake&lt;br&gt;\nChlorphylla: 13.44&lt;br&gt;\nNitrogen: 1820&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Horseshoe&lt;br&gt;\nChlorphylla: 6.15&lt;br&gt;\nNitrogen: 211&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Lake Cochrane&lt;br&gt;\nChlorphylla: 15.22&lt;br&gt;\nNitrogen: 1117&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Pomme de Terre Lake&lt;br&gt;\nChlorphylla: 23.83&lt;br&gt;\nNitrogen: 535&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: L Pond&lt;br&gt;\nChlorphylla: 46.4&lt;br&gt;\nNitrogen: 1007&lt;br&gt;\nPhosphorus: 112&lt;br&gt;&quot;,&quot;Name: Fox Lake&lt;br&gt;\nChlorphylla: 1.46&lt;br&gt;\nNitrogen: 644&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Yawgoo Pond&lt;br&gt;\nChlorphylla: 3.74&lt;br&gt;\nNitrogen: 295&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Bean Lake&lt;br&gt;\nChlorphylla: 3.96&lt;br&gt;\nNitrogen: 5109&lt;br&gt;\nPhosphorus: 65&lt;br&gt;&quot;,&quot;Name: Bull Lake&lt;br&gt;\nChlorphylla: 1.39&lt;br&gt;\nNitrogen: 334&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Topaz Lake&lt;br&gt;\nChlorphylla: 4.2&lt;br&gt;\nNitrogen: 188&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Holt Lake&lt;br&gt;\nChlorphylla: 14.96&lt;br&gt;\nNitrogen: 366&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Island Lake&lt;br&gt;\nChlorphylla: 1.66&lt;br&gt;\nNitrogen: 294&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Lazy Lake&lt;br&gt;\nChlorphylla: 3.38&lt;br&gt;\nNitrogen: 407&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Knoll Lake&lt;br&gt;\nChlorphylla: 2.79&lt;br&gt;\nNitrogen: 300&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Lake Latonka&lt;br&gt;\nChlorphylla: 20.52&lt;br&gt;\nNitrogen: 634&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Sacheen Lake&lt;br&gt;\nChlorphylla: 1.13&lt;br&gt;\nNitrogen: 256&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Lewis Lake&lt;br&gt;\nChlorphylla: 0.7&lt;br&gt;\nNitrogen: 140&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: McColley Pond&lt;br&gt;\nChlorphylla: 30.08&lt;br&gt;\nNitrogen: 3591&lt;br&gt;\nPhosphorus: 86&lt;br&gt;&quot;,&quot;Name: Lake Koeneman&lt;br&gt;\nChlorphylla: 1.91&lt;br&gt;\nNitrogen: 214&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Muddy Guard Reservoir Number 2&lt;br&gt;\nChlorphylla: 1.62&lt;br&gt;\nNitrogen: 350&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Tamarack Lake&lt;br&gt;\nChlorphylla: 8.5&lt;br&gt;\nNitrogen: 793&lt;br&gt;\nPhosphorus: 25&lt;br&gt;&quot;,&quot;Name: Big Chapman&lt;br&gt;\nChlorphylla: 3.43&lt;br&gt;\nNitrogen: 559&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Shepherd Lake&lt;br&gt;\nChlorphylla: 6.54&lt;br&gt;\nNitrogen: 329&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Birch Creek Reservoir Number 2&lt;br&gt;\nChlorphylla: 3.57&lt;br&gt;\nNitrogen: 388&lt;br&gt;\nPhosphorus: 31&lt;br&gt;&quot;,&quot;Name: Harlan County Lake&lt;br&gt;\nChlorphylla: 14.29&lt;br&gt;\nNitrogen: 779&lt;br&gt;\nPhosphorus: 318&lt;br&gt;&quot;,&quot;Name: Concord Pond&lt;br&gt;\nChlorphylla: 68.88&lt;br&gt;\nNitrogen: 2311&lt;br&gt;\nPhosphorus: 75&lt;br&gt;&quot;,&quot;Name: Huntington North Reservoir&lt;br&gt;\nChlorphylla: 3.04&lt;br&gt;\nNitrogen: 391&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Gorton Pond&lt;br&gt;\nChlorphylla: 7.78&lt;br&gt;\nNitrogen: 331&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Tsaile Lake&lt;br&gt;\nChlorphylla: 4.84&lt;br&gt;\nNitrogen: 439&lt;br&gt;\nPhosphorus: 54&lt;br&gt;&quot;,&quot;Name: Nine Mile Reservoir&lt;br&gt;\nChlorphylla: 1.42&lt;br&gt;\nNitrogen: 2076&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Belleville Pond&lt;br&gt;\nChlorphylla: 24.32&lt;br&gt;\nNitrogen: 366&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: Lost Lake&lt;br&gt;\nChlorphylla: 69.6&lt;br&gt;\nNitrogen: 25663&lt;br&gt;\nPhosphorus: 1697&lt;br&gt;&quot;,&quot;Name: Currant Creek Reservoir&lt;br&gt;\nChlorphylla: 2.45&lt;br&gt;\nNitrogen: 133&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Piute Reservoir&lt;br&gt;\nChlorphylla: 4.64&lt;br&gt;\nNitrogen: 1674&lt;br&gt;\nPhosphorus: 636&lt;br&gt;&quot;,&quot;Name: Lake Edna&lt;br&gt;\nChlorphylla: 0.9&lt;br&gt;\nNitrogen: 148&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Dry Creek Reservoir&lt;br&gt;\nChlorphylla: 4.59&lt;br&gt;\nNitrogen: 765&lt;br&gt;\nPhosphorus: 283&lt;br&gt;&quot;,&quot;Name: Kolob Reservoir&lt;br&gt;\nChlorphylla: 3.69&lt;br&gt;\nNitrogen: 314&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Starvation Reservoir&lt;br&gt;\nChlorphylla: 1.58&lt;br&gt;\nNitrogen: 183&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Nesbitt Lake&lt;br&gt;\nChlorphylla: 1.83&lt;br&gt;\nNitrogen: 1238&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Officers Reservoir&lt;br&gt;\nChlorphylla: 0.95&lt;br&gt;\nNitrogen: 421&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: Graham Lake (Historical)&lt;br&gt;\nChlorphylla: 19.36&lt;br&gt;\nNitrogen: 337&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Blanchard Lake&lt;br&gt;\nChlorphylla: 20.91&lt;br&gt;\nNitrogen: 868&lt;br&gt;\nPhosphorus: 64&lt;br&gt;&quot;,&quot;Name: Morse Reservoir&lt;br&gt;\nChlorphylla: 38.02&lt;br&gt;\nNitrogen: 1101&lt;br&gt;\nPhosphorus: 34&lt;br&gt;&quot;,&quot;Name: American Lake&lt;br&gt;\nChlorphylla: 3.54&lt;br&gt;\nNitrogen: 259&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Barbara Lake&lt;br&gt;\nChlorphylla: 13.5&lt;br&gt;\nNitrogen: 1259&lt;br&gt;\nPhosphorus: 56&lt;br&gt;&quot;,&quot;Name: Lake Bruin&lt;br&gt;\nChlorphylla: 41.9&lt;br&gt;\nNitrogen: 580&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Lake Hinden&lt;br&gt;\nChlorphylla: 7.1&lt;br&gt;\nNitrogen: 410&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Chapman Pond&lt;br&gt;\nChlorphylla: 4.43&lt;br&gt;\nNitrogen: 376&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Lake Haines&lt;br&gt;\nChlorphylla: 38.2&lt;br&gt;\nNitrogen: 1337&lt;br&gt;\nPhosphorus: 41&lt;br&gt;&quot;,&quot;Name: Lake Monroe&lt;br&gt;\nChlorphylla: 27.16&lt;br&gt;\nNitrogen: 1188&lt;br&gt;\nPhosphorus: 66&lt;br&gt;&quot;,&quot;Name: Little Bear Lake&lt;br&gt;\nChlorphylla: 1.17&lt;br&gt;\nNitrogen: 278&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Red Willow Reservoir&lt;br&gt;\nChlorphylla: 25.12&lt;br&gt;\nNitrogen: 1113&lt;br&gt;\nPhosphorus: 48&lt;br&gt;&quot;,&quot;Name: Versailles Lake&lt;br&gt;\nChlorphylla: 4.43&lt;br&gt;\nNitrogen: 1240&lt;br&gt;\nPhosphorus: 121&lt;br&gt;&quot;,&quot;Name: Crouse Reservoir&lt;br&gt;\nChlorphylla: 29.46&lt;br&gt;\nNitrogen: 2286&lt;br&gt;\nPhosphorus: 102&lt;br&gt;&quot;,&quot;Name: Clearwater Lake&lt;br&gt;\nChlorphylla: 20.6&lt;br&gt;\nNitrogen: 488&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Bieri Lake Number 3&lt;br&gt;\nChlorphylla: 2.03&lt;br&gt;\nNitrogen: 561&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Strawberry Lake&lt;br&gt;\nChlorphylla: 1.33&lt;br&gt;\nNitrogen: 423&lt;br&gt;\nPhosphorus: 72&lt;br&gt;&quot;,&quot;Name: Trail Lake&lt;br&gt;\nChlorphylla: 2.43&lt;br&gt;\nNitrogen: 169&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: White Rock Lake&lt;br&gt;\nChlorphylla: 41.76&lt;br&gt;\nNitrogen: 733&lt;br&gt;\nPhosphorus: 75&lt;br&gt;&quot;,&quot;Name: Lake Marvin&lt;br&gt;\nChlorphylla: 25.88&lt;br&gt;\nNitrogen: 1672&lt;br&gt;\nPhosphorus: 105&lt;br&gt;&quot;,&quot;Name: Whippoorwill Lake&lt;br&gt;\nChlorphylla: 5.16&lt;br&gt;\nNitrogen: 388&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: L A K Reservoir&lt;br&gt;\nChlorphylla: 9.07&lt;br&gt;\nNitrogen: 216&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Alice Lake&lt;br&gt;\nChlorphylla: 4.75&lt;br&gt;\nNitrogen: 369&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: South Twin Lake&lt;br&gt;\nChlorphylla: 1.18&lt;br&gt;\nNitrogen: 191&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Sherman Reservoir&lt;br&gt;\nChlorphylla: 11.37&lt;br&gt;\nNitrogen: 359&lt;br&gt;\nPhosphorus: 121&lt;br&gt;&quot;,&quot;Name: Medical Lake&lt;br&gt;\nChlorphylla: 3.39&lt;br&gt;\nNitrogen: 1496&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Llano City Lake&lt;br&gt;\nChlorphylla: 1.12&lt;br&gt;\nNitrogen: 206&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Garriott Property Lake&lt;br&gt;\nChlorphylla: 13.86&lt;br&gt;\nNitrogen: 1144&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: Big Barbee Lake&lt;br&gt;\nChlorphylla: 6&lt;br&gt;\nNitrogen: 713&lt;br&gt;\nPhosphorus: 21&lt;br&gt;&quot;,&quot;Name: Echo Canyon Reservoir&lt;br&gt;\nChlorphylla: 2.02&lt;br&gt;\nNitrogen: 664&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Pishkun Reservoir&lt;br&gt;\nChlorphylla: 2.41&lt;br&gt;\nNitrogen: 235&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Stone Reservoir&lt;br&gt;\nChlorphylla: 6.82&lt;br&gt;\nNitrogen: 339&lt;br&gt;\nPhosphorus: 36&lt;br&gt;&quot;,&quot;Name: Lake Whitney&lt;br&gt;\nChlorphylla: NA&lt;br&gt;\nNitrogen: 660&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Cotile Lake&lt;br&gt;\nChlorphylla: 24.32&lt;br&gt;\nNitrogen: 751&lt;br&gt;\nPhosphorus: 31&lt;br&gt;&quot;,&quot;Name: Ericson Lake&lt;br&gt;\nChlorphylla: 25.28&lt;br&gt;\nNitrogen: 794&lt;br&gt;\nPhosphorus: 208&lt;br&gt;&quot;,&quot;Name: Weiss Reservoir&lt;br&gt;\nChlorphylla: 37.6&lt;br&gt;\nNitrogen: 738&lt;br&gt;\nPhosphorus: 107&lt;br&gt;&quot;,&quot;Name: Wapato&lt;br&gt;\nChlorphylla: 3.06&lt;br&gt;\nNitrogen: 640&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Holter Lake&lt;br&gt;\nChlorphylla: 3.94&lt;br&gt;\nNitrogen: 487&lt;br&gt;\nPhosphorus: 76&lt;br&gt;&quot;,&quot;Name: Whitefish Lake&lt;br&gt;\nChlorphylla: 0.89&lt;br&gt;\nNitrogen: 50&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Walker Lake&lt;br&gt;\nChlorphylla: 1.77&lt;br&gt;\nNitrogen: 1476&lt;br&gt;\nPhosphorus: 577&lt;br&gt;&quot;,&quot;Name: Crystal Lake&lt;br&gt;\nChlorphylla: 7.2&lt;br&gt;\nNitrogen: 790&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Yellow Bank Lake&lt;br&gt;\nChlorphylla: 1.98&lt;br&gt;\nNitrogen: 324&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Moss Creek Lake&lt;br&gt;\nChlorphylla: 12.64&lt;br&gt;\nNitrogen: 693&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Singleton Pond&lt;br&gt;\nChlorphylla: 136.66&lt;br&gt;\nNitrogen: 7684&lt;br&gt;\nPhosphorus: 876&lt;br&gt;&quot;,&quot;Name: Logan Martin Lake&lt;br&gt;\nChlorphylla: 32.98&lt;br&gt;\nNitrogen: 513&lt;br&gt;\nPhosphorus: 58&lt;br&gt;&quot;,&quot;Name: Rat Lake&lt;br&gt;\nChlorphylla: 145&lt;br&gt;\nNitrogen: 5350&lt;br&gt;\nPhosphorus: 347&lt;br&gt;&quot;,&quot;Name: South Chain Lake&lt;br&gt;\nChlorphylla: 15.18&lt;br&gt;\nNitrogen: 1336&lt;br&gt;\nPhosphorus: 29&lt;br&gt;&quot;,&quot;Name: Iowa Park Lake&lt;br&gt;\nChlorphylla: 16.64&lt;br&gt;\nNitrogen: 1440&lt;br&gt;\nPhosphorus: 130&lt;br&gt;&quot;,&quot;Name: L JONES PROPERTY LAKE&lt;br&gt;\nChlorphylla: 44.93&lt;br&gt;\nNitrogen: 1543&lt;br&gt;\nPhosphorus: 94&lt;br&gt;&quot;,&quot;Name: Blackman Lake&lt;br&gt;\nChlorphylla: 3.25&lt;br&gt;\nNitrogen: 738&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Livingston Reservoir&lt;br&gt;\nChlorphylla: 20.64&lt;br&gt;\nNitrogen: 685&lt;br&gt;\nPhosphorus: 96&lt;br&gt;&quot;,&quot;Name: Old Kerens City Lake&lt;br&gt;\nChlorphylla: 9.87&lt;br&gt;\nNitrogen: 559&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Lost Valley Reservoir&lt;br&gt;\nChlorphylla: 14.64&lt;br&gt;\nNitrogen: 455&lt;br&gt;\nPhosphorus: 46&lt;br&gt;&quot;,&quot;Name: Bruce Lake&lt;br&gt;\nChlorphylla: 37.66&lt;br&gt;\nNitrogen: 999&lt;br&gt;\nPhosphorus: 46&lt;br&gt;&quot;,&quot;Name: Mountain Lake&lt;br&gt;\nChlorphylla: 1.5&lt;br&gt;\nNitrogen: 116&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Arrowrock Reservoir&lt;br&gt;\nChlorphylla: 2.21&lt;br&gt;\nNitrogen: 70&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Wildwood Lake&lt;br&gt;\nChlorphylla: 271.44&lt;br&gt;\nNitrogen: 2655&lt;br&gt;\nPhosphorus: 237&lt;br&gt;&quot;,&quot;Name: Lake Okeechobee&lt;br&gt;\nChlorphylla: 54.43&lt;br&gt;\nNitrogen: 1200&lt;br&gt;\nPhosphorus: 105&lt;br&gt;&quot;,&quot;Name: Lake Fort Phantom Hill&lt;br&gt;\nChlorphylla: 8.7&lt;br&gt;\nNitrogen: 658&lt;br&gt;\nPhosphorus: 74&lt;br&gt;&quot;,&quot;Name: Fan Lake&lt;br&gt;\nChlorphylla: 1.77&lt;br&gt;\nNitrogen: 338&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Braunig Lake&lt;br&gt;\nChlorphylla: 35.42&lt;br&gt;\nNitrogen: 1535&lt;br&gt;\nPhosphorus: 81&lt;br&gt;&quot;,&quot;Name: Foster Reservoir&lt;br&gt;\nChlorphylla: 7.73&lt;br&gt;\nNitrogen: 316&lt;br&gt;\nPhosphorus: 41&lt;br&gt;&quot;,&quot;Name: Wister Lake&lt;br&gt;\nChlorphylla: 19.07&lt;br&gt;\nNitrogen: 612&lt;br&gt;\nPhosphorus: 88&lt;br&gt;&quot;,&quot;Name: Chase Lake&lt;br&gt;\nChlorphylla: 3.7&lt;br&gt;\nNitrogen: 374&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Wynnewood&lt;br&gt;\nChlorphylla: 38.88&lt;br&gt;\nNitrogen: 1612&lt;br&gt;\nPhosphorus: 88&lt;br&gt;&quot;,&quot;Name: Big Alkali Lake&lt;br&gt;\nChlorphylla: 83.5&lt;br&gt;\nNitrogen: 4319&lt;br&gt;\nPhosphorus: 180&lt;br&gt;&quot;,&quot;Name: Maskenthine Reservoir&lt;br&gt;\nChlorphylla: 52.85&lt;br&gt;\nNitrogen: 1821&lt;br&gt;\nPhosphorus: 191&lt;br&gt;&quot;,&quot;Name: Lake Lloyd Vincent&lt;br&gt;\nChlorphylla: 1.69&lt;br&gt;\nNitrogen: 455&lt;br&gt;\nPhosphorus: 15&lt;br&gt;&quot;,&quot;Name: Smith Lake&lt;br&gt;\nChlorphylla: 19.2&lt;br&gt;\nNitrogen: 2063&lt;br&gt;\nPhosphorus: 58&lt;br&gt;&quot;,&quot;Name: Otter Lake&lt;br&gt;\nChlorphylla: 428&lt;br&gt;\nNitrogen: 5813&lt;br&gt;\nPhosphorus: 471&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 5.25&lt;br&gt;\nNitrogen: 2263&lt;br&gt;\nPhosphorus: 1329&lt;br&gt;&quot;,&quot;Name: Smith and Sayles Reservoir&lt;br&gt;\nChlorphylla: 4.59&lt;br&gt;\nNitrogen: 300&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: School House Pond&lt;br&gt;\nChlorphylla: 0.9&lt;br&gt;\nNitrogen: 110&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Beach Pond&lt;br&gt;\nChlorphylla: 2.77&lt;br&gt;\nNitrogen: 98&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 29.12&lt;br&gt;\nNitrogen: 643&lt;br&gt;\nPhosphorus: 43&lt;br&gt;&quot;,&quot;Name: Canton Lake&lt;br&gt;\nChlorphylla: 8.08&lt;br&gt;\nNitrogen: 651&lt;br&gt;\nPhosphorus: 75&lt;br&gt;&quot;,&quot;Name: Carl Etling Lake&lt;br&gt;\nChlorphylla: 10.19&lt;br&gt;\nNitrogen: 770&lt;br&gt;\nPhosphorus: 47&lt;br&gt;&quot;,&quot;Name: Dolese&lt;br&gt;\nChlorphylla: 66.96&lt;br&gt;\nNitrogen: 1627&lt;br&gt;\nPhosphorus: 61&lt;br&gt;&quot;,&quot;Name: Spring Lake&lt;br&gt;\nChlorphylla: 1.47&lt;br&gt;\nNitrogen: 188&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Kaw Lake&lt;br&gt;\nChlorphylla: 2.5&lt;br&gt;\nNitrogen: 1871&lt;br&gt;\nPhosphorus: 177&lt;br&gt;&quot;,&quot;Name: Rush Creek Site 17 Reservoir&lt;br&gt;\nChlorphylla: 12.08&lt;br&gt;\nNitrogen: 571&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: Bowdish Reservoir&lt;br&gt;\nChlorphylla: 2.56&lt;br&gt;\nNitrogen: 251&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Spring Creek Lake&lt;br&gt;\nChlorphylla: 12.1&lt;br&gt;\nNitrogen: 480&lt;br&gt;\nPhosphorus: 38&lt;br&gt;&quot;,&quot;Name: Lake Ponca&lt;br&gt;\nChlorphylla: 34.2&lt;br&gt;\nNitrogen: 803&lt;br&gt;\nPhosphorus: 38&lt;br&gt;&quot;,&quot;Name: Lake Overholser&lt;br&gt;\nChlorphylla: 29.4&lt;br&gt;\nNitrogen: 816&lt;br&gt;\nPhosphorus: 282&lt;br&gt;&quot;,&quot;Name: Hudson Lake&lt;br&gt;\nChlorphylla: 18.51&lt;br&gt;\nNitrogen: 680&lt;br&gt;\nPhosphorus: 32&lt;br&gt;&quot;,&quot;Name: Veteran&#x27;s Lake&lt;br&gt;\nChlorphylla: 5.38&lt;br&gt;\nNitrogen: 426&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Birch Lake&lt;br&gt;\nChlorphylla: 13.83&lt;br&gt;\nNitrogen: 557&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Bayou D&#x27;Arbonne Lake&lt;br&gt;\nChlorphylla: 26.08&lt;br&gt;\nNitrogen: 681&lt;br&gt;\nPhosphorus: 43&lt;br&gt;&quot;,&quot;Name: Crowder Lake&lt;br&gt;\nChlorphylla: 76.32&lt;br&gt;\nNitrogen: 1247&lt;br&gt;\nPhosphorus: 90&lt;br&gt;&quot;,&quot;Name: Lake Rodemacher&lt;br&gt;\nChlorphylla: 16.8&lt;br&gt;\nNitrogen: 446&lt;br&gt;\nPhosphorus: 84&lt;br&gt;&quot;,&quot;Name: Wilson Lake&lt;br&gt;\nChlorphylla: 104.4&lt;br&gt;\nNitrogen: 1333&lt;br&gt;\nPhosphorus: 142&lt;br&gt;&quot;,&quot;Name: NA&lt;br&gt;\nChlorphylla: 4.62&lt;br&gt;\nNitrogen: 421&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: Upper Clear Boggy Creek Site 25 Reservoir&lt;br&gt;\nChlorphylla: 38.3&lt;br&gt;\nNitrogen: 954&lt;br&gt;\nPhosphorus: 121&lt;br&gt;&quot;,&quot;Name: Newt Graham Lake&lt;br&gt;\nChlorphylla: NA&lt;br&gt;\nNitrogen: 623&lt;br&gt;\nPhosphorus: 82&lt;br&gt;&quot;,&quot;Name: Maidstone Lake&lt;br&gt;\nChlorphylla: 1.02&lt;br&gt;\nNitrogen: 149&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Lake Wood&lt;br&gt;\nChlorphylla: 1.04&lt;br&gt;\nNitrogen: 151&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Goose Pond&lt;br&gt;\nChlorphylla: 1.09&lt;br&gt;\nNitrogen: 414&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Long Pond&lt;br&gt;\nChlorphylla: 3.27&lt;br&gt;\nNitrogen: 191&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Crooked Pond&lt;br&gt;\nChlorphylla: 14.18&lt;br&gt;\nNitrogen: 264&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Roderique Pond&lt;br&gt;\nChlorphylla: 2.72&lt;br&gt;\nNitrogen: 256&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Halfway Pond&lt;br&gt;\nChlorphylla: 31.36&lt;br&gt;\nNitrogen: 444&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Cusky Pond&lt;br&gt;\nChlorphylla: 16.8&lt;br&gt;\nNitrogen: 532&lt;br&gt;\nPhosphorus: 35&lt;br&gt;&quot;,&quot;Name: Spring Lake&lt;br&gt;\nChlorphylla: 1.67&lt;br&gt;\nNitrogen: 130&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Middle Chain Pond&lt;br&gt;\nChlorphylla: 2.91&lt;br&gt;\nNitrogen: 236&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Halfmile Pond&lt;br&gt;\nChlorphylla: 3.15&lt;br&gt;\nNitrogen: 394&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Tomhegan Pond&lt;br&gt;\nChlorphylla: 7.94&lt;br&gt;\nNitrogen: 629&lt;br&gt;\nPhosphorus: 28&lt;br&gt;&quot;,&quot;Name: Otter Pond&lt;br&gt;\nChlorphylla: 11.41&lt;br&gt;\nNitrogen: 731&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Denny Pond&lt;br&gt;\nChlorphylla: 1.17&lt;br&gt;\nNitrogen: 161&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Carry Pond&lt;br&gt;\nChlorphylla: 4.82&lt;br&gt;\nNitrogen: 807&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Hall Lake&lt;br&gt;\nChlorphylla: 3.97&lt;br&gt;\nNitrogen: 299&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Midget Lake&lt;br&gt;\nChlorphylla: 5.64&lt;br&gt;\nNitrogen: 593&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Big Gibson Lake&lt;br&gt;\nChlorphylla: 5.45&lt;br&gt;\nNitrogen: 328&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Spring Lake&lt;br&gt;\nChlorphylla: 1.11&lt;br&gt;\nNitrogen: 722&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Female Pond&lt;br&gt;\nChlorphylla: 4.35&lt;br&gt;\nNitrogen: 246&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Gardner Pond&lt;br&gt;\nChlorphylla: 0.69&lt;br&gt;\nNitrogen: 129&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Big Reed Pond&lt;br&gt;\nChlorphylla: 1.75&lt;br&gt;\nNitrogen: 204&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Fourth Machias Lake&lt;br&gt;\nChlorphylla: 1.84&lt;br&gt;\nNitrogen: 314&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Pleasant Lake&lt;br&gt;\nChlorphylla: 2.06&lt;br&gt;\nNitrogen: 156&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Woodruff&lt;br&gt;\nChlorphylla: 10.53&lt;br&gt;\nNitrogen: 985&lt;br&gt;\nPhosphorus: 33&lt;br&gt;&quot;,&quot;Name: Sheeler Lake&lt;br&gt;\nChlorphylla: 1.54&lt;br&gt;\nNitrogen: 98&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Palestine Lake&lt;br&gt;\nChlorphylla: 5.28&lt;br&gt;\nNitrogen: 474&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: McClellan Lake&lt;br&gt;\nChlorphylla: 18.72&lt;br&gt;\nNitrogen: 801&lt;br&gt;\nPhosphorus: 24&lt;br&gt;&quot;,&quot;Name: White Lake&lt;br&gt;\nChlorphylla: 15.89&lt;br&gt;\nNitrogen: 1531&lt;br&gt;\nPhosphorus: 166&lt;br&gt;&quot;,&quot;Name: Olin Lake&lt;br&gt;\nChlorphylla: 1.01&lt;br&gt;\nNitrogen: 2089&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Sullivan Lake&lt;br&gt;\nChlorphylla: 2.75&lt;br&gt;\nNitrogen: 828&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Hungry Man Lake&lt;br&gt;\nChlorphylla: 2.67&lt;br&gt;\nNitrogen: 779&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Artichoke Lake&lt;br&gt;\nChlorphylla: 42.26&lt;br&gt;\nNitrogen: 2475&lt;br&gt;\nPhosphorus: 271&lt;br&gt;&quot;,&quot;Name: Island Lake&lt;br&gt;\nChlorphylla: 2.47&lt;br&gt;\nNitrogen: 447&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Elk Lake&lt;br&gt;\nChlorphylla: 2.87&lt;br&gt;\nNitrogen: 529&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Bass Lake&lt;br&gt;\nChlorphylla: 47.95&lt;br&gt;\nNitrogen: 1175&lt;br&gt;\nPhosphorus: 62&lt;br&gt;&quot;,&quot;Name: Cedar Lake&lt;br&gt;\nChlorphylla: 1.21&lt;br&gt;\nNitrogen: 595&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Sarah Lake&lt;br&gt;\nChlorphylla: 25.12&lt;br&gt;\nNitrogen: 1174&lt;br&gt;\nPhosphorus: 140&lt;br&gt;&quot;,&quot;Name: Elbow Lake&lt;br&gt;\nChlorphylla: 5.39&lt;br&gt;\nNitrogen: 540&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Lake Linka&lt;br&gt;\nChlorphylla: 7&lt;br&gt;\nNitrogen: 835&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Beaver Lake&lt;br&gt;\nChlorphylla: 13.54&lt;br&gt;\nNitrogen: 880&lt;br&gt;\nPhosphorus: 34&lt;br&gt;&quot;,&quot;Name: Lake Hattie&lt;br&gt;\nChlorphylla: 15.43&lt;br&gt;\nNitrogen: 2647&lt;br&gt;\nPhosphorus: 446&lt;br&gt;&quot;,&quot;Name: Mary Lake&lt;br&gt;\nChlorphylla: 12.78&lt;br&gt;\nNitrogen: 1065&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Wood Lake&lt;br&gt;\nChlorphylla: 40.03&lt;br&gt;\nNitrogen: 1987&lt;br&gt;\nPhosphorus: 82&lt;br&gt;&quot;,&quot;Name: Duck Lake&lt;br&gt;\nChlorphylla: 1.04&lt;br&gt;\nNitrogen: 183&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Debouille Lake&lt;br&gt;\nChlorphylla: 0.82&lt;br&gt;\nNitrogen: 118&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Tilden Pond&lt;br&gt;\nChlorphylla: 5.31&lt;br&gt;\nNitrogen: 286&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Island Pond&lt;br&gt;\nChlorphylla: 0.82&lt;br&gt;\nNitrogen: 168&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Pushineer Pond&lt;br&gt;\nChlorphylla: 0.73&lt;br&gt;\nNitrogen: 146&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Upper Pond&lt;br&gt;\nChlorphylla: 0.89&lt;br&gt;\nNitrogen: 216&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Fourth Debsconeag Lake&lt;br&gt;\nChlorphylla: 1.08&lt;br&gt;\nNitrogen: 138&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Trout Pond&lt;br&gt;\nChlorphylla: 3.99&lt;br&gt;\nNitrogen: 292&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Willard Pond&lt;br&gt;\nChlorphylla: 0.78&lt;br&gt;\nNitrogen: 177&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Lamoille Lake&lt;br&gt;\nChlorphylla: 1.29&lt;br&gt;\nNitrogen: 124&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Angel Lake&lt;br&gt;\nChlorphylla: 3.42&lt;br&gt;\nNitrogen: 223&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Upper Pahranagat Lake&lt;br&gt;\nChlorphylla: 28&lt;br&gt;\nNitrogen: 3225&lt;br&gt;\nPhosphorus: 154&lt;br&gt;&quot;,&quot;Name: Argonne Lake&lt;br&gt;\nChlorphylla: 5.89&lt;br&gt;\nNitrogen: 500&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Miller Antrim Lake&lt;br&gt;\nChlorphylla: 1&lt;br&gt;\nNitrogen: 244&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Bull Trout Lake&lt;br&gt;\nChlorphylla: 0.7&lt;br&gt;\nNitrogen: 88&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Cape Horn Lakes&lt;br&gt;\nChlorphylla: 0.68&lt;br&gt;\nNitrogen: 318&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Chartlton Lake&lt;br&gt;\nChlorphylla: 0.2&lt;br&gt;\nNitrogen: 136&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Council Lake&lt;br&gt;\nChlorphylla: 0.68&lt;br&gt;\nNitrogen: 39&lt;br&gt;\nPhosphorus: 1&lt;br&gt;&quot;,&quot;Name: Deer Lake&lt;br&gt;\nChlorphylla: 0.65&lt;br&gt;\nNitrogen: 191&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Fish Lake&lt;br&gt;\nChlorphylla: 7.79&lt;br&gt;\nNitrogen: 279&lt;br&gt;\nPhosphorus: 13&lt;br&gt;&quot;,&quot;Name: Four Mile Lake&lt;br&gt;\nChlorphylla: 2.74&lt;br&gt;\nNitrogen: 143&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Rainy Lake&lt;br&gt;\nChlorphylla: 0.53&lt;br&gt;\nNitrogen: 56&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Squaw Lakes&lt;br&gt;\nChlorphylla: 0.66&lt;br&gt;\nNitrogen: 150&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: U Lake&lt;br&gt;\nChlorphylla: 6.04&lt;br&gt;\nNitrogen: 312&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Yellow Belly Lake&lt;br&gt;\nChlorphylla: 0.38&lt;br&gt;\nNitrogen: 36&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Piney Run Reservoir&lt;br&gt;\nChlorphylla: 2.87&lt;br&gt;\nNitrogen: 1103&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Holiday Lake&lt;br&gt;\nChlorphylla: 3.97&lt;br&gt;\nNitrogen: 230&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: Elkhorn Lake&lt;br&gt;\nChlorphylla: 2.48&lt;br&gt;\nNitrogen: 101&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Beaver Dam Reservoir&lt;br&gt;\nChlorphylla: 5.34&lt;br&gt;\nNitrogen: 235&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Harrison Lake&lt;br&gt;\nChlorphylla: 12.11&lt;br&gt;\nNitrogen: 531&lt;br&gt;\nPhosphorus: 37&lt;br&gt;&quot;,&quot;Name: Savage River Reservoir&lt;br&gt;\nChlorphylla: 1.68&lt;br&gt;\nNitrogen: 505&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Philpott Reservoir&lt;br&gt;\nChlorphylla: 2.03&lt;br&gt;\nNitrogen: 219&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Burnt Mills&lt;br&gt;\nChlorphylla: 15.96&lt;br&gt;\nNitrogen: 629&lt;br&gt;\nPhosphorus: 26&lt;br&gt;&quot;,&quot;Name: Little Creek Reservoir&lt;br&gt;\nChlorphylla: 4.67&lt;br&gt;\nNitrogen: 366&lt;br&gt;\nPhosphorus: 6&lt;br&gt;&quot;,&quot;Name: Diascund Creek Reservoir&lt;br&gt;\nChlorphylla: 27.52&lt;br&gt;\nNitrogen: 740&lt;br&gt;\nPhosphorus: 31&lt;br&gt;&quot;,&quot;Name: Gatewood Reservoir&lt;br&gt;\nChlorphylla: 2.24&lt;br&gt;\nNitrogen: 277&lt;br&gt;\nPhosphorus: 9&lt;br&gt;&quot;,&quot;Name: Waller Mill Reservoir&lt;br&gt;\nChlorphylla: 8.48&lt;br&gt;\nNitrogen: 366&lt;br&gt;\nPhosphorus: 22&lt;br&gt;&quot;,&quot;Name: Sleepy Creek Lake&lt;br&gt;\nChlorphylla: 8.48&lt;br&gt;\nNitrogen: 311&lt;br&gt;\nPhosphorus: 12&lt;br&gt;&quot;,&quot;Name: Boley Lake&lt;br&gt;\nChlorphylla: 12&lt;br&gt;\nNitrogen: 169&lt;br&gt;\nPhosphorus: 4&lt;br&gt;&quot;,&quot;Name: Beaverdale Reservoir&lt;br&gt;\nChlorphylla: 2.51&lt;br&gt;\nNitrogen: 309&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Lake Sainte Kathryn&lt;br&gt;\nChlorphylla: 4.1&lt;br&gt;\nNitrogen: 405&lt;br&gt;\nPhosphorus: 7&lt;br&gt;&quot;,&quot;Name: Lake Ottawa&lt;br&gt;\nChlorphylla: 1.05&lt;br&gt;\nNitrogen: 148&lt;br&gt;\nPhosphorus: 3&lt;br&gt;&quot;,&quot;Name: Pelican Lake&lt;br&gt;\nChlorphylla: 118.4&lt;br&gt;\nNitrogen: 6880&lt;br&gt;\nPhosphorus: 363&lt;br&gt;&quot;,&quot;Name: Watts Lake&lt;br&gt;\nChlorphylla: 77.2&lt;br&gt;\nNitrogen: 9359&lt;br&gt;\nPhosphorus: 839&lt;br&gt;&quot;,&quot;Name: Long Lake&lt;br&gt;\nChlorphylla: 112.46&lt;br&gt;\nNitrogen: 4166&lt;br&gt;\nPhosphorus: 1719&lt;br&gt;&quot;,&quot;Name: Wagon Train Lake&lt;br&gt;\nChlorphylla: 30.67&lt;br&gt;\nNitrogen: 1281&lt;br&gt;\nPhosphorus: 318&lt;br&gt;&quot;,&quot;Name: George Wyth Lake&lt;br&gt;\nChlorphylla: 70.27&lt;br&gt;\nNitrogen: 1205&lt;br&gt;\nPhosphorus: 54&lt;br&gt;&quot;,&quot;Name: Green Belt Lake&lt;br&gt;\nChlorphylla: 15.01&lt;br&gt;\nNitrogen: 544&lt;br&gt;\nPhosphorus: 23&lt;br&gt;&quot;,&quot;Name: Cowley County State Lake&lt;br&gt;\nChlorphylla: 13.87&lt;br&gt;\nNitrogen: 380&lt;br&gt;\nPhosphorus: 20&lt;br&gt;&quot;,&quot;Name: Harveyville Lake&lt;br&gt;\nChlorphylla: 21.28&lt;br&gt;\nNitrogen: 333&lt;br&gt;\nPhosphorus: 19&lt;br&gt;&quot;,&quot;Name: Lake Kahola&lt;br&gt;\nChlorphylla: 16.32&lt;br&gt;\nNitrogen: 513&lt;br&gt;\nPhosphorus: 37&lt;br&gt;&quot;,&quot;Name: Louisburg State Fishing Lake&lt;br&gt;\nChlorphylla: 14.26&lt;br&gt;\nNitrogen: 637&lt;br&gt;\nPhosphorus: 62&lt;br&gt;&quot;,&quot;Name: Melvern Lake&lt;br&gt;\nChlorphylla: 11.04&lt;br&gt;\nNitrogen: 389&lt;br&gt;\nPhosphorus: 26&lt;br&gt;&quot;,&quot;Name: Mound City Lake&lt;br&gt;\nChlorphylla: 17.28&lt;br&gt;\nNitrogen: 408&lt;br&gt;\nPhosphorus: 37&lt;br&gt;&quot;,&quot;Name: Pottawatomie County State Lake&lt;br&gt;\nChlorphylla: 35.86&lt;br&gt;\nNitrogen: 983&lt;br&gt;\nPhosphorus: 80&lt;br&gt;&quot;,&quot;Name: Wilson Lake&lt;br&gt;\nChlorphylla: 4.78&lt;br&gt;\nNitrogen: 611&lt;br&gt;\nPhosphorus: 17&lt;br&gt;&quot;,&quot;Name: Murray Gill Lake&lt;br&gt;\nChlorphylla: 7.98&lt;br&gt;\nNitrogen: 350&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Council Bluff Lake&lt;br&gt;\nChlorphylla: 0.79&lt;br&gt;\nNitrogen: 203&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Fourche Lake&lt;br&gt;\nChlorphylla: 1.49&lt;br&gt;\nNitrogen: 316&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Loggers Lake&lt;br&gt;\nChlorphylla: 2.7&lt;br&gt;\nNitrogen: 223&lt;br&gt;\nPhosphorus: 5&lt;br&gt;&quot;,&quot;Name: Lake Northwood&lt;br&gt;\nChlorphylla: 7.6&lt;br&gt;\nNitrogen: 351&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Lake Wauwanoka&lt;br&gt;\nChlorphylla: 5.36&lt;br&gt;\nNitrogen: 326&lt;br&gt;\nPhosphorus: 10&lt;br&gt;&quot;,&quot;Name: Box Butte Reservoir&lt;br&gt;\nChlorphylla: 6.75&lt;br&gt;\nNitrogen: 789&lt;br&gt;\nPhosphorus: 31&lt;br&gt;&quot;,&quot;Name: Duck Lake&lt;br&gt;\nChlorphylla: 7.28&lt;br&gt;\nNitrogen: 3172&lt;br&gt;\nPhosphorus: 650&lt;br&gt;&quot;,&quot;Name: Goose Lake&lt;br&gt;\nChlorphylla: 101.25&lt;br&gt;\nNitrogen: 25638&lt;br&gt;\nPhosphorus: 2147&lt;br&gt;&quot;,&quot;Name: Hackberry Lake&lt;br&gt;\nChlorphylla: 143.6&lt;br&gt;\nNitrogen: 8647&lt;br&gt;\nPhosphorus: 393&lt;br&gt;&quot;,&quot;Name: Island Lake&lt;br&gt;\nChlorphylla: 99.52&lt;br&gt;\nNitrogen: 7925&lt;br&gt;\nPhosphorus: 495&lt;br&gt;&quot;,&quot;Name: Inks Lake&lt;br&gt;\nChlorphylla: 33.55&lt;br&gt;\nNitrogen: 767&lt;br&gt;\nPhosphorus: 63&lt;br&gt;&quot;,&quot;Name: Buchanan Lake&lt;br&gt;\nChlorphylla: 8.16&lt;br&gt;\nNitrogen: 468&lt;br&gt;\nPhosphorus: 16&lt;br&gt;&quot;,&quot;Name: Lake Cisco&lt;br&gt;\nChlorphylla: 3.63&lt;br&gt;\nNitrogen: 484&lt;br&gt;\nPhosphorus: 14&lt;br&gt;&quot;,&quot;Name: Lake Jacksonville&lt;br&gt;\nChlorphylla: 8.43&lt;br&gt;\nNitrogen: 1069&lt;br&gt;\nPhosphorus: 72&lt;br&gt;&quot;,&quot;Name: Lake Murvaul&lt;br&gt;\nChlorphylla: 109.83&lt;br&gt;\nNitrogen: 258&lt;br&gt;\nPhosphorus: 11&lt;br&gt;&quot;,&quot;Name: O C Fisher Lake&lt;br&gt;\nChlorphylla: 12.58&lt;br&gt;\nNitrogen: 933&lt;br&gt;\nPhosphorus: 69&lt;br&gt;&quot;,&quot;Name: Stillhouse Hollow Lake&lt;br&gt;\nChlorphylla: 3.89&lt;br&gt;\nNitrogen: 308&lt;br&gt;\nPhosphorus: 8&lt;br&gt;&quot;,&quot;Name: Wright Patman Lake&lt;br&gt;\nChlorphylla: 80.1&lt;br&gt;\nNitrogen: 1433&lt;br&gt;\nPhosphorus: 181&lt;br&gt;&quot;,&quot;Name: Choke Canyon Reservoir&lt;br&gt;\nChlorphylla: 15.12&lt;br&gt;\nNitrogen: 683&lt;br&gt;\nPhosphorus: 74&lt;br&gt;&quot;,&quot;Name: Lowes Lake&lt;br&gt;\nChlorphylla: 149.04&lt;br&gt;\nNitrogen: 1566&lt;br&gt;\nPhosphorus: 67&lt;br&gt;&quot;,&quot;Name: Sy Lake&lt;br&gt;\nChlorphylla: 32.9&lt;br&gt;\nNitrogen: 905&lt;br&gt;\nPhosphorus: 49&lt;br&gt;&quot;],null,null,null,null,{&quot;interactive&quot;:false,&quot;permanent&quot;:false,&quot;direction&quot;:&quot;auto&quot;,&quot;opacity&quot;:1,&quot;offset&quot;:[0,0],&quot;textsize&quot;:&quot;10px&quot;,&quot;textOnly&quot;:false,&quot;className&quot;:&quot;&quot;,&quot;sticky&quot;:true},null]}],&quot;limits&quot;:{&quot;lat&quot;:[26.93623169,48.97902855],&quot;lng&quot;:[-124.6325273,-67.69930253]}},&quot;evals&quot;:[],&quot;jsHooks&quot;:[]}&lt;&#x2F;script&gt;
```&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>‚àë { my parts }</title>
        <published>2019-08-04T00:00:00+00:00</published>
        <updated>2019-08-04T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/my-parts/"/>
        <id>https://josiah.rs/posts/my-parts/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/my-parts/">&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;terrorists&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;readr&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;docs.google.com&#x2F;spreadsheets&#x2F;d&#x2F;e&#x2F;2PACX-1vSqNhpFX_69klKgJCVobc3fjHYVE9pNosrDi9h6irLlCtSSLpR704iu9VqI7CxdRi0iKt3p1FDYbu8Y&#x2F;pub?gid=956062857&amp;amp;single=true&amp;amp;output=csv&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;img src=&quot;figs&#x2F;unnamed-chunk-18-1.png&quot; width=&quot;700px&quot; style=&quot;display: block; margin: auto;&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;terrorist_by_race&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 7 √ó 6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   race                n fatalities injured total_victims   `%`&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;           &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;         &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt; white              63        554    &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;067          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;621 69.3 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;2&lt;&#x2F;span&gt; other               5         90     115           205  8.77&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;3&lt;&#x2F;span&gt; black              19        108      89           197  8.43&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;4&lt;&#x2F;span&gt; asian               8         77      33           110  4.70&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;5&lt;&#x2F;span&gt; unclear             6         40      61           101  4.32&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;6&lt;&#x2F;span&gt; latino             10         44      33            77  3.29&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;7&lt;&#x2F;span&gt; native american     3         19       8            27  1.15&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;img src=&quot;figs&#x2F;unnamed-chunk-21-1.png&quot; width=&quot;700px&quot; style=&quot;display: block; margin: auto;&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;terrorist_by_gender&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 3 √ó 6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   gender            n fatalities injured total_victims    `%`&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;         &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;         &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;  &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt; male            110        903    &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;380          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;2&lt;&#x2F;span&gt;283 97.6  &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;2&lt;&#x2F;span&gt; male &amp;amp; female     1         14      21            35  1.50 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;3&lt;&#x2F;span&gt; female            3         15       5            20  0.855&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;terrorist&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;angry&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;white&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;male&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;my_parts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;angry&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;white&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;male&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;my_parts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;terrorist&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] TRUE TRUE TRUE&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;`I am`&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sum.html&#x27;&gt;sum&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;my_parts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] TRUE&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;`I am`&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sum.html&#x27;&gt;sum&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;terrorist&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kc&#x27;&gt;FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;white_males&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;terrorists&lt;&#x2F;span&gt;,
                      &lt;span class=&#x27;nv&#x27;&gt;race&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;white&quot;&lt;&#x2F;span&gt;,
                      &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;chartr.html&#x27;&gt;tolower&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;gender&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;male&quot;&lt;&#x2F;span&gt;,
                      &lt;span class=&#x27;o&#x27;&gt;!&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;NA.html&#x27;&gt;is.na&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;name&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;white_males&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;name&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [1] &quot;Jordan Witmer&quot;             &quot;Zephen A. Xaver&quot;           &quot;Robert D. Bowers&quot;         &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [4] &quot;Jarrod W. Ramos&quot;           &quot;Dimitrios Pagourtzis&quot;      &quot;Travis Reinking&quot;          &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [7] &quot;Nikolas J. Cruz&quot;           &quot;Timothy O&#x27;Brien Smith&quot;     &quot;Kevin Janson Neal&quot;        &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [10] &quot;Devin Patrick Kelley&quot;      &quot;Scott Allen Ostrem&quot;        &quot;Stephen Craig Paddock&quot;    &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [13] &quot;Randy Stair&quot;               &quot;Thomas Hartless&quot;           &quot;Jason B. Dalton&quot;          &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [16] &quot;Robert Lewis Dear&quot;         &quot;Noah Harpham&quot;              &quot;Dylann Storm Roof&quot;        &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [19] &quot;Elliot Rodger&quot;             &quot;John Zawahri&quot;              &quot;Kurt Myers&quot;               &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [22] &quot;Adam Lanza&quot;                &quot;Andrew Engeldinger&quot;        &quot;Wade Michael Page&quot;        &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [25] &quot;James Holmes&quot;              &quot;Ian Stawicki&quot;              &quot;Scott Evans Dekraai&quot;      &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [28] &quot;Jared Loughner&quot;            &quot;Robert Stewart&quot;            &quot;Wesley Neal Higdon&quot;       &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [31] &quot;Steven Kazmierczak&quot;        &quot;Robert A. Hawkins&quot;         &quot;Tyler Peterson&quot;           &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [34] &quot;Sulejman Taloviƒá\u0087&quot;    &quot;Charles Carl Roberts&quot;      &quot;Kyle Aaron Huff&quot;          &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [37] &quot;Terry Michael Ratzmann&quot;    &quot;Nathan Gale&quot;               &quot;Douglas Williams&quot;         &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [40] &quot;Michael McDermott&quot;         &quot;Larry Gene Ashbrook&quot;       &quot;Day trader Mark O. Barton&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [43] &quot;Eric Harris&quot;               &quot;Kipland P. Kinkel&quot;         &quot;Mitchell Scott Johnson&quot;   &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [46] &quot;Matthew Beck&quot;              &quot;Dean Allen Mellberg&quot;       &quot;Kenneth Junior French&quot;    &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [49] &quot;Gian Luigi Ferri&quot;          &quot;John T. Miller&quot;            &quot;Eric Houston&quot;             &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [52] &quot;Thomas McIlvane&quot;           &quot;George Hennard&quot;            &quot;Joseph T. Wesbecker&quot;      &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [55] &quot;Patrick Purdy&quot;             &quot;Richard Farley&quot;            &quot;William Cruse&quot;            &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [58] &quot;Patrick Sherrill&quot;          &quot;James Oliver Huberty&quot;      &quot;Abdelkrim Belachheb&quot;      &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [61] &quot;Carl Robert Brown&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;am_i&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;terrorist&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;msg&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;am i ==&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;terrorist&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;print.html&#x27;&gt;print&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;msg&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;print.html&#x27;&gt;print&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;`am i`&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;terrorist&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;white_males&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;name&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;walk&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;am_i&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Jordan Witmer&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Zephen A. Xaver&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Robert D. Bowers&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Jarrod W. Ramos&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Dimitrios Pagourtzis&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Travis Reinking&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Nikolas J. Cruz&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Timothy O&#x27;Brien Smith&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Kevin Janson Neal&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Devin Patrick Kelley&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Scott Allen Ostrem&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Stephen Craig Paddock&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Randy Stair&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Thomas Hartless&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Jason B. Dalton&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Robert Lewis Dear&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Noah Harpham&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Dylann Storm Roof&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Elliot Rodger&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == John Zawahri&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Kurt Myers&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Adam Lanza&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Andrew Engeldinger&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Wade Michael Page&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == James Holmes&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Ian Stawicki&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Scott Evans Dekraai&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Jared Loughner&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Robert Stewart&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Wesley Neal Higdon&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Steven Kazmierczak&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Robert A. Hawkins&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Tyler Peterson&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Sulejman Taloviƒá\u0087&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Charles Carl Roberts&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Kyle Aaron Huff&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Terry Michael Ratzmann&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Nathan Gale&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Douglas Williams&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Michael McDermott&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Larry Gene Ashbrook&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Day trader Mark O. Barton&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Eric Harris&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Kipland P. Kinkel&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Mitchell Scott Johnson&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Matthew Beck&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Dean Allen Mellberg&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Kenneth Junior French&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Gian Luigi Ferri&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == John T. Miller&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Eric Houston&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Thomas McIlvane&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == George Hennard&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Joseph T. Wesbecker&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Patrick Purdy&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Richard Farley&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == William Cruse&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Patrick Sherrill&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == James Oliver Huberty&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Abdelkrim Belachheb&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;`am i` == Carl Robert Brown&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] FALSE&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;`I am`&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sum.html&#x27;&gt;sum&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;my_parts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Web-scraping for Campaigns</title>
        <published>2019-06-11T00:00:00+00:00</published>
        <updated>2019-06-11T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/scraping-4-campaigns/"/>
        <id>https://josiah.rs/posts/scraping-4-campaigns/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/scraping-4-campaigns/">&lt;p&gt;Note: 2022-11-14 I&#x27;m migrating my website and this can no longer be reproduced. This blog post is based on the short guide I wrote back in 2019. &lt;a href=&quot;https:&#x2F;&#x2F;r4campaigns.netlify.app&#x2F;&quot;&gt;Please see the old bookdown here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;As the primaries approach, I am experiencing a mix of angst, FOMO, and excitement. One of my largest concerns is that progressive campaigns are stuck in a sort of antiquated but nonetheless entrenched workflow. Google Sheets reign in metric reporting. Here I want to present one use case (of a few more to come) where R can be leveraged by your data team.&lt;&#x2F;p&gt;
&lt;p&gt;In this post I show you how to scrape the most recent polling data from FiveThirtyEight. FiveThirtyEight aggregates this data in an available way. This can allow you as a Data Manager to provide a useful report to your Media Manager.&lt;&#x2F;p&gt;
&lt;p&gt;As always, please feel free to contact me on Twitter &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;josiahparry&quot;&gt;@josiahparry&lt;&#x2F;a&gt; if you have any questions or want to discuss this further.&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;polling-use-case&quot;&gt;Polling use case&lt;&#x2F;h1&gt;
&lt;p&gt;A very important metric to keep track of is how your candidate is polling. Are they gaining a lead in the polls or falling behind? This data is often reported via traditional news organizations or some other mediums. The supposed demi-God and mythical pollster Nate Silver&#x27;s organization FiveThirtyEight does a wonderful job aggregating polls. Their page &lt;a href=&quot;https:&#x2F;&#x2F;projects.fivethirtyeight.com&#x2F;2020-primaries&#x2F;democratic&#x2F;national&#x2F;&quot;&gt;National 2020 Democratic Presidential Primary Polls&lt;&#x2F;a&gt; has a table of the most recent polls from many different pollsters.&lt;&#x2F;p&gt;
&lt;p&gt;In this use case we will acquire this data by web scraping using &lt;code&gt;rvest&lt;&#x2F;code&gt;. We will also go over ways to programatically save polls results to a text file. Saving polling results can allow you present a long term view of your candidate&#x27;s growth during the quarter.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;understanding-rvest&quot;&gt;Understanding &lt;code&gt;rvest&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;This use case will provide a cursory overview of the package &lt;code&gt;rvest&lt;&#x2F;code&gt;. To learn more go &lt;a href=&quot;http:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Web scraping is the process of extracting data from a website. Websites are written in HTML and CSS. There are a few aspects of these languages that are used in web scraping that is important to know. HTML is written in a series of what are call tags. A tag is a set of characters wrapped in angle brackets---i.e.¬†&lt;code&gt;&amp;lt;img&amp;gt;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;With CSS (cascading style sheets), web developers can give unique identifiers to a tag. Classes can also be assigned to a tag. Think of these as group. With web scraping we can specify a particular part of a website by it&#x27;s HTML tag and perhaps it&#x27;s class or ID. &lt;code&gt;rvest&lt;&#x2F;code&gt; provides a large set of functions to make this simpler.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;example&quot;&gt;Example&lt;&#x2F;h2&gt;
&lt;p&gt;For this example we will be scraping FiveThirtyEight&#x27;s aggregated poll table. The table can be found at &lt;a href=&quot;https:&#x2F;&#x2F;projects.fivethirtyeight.com&#x2F;2020-primaries&#x2F;democratic&#x2F;national&#x2F;&quot;&gt;https:&#x2F;&#x2F;projects.fivethirtyeight.com&#x2F;2020-primaries&#x2F;democratic&#x2F;national&#x2F;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Before we begin, we must always prepare our workspace. Mise en place.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;&#x27;&gt;rvest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The first thing we will have to do is specify what page we will be scraping from. &lt;a href=&quot;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&quot;&gt;&lt;code&gt;html_session()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; will simulate a session in an html browser. By providing a URL to &lt;a href=&quot;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&quot;&gt;&lt;code&gt;html_session()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; we will then be able to access the underlying code of that page. Create an object called &lt;code&gt;session&lt;&#x2F;code&gt; by providing the FiveThirtyEight URL to &lt;a href=&quot;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&quot;&gt;&lt;code&gt;html_session()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;session&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&#x27;&gt;html_session&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;projects.fivethirtyeight.com&#x2F;2020-primaries&#x2F;democratic&#x2F;national&#x2F;&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The next and most important step is to identify which piece of HTML code contains the table. The easiest way to do this is to open up the webpage in Chrome and open up the Inspect Elements view (on Mac - ‚åò + Shift + C). Now that this is open, click the select element button at the top left corner of the inspection pane. Now hover over the table.&lt;&#x2F;p&gt;
&lt;p&gt;You will see that the HTML element is highlighted. We can see that it is a &lt;code&gt;table&lt;&#x2F;code&gt; tag. Additionally we see that there are two different classes &lt;code&gt;polls-table&lt;&#x2F;code&gt; and &lt;code&gt;tracker&lt;&#x2F;code&gt;. To specify a class we put a preceding &lt;code&gt;.&lt;&#x2F;code&gt; to the class name---i.e.¬†&lt;code&gt;.class-name&lt;&#x2F;code&gt;. If there are multiple classes we just append the second class name to it---i.e.¬†&lt;code&gt;.first-class.second-class&lt;&#x2F;code&gt;. Be aware that these selectors can be quite finicky and be a bit difficult to figure out. You might need to do some googling or playing around with the selector.&lt;&#x2F;p&gt;
&lt;p&gt;To actually access the content of this HTML element, we must specify the element using the proper selector. &lt;a href=&quot;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&quot;&gt;&lt;code&gt;html_node()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; will be used to do this. Provide the html session and the CSS selector to &lt;a href=&quot;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&quot;&gt;&lt;code&gt;html_node()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to extract the HTML element.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;session&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&#x27;&gt;html_node&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;.polls-table.tracker&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Here we see that this returns on object of class &lt;code&gt;xml_node&lt;&#x2F;code&gt;. This object returns some HTML code but it is still not entirely workable. Since this is an HTML table we want to extract we can use the handy &lt;a href=&quot;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;html_table.html&quot;&gt;&lt;code&gt;html_table()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Note that if this wasn&#x27;t a table but rather text, you can use &lt;a href=&quot;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;html_text.html&quot;&gt;&lt;code&gt;html_text()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;session&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&#x27;&gt;html_node&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;.polls-table.tracker&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;html_table.html&#x27;&gt;html_table&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Take note of the extremely informative error. It appears we might have to deal with mismatching columns.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;session&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&#x27;&gt;html_node&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;.polls-table.tracker&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;html_table.html&#x27;&gt;html_table&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;fill &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;utils&#x2F;head.html&#x27;&gt;head&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This is much better! But based on visual inspection the column headers are not properly matched. There are a few things that need to be sorted out: there are two date columns, there are commas and percents where numeric columns should be, the column headers are a little messy, and the table isn&#x27;t a tibble (this is just personal preference).&lt;&#x2F;p&gt;
&lt;p&gt;We will handle the final two issues first as they are easiest to deal with. The function &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; from &lt;code&gt;janitor&lt;&#x2F;code&gt; will handle the column headers, and &lt;a href=&quot;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;as_tibble.html&quot;&gt;&lt;code&gt;as_tibble()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; will coerce the data.frame into a proper tibble. Save this semi-clean tibble into an object called &lt;code&gt;polls&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;polls&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;session&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;rename.html&#x27;&gt;html_node&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;.polls-table.tracker&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rvest.tidyverse.org&#x2F;reference&#x2F;html_table.html&#x27;&gt;html_table&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;fill &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;janitor&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;as_tibble.html&#x27;&gt;as_tibble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;polls&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We want to shift over the column names to the right just once. Unfortunately there is no elegant way to do this (that I am aware of). We can see that the first column is completely useless so that can be removed. Once that column is removed we can reset the names this way they will be well aligned.&lt;&#x2F;p&gt;
&lt;p&gt;We will start by creating a vector of the original column names.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;col_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;polls&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;col_names&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Unfortunately this also presents another issue. Once a column is deselected, there will be one more column name than column. So we will need to select all but the last element of the original names. We will create a vector called &lt;code&gt;new_names&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# identify the integer number of the last column&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;last_col&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;length.html&#x27;&gt;length&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;col_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# create a vector which will be used for the new names&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;new_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;col_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;last_col&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now we can try implementing the hacky solution. Here we will deselect the first column and reset the names using &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;setNames.html&quot;&gt;&lt;code&gt;setNames()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Following, we will use the &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate_all.html&quot;&gt;&lt;code&gt;mutate_at()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; variant to remove the percent sign from every candidate column and coerce them into integer columns. Here we will specify which variables to &lt;em&gt;not&lt;&#x2F;em&gt; mutate at within &lt;a href=&quot;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;vars.html&quot;&gt;&lt;code&gt;vars()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;polls&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;  
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;setNames.html&#x27;&gt;setNames&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;new_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate_all.html&#x27;&gt;mutate_at&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;vars.html&#x27;&gt;vars&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;dates&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;pollster&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;sample&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;sample_2&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, 
            &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;integer.html&#x27;&gt;as.integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;stringr.tidyverse.org&#x2F;reference&#x2F;str_remove.html&#x27;&gt;str_remove&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;%&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now we must tidy the data. We will use &lt;a href=&quot;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;gather.html&quot;&gt;&lt;code&gt;tidyr::gather()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to transform the data from wide to long. In short, gather takes the column headers (the &lt;code&gt;key&lt;&#x2F;code&gt; argument) and creates a new variable from the values of the columns (the &lt;code&gt;value&lt;&#x2F;code&gt; argument). In this case, we will create a new column called &lt;code&gt;candidate&lt;&#x2F;code&gt; from the column headers and a second column called &lt;code&gt;points&lt;&#x2F;code&gt; which are a candidates polling percentage. Next we deselect any columns that we do not want to be gathered.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;polls&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;setNames.html&#x27;&gt;setNames&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;new_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate_all.html&#x27;&gt;mutate_at&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;vars.html&#x27;&gt;vars&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;dates&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;pollster&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;sample&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;sample_2&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
            &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;integer.html&#x27;&gt;as.integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;stringr.tidyverse.org&#x2F;reference&#x2F;str_remove.html&#x27;&gt;str_remove&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;%&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;gather.html&#x27;&gt;gather&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;candidate&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;points&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;pollster&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sample&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sample_2&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;There are a few more house-keeping things that need to be done to improve this data set. &lt;code&gt;sample_2&lt;&#x2F;code&gt; is rather uninformative. On the FiveThirtyEight website there is a key which describes what these values represent (&lt;code&gt;A = ADULTS, RV = REGISTERED VOTERS, V = VOTERS, LV = LIKELY VOTERS&lt;&#x2F;code&gt;). This should be specified in our data set. In addition the &lt;code&gt;sample&lt;&#x2F;code&gt; column ought to be cast into an integer column. And finally, those messy dates will need to be cleaned. My approach to this requires creating a function to handle this cleaning. First, the simple stuff.&lt;&#x2F;p&gt;
&lt;p&gt;To do the first two above steps, we will continue our function chain and save it to a new variable &lt;code&gt;polls_tidy&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;polls_tidy&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;polls&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;setNames.html&#x27;&gt;setNames&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;new_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate_all.html&#x27;&gt;mutate_at&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;vars.html&#x27;&gt;vars&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;dates&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;pollster&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;sample&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;sample_2&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, 
            &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;integer.html&#x27;&gt;as.integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;stringr.tidyverse.org&#x2F;reference&#x2F;str_remove.html&#x27;&gt;str_remove&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;%&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;gather.html&#x27;&gt;gather&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;candidate&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;points&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;pollster&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sample&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sample_2&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;sample_2 &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;case_when.html&#x27;&gt;case_when&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nv&#x27;&gt;sample_2&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;RV&quot;&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Registered Voters&quot;&lt;&#x2F;span&gt;,
    &lt;span class=&#x27;nv&#x27;&gt;sample_2&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;LV&quot;&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Likely Voters&quot;&lt;&#x2F;span&gt;,
    &lt;span class=&#x27;nv&#x27;&gt;sample_2&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;A&quot;&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Adults&quot;&lt;&#x2F;span&gt;,
    &lt;span class=&#x27;nv&#x27;&gt;sample_2&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;V&quot;&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Voters&quot;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
  sample &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;integer.html&#x27;&gt;as.integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;stringr.tidyverse.org&#x2F;reference&#x2F;str_remove.html&#x27;&gt;str_remove&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sample&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;,&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;polls_tidy&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;date-cleaning&quot;&gt;Date cleaning&lt;&#x2F;h3&gt;
&lt;p&gt;Next we must work to clean the date field. I find that when working with a messy column, creating a single function which handles the cleaning is one of the most effective approaches. Here we will create a function which takes a value provided from the &lt;code&gt;dates&lt;&#x2F;code&gt; field and return a cleaned date. There are two unique cases I identified. There are poll dates which occurred during a single month, or a poll that spanned two months. The dates are separated by a single hyphen &lt;code&gt;-&lt;&#x2F;code&gt;. If we split the date at &lt;code&gt;-&lt;&#x2F;code&gt; we will either receive two elements with a month indicated or one month with a day and a day number. In the latter case we will have to carry over the month. Then the year can be appended to it and parsed as a date using the &lt;code&gt;lubridate&lt;&#x2F;code&gt; package. For more on &lt;code&gt;lubridate&lt;&#x2F;code&gt; visit &lt;a href=&quot;https:&#x2F;&#x2F;lubridate.tidyverse.org&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The function will only return one date at a time. The two arguments will be &lt;code&gt;date&lt;&#x2F;code&gt; and &lt;code&gt;.return&lt;&#x2F;code&gt; to indicate whether the first or second date should be provided. The internals of this function rely heavily on the &lt;code&gt;stringr&lt;&#x2F;code&gt; package (see R for Data Science &lt;a href=&quot;https:&#x2F;&#x2F;r4ds.had.co.nz&#x2F;strings.html&quot;&gt;Chapter 14&lt;&#x2F;a&gt;). &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;switch.html&quot;&gt;&lt;code&gt;switch()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; at the end of the function determines which date should be returned (see Advanced R &lt;a href=&quot;https:&#x2F;&#x2F;adv-r.hadley.nz&#x2F;control-flow.html&quot;&gt;Chapter 5&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;clean_date&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;date&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;.return&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;first&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# take date and split at the comma to get the year and the month-day combo&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;date_split&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;stringr.tidyverse.org&#x2F;reference&#x2F;str_split.html&#x27;&gt;str_split&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;date&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;,&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;c&#x27;&gt;# remove from list &#x2F; coerce to vector&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;unlist.html&#x27;&gt;unlist&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;c&#x27;&gt;# remove extra white space&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;stringr.tidyverse.org&#x2F;reference&#x2F;str_trim.html&#x27;&gt;str_trim&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;c&#x27;&gt;# extract the year&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;date_year&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;date_split&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;2&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;c&#x27;&gt;# split the month day portion and coerce to vector&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;unlist.html&#x27;&gt;unlist&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;stringr.tidyverse.org&#x2F;reference&#x2F;str_split.html&#x27;&gt;str_split&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;date_split&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;,  &lt;span class=&#x27;s&#x27;&gt;&quot;-&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;c&#x27;&gt;# paste the month day and year together then parse as date using `mdy()`&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;first_date&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;date_year&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;lubridate&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;lubridate.tidyverse.org&#x2F;reference&#x2F;ymd.html&#x27;&gt;mdy&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;second_date&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;ifelse.html&#x27;&gt;ifelse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;!&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;stringr.tidyverse.org&#x2F;reference&#x2F;str_detect.html&#x27;&gt;str_detect&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;2&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;[A-z]+&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                        yes &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;stringr.tidyverse.org&#x2F;reference&#x2F;str_extract.html&#x27;&gt;str_extract&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;[A-z]+&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, 
                              &lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;2&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;, 
                              &lt;span class=&#x27;nv&#x27;&gt;date_year&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, 
                        no &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;2&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;date_year&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;lubridate&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;lubridate.tidyverse.org&#x2F;reference&#x2F;ymd.html&#x27;&gt;mdy&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;switch.html&#x27;&gt;switch&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.return&lt;&#x2F;span&gt;, 
         first &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;first_date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
         second &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;second_date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
         &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# test on a date&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;clean_date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;polls_tidy&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;10&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;, .return &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;first&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;clean_date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;polls_tidy&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;10&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;, .return &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;second&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can use this new function to create two new columns &lt;code&gt;poll_start&lt;&#x2F;code&gt; and &lt;code&gt;poll_end&lt;&#x2F;code&gt; using &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&quot;&gt;&lt;code&gt;mutate()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Following this we can deselect the original &lt;code&gt;dates&lt;&#x2F;code&gt; column, remove any observations missing a &lt;code&gt;points&lt;&#x2F;code&gt; value, remove duplicates using &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;distinct.html&quot;&gt;&lt;code&gt;distinct()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, and save this to &lt;code&gt;polls_clean&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;polls_clean&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;polls_tidy&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;poll_start &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;clean_date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;first&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
         poll_end &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;clean_date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;second&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dates&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;!&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;NA.html&#x27;&gt;is.na&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;points&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;distinct.html&#x27;&gt;distinct&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;polls_clean&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;visualization&quot;&gt;Visualization&lt;&#x2F;h3&gt;
&lt;p&gt;The cleaned data can be aggregated and visualized.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;avg_polls&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;polls_clean&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;candidate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise.html&#x27;&gt;summarise&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;avg_points &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;mean.html&#x27;&gt;mean&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;points&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
            min_points &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Extremes.html&#x27;&gt;min&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;points&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
            max_points &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Extremes.html&#x27;&gt;max&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;points&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
            n_polls &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;context.html&#x27;&gt;n&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sum.html&#x27;&gt;sum&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;NA.html&#x27;&gt;is.na&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;points&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# identify how many polls candidate is in&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# remove candidates who appear in 50 or fewer polls: i.e. HRC&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n_polls&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;50&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;arrange.html&#x27;&gt;arrange&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;avg_points&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;avg_polls&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;avg_polls&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;candidate &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;forcats.tidyverse.org&#x2F;reference&#x2F;fct_reorder.html&#x27;&gt;fct_reorder&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;candidate&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;avg_points&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggplot.html&#x27;&gt;ggplot&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;aes.html&#x27;&gt;aes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;candidate&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;avg_points&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_bar.html&#x27;&gt;geom_col&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggtheme.html&#x27;&gt;theme_minimal&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;coord_flip.html&#x27;&gt;coord_flip&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;labs.html&#x27;&gt;labs&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;title &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Polls Standings&quot;&lt;&#x2F;span&gt;, x &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;&quot;&lt;&#x2F;span&gt;, y &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;%&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;creating-historic-polling-data&quot;&gt;Creating historic polling data&lt;&#x2F;h2&gt;
&lt;p&gt;It may become useful to have a running history of how candidates have been polling. We can use R to write a csv file of the data from FiveThirtyEight. However, what happens when the polls update? How we can we keep the previous data &lt;em&gt;and&lt;&#x2F;em&gt; the new data? We will work through an example using a combination of &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;bind.html&quot;&gt;&lt;code&gt;bind_rows()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;distinct.html&quot;&gt;&lt;code&gt;distinct()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. I want to emphasize that this is not a good practice if you need to scale to hundreds of thousand of rows. This works in this case as the data are inherently small.&lt;&#x2F;p&gt;
&lt;p&gt;To start, I have created a sample dataset which contains 80% of these polls (maybe less by the time you do this!). Note that is probably best to version control this or have multiple copies as a failsafe.&lt;&#x2F;p&gt;
&lt;p&gt;The approach we will take is to read in the historic polls data set and bind rows with the &lt;code&gt;polls_clean&lt;&#x2F;code&gt; data we have scraped. Next we remove duplicate rows using &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;distinct.html&quot;&gt;&lt;code&gt;distinct()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;old_polls&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;JosiahParry&#x2F;r-4-campaigns&#x2F;master&#x2F;data&#x2F;polls.csv&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;old_polls&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;updated_polls&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;bind.html&#x27;&gt;bind_rows&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;old_polls&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;polls_clean&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;distinct.html&#x27;&gt;distinct&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;updated_polls&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now you have a cleaned data set which has been integrated with the recently scraped data. Write this to a csv using &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;write_delim.html&quot;&gt;&lt;code&gt;write_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; for later use.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Introducing trendyy</title>
        <published>2019-05-25T00:00:00+00:00</published>
        <updated>2019-05-25T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/introducing-trendyy/"/>
        <id>https://josiah.rs/posts/introducing-trendyy/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/introducing-trendyy/">&lt;p&gt;&lt;code&gt;trendyy&lt;&#x2F;code&gt; is a package for querying Google Trends. It is build around &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;PMassicotte&quot;&gt;Philippe Massicotte&lt;&#x2F;a&gt;&#x27;s package &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;PMassicotte&#x2F;gtrendsR&quot;&gt;&lt;code&gt;gtrendsR&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which accesses this data wonderfully.&lt;&#x2F;p&gt;
&lt;p&gt;The inspiration for this package was to provide a tidy interface to the trends data.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;getting-started&quot;&gt;Getting Started&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;installation&quot;&gt;Installation&lt;&#x2F;h3&gt;
&lt;p&gt;You can install &lt;code&gt;trendyy&lt;&#x2F;code&gt; from CRAN using &lt;code&gt;install.packages(&quot;trendyy&quot;)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;usage&quot;&gt;Usage&lt;&#x2F;h3&gt;
&lt;p&gt;Use &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;trendy.html&quot;&gt;&lt;code&gt;trendy()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to search Google Trends. The only mandatory argument is &lt;code&gt;search_terms&lt;&#x2F;code&gt;. This is a character vector with the terms of interest. It is important to note that Google Trends is only capable of comparing up to five terms. Thus, if your &lt;code&gt;search_terms&lt;&#x2F;code&gt; vector is longer than 5, it will search each term individually. This will remove the direct comparative advantage that Google Trends gives you.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;additional-arguments&quot;&gt;Additional arguments&lt;&#x2F;h4&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;imgs.xkcd.com&#x2F;comics&#x2F;iso_8601_2x.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;from&lt;&#x2F;code&gt;: The beginning date of the query in &lt;code&gt;&quot;YYYY-MM-DD&quot;&lt;&#x2F;code&gt; format.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;to&lt;&#x2F;code&gt;: The end date of the query in &lt;code&gt;&quot;YYYY-MM-DD&quot;&lt;&#x2F;code&gt; format.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;...&lt;&#x2F;code&gt; : any additional arguments that would be passed to &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;gtrendsR&#x2F;man&#x2F;gtrends.html&quot;&gt;&lt;code&gt;gtrendsR::gtrends()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Note that it might be useful to indicate the geography of interest. See &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;gtrendsR&#x2F;man&#x2F;countries.html&quot;&gt;&lt;code&gt;gtrendsR::countries&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; for list of possible geographies.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;accessor-functions&quot;&gt;Accessor Functions&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_interest.html&quot;&gt;&lt;code&gt;get_interest()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;: Retrieve interest over time&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_interest_city.html&quot;&gt;&lt;code&gt;get_interest_city()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;: Retrieve interest by city&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_interest_country.html&quot;&gt;&lt;code&gt;get_interest_country()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;: Retrieve interest by country&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_interest_dma.html&quot;&gt;&lt;code&gt;get_interest_dma()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;: Retrieve interest by DMA&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_interest_region.html&quot;&gt;&lt;code&gt;get_interest_region()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;: Retrieve interest by region&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_related_queries.html&quot;&gt;&lt;code&gt;get_related_queries()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;: Retrieve related queries&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_related_topics.html&quot;&gt;&lt;code&gt;get_related_topics()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;: Retrieve related topics&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;example&quot;&gt;Example&lt;&#x2F;h2&gt;
&lt;p&gt;Seeing as I found an interest in this due to the relatively pervasive use of Google Trends in political analysis, I will compare the top five polling candidates in the 2020 Democratic Primary. As of May 22nd, they were Joe Biden, Kamala Harris, Beto O&#x27;Rourke, Bernie Sanders, and Elizabeth Warren.&lt;&#x2F;p&gt;
&lt;p&gt;First, I will create a vector of my desired search terms. Second, I will pass that vector to &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;trendy.html&quot;&gt;&lt;code&gt;trendy()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; specifying my query date range from the first of 2019 until today (May 25th, 2019).&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;candidates&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;Joe Biden&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Kamala Harris&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Beto O&#x27;Rourke&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Bernie Sanders&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Elizabeth Warren&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;candidate_trends&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;trendy.html&#x27;&gt;trendy&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;candidates&lt;&#x2F;span&gt;, from &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;2019-01-01&quot;&lt;&#x2F;span&gt;, to &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Sys.time.html&#x27;&gt;Sys.Date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we have a trendy object, we can print it out to get a summary of the trends.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;candidate_trends&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;~Trendy results~&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;font-weight: bold;&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Search Terms: Joe Biden, Kamala Harris, Beto O&#x27;Rourke, Bernie Sanders, Elizabeth Warren&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; (&amp;gt;^.^)&amp;gt; ~~~~~~~~~~~~~~~~~~~~ summary ~~~~~~~~~~~~~~~~~~~~ &amp;lt;(^.^&amp;lt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 5 √ó 5&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   keyword          max_hits min_hits from       to        &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;               &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;date&amp;gt;&lt;&#x2F;span&gt;     &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;date&amp;gt;&lt;&#x2F;span&gt;    &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt; Bernie Sanders         21        1 2019-01-06 2022-11-06&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;2&lt;&#x2F;span&gt; Beto O&#x27;Rourke           1        0 2019-01-06 2022-11-06&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;3&lt;&#x2F;span&gt; Elizabeth Warren        8        1 2019-01-06 2022-11-06&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;4&lt;&#x2F;span&gt; Joe Biden             100        1 2019-01-06 2022-11-06&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;5&lt;&#x2F;span&gt; Kamala Harris          48        1 2019-01-06 2022-11-06&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;In order to retrieve the trend data, use &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_interest.html&quot;&gt;&lt;code&gt;get_interest()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Note, that this is dplyr friendly.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_interest.html&#x27;&gt;get_interest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;candidate_trends&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1,005 √ó 7&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    date                 hits keyword   geo   time                  gprop category      &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dttm&amp;gt;&lt;&#x2F;span&gt;              &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;     &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;                 &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;         &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 1&lt;&#x2F;span&gt; 2019-01-06 &lt;span style=&#x27;color: #555555;&#x27;&gt;00:00:00&lt;&#x2F;span&gt;     1 Joe Biden world 2019-01-01 2022-11-14 web   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 2&lt;&#x2F;span&gt; 2019-01-13 &lt;span style=&#x27;color: #555555;&#x27;&gt;00:00:00&lt;&#x2F;span&gt;     1 Joe Biden world 2019-01-01 2022-11-14 web   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 3&lt;&#x2F;span&gt; 2019-01-20 &lt;span style=&#x27;color: #555555;&#x27;&gt;00:00:00&lt;&#x2F;span&gt;     1 Joe Biden world 2019-01-01 2022-11-14 web   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 4&lt;&#x2F;span&gt; 2019-01-27 &lt;span style=&#x27;color: #555555;&#x27;&gt;00:00:00&lt;&#x2F;span&gt;     1 Joe Biden world 2019-01-01 2022-11-14 web   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 5&lt;&#x2F;span&gt; 2019-02-03 &lt;span style=&#x27;color: #555555;&#x27;&gt;00:00:00&lt;&#x2F;span&gt;     1 Joe Biden world 2019-01-01 2022-11-14 web   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 6&lt;&#x2F;span&gt; 2019-02-10 &lt;span style=&#x27;color: #555555;&#x27;&gt;00:00:00&lt;&#x2F;span&gt;     1 Joe Biden world 2019-01-01 2022-11-14 web   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 7&lt;&#x2F;span&gt; 2019-02-17 &lt;span style=&#x27;color: #555555;&#x27;&gt;00:00:00&lt;&#x2F;span&gt;     1 Joe Biden world 2019-01-01 2022-11-14 web   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 8&lt;&#x2F;span&gt; 2019-02-24 &lt;span style=&#x27;color: #555555;&#x27;&gt;00:00:00&lt;&#x2F;span&gt;     1 Joe Biden world 2019-01-01 2022-11-14 web   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 9&lt;&#x2F;span&gt; 2019-03-03 &lt;span style=&#x27;color: #555555;&#x27;&gt;00:00:00&lt;&#x2F;span&gt;     1 Joe Biden world 2019-01-01 2022-11-14 web   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;10&lt;&#x2F;span&gt; 2019-03-10 &lt;span style=&#x27;color: #555555;&#x27;&gt;00:00:00&lt;&#x2F;span&gt;     1 Joe Biden world 2019-01-01 2022-11-14 web   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with 995 more rows&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ñπ Use `print(n = ...)` to see more rows&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;plotting-interest&quot;&gt;Plotting Interest&lt;&#x2F;h3&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;candidate_trends&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_interest.html&#x27;&gt;get_interest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggplot.html&#x27;&gt;ggplot&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;aes.html&#x27;&gt;aes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;date&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;hits&lt;&#x2F;span&gt;, color &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;keyword&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_path.html&#x27;&gt;geom_line&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_point.html&#x27;&gt;geom_point&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;alpha &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;.2&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggtheme.html&#x27;&gt;theme_minimal&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;theme.html&#x27;&gt;theme&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;legend.position &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;bottom&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;labs.html&#x27;&gt;labs&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;x &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;&quot;&lt;&#x2F;span&gt;, 
       y &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Relative Search Popularity&quot;&lt;&#x2F;span&gt;,
       title &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Google Search Popularity&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;img src=&quot;figs&#x2F;unnamed-chunk-4-1.png&quot; width=&quot;700px&quot; style=&quot;display: block; margin: auto;&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;It is also possible to view the related search queries for a given set of keywords using &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_related_queries.html&quot;&gt;&lt;code&gt;get_related_queries()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;candidate_trends&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;trendyy&#x2F;man&#x2F;get_related_queries.html&#x27;&gt;get_related_queries&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;keyword&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;sample_n.html&#x27;&gt;sample_n&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;2&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 10 √ó 5&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# Groups:   keyword [5]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    subject  related_queries value                        keyword          category      &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;           &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;                        &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;            &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;         &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 1&lt;&#x2F;span&gt; +3,450%  rising          klobuchar                    Bernie Sanders   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 2&lt;&#x2F;span&gt; 81       top             joe biden                    Bernie Sanders   All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 3&lt;&#x2F;span&gt; 32       top             kamala harris                Beto ORourke     All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 4&lt;&#x2F;span&gt; Breakout rising          beto orourke announcement    Beto ORourke     All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 5&lt;&#x2F;span&gt; Breakout rising          elizabeth warren beer video  Elizabeth Warren All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 6&lt;&#x2F;span&gt; 40       top             elizabeth warren net worth   Elizabeth Warren All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 7&lt;&#x2F;span&gt; Breakout rising          joe biden stimulus           Joe Biden        All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 8&lt;&#x2F;span&gt; Breakout rising          joe biden senile             Joe Biden        All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt; 9&lt;&#x2F;span&gt; Breakout rising          kamala harris husbands       Kamala Harris    All categories&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;10&lt;&#x2F;span&gt; 30       top             vice president kamala harris Kamala Harris    All categories&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;useful-resources&quot;&gt;Useful Resources&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;support.google.com&#x2F;trends&#x2F;answer&#x2F;4365533?hl=en&quot;&gt;How Trends Data Is Adjusted&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;medium.com&#x2F;google-news-lab&#x2F;what-is-google-trends-data-and-what-does-it-mean-b48f07342ee8&quot;&gt;Post by Google News Lab&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>genius tutorial</title>
        <published>2019-05-08T00:00:00+00:00</published>
        <updated>2019-05-08T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/genius-learnr-tutorial/"/>
        <id>https://josiah.rs/posts/genius-learnr-tutorial/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/genius-learnr-tutorial/">&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;knitr&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;knitr&#x2F;man&#x2F;opts_chunk.html&#x27;&gt;opts_chunk&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;set&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;eval &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;FALSE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;introducing-genius&quot;&gt;Introducing genius&lt;&#x2F;h2&gt;
&lt;p&gt;You want to start analysing song lyrics, where do you go? There have been music information retrieval papers written on the topic of programmatically extracting lyrics from the web. Dozens of people have gone through the laborious task of scraping song lyrics from websites. Even a recent winner of the Shiny competition scraped lyrics from Genius.com.&lt;&#x2F;p&gt;
&lt;p&gt;I too have been there. Scraping websites is not always the best use of your time. &lt;code&gt;genius&lt;&#x2F;code&gt; is an R package that will enable you to programatically download song lyrics in a tidy format ready for analysis. To begin using the package, it first must be installed, and loaded. In addition to &lt;code&gt;genius&lt;&#x2F;code&gt;, we will need our standard data manipulation tools from the &lt;code&gt;tidyverse&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;utils&#x2F;install.packages.html&#x27;&gt;install.packages&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;genius&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;github.com&#x2F;josiahparry&#x2F;genius&#x27;&gt;genius&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;single-song-lyrics&quot;&gt;Single song lyrics&lt;&#x2F;h2&gt;
&lt;p&gt;The simplest method of extracting song lyrics is to get just a single song at a time. This is done with the &lt;code&gt;genius_lyrics()&lt;&#x2F;code&gt; function. It takes two main arguments: &lt;code&gt;artist&lt;&#x2F;code&gt; and &lt;code&gt;song&lt;&#x2F;code&gt;. These are the quoted name of the artist and song. Additionally there is a third argument &lt;code&gt;info&lt;&#x2F;code&gt; which determines what extra metadata you can get. The possible values are &lt;code&gt;title&lt;&#x2F;code&gt;, &lt;code&gt;simple&lt;&#x2F;code&gt;, &lt;code&gt;artist&lt;&#x2F;code&gt;, &lt;code&gt;features&lt;&#x2F;code&gt;, and &lt;code&gt;all&lt;&#x2F;code&gt;. I recommend trying them all to see how they work.&lt;&#x2F;p&gt;
&lt;p&gt;In this example we will work to retrieve the song lyrics for the upcoming musician &lt;a href=&quot;https:&#x2F;&#x2F;rennyconti.bandcamp.com&quot;&gt;Renny Conti&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;floating&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;genius_lyrics&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;renny conti&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;people floating&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;floating&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;album-lyrics&quot;&gt;Album Lyrics&lt;&#x2F;h2&gt;
&lt;p&gt;Now that you have the intuition for obtaining lyrics for a single song, we can now create a larger dataset for the lyrics of an entire album using &lt;code&gt;genius_album()&lt;&#x2F;code&gt;. Similar to &lt;code&gt;genius_lyrics()&lt;&#x2F;code&gt;, the arguments are &lt;code&gt;artist&lt;&#x2F;code&gt;, &lt;code&gt;album&lt;&#x2F;code&gt;, and &lt;code&gt;info&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;In the exercise below the lyrics for &lt;a href=&quot;https:&#x2F;&#x2F;www.snailmail.band&#x2F;&quot;&gt;Snail Mail&#x27;s&lt;&#x2F;a&gt; album Lush. Try retrieving the lyrics for an album of your own choosing.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;lush&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;genius_album&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;Snail Mail&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Lush&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;lush&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;adding-lyrics-to-a-data-frame&quot;&gt;Adding Lyrics to a data frame&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;multiple-songs&quot;&gt;Multiple songs&lt;&#x2F;h3&gt;
&lt;p&gt;A common use for lyric analysis is to compare the lyrics of one artist to another. In order to do that, you could potentially retrieve the lyrics for multiple songs and albums and then join them together. This has one major issue in my mind, it makes you create multiple object taking up precious memory. For this reason, the function &lt;code&gt;add_genius()&lt;&#x2F;code&gt; was developed. This enables you to create a tibble with a column for an artists name and their album or song title. &lt;code&gt;add_genius()&lt;&#x2F;code&gt; will then go through the entire tibble and add song lyrics for the tracks and albums that are available.&lt;&#x2F;p&gt;
&lt;p&gt;Let&#x27;s try this with a tibble of three songs.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;three_songs&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;tribble.html&#x27;&gt;tribble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;title&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;Big Thief&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;UFOF&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;Andrew Bird&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Imitosis&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;Sylvan Esso&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Slack Jaw&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;song_lyrics&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;three_songs&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;add_genius&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;title&lt;&#x2F;span&gt;, type &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;lyrics&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;song_lyrics&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;count.html&#x27;&gt;count&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;multiple-albums&quot;&gt;Multiple albums&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;code&gt;add_genius()&lt;&#x2F;code&gt; also extends this functionality to albums.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;albums&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;tribble.html&#x27;&gt;tribble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;title&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;Andrew Bird&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Armchair Apocrypha&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;Andrew Bird&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Things are really great here sort of&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;album_lyrics&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;albums&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;add_genius&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;title&lt;&#x2F;span&gt;, type &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;album&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;album_lyrics&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;What is important to note here is that the warnings for this function are somewhat informative. When a 404 error occurs, this may be because that the song does not exist in Genius. Or, that the song is actually an instrumental which is the case here with Andrew Bird.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;albums-and-songs&quot;&gt;Albums and Songs&lt;&#x2F;h3&gt;
&lt;p&gt;In the scenario that you want to mix single songs and lyrics, you can supply a column with the type value of each row. The example below illustrates this. First a tibble with artist, track or album title, and type columns are created. Next, the tibble is piped to &lt;code&gt;add_genius()&lt;&#x2F;code&gt; with the unquote column names for the artist, title, and type columns. This will then iterate over each row and fetch the appropriate song lyrics.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;song_album&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;tribble.html&#x27;&gt;tribble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;title&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;type&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;Big Thief&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;UFOF&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;lyrics&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;Andrew Bird&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Imitosis&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;lyrics&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;Sylvan Esso&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Slack Jaw&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;lyrics&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;Movements&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Feel Something&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;album&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;mixed_lyrics&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;song_album&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;add_genius&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;title&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;type&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;self-similarity&quot;&gt;Self-similarity&lt;&#x2F;h2&gt;
&lt;p&gt;Another feature of &lt;code&gt;genius&lt;&#x2F;code&gt; is the ability to create self-similarity matrices to visualize lyrical patterns within a song. This idea was taken from Colin Morris&#x27; wonderful javascript based &lt;a href=&quot;https:&#x2F;&#x2F;colinmorris.github.io&#x2F;SongSim&#x2F;#&#x2F;gallery&quot;&gt;Song Sim&lt;&#x2F;a&gt; project. Colin explains the interpretation of a self-similarity matrix in their &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=_tjFwcmHy5M&quot;&gt;TEDx talk&lt;&#x2F;a&gt;. An even better description of the interpretation is available in &lt;a href=&quot;https:&#x2F;&#x2F;colinmorris.github.io&#x2F;blog&#x2F;weird-pop-songs&quot;&gt;this post&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;To use Colin&#x27;s example we will look at the structure of Ke$ha&#x27;s Tik Tok.&lt;&#x2F;p&gt;
&lt;p&gt;The function &lt;code&gt;calc_self_sim()&lt;&#x2F;code&gt; will create a self-similarity matrix of a given song. The main arguments for this function are the tibble (&lt;code&gt;df&lt;&#x2F;code&gt;), and the column containing the lyrics (&lt;code&gt;lyric_col&lt;&#x2F;code&gt;). Ideally this is one line per observation as is default from the output of &lt;code&gt;genius_*()&lt;&#x2F;code&gt;. The tidy output compares every ith word with every word in the song. This measures repetition of words and will show us the structure of the lyrics.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;tik_tok&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;genius_lyrics&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;Ke$ha&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Tik Tok&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;tt_self_sim&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;calc_self_sim&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;tik_tok&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;lyric&lt;&#x2F;span&gt;, output &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;tidy&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;tt_self_sim&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;tt_self_sim&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggplot.html&#x27;&gt;ggplot&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;aes.html&#x27;&gt;aes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;x &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;x_id&lt;&#x2F;span&gt;, y &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;y_id&lt;&#x2F;span&gt;, fill &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;identical&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;geom_tile.html&#x27;&gt;geom_tile&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_manual.html&#x27;&gt;scale_fill_manual&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;values &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;white&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;black&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggtheme.html&#x27;&gt;theme_minimal&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;theme.html&#x27;&gt;theme&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;legend.position &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;none&quot;&lt;&#x2F;span&gt;,
        axis.text &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;element.html&#x27;&gt;element_blank&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;scale_continuous.html&#x27;&gt;scale_y_continuous&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;trans &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;reverse&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;labs.html&#x27;&gt;labs&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;title &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Tik Tok&quot;&lt;&#x2F;span&gt;, subtitle &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Self-similarity matrix&quot;&lt;&#x2F;span&gt;, x &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;&quot;&lt;&#x2F;span&gt;, y &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;&quot;&lt;&#x2F;span&gt;, 
       caption &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;The matrix displays that there are three choruses with a bridge between the last two. The bridge displays internal repetition.&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>genius Plumber API</title>
        <published>2019-03-30T00:00:00+00:00</published>
        <updated>2019-03-30T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/genius-api/"/>
        <id>https://josiah.rs/posts/genius-api/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/genius-api/">&lt;p&gt;&lt;em&gt;get started &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;genius-api&quot;&gt;here&lt;&#x2F;a&gt;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Since I created &lt;code&gt;genius&lt;&#x2F;code&gt;, I&#x27;ve wanted to make a version for python. But frankly, that&#x27;s a daunting task for me seeing as my python skills are intermediate at best. But recently I&#x27;ve been made aware of the package &lt;code&gt;plumber&lt;&#x2F;code&gt;. To put it plainly, &lt;code&gt;plumber&lt;&#x2F;code&gt; takes your R code and makes it accessible via an API.&lt;&#x2F;p&gt;
&lt;p&gt;I thought this would be difficult. I was so wrong.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;media.giphy.com&#x2F;media&#x2F;l0MYOMxG9ijrXhF3q&#x2F;giphy.gif&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;using-plumber&quot;&gt;Using plumber&lt;&#x2F;h2&gt;
&lt;p&gt;Plumber works by using &lt;code&gt;roxygen&lt;&#x2F;code&gt; like comments (&lt;code&gt;#*&lt;&#x2F;code&gt;). Using a single comment, you can define the request type and the end point. Following that you define a function. The arguments to the funciton become the query parameters.&lt;&#x2F;p&gt;
&lt;p&gt;The main &lt;code&gt;genius&lt;&#x2F;code&gt; functions only require two main arguments &lt;code&gt;artist&lt;&#x2F;code&gt; and &lt;code&gt;album&lt;&#x2F;code&gt; or &lt;code&gt;song&lt;&#x2F;code&gt;. Making these accessible by API is as simple as:&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;#* @get &#x2F;track
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;function(artist, song) {
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  genius::genius_lyrics(artist, song)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;With this line of code I created an endpoint called &lt;code&gt;track&lt;&#x2F;code&gt; to retrieve song lyrics. The two parameters as defined by the anonymous function are &lt;code&gt;artist&lt;&#x2F;code&gt; and &lt;code&gt;song&lt;&#x2F;code&gt;. This means that song lyrics are accessible with a query looking like &lt;code&gt;http:&#x2F;&#x2F;hostname&#x2F;track?artist=artist_name&amp;amp;song=song_name&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;But as it stands, this isn&#x27;t enough to host the API locally. Save your functions with plumber documentation into a file (I named mine &lt;code&gt;plumber.R&lt;&#x2F;code&gt;).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;creating-the-api&quot;&gt;Creating the API&lt;&#x2F;h3&gt;
&lt;p&gt;Creating the API is probably the easiest part. It takes quite literally, two lines of code. The function &lt;code&gt;plumb()&lt;&#x2F;code&gt; takes two arguments, the &lt;code&gt;file&lt;&#x2F;code&gt; which contains your plumber commented code, and the &lt;code&gt;dir&lt;&#x2F;code&gt;ectory that houses it.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;plumb()&lt;&#x2F;code&gt; creates a router which is &quot;responsible for taking an incoming request, submitting it through the appropriate filters.&quot;&lt;&#x2F;p&gt;
&lt;p&gt;I created a plumber router which would be used to route income queries.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;pr &amp;lt;- plumb(&amp;quot;plumber.R&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The next step is to actually run the router. Again, this is quite simple by calling the &lt;code&gt;run()&lt;&#x2F;code&gt; method of the &lt;code&gt;pr&lt;&#x2F;code&gt; object. All I need to do is specify the &lt;code&gt;port&lt;&#x2F;code&gt; that the API will listen on, and optionally the &lt;code&gt;host&lt;&#x2F;code&gt; address.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;pr$run(port = 80, host = &amp;quot;0.0.0.0&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now I can construct queries in my browser. An example query is &lt;code&gt;http:&#x2F;&#x2F;localhost&#x2F;track?artist=andrew%20bird&amp;amp;song=proxy%20war&lt;&#x2F;code&gt;. Sending this request produces a very friendly &lt;code&gt;json&lt;&#x2F;code&gt; output.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;[
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:1,&amp;quot;lyric&amp;quot;:&amp;quot;He don&amp;#39;t have to get over her&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:2,&amp;quot;lyric&amp;quot;:&amp;quot;She don&amp;#39;t to have get over him&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:3,&amp;quot;lyric&amp;quot;:&amp;quot;With all their words preserved forevermore&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:4,&amp;quot;lyric&amp;quot;:&amp;quot;You don&amp;#39;t have to get over her&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:5,&amp;quot;lyric&amp;quot;:&amp;quot;She don&amp;#39;t have to get over you&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:6,&amp;quot;lyric&amp;quot;:&amp;quot;It&amp;#39;s true these two have never met before&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:7,&amp;quot;lyric&amp;quot;:&amp;quot;At least not in real life&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:8,&amp;quot;lyric&amp;quot;:&amp;quot;Where your words cut like a knife&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:9,&amp;quot;lyric&amp;quot;:&amp;quot;Conjuring blood, biblical floods&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:10,&amp;quot;lyric&amp;quot;:&amp;quot;Looks that stop time&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:11,&amp;quot;lyric&amp;quot;:&amp;quot;You don&amp;#39;t have to remember&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:12,&amp;quot;lyric&amp;quot;:&amp;quot;We forget what memories are for&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:13,&amp;quot;lyric&amp;quot;:&amp;quot;Now we store them in the atmosphere&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:14,&amp;quot;lyric&amp;quot;:&amp;quot;If you don&amp;#39;t want to get too close&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:15,&amp;quot;lyric&amp;quot;:&amp;quot;You don&amp;#39;t have to get too close&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:16,&amp;quot;lyric&amp;quot;:&amp;quot;It&amp;#39;s just what we&amp;#39;re calling peer-to-peer&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:17,&amp;quot;lyric&amp;quot;:&amp;quot;You don&amp;#39;t want to get over&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:18,&amp;quot;lyric&amp;quot;:&amp;quot;You don&amp;#39;t have to get over&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:19,&amp;quot;lyric&amp;quot;:&amp;quot;We store them in the atmosphere&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:20,&amp;quot;lyric&amp;quot;:&amp;quot;If you don&amp;#39;t want to get over her&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:21,&amp;quot;lyric&amp;quot;:&amp;quot;She don&amp;#39;t have to get over you&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:22,&amp;quot;lyric&amp;quot;:&amp;quot;It&amp;#39;s true these two have never met before&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:23,&amp;quot;lyric&amp;quot;:&amp;quot;At least not in real life&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:24,&amp;quot;lyric&amp;quot;:&amp;quot;Where your words cut like a knife&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:25,&amp;quot;lyric&amp;quot;:&amp;quot;Conjuring blood, biblical floods&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:26,&amp;quot;lyric&amp;quot;:&amp;quot;Looks that stop time&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:27,&amp;quot;lyric&amp;quot;:&amp;quot;If you don&amp;#39;t want to get over her&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:28,&amp;quot;lyric&amp;quot;:&amp;quot;You don&amp;#39;t have to get over her&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:29,&amp;quot;lyric&amp;quot;:&amp;quot;If you don&amp;#39;t want to get too close&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:30,&amp;quot;lyric&amp;quot;:&amp;quot;You don&amp;#39;t have to get too close&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:31,&amp;quot;lyric&amp;quot;:&amp;quot;If you want to remember&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:32,&amp;quot;lyric&amp;quot;:&amp;quot;If you don&amp;#39;t want to get over&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:33,&amp;quot;lyric&amp;quot;:&amp;quot;If you don&amp;#39;t want to get over&amp;quot;},
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;{&amp;quot;track_title&amp;quot;:&amp;quot;Proxy War&amp;quot;,&amp;quot;line&amp;quot;:34,&amp;quot;lyric&amp;quot;:&amp;quot;If you don&amp;#39;t want to get over&amp;quot;}
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;writing-a-python-wrapper&quot;&gt;Writing a Python Wrapper&lt;&#x2F;h2&gt;
&lt;p&gt;One of the appeals of writing an API is that it can be accessed from any language. This was the inspiriation of creating this API. I want to be able to call R using Python. Creating an API is a great intermediary as writing an API wrapper is much easier for me than recreating all of the code that I wrote in R.&lt;&#x2F;p&gt;
&lt;p&gt;I want to be able to recreate the three main functions of &lt;code&gt;genius&lt;&#x2F;code&gt;. These are &lt;code&gt;genius_lyrics()&lt;&#x2F;code&gt;, &lt;code&gt;genius_album()&lt;&#x2F;code&gt;, and &lt;code&gt;genius_tracklist()&lt;&#x2F;code&gt;. In doing this there are two steps I have to consider. The first is creating query urls, and the second is parsing json.&lt;&#x2F;p&gt;
&lt;p&gt;To create the urls, the &lt;code&gt;requests&lt;&#x2F;code&gt; library is used. Next, I created a template for the urls.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;import requests
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;url_template = &amp;quot;http:&#x2F;&#x2F;localhost:80&#x2F;track?artist={}&amp;amp;song={}&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The idea here is that the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Paren.html&quot;&gt;&lt;code&gt;{}&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; characters will be filled with provided parameters by using the &lt;code&gt;.format()&lt;&#x2F;code&gt; method.&lt;&#x2F;p&gt;
&lt;p&gt;For example, if I wanted to get lyrics for Proxy War by Andrew Bird, I would supply &lt;code&gt;&quot;Andrew Bird&quot;&lt;&#x2F;code&gt; and &lt;code&gt;&quot;Proxy War&quot;&lt;&#x2F;code&gt; as the arguments to &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;format.html&quot;&gt;&lt;code&gt;format()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. It&#x27;s important to note that these arguments are taken positionally. The url is created using this method.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;url = url_template.format(&amp;quot;andrew bird&amp;quot;, &amp;quot;proxy war&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now I am at the point where I can ping the server to receive the json. This is accomplished by using the &lt;code&gt;.get()&lt;&#x2F;code&gt; method from &lt;code&gt;requests&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;response = requests.get(url)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This returns an object that contains the json response. Next, in order to get this into a format that can be analysed, it needs to be parsed. I prefer a Pandas &lt;code&gt;DataFrame&lt;&#x2F;code&gt;, and fortunately Pandas has a lovely &lt;code&gt;read_json&lt;&#x2F;code&gt; function. I will call the &lt;code&gt;.content&lt;&#x2F;code&gt; attribute of the &lt;code&gt;response&lt;&#x2F;code&gt; objectm and feed that into the &lt;code&gt;read_json()&lt;&#x2F;code&gt; function.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;import pandas as pd
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;proxy_war = pd.read_json(response.content)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;proxy_war.head()
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    line    lyric                                   track_title
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;0   1   He don&amp;#39;t have to get over her               Proxy War
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;1   2   She don&amp;#39;t to have get over him              Proxy War
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;2   3   With all their words preserved forevermore  Proxy War
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;3   4   You don&amp;#39;t have to get over her              Proxy War
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;4   5   She don&amp;#39;t have to get over you              Proxy War
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Beautiful. Song lyrics are available through this API and can easily be accessed via python. The next step is to generalize this and the other two functions. The below is the code to create the &lt;code&gt;genius_lyrics()&lt;&#x2F;code&gt; function in python. It works almost identically as in R. However, at this moment it does not have the ability to set the &lt;code&gt;info&lt;&#x2F;code&gt; argument. But this can be changed easily in the original &lt;code&gt;plumber.R&lt;&#x2F;code&gt; file.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# Define genius_lyrics()
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;def genius_lyrics(artist, song):
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    url_template = &amp;quot;http:&#x2F;&#x2F;localhost:80&#x2F;track?artist={}&amp;amp;song={}&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    url = url_template.format(artist, song)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    response = requests.get(url)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    song = pd.read_json(response.content)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    return(song)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;At this point I&#x27;m feeling extremely stoked on the fact that I can use &lt;code&gt;genius&lt;&#x2F;code&gt; with python. Who says R and python practitioners can&#x27;t work together?&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;media.giphy.com&#x2F;media&#x2F;l2JJyDYEX1tXFmCd2&#x2F;giphy.gif&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;containerize-with-docker&quot;&gt;Containerize with Docker&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;media.giphy.com&#x2F;media&#x2F;cUMNWzWZ5n75LvcCIe&#x2F;giphy.gif&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;To make the process of setting up this genius API up easier for those who don&#x27;t necessarily interact with R, I created a lightweight-ish Docker container. The idea for this was to be able to pull a Docker image, run a command, and then the API will be available on a local port without having to interact with R at all.&lt;&#x2F;p&gt;
&lt;p&gt;I&#x27;m not the most experience person with creating Docker containers but I can borrow code quite well. Fortunately I came across some wonderful &lt;a href=&quot;https:&#x2F;&#x2F;nolisllc.com&#x2F;assets&#x2F;presentations&#x2F;r-tensorflow-api.pdf&quot;&gt;slides&lt;&#x2F;a&gt; from &lt;code&gt;rstudio::conf 2019&lt;&#x2F;code&gt;. &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;heatherklus&quot;&gt;Heather Nollis&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;skyetetra&quot;&gt;Jacqueline Nolis&lt;&#x2F;a&gt; presented on &quot;API development with R and TensorFlow at T-Mobile&quot;.&lt;&#x2F;p&gt;
&lt;p&gt;This container needs two things: a linux environment and an installation of R with plumber, genius, and its dependencies. An organization called &lt;a href=&quot;https:&#x2F;&#x2F;www.rocker-project.org&#x2F;&quot;&gt;The Rocker Project&lt;&#x2F;a&gt; has created a number of Docker images that are stable and easy to install.&lt;&#x2F;p&gt;
&lt;p&gt;Since &lt;code&gt;genius&lt;&#x2F;code&gt; relies on many packages from the &lt;a href=&quot;https:&#x2F;&#x2F;tidyverse.org&quot;&gt;tidyverse&lt;&#x2F;a&gt;, the &lt;a href=&quot;https:&#x2F;&#x2F;hub.docker.com&#x2F;r&#x2F;rocker&#x2F;tidyverse&quot;&gt;&lt;code&gt;rocker&#x2F;tidyverse&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; image was used. To use their wonderful image, only one line is needed in my &lt;code&gt;Dockerfile&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# Import existing Docker image
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;FROM rocker&#x2F;tidyverse:3.5.2
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now, not knowing exactly what I was doing, I copied code from Jacqueline and Heather&#x27;s sample &lt;code&gt;Dockerfile&lt;&#x2F;code&gt; in their slides. Their comment says that this is necessary to have the &lt;em&gt;&quot;needed linux libraries for plumber&quot;&lt;&#x2F;em&gt;, I went with it.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# install needed linux libraries for plumber
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;RUN apt-get update -qq &amp;amp;&amp;amp; apt-get install -y \
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  libssl-dev \
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;  libcurl4-gnutls-dev
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;genius&lt;&#x2F;code&gt; and &lt;code&gt;plumber&lt;&#x2F;code&gt; are not part of the tidyverse image and have to be installed manually. The following lines tell Docker to run the listed R commands. For some unknown reason there was an issue with installing &lt;code&gt;genius&lt;&#x2F;code&gt; from CRAN so the &lt;code&gt;repos&lt;&#x2F;code&gt; argument was stated explicitly.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;# Install R packages
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;RUN R -e &amp;quot;install.packages(&amp;#39;genius&amp;#39;, repos = &amp;#39;http:&#x2F;&#x2F;cran.rstudio.com&#x2F;&amp;#39;)&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;RUN R -e &amp;quot;install.packages(&amp;#39;plumber&amp;#39;)&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In addition to the &lt;code&gt;Dockerfile&lt;&#x2F;code&gt; there are two files in my directory which are used to launch the API. The &lt;code&gt;plumber.R&lt;&#x2F;code&gt; and &lt;code&gt;launch_api.R&lt;&#x2F;code&gt; files. These need to be copied into the container. The line &lt;code&gt;COPY &#x2F; &#x2F;&lt;&#x2F;code&gt; copies from the location &lt;code&gt;&#x2F;&lt;&#x2F;code&gt; in my directory to the location &lt;code&gt;&#x2F;&lt;&#x2F;code&gt; in the container.&lt;&#x2F;p&gt;
&lt;p&gt;The Docker image has the libraries and files needed, but it needs to be able to actually launch the API. Since the &lt;code&gt;plumber.R&lt;&#x2F;code&gt; file specifies that the API will be listening on port &lt;code&gt;80&lt;&#x2F;code&gt;, I need to expose that port in my Docker image using &lt;code&gt;EXPOSE 80&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The last part of this is to run the &lt;code&gt;launch_api.R&lt;&#x2F;code&gt; so the API is available. The &lt;code&gt;ENTRYPOINT&lt;&#x2F;code&gt; command tells Docker what to run when the container is launched. In this case &lt;code&gt;ENTRYPOINT [&quot;Rscript&quot;, &quot;launch_api.R&quot;]&lt;&#x2F;code&gt; tells Docker to run the &lt;code&gt;Rscript&lt;&#x2F;code&gt; command with the argument &lt;code&gt;launch_api.R&lt;&#x2F;code&gt;. And with that, the &lt;code&gt;Dockerfile&lt;&#x2F;code&gt; is complete and read to run.&lt;&#x2F;p&gt;
&lt;p&gt;The image needs to be built and ran. The simplest way to do this for me was to work from &lt;a href=&quot;https:&#x2F;&#x2F;cloud.docker.com&#x2F;repository&#x2F;docker&#x2F;josiahparry&#x2F;genius-api&quot;&gt;Dockerhub&lt;&#x2F;a&gt;. Thus to run this container only three lines of code are needed!&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;docker pull josiahparry&#x2F;genius-api:working
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;docker build -t josiahparry&#x2F;genius-api .
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;docker run --rm -p 80:80 josiahparry&#x2F;genius-api
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;media.giphy.com&#x2F;media&#x2F;3o7qDEq2bMbcbPRQ2c&#x2F;giphy.gif&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Boom, now you have an API that will be able to use the functionality of &lt;code&gt;genius&lt;&#x2F;code&gt;. If you wish to use Python with the API, I wrote a simple script which creates a nice tidy &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JosiahParry&#x2F;genius-api&#x2F;blob&#x2F;master&#x2F;genius.py&quot;&gt;wrapper&lt;&#x2F;a&gt; around it.&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;If anyone is interested in writing a more stable Python library that can call the functionality described above I&#x27;d love your help to make &lt;code&gt;genius&lt;&#x2F;code&gt; more readily available to the python community.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>xgboost feature importance</title>
        <published>2018-12-01T00:00:00+00:00</published>
        <updated>2018-12-01T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/xgb-feature-importance/"/>
        <id>https://josiah.rs/posts/xgb-feature-importance/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/xgb-feature-importance/">&lt;p&gt;This post will go over extracting feature (variable) importance and creating a function for creating a ggplot object for it. I will draw on the simplicity of Chris Albon&#x27;s post. For steps to do the following in Python, I recommend his &lt;a href=&quot;https:&#x2F;&#x2F;chrisalbon.com&#x2F;machine_learning&#x2F;trees_and_forests&#x2F;feature_importance&#x2F;&quot;&gt;post&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;img alt=&quot;Feature Importance by Chris Albon&quot; src=&quot;https:&#x2F;&#x2F;chrisalbon.com&#x2F;images&#x2F;machine_learning_flashcards&#x2F;Feature_Importance_print.png&quot;&#x2F;&gt;
&lt;p&gt;If you&#x27;ve ever created a decision tree, you&#x27;ve probably looked at measures of feature importance. In the above flashcard, impurity refers to how many times a feature was use and lead to a misclassification. Here, we&#x27;re looking at the importance of a feature, so how much it helped in the classification or prediction of an outcome.&lt;&#x2F;p&gt;
&lt;p&gt;This example will draw on the build in data &lt;code&gt;Sonar&lt;&#x2F;code&gt; from the &lt;code&gt;mlbench&lt;&#x2F;code&gt; package.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;prepping-the-environment&quot;&gt;Prepping the Environment&lt;&#x2F;h3&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;github.com&#x2F;topepo&#x2F;caret&#x2F;&#x27;&gt;caret&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;github.com&#x2F;dmlc&#x2F;xgboost&#x27;&gt;xgboost&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;loading-the-data&quot;&gt;Loading the data&lt;&#x2F;h3&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;utils&#x2F;data.html&#x27;&gt;data&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;Sonar&quot;&lt;&#x2F;span&gt;, package &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;mlbench&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;train-the-decision-tree&quot;&gt;Train the decision tree&lt;&#x2F;h3&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;xgb_fit&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;caret&#x2F;man&#x2F;train.html&#x27;&gt;train&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;Class&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;.&lt;&#x2F;span&gt;,
                 data &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;Sonar&lt;&#x2F;span&gt;,
                 method &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;xgbLinear&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;xgb_fit&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; eXtreme Gradient Boosting &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; 208 samples&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  60 predictor&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   2 classes: &#x27;M&#x27;, &#x27;R&#x27; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; No pre-processing&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Resampling: Bootstrapped (25 reps) &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Summary of sample sizes: 208, 208, 208, 208, 208, 208, ... &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Resampling results across tuning parameters:&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   lambda  alpha  nrounds  Accuracy   Kappa    &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   0e+00   0e+00   50      0.7954411  0.5856736&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   0e+00   0e+00  100      0.7955067  0.5859968&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   0e+00   0e+00  150      0.7955067  0.5859968&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   0e+00   1e-04   50      0.7931161  0.5807902&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   0e+00   1e-04  100      0.7896880  0.5736899&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   0e+00   1e-04  150      0.7896880  0.5736899&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   0e+00   1e-01   50      0.7974045  0.5899654&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   0e+00   1e-01  100      0.8007978  0.5965433&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   0e+00   1e-01  150      0.8018652  0.5987027&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-04   0e+00   50      0.7936100  0.5817500&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-04   0e+00  100      0.7902008  0.5746993&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-04   0e+00  150      0.7902008  0.5746993&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-04   1e-04   50      0.7916874  0.5777943&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-04   1e-04  100      0.7883283  0.5708511&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-04   1e-04  150      0.7883283  0.5708511&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-04   1e-01   50      0.7974045  0.5899654&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-04   1e-01  100      0.8007978  0.5965433&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-04   1e-01  150      0.8018652  0.5987027&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-01   0e+00   50      0.7937810  0.5824365&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-01   0e+00  100      0.7958099  0.5863334&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-01   0e+00  150      0.7958099  0.5863334&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-01   1e-04   50      0.7953707  0.5854209&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-01   1e-04  100      0.7963228  0.5873658&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-01   1e-04  150      0.7963228  0.5873658&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-01   1e-01   50      0.7987849  0.5923712&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-01   1e-01  100      0.8034709  0.6018293&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   1e-01   1e-01  150      0.8049729  0.6047501&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Tuning parameter &#x27;eta&#x27; was held constant at a value of 0.3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Accuracy was used to select the optimal model using the largest value.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; The final values used for the model were nrounds = 150, lambda = 0.1, alpha = 0.1&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  and eta = 0.3.&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;extract-feature-importance&quot;&gt;Extract feature importance&lt;&#x2F;h3&gt;
&lt;p&gt;Since we are using the &lt;code&gt;caret&lt;&#x2F;code&gt; package we can use the built in function to extract feature importance, or the function from the &lt;code&gt;xgboost&lt;&#x2F;code&gt; package. We will do both.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;caret-feature-importance&quot;&gt;&lt;code&gt;caret&lt;&#x2F;code&gt; feature importance&lt;&#x2F;h4&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;caret_imp&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;caret&#x2F;man&#x2F;varImp.html&#x27;&gt;varImp&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;xgb_fit&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Warning in value[[3L]](cond): The model had been generated by XGBoost version 1.0.0 or earlier and was loaded from a RDS file. We strongly ADVISE AGAINST using saveRDS() function, to ensure that your model can be read in current and upcoming XGBoost releases. Please use xgb.save() instead to preserve models for the long term. For more details and explanation, see https:&#x2F;&#x2F;xgboost.readthedocs.io&#x2F;en&#x2F;latest&#x2F;tutorials&#x2F;saving_model.html&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [16:44:09] WARNING: amalgamation&#x2F;..&#x2F;src&#x2F;learner.cc:940: Loading model from XGBoost &amp;lt; 1.0.0, consider saving it again for improved compatibility&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;caret_imp&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; xgbLinear variable importance&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   only 20 most important variables shown (out of 60)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;     Overall&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V11 100.000&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V45  26.941&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V16  24.354&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V21  21.665&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V51  18.798&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V4   18.140&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V48  14.366&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V9   12.607&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V31  12.489&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V27  12.347&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V15  11.269&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V34   9.125&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V37   8.805&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V20   8.792&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V52   8.114&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V28   7.162&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V32   5.897&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V55   4.584&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V17   4.490&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; V49   4.129&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h4 id=&quot;xgboost-feature-importance&quot;&gt;&lt;code&gt;xgboost&lt;&#x2F;code&gt; feature importance&lt;&#x2F;h4&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;xgb_imp&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;xgboost&#x2F;man&#x2F;xgb.importance.html&#x27;&gt;xgb.importance&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;feature_names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;xgb_fit&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;finalModel&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;feature_names&lt;&#x2F;span&gt;,
               model &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;xgb_fit&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;finalModel&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;utils&#x2F;head.html&#x27;&gt;head&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;xgb_imp&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    Feature       Gain      Cover  Frequency&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; 1:     V11 0.25619825 0.12851518 0.03283582&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; 2:     V45 0.06902206 0.04458378 0.03582090&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; 3:     V16 0.06239349 0.04163116 0.01492537&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; 4:     V21 0.05550596 0.03471532 0.02686567&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; 5:     V51 0.04816044 0.04527491 0.05373134&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; 6:      V4 0.04647539 0.03484924 0.03880597&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;plotting-feature-importance&quot;&gt;Plotting feature importance&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;caret&quot;&gt;caret&lt;&#x2F;h4&gt;
&lt;p&gt;You have a few options when it comes to plotting feature importance. You can call plot on the saved object from caret as follows:&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;sf&#x2F;reference&#x2F;plot.html&#x27;&gt;plot&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;caret_imp&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;img src=&quot;figs&#x2F;unnamed-chunk-8-1.png&quot; width=&quot;700px&quot; style=&quot;display: block; margin: auto;&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggplot.html&#x27;&gt;ggplot&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;caret_imp&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;+&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;ggtheme.html&#x27;&gt;theme_minimal&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;img src=&quot;figs&#x2F;unnamed-chunk-9-1.png&quot; width=&quot;700px&quot; style=&quot;display: block; margin: auto;&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;h4 id=&quot;xgboost&quot;&gt;&lt;code&gt;xgboost&lt;&#x2F;code&gt;&lt;&#x2F;h4&gt;
&lt;p&gt;You can use the plot functionality from &lt;code&gt;xgboost&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;xgboost&#x2F;man&#x2F;xgb.plot.importance.html&#x27;&gt;xgb.plot.importance&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;xgb_imp&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;img src=&quot;figs&#x2F;unnamed-chunk-10-1.png&quot; width=&quot;700px&quot; style=&quot;display: block; margin: auto;&quot; &#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Or use their ggplot feature&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;xgboost&#x2F;man&#x2F;xgb.plot.importance.html&#x27;&gt;xgb.ggplot.importance&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;xgb_imp&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>[Not so] generic functions</title>
        <published>2018-11-28T00:00:00+00:00</published>
        <updated>2018-11-28T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/function-methods/"/>
        <id>https://josiah.rs/posts/function-methods/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/function-methods/">&lt;p&gt;Lately I have been doing more of my spatial analysis work in R with the help of the &lt;code&gt;sf&lt;&#x2F;code&gt; package. One shapefile I was working with had some horrendously named columns, and naturally, I tried to clean them using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function from the &lt;code&gt;janitor&lt;&#x2F;code&gt; package. But lo, an egregious error occurred. To this end, I officially filed my complaint as an &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfirke&#x2F;janitor&#x2F;pull&#x2F;249&quot;&gt;issue&lt;&#x2F;a&gt;. The solution presented was to &lt;em&gt;simply&lt;&#x2F;em&gt; create a method for &lt;code&gt;sf&lt;&#x2F;code&gt; objects.&lt;&#x2F;p&gt;
&lt;p&gt;Yeah, methods, how tough can those be? Apparently the process isn&#x27;t at all difficult. But figuring out the process? That was difficult. This post will explain how I went about the process for converting the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function into a &lt;em&gt;generic&lt;&#x2F;em&gt; (I&#x27;ll explain this in a second), and creating a &lt;em&gt;method&lt;&#x2F;em&gt; for &lt;code&gt;sf&lt;&#x2F;code&gt; and &lt;code&gt;tbl_graph&lt;&#x2F;code&gt; objects.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-jargon&quot;&gt;The Jargon&lt;&#x2F;h3&gt;
&lt;p&gt;Okay, I want to address the jargon. What the hell is a &lt;em&gt;generic&lt;&#x2F;em&gt; function, and what is a &lt;em&gt;method&lt;&#x2F;em&gt;? But first, I want to give a quick tl;dr on what a function is. I define as function as bit of code that takes an input, changes it in some way, and produces an output. Even simpler, a function takes an input and creates an output.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;generic-functions&quot;&gt;Generic Functions&lt;&#x2F;h4&gt;
&lt;p&gt;Now, what is a &lt;em&gt;&lt;strong&gt;generic&lt;&#x2F;strong&gt;&lt;&#x2F;em&gt; function? My favorite definition that I&#x27;ve seen so far comes from &lt;em&gt;LispWorks Ltd&lt;&#x2F;em&gt; (their website is a historic landmark, I recommend you give it a look for a reminder of what the internet used to be). They define a &lt;a href=&quot;http:&#x2F;&#x2F;clhs.lisp.se&#x2F;Body&#x2F;07_fa.htm&quot;&gt;generic function&lt;&#x2F;a&gt; as&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;a function whose behavior depends on the classes or identities of the arguments supplied to it.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;This means that we have to create a function that looks at the class of an object and perform an operation based on the object class. That means if there is &lt;code&gt;&quot;numeric&quot;&lt;&#x2F;code&gt; or &lt;code&gt;&quot;list&quot;&lt;&#x2F;code&gt; object, they will be treated differently. These are called &lt;code&gt;methods&lt;&#x2F;code&gt;. Note: you can find the class of an object by using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;class.html&quot;&gt;&lt;code&gt;class()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function on any object.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;methods&quot;&gt;Methods&lt;&#x2F;h4&gt;
&lt;p&gt;To steal from &lt;em&gt;LispWorks Ltd&lt;&#x2F;em&gt; again, a &lt;a href=&quot;http:&#x2F;&#x2F;clhs.lisp.se&#x2F;Body&#x2F;26_glo_m.htm#method&quot;&gt;method&lt;&#x2F;a&gt; is&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;part of a generic function which provides information about how that generic function should behave [for] certain classes.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;This means that a method is part of a generic function and has to be defined separately. Imagine we have a generic function called &lt;code&gt;f&lt;&#x2F;code&gt; with methods for &lt;code&gt;list&lt;&#x2F;code&gt; and &lt;code&gt;numeric&lt;&#x2F;code&gt; objects. The way that we would denote these methods is by putting a period after the function name and indicating the type of object the function is to be used on. These would look like &lt;code&gt;f.list&lt;&#x2F;code&gt; and &lt;code&gt;f.numeric&lt;&#x2F;code&gt; respectively.&lt;&#x2F;p&gt;
&lt;p&gt;But to save time you can always create a &lt;code&gt;default&lt;&#x2F;code&gt; method which will be dispatched (used) on any object that it hasn&#x27;t been explicitly told how to operate on (by a specific method).&lt;&#x2F;p&gt;
&lt;p&gt;Now that the intuition of what generic functions and methods R, we can begin the work of actually creating them. This tutorial will walk through the steps I took in changing the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; from a standard function into a generic function with methods for &lt;code&gt;sf&lt;&#x2F;code&gt; objects and &lt;code&gt;tbl_graph&lt;&#x2F;code&gt; objects from the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;r-spatial&#x2F;sf&quot;&gt;&lt;code&gt;sf&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thomasp85&#x2F;tidygraph&quot;&gt;&lt;code&gt;tidygraph&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; packages respectively.&lt;&#x2F;p&gt;
&lt;p&gt;A brief overview of the process:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Define the generic function&lt;&#x2F;li&gt;
&lt;li&gt;Create a default method&lt;&#x2F;li&gt;
&lt;li&gt;Create additional methods&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;A quick note: The code that follows is not identical to that of the package. I will be changing it up to make it simpler to read and understand what is happening.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-generic-method&quot;&gt;The Generic Method&lt;&#x2F;h3&gt;
&lt;p&gt;The first step, as described above, is to create a generic function. Generic functions are made by creating a new function with the body containing only a call to the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;UseMethod.html&quot;&gt;&lt;code&gt;UseMethod()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function. The only argument to this is the name of your generic function---this should be the same as the name of the function you are making. This tells R that you are creating a generic function. Additionally, you should add any arguments that will be necessary for your function. Here, there are two arguments: &lt;code&gt;dat&lt;&#x2F;code&gt; and &lt;code&gt;case&lt;&#x2F;code&gt;. These indicate the data to be cleaned and the preferred style for them to be cleaned according to.&lt;&#x2F;p&gt;
&lt;p&gt;I am not setting any default values for &lt;code&gt;dat&lt;&#x2F;code&gt; to make it required, whereas I am setting &lt;code&gt;case&lt;&#x2F;code&gt; to &lt;code&gt;&quot;snake&quot;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;clean_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;case&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;snake&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;UseMethod.html&#x27;&gt;UseMethod&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;clean_names&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now we have created a generic function. But this function doesn&#x27;t know how to run on any given object types. In other words, there are no methods associated with it. To illustrate this try using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function we just defined on objects of different types.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;clean_names(1) # numeric 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;clean_names(&amp;quot;test&amp;quot;) # character 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;clean_names(TRUE) # logical 
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;no applicable method for &#x27;clean_names&#x27; applied to an object of class \&quot;c(&#x27;double&#x27;, &#x27;numeric&#x27;)\&quot;&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;no applicable method for &#x27;clean_names&#x27; applied to an object of class \&quot;character\&quot;&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [1] &quot;no applicable method for &#x27;clean_names&#x27; applied to an object of class \&quot;logical\&quot;&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The output of these calls say &lt;code&gt;no applicable method for &#x27;x&#x27; applied to an object of [class]&lt;&#x2F;code&gt;. In order to prevent this from happening, we can create a default method. A default method will always be used if the function doesn&#x27;t have a method for the provided object type.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-default-method&quot;&gt;The Default Method&lt;&#x2F;h3&gt;
&lt;p&gt;Remember that methods are indicated by writing &lt;code&gt;function.method&lt;&#x2F;code&gt;. It is also important to note that the &lt;code&gt;method&lt;&#x2F;code&gt; should indicate an object class. To figure out what class an object is you can use the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;class.html&quot;&gt;&lt;code&gt;class()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function. For example &lt;code&gt;class(1)&lt;&#x2F;code&gt; tells you that the number &lt;code&gt;1&lt;&#x2F;code&gt; is &quot;numeric&quot;.&lt;&#x2F;p&gt;
&lt;p&gt;In this next step I want to create a default method that will be used on every object that there isn&#x27;t a method explicitly for. To do this I will create a function called &lt;code&gt;clean_names.default&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As background, the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function takes a data frame and changes column headers to fit a given style. &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; in the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfirke&#x2F;janitor&quot;&gt;development version&lt;&#x2F;a&gt; is based on the function &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&quot;&gt;&lt;code&gt;make_clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which takes a character vector and makes each value match a given style (the default is snake, and you should only use snake case because everything else is wrong * sarcasm * ).&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;github.com&#x2F;sfirke&#x2F;janitor&#x27;&gt;janitor&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now let&#x27;s see how this function works. For this we will use the ugliest character vector I have ever seen from the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfirke&#x2F;janitor&#x2F;blob&#x2F;master&#x2F;tests&#x2F;testthat&#x2F;test-clean-names.R&quot;&gt;tests&lt;&#x2F;a&gt; for &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; (h&#x2F;t @sfirke for making this).&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;ugly_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
  &lt;span class=&#x27;s&#x27;&gt;&quot;sp ace&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;repeated&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;a**^@&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;%&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;*&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;!&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;d(!)9&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;REPEATED&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;can\&quot;&#x27;t&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;hi_`there`&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;  leading spaces&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;‚Ç¨&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;a√ß√£o&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Far≈ì&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;a b c d e f&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;testCamelCase&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;!leadingpunct&quot;&lt;&#x2F;span&gt;,
  &lt;span class=&#x27;s&#x27;&gt;&quot;average # of days&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;jan2009sales&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;jan 2009 sales&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;ugly_names&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [1] &quot;sp ace&quot;            &quot;repeated&quot;          &quot;a**^@&quot;             &quot;%&quot;                &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [5] &quot;*&quot;                 &quot;!&quot;                 &quot;d(!)9&quot;             &quot;REPEATED&quot;         &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [9] &quot;can\&quot;&#x27;t&quot;           &quot;hi_`there`&quot;        &quot;  leading spaces&quot;  &quot;‚Ç¨&quot;                &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [13] &quot;a√ß√£o&quot;              &quot;Far≈ì&quot;              &quot;a b c d e f&quot;       &quot;testCamelCase&quot;    &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [17] &quot;!leadingpunct&quot;     &quot;average # of days&quot; &quot;jan2009sales&quot;      &quot;jan 2009 sales&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now to see how this function works:&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&#x27;&gt;make_clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ugly_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [1] &quot;sp_ace&quot;                 &quot;repeated&quot;               &quot;a&quot;                     &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [4] &quot;percent&quot;                &quot;x&quot;                      &quot;x_2&quot;                   &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [7] &quot;d_9&quot;                    &quot;repeated_2&quot;             &quot;cant&quot;                  &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [10] &quot;hi_there&quot;               &quot;leading_spaces&quot;         &quot;x_3&quot;                   &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [13] &quot;acao&quot;                   &quot;faroe&quot;                  &quot;a_b_c_d_e_f&quot;           &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [16] &quot;test_camel_case&quot;        &quot;leadingpunct&quot;           &quot;average_number_of_days&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [19] &quot;jan2009sales&quot;           &quot;jan_2009_sales&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Tr√®s magnifique!&lt;&#x2F;p&gt;
&lt;p&gt;The body of the default method will take column names from a dataframe, clean them, and reassign them. Before we can do this, a dataframe is needed!&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# create a data frame with 20 columns&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;as_tibble.html&#x27;&gt;as_tibble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;matrix.html&#x27;&gt;matrix&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;100&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, ncol &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# makes the column names the `ugly_names` vector&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;ugly_names&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# print the data frame.&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1 √ó 20&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   `sp ace` repeated `a**^@`   `%`   `*`   `!` `d(!)9` REPEATED `can&quot;&#x27;t` hi_\th‚Ä¶¬π   lea‚Ä¶¬≤&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;       78       18      99    28    26    38      43       73       51       33      23&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with 9 more variables: `‚Ç¨` &amp;lt;int&amp;gt;, a√ß√£o &amp;lt;int&amp;gt;, Far≈ì &amp;lt;int&amp;gt;, `a b c d e f` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   testCamelCase &amp;lt;int&amp;gt;, `!leadingpunct` &amp;lt;int&amp;gt;, `average # of days` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, `jan 2009 sales` &amp;lt;int&amp;gt;, and abbreviated variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   ¬π‚Äã`hi_\`there\``, ¬≤‚Äã`  leading spaces`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ñπ Use `colnames()` to see all variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The process for writing this function is:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;take a dataframe&lt;&#x2F;li&gt;
&lt;li&gt;take the old column names and clean them&lt;&#x2F;li&gt;
&lt;li&gt;reassign the column names as the new clean names&lt;&#x2F;li&gt;
&lt;li&gt;return the object&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;clean_names.default&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;case&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;snake&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# retrieve the old names&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;old_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# clean the old names&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;new_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&#x27;&gt;make_clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;old_names&lt;&#x2F;span&gt;, case &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;case&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# assign the column names as the clean names vector&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;new_names&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# return the data&lt;&#x2F;span&gt;
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that the default method has been defined. Try running the function on our test dataframe!&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1 √ó 20&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sp_ace repeated     a percent     x   x_2   d_9 repeated_2  cant hi_th‚Ä¶¬π leadi‚Ä¶¬≤   x_3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;     78       18    99      28    26    38    43         73    51      33      23    27&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with 8 more variables: acao &amp;lt;int&amp;gt;, faroe &amp;lt;int&amp;gt;, a_b_c_d_e_f &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   test_camel_case &amp;lt;int&amp;gt;, leadingpunct &amp;lt;int&amp;gt;, average_number_of_days &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, jan_2009_sales &amp;lt;int&amp;gt;, and abbreviated variable names ¬π‚Äãhi_there,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   ¬≤‚Äãleading_spaces&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ñπ Use `colnames()` to see all variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Oh, my gorsh. Look at that! We can try replicating this with a named vector to see how the default method dispatched on unknown objects!&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# create a vector with 20 elements&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;test_vect&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# name each element with the ugly_names vector &lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_vect&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;ugly_names&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# try cleaning!&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_vect&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                 sp_ace               repeated                      a &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                      1                      2                      3 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                percent                      x                    x_2 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                      4                      5                      6 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                    d_9             repeated_2                   cant &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                      7                      8                      9 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;               hi_there         leading_spaces                    x_3 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                     10                     11                     12 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                   acao                  faroe            a_b_c_d_e_f &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                     13                     14                     15 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;        test_camel_case           leadingpunct average_number_of_days &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                     16                     17                     18 &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;           jan2009sales         jan_2009_sales &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;                     19                     20&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;It looks like this default function works super well with named objects! Now, we will broach the problem I started with, &lt;code&gt;sf&lt;&#x2F;code&gt; objects.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;sf-method&quot;&gt;&lt;code&gt;sf&lt;&#x2F;code&gt; method&lt;&#x2F;h3&gt;
&lt;p&gt;This section will go over the process for creating the &lt;code&gt;sf&lt;&#x2F;code&gt; method. If you have not ever used the &lt;code&gt;sf&lt;&#x2F;code&gt; package, I suggest you give it a try! It makes dataframe objects with spatial data associated with it. This allows you to perform many of the functions from the &lt;code&gt;tidyverse&lt;&#x2F;code&gt; to spatial data.&lt;&#x2F;p&gt;
&lt;p&gt;Before getting into it, I want to create a test object to work with. I will take the &lt;code&gt;test_df&lt;&#x2F;code&gt; column, create longitude and latitude columns, and then convert it into an &lt;code&gt;sf&lt;&#x2F;code&gt; object. The details of &lt;code&gt;sf&lt;&#x2F;code&gt; objects is out of the scope of this post.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;sf&#x2F;&#x27;&gt;sf&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;test_sf&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# create xy columns&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;long &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;80&lt;&#x2F;span&gt;, 
         lat &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;40&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# convert to sf object &lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;sf&#x2F;reference&#x2F;st_as_sf.html&#x27;&gt;st_as_sf&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;coords &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;long&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;lat&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# converting geometry column name to poor style&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;names.html&#x27;&gt;names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_sf&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;21&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Geometry&quot;&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# telling sf which column is now the geometry&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;r-spatial.github.io&#x2F;sf&#x2F;reference&#x2F;st_geometry.html&#x27;&gt;st_geometry&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_sf&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Geometry&quot;&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;test_sf&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Simple feature collection with 1 feature and 20 fields&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Geometry type: POINT&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Dimension:     XY&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Bounding box:  xmin: -80 ymin: 40 xmax: -80 ymax: 40&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; CRS:           NA&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1 √ó 21&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   `sp ace` repeated `a**^@`   `%`   `*`   `!` `d(!)9` REPEATED `can&quot;&#x27;t` hi_\th‚Ä¶¬π   lea‚Ä¶¬≤&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;       78       18      99    28    26    38      43       73       51       33      23&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with 10 more variables: `‚Ç¨` &amp;lt;int&amp;gt;, a√ß√£o &amp;lt;int&amp;gt;, Far≈ì &amp;lt;int&amp;gt;, `a b c d e f` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   testCamelCase &amp;lt;int&amp;gt;, `!leadingpunct` &amp;lt;int&amp;gt;, `average # of days` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, `jan 2009 sales` &amp;lt;int&amp;gt;, Geometry &amp;lt;POINT&amp;gt;, and abbreviated&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   variable names ¬π‚Äã`hi_\`there\``, ¬≤‚Äã`  leading spaces`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ñπ Use `colnames()` to see all variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The &lt;code&gt;sf&lt;&#x2F;code&gt; object has been created. But now how does our default method of the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function work on this object? There is only one way to know, try it.&lt;&#x2F;p&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;clean_names(test_sf)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Error in st_geometry.sf(x) : attr(obj, &amp;quot;sf_column&amp;quot;) does not point to a geometry column. Did you rename it, without setting st_geometry(obj) &amp;lt;- &amp;quot;newname&amp;quot;?
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Notice how it fails. &lt;code&gt;sf&lt;&#x2F;code&gt; noticed that I changed the name of the geometry column without explicitly telling it I did so. Since the geometry column is &lt;em&gt;almost&lt;&#x2F;em&gt; always the last column of an sf object, we can use the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&quot;&gt;&lt;code&gt;make_clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function on every column but the last one! To do this we will use the &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&quot;&gt;&lt;code&gt;rename_at()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function from &lt;code&gt;dplyr&lt;&#x2F;code&gt;. This function allows you rename columns based on their name or position, and a function that renames it (in this case, &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&quot;&gt;&lt;code&gt;make_clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;For this example dataset, say I wanted to clean the first column. How would I do that? Note that the first column is called &lt;code&gt;sp ace&lt;&#x2F;code&gt;. How this works can be seen in a simple example. In the below function call we are using the &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&quot;&gt;&lt;code&gt;rename_at()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function (for more, go &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&quot;&gt;here&lt;&#x2F;a&gt;), selecting the first column name, and renaming it using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;make_clean_names.html&quot;&gt;&lt;code&gt;make_clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&#x27;&gt;rename_at&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt;, .vars &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;vars.html&#x27;&gt;vars&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, .funs &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;make_clean_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1 √ó 20&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sp_ace repea‚Ä¶¬π `a**^@`   `%`   `*`   `!` `d(!)9` REPEA‚Ä¶¬≤ can&quot;&#x27;‚Ä¶¬≥ hi_\t‚Ä¶‚Å¥   lea‚Ä¶‚Åµ   `‚Ç¨`&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;     78      18      99    28    26    38      43      73      51      33      23    27&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with 8 more variables: a√ß√£o &amp;lt;int&amp;gt;, Far≈ì &amp;lt;int&amp;gt;, `a b c d e f` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   testCamelCase &amp;lt;int&amp;gt;, `!leadingpunct` &amp;lt;int&amp;gt;, `average # of days` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, `jan 2009 sales` &amp;lt;int&amp;gt;, and abbreviated variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   ¬π‚Äãrepeated, ¬≤‚ÄãREPEATED, ¬≥‚Äã`can&quot;&#x27;t`, ‚Å¥‚Äã`hi_\`there\``, ‚Åµ‚Äã`  leading spaces`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ñπ Use `colnames()` to see all variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Notice how only the first column has been cleaned. It went from &lt;code&gt;sp ace&lt;&#x2F;code&gt; to &lt;code&gt;sp_ace&lt;&#x2F;code&gt;. The goal is to replicate this for all columns &lt;em&gt;except&lt;&#x2F;em&gt; the last one.&lt;&#x2F;p&gt;
&lt;p&gt;To write the sf method, the above line of code can be adapted to select columns 1 through the number of columns &lt;em&gt;minus&lt;&#x2F;em&gt; 1 (so geometry isn&#x27;t selected). In order to make this work, we need to identify the second to last column---this will be supplied as the ending value of our selected variables.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;clean_names.sf&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;case&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;snake&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# identify last column that is not geometry&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;last_col_to_clean&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;ncol&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;
  &lt;span class=&#x27;c&#x27;&gt;# create a new dat object&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&#x27;&gt;rename_at&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, 
                   &lt;span class=&#x27;c&#x27;&gt;# rename the first up until the second to last&lt;&#x2F;span&gt;
                   .vars &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;ggplot2.tidyverse.org&#x2F;reference&#x2F;vars.html&#x27;&gt;vars&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;last_col_to_clean&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, 
                   &lt;span class=&#x27;c&#x27;&gt;# clean using the make_clean_names&lt;&#x2F;span&gt;
                   .funs &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;make_clean_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Voil√†! Our first non-default method has been created. This means that when an &lt;code&gt;sf&lt;&#x2F;code&gt; object is supplied to our generic function &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; it looks at the class of the object---&lt;code&gt;class(sf_object)&lt;&#x2F;code&gt;---notices it&#x27;s an &lt;code&gt;sf&lt;&#x2F;code&gt; object, then dispatches (uses) the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names.sf()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; method instead of the default.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_sf&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Simple feature collection with 1 feature and 20 fields&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Geometry type: POINT&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Dimension:     XY&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; Bounding box:  xmin: -80 ymin: 40 xmax: -80 ymax: 40&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; CRS:           NA&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 1 √ó 21&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sp_ace repeated     a percent     x   x_2   d_9 repeated_2  cant hi_th‚Ä¶¬π leadi‚Ä¶¬≤   x_3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;      &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;     78       18    99      28    26    38    43         73    51      33      23    27&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with 9 more variables: acao &amp;lt;int&amp;gt;, faroe &amp;lt;int&amp;gt;, a_b_c_d_e_f &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   test_camel_case &amp;lt;int&amp;gt;, leadingpunct &amp;lt;int&amp;gt;, average_number_of_days &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, jan_2009_sales &amp;lt;int&amp;gt;, Geometry &amp;lt;POINT&amp;gt;, and abbreviated&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   variable names ¬π‚Äãhi_there, ¬≤‚Äãleading_spaces&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ñπ Use `colnames()` to see all variable names&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Here we see that it worked exactly as we hoped. Every column but the last has been altered. This allows &lt;code&gt;sf&lt;&#x2F;code&gt; to name it&#x27;s geometry columns whatever it would like without disrupting it.&lt;&#x2F;p&gt;
&lt;p&gt;Shortly after this addition was added to the package I became aware of another type of object that had problems using &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. This is the &lt;code&gt;tbl_graph&lt;&#x2F;code&gt; object from the &lt;code&gt;tidygraph&lt;&#x2F;code&gt; package from Thomas Lin Pederson.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;tbl-graph-method&quot;&gt;&lt;code&gt;tbl_graph&lt;&#x2F;code&gt; method&lt;&#x2F;h3&gt;
&lt;p&gt;In issue &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfirke&#x2F;janitor&#x2F;issues&#x2F;252&quot;&gt;#252&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;gvdr&quot;&gt;@gvdr&lt;&#x2F;a&gt; noted that calling &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; on a &lt;code&gt;tbl_graph&lt;&#x2F;code&gt; doesn&#x27;t execute. Thankfully &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Tazinho&quot;&gt;@Tazinho&lt;&#x2F;a&gt; noted that you could easily clean the column headers by using the &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&quot;&gt;&lt;code&gt;rename_all()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function from &lt;code&gt;dplyr&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Here the solution was even easier than above. As a reminder, in order to make the &lt;code&gt;tbl_graph&lt;&#x2F;code&gt; method, we need to specify the name of the generic followed by the object class.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;clean_names.tbl_graph&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;case&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;snake&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# rename all columns&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select_all.html&#x27;&gt;rename_all&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;make_clean_names&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;dat&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;In order to test the function, we will need a graph to test it on. This example draws on the example used in the issue.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidygraph.data-imaginist.com&#x27;&gt;tidygraph&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;# create test graph to test clean_names&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;test_graph&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidygraph.data-imaginist.com&#x2F;reference&#x2F;sampling_games.html&#x27;&gt;play_erdos_renyi&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;0.5&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# attach test_df as columns &lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidygraph.data-imaginist.com&#x2F;reference&#x2F;bind_graphs.html&#x27;&gt;bind_nodes&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_df&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;test_graph&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tbl_graph: 1 nodes and 0 edges&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; #&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # A rooted tree&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; #&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # Node Data: 1 √ó 20 (active)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sp ace‚Ä¶ repeat‚Ä¶ `a**^@`   `%`   `*`   `!` `d(!)9` REPEAT‚Ä¶ can&quot;&#x27;t‚Ä¶ hi_\th‚Ä¶   lead‚Ä¶&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;     &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;      78      18      99    28    26    38      43      73      51      33      23&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with 9 more variables: `‚Ç¨` &amp;lt;int&amp;gt;, a√ß√£o &amp;lt;int&amp;gt;, Far≈ì &amp;lt;int&amp;gt;, `a b c d e f` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   testCamelCase &amp;lt;int&amp;gt;, `!leadingpunct` &amp;lt;int&amp;gt;, `average # of days` &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, `jan 2009 sales` &amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # Edge Data: 0 √ó 2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with 2 variables: from &amp;lt;int&amp;gt;, to &amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Here we see that there is a graph with only 1 node and 0 edges (relations) with bad column headers (for more, visit the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thomasp85&#x2F;tidygraph&#x2F;&quot;&gt;GitHub page&lt;&#x2F;a&gt;). Now we can test this as well.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&#x27;&gt;clean_names&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;test_graph&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tbl_graph: 1 nodes and 0 edges&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; #&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # A rooted tree&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; #&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # Node Data: 1 √ó 20 (active)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sp_ace repeat‚Ä¶     a percent     x   x_2   d_9 repeat‚Ä¶  cant hi_the‚Ä¶ leadin‚Ä¶   x_3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;    &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt;     78      18    99      28    26    38    43      73    51      33      23    27&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with 8 more variables: acao &amp;lt;int&amp;gt;, faroe &amp;lt;int&amp;gt;, a_b_c_d_e_f &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   test_camel_case &amp;lt;int&amp;gt;, leadingpunct &amp;lt;int&amp;gt;, average_number_of_days &amp;lt;int&amp;gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#   jan2009sales &amp;lt;int&amp;gt;, jan_2009_sales &amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;#&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;&lt;span style=&#x27;color: #555555;&#x27;&gt;#&amp;gt; # Edge Data: 0 √ó 2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# ‚Ä¶ with 2 variables: from &amp;lt;int&amp;gt;, to &amp;lt;int&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;It worked as anticipated!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;review-tl-dr&quot;&gt;Review (tl;dr)&lt;&#x2F;h3&gt;
&lt;p&gt;In the preceding sections we learned what generic functions and methods are. How to create a generic function, a default method, and methods for objects of different classes.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;generic function&lt;&#x2F;strong&gt;: &quot;A generic function is a function whose behavior depends on the classes or identities of the arguments supplied to it&quot;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;generic function method&lt;&#x2F;strong&gt;: &quot;part of a generic function and which provides information about how that generic function should behave [for] certain classes&quot;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The process to create a function with a method is to:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Create a generic function with:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;f_x &amp;lt;- function() { UseMethod(&quot;f_x&quot;) }&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Define the default method with:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;f_x.default &amp;lt;- function() { do something }&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Define object class specific methods with:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;f_x.class &amp;lt;- function() { do something else}&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h4 id=&quot;notes&quot;&gt;Notes&lt;&#x2F;h4&gt;
&lt;p&gt;If you have not yet encountered the &lt;code&gt;janitor&lt;&#x2F;code&gt; package it will help you tremendously with various data cleaning processes. Clearly, &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;janitor&#x2F;man&#x2F;clean_names.html&quot;&gt;&lt;code&gt;clean_names()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; is my favorite function as it helps me enforce my preferred style (and the only). If you are not aware of &lt;em&gt;&quot;proper&quot;&lt;&#x2F;em&gt; R style, I suggest you read the &lt;a href=&quot;http:&#x2F;&#x2F;adv-r.had.co.nz&#x2F;Style.html&quot;&gt;style guide&lt;&#x2F;a&gt; in &lt;a href=&quot;http:&#x2F;&#x2F;adv-r.had.co.nz&#x2F;&quot;&gt;Advanced R&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;While on the subject of &lt;em&gt;Advanced R&lt;&#x2F;em&gt;, I suggest you read the &quot;Creating new methods and generics&quot; &lt;a href=&quot;http:&#x2F;&#x2F;adv-r.had.co.nz&#x2F;OO-essentials.html&quot;&gt;section&lt;&#x2F;a&gt; of it. I struggled comprehending it at first because I didn&#x27;t even know what a method was. However, if after reading this you feel like you want more, that&#x27;s the place to go.&lt;&#x2F;p&gt;
&lt;p&gt;I&#x27;d like to thank &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfirke&quot;&gt;@sfirke&lt;&#x2F;a&gt; for being exceptionally helpful in guiding my contributions to the &lt;code&gt;janitor&lt;&#x2F;code&gt; package.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Reading Multiple csvs as 1 data frame</title>
        <published>2018-10-27T00:00:00+00:00</published>
        <updated>2018-10-27T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/read-chunked-csv/"/>
        <id>https://josiah.rs/posts/read-chunked-csv/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/read-chunked-csv/">&lt;p&gt;In an earlier &lt;a href=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;read-chunked-csv&#x2F;josiahparry.com&#x2F;post&#x2F;write-chunked-csv&quot;&gt;posting&lt;&#x2F;a&gt; I wrote about having to break a single csv into multiple csvs. In other scenarios one data set maybe provided as multiple a csvs.&lt;&#x2F;p&gt;
&lt;p&gt;Thankfully &lt;code&gt;purrr&lt;&#x2F;code&gt; has a beautiful function called &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which will make this into a two liner. This process has essentially 3 steps.&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Create a vector of all &lt;code&gt;.csv&lt;&#x2F;code&gt; files that should be merged together.&lt;&#x2F;li&gt;
&lt;li&gt;Read each file using &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Combine each dataframe into one.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; maps (applys) a function to each value of an object and produces a dataframe of all outputs.&lt;&#x2F;p&gt;
&lt;p&gt;For this example I will use the csvs I created in a previous tutorial utilizing a dataset from the Quantitative Social Science book.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Get all csv file names &lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;file_names&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&quot;&lt;&#x2F;span&gt;, pattern &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;\\.csv&quot;&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;file_names&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [1] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_1.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [2] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_10.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [3] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_11.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [4] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_12.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [5] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_13.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [6] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_2.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [7] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_3.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [8] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_4.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;  [9] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_5.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [10] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_6.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [11] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_7.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [12] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_8.csv&quot; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; [13] &quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked_9.csv&quot;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;# apply &lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;all_csvs&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;file_names&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;5866&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Rows: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;25000&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Columns: &lt;&#x2F;span&gt;&lt;span style=&#x27;color: #0000BB;&#x27;&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ&lt;&#x2F;span&gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Column specification&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;font-weight: bold;&#x27;&gt;Delimiter:&lt;&#x2F;span&gt; &quot;,&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #BB0000;&#x27;&gt;chr&lt;&#x2F;span&gt; (2): sex, messages&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BB00;&#x27;&gt;dbl&lt;&#x2F;span&gt; (4): yearofbirth, primary2004, primary2006, hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Use `spec()` to retrieve the full column specification for this data.&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #00BBBB;&#x27;&gt;‚Ñπ&lt;&#x2F;span&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# preview the data&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;utils&#x2F;head.html&#x27;&gt;head&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;all_csvs&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;# A tibble: 6 √ó 6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   sex    yearofbirth primary2004 messages   primary2006 hhsize&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt;   &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;        &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;       &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt; &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;chr&amp;gt;&lt;&#x2F;span&gt;            &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;  &lt;span style=&#x27;color: #555555; font-style: italic;&#x27;&gt;&amp;lt;dbl&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;1&lt;&#x2F;span&gt; male          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;941           0 Civic Duty           0      2&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;2&lt;&#x2F;span&gt; female        &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;947           0 Civic Duty           0      2&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;3&lt;&#x2F;span&gt; male          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;951           0 Hawthorne            1      3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;4&lt;&#x2F;span&gt; female        &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;950           0 Hawthorne            1      3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;5&lt;&#x2F;span&gt; female        &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;982           0 Hawthorne            1      3&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#&amp;gt; &lt;span style=&#x27;color: #555555;&#x27;&gt;6&lt;&#x2F;span&gt; male          &lt;span style=&#x27;text-decoration: underline;&#x27;&gt;1&lt;&#x2F;span&gt;981           0 Control              0      3&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Chunking your csv</title>
        <published>2018-10-27T00:00:00+00:00</published>
        <updated>2018-10-27T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/write-chunked-csv/"/>
        <id>https://josiah.rs/posts/write-chunked-csv/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/write-chunked-csv/">&lt;p&gt;Sometimes due to limitations of software, file uploads often have a row limit. I recently encountered this while creating texting campaigns using &lt;a href=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;write-chunked-csv&#x2F;relaytxt.io&quot;&gt;Relay&lt;&#x2F;a&gt;. Relay is a peer-to-peer texting platform. It has a limitation of 20k contacts per texting campaign. This is a limitation when running a massive Get Out the Vote (GOTV) texting initiative.&lt;&#x2F;p&gt;
&lt;p&gt;In order to solve this problem, a large csv must be split into multiple csv&#x27;s for upload. Though this could be solved with excel and Google Sheets, who wants to labor over that?&lt;&#x2F;p&gt;
&lt;p&gt;Here I will go through the methodology of writing a csv into multiple. I will use data from the &lt;a href=&quot;https:&#x2F;&#x2F;www.google.com&#x2F;search?q=quantitative+social+science&amp;amp;oq=quantitative+social+science&amp;amp;aqs=chrome..69i57j69i61j69i65j69i60l2j69i59.5035j0j1&amp;amp;sourceid=chrome&amp;amp;ie=UTF-8&quot;&gt;Quantitative Social Science&lt;&#x2F;a&gt; book by Kosuke Imai.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;social&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;kosukeimai&#x2F;qss&#x2F;master&#x2F;CAUSALITY&#x2F;social.csv&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;dim.html&#x27;&gt;dim&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;social&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This dataset has 305k observations and 6 columns. For this example let&#x27;s say we wanted to split this into files of 15,000 rows or fewer. We can use the following custom funciton:&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;write_csv_chunk&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;filepath&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;output_name&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;df&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&#x27;&gt;read_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;filepath&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 1. read original file&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;n_files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;Round.html&#x27;&gt;ceiling&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;nrow&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;df&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 2. identify how many files to make&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;chunk_starts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;seq.html&#x27;&gt;seq&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;*&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n_files&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;#  3. identify the rown number to start on&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;kr&#x27;&gt;for&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;in&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n_files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4. iterate through the csv to write the files&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nv&#x27;&gt;chunk_end&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;*&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4a&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nv&#x27;&gt;df_to_write&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;slice.html&#x27;&gt;slice&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;df&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;chunk_starts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;chunk_end&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4b&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nv&#x27;&gt;fpath&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste0&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;output_name&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;_&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;i&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;.csv&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4c&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;write_delim.html&#x27;&gt;write_csv&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;df_to_write&lt;&#x2F;span&gt;,  &lt;span class=&#x27;nv&#x27;&gt;fpath&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4d&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;message.html&#x27;&gt;message&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste0&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;fpath&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot; was written.&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# 4e&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;The function has a few steps. Let&#x27;s walk through them. The step numbers are commented above.&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Read in the csv.&lt;&#x2F;li&gt;
&lt;li&gt;Identify the number of files that will have to be created.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;ul&gt;
&lt;li&gt;This will be the number of rows of the data frame divided by the number of rows we want each file to have. This number will be rounded up to handle a remainder.&lt;&#x2F;li&gt;
&lt;li&gt;In this case &lt;code&gt;ceiling(nrow(social) &#x2F; 15000)&lt;&#x2F;code&gt; is equal to &lt;code&gt;ceiling(nrow(social) &#x2F; 15000)&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;ol&gt;
&lt;li&gt;Identify the row number to begin splitting the dataframe for each file.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;ul&gt;
&lt;li&gt;This will be a factor of our &lt;code&gt;n&lt;&#x2F;code&gt; plus 1, but will never exceed the &lt;code&gt;nrow(df)&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;ol&gt;
&lt;li&gt;This is the fun part, writing our files. The number of iterations is the number of files.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;4a&lt;&#x2F;em&gt;: The ending row number is the iteration number multiplied by the number of rows.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4b&lt;&#x2F;em&gt;: use &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;slice.html&quot;&gt;&lt;code&gt;slice()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to cute the original data frame into the chunk beginning and chunk end&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4c&lt;&#x2F;em&gt;: Creating the file paththat will be written.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4d&lt;&#x2F;em&gt;: Write the csv!&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;4e&lt;&#x2F;em&gt;: Print a message about the file being printed.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;soc_fpath&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;kosukeimai&#x2F;qss&#x2F;master&#x2F;CAUSALITY&#x2F;social.csv&quot;&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;write_csv_chunk&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;filepath &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;soc_fpath&lt;&#x2F;span&gt;, n &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;25000&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;static&#x2F;data&#x2F;chunk_data&#x2F;social_chunked&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we have these files split up, it will be good to know how to get them back into one piece! Check out my blog post on reading multiple csvs in as one data frame &lt;a href=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;write-chunked-csv&#x2F;josiahparry.com&#x2F;post&#x2F;read-chunked-csv&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Coursera R-Programming: Week 2 Problems</title>
        <published>2018-04-14T00:00:00+00:00</published>
        <updated>2018-04-14T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/tidy-coursera-r-programming/"/>
        <id>https://josiah.rs/posts/tidy-coursera-r-programming/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/tidy-coursera-r-programming/">&lt;p&gt;Over the past several weeks I have been helping students, career professionals, and people of other backgrounds learn R. During this time one this has become apparent, people are teaching the old paradigm of R and avoiding the tidyverse all together.&lt;&#x2F;p&gt;
&lt;p&gt;I recently had a student reach out to me in need of help with the first programming assignment from the &lt;a href=&quot;https:&#x2F;&#x2F;www.coursera.org&#x2F;learn&#x2F;r-programming&quot;&gt;Coursera R-Programming&lt;&#x2F;a&gt; course (part of the Johns Hopkins Data Science Specialization). This particular student was struggling with combining the her new knowledge of R data types, conditional statements, looping, control statements, scoping, and functions to solve the assignment problem set. I provided her with a walk through of each question in base R, the style of the course. I couldn&#x27;t help but empathize with her as I too learned the long way first. However I thought that she shouldn&#x27;t be learning the hard way first (see David Robinson&#x27;s &lt;a href=&quot;http:&#x2F;&#x2F;varianceexplained.org&#x2F;r&#x2F;teach-hard-way&#x2F;&quot;&gt;blog post&lt;&#x2F;a&gt;, &lt;em&gt;&quot;Don&#x27;t teach students the hard way first&quot;&lt;&#x2F;em&gt;), she should be learning the effective way.&lt;&#x2F;p&gt;
&lt;p&gt;In my written response to her, I gave her solutions to her problems in base R and using the tidyverse. Here, I will go over the problems and adress them from a tidy perspective. This will not serve as a full introduction to the tidyverse. For an introduction and a reason why the tidyverse is superior to base R, I leave you with &lt;a href=&quot;http:&#x2F;&#x2F;stat545.com&#x2F;block009_dplyr-intro.html&quot;&gt;&lt;strong&gt;Stat 545&lt;&#x2F;strong&gt;: &lt;em&gt;Introduction to dplyr&lt;&#x2F;em&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The assignment utilizes a directory of data called &lt;code&gt;specdata&lt;&#x2F;code&gt; which can be downloaded &lt;a href=&quot;https:&#x2F;&#x2F;d396qusza40orc.cloudfront.net&#x2F;rprog%2Fdata%2Fspecdata.zip&quot;&gt;&lt;strong&gt;here&lt;&#x2F;strong&gt;&lt;&#x2F;a&gt;, and describes it:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;The zip file contains 332 comma-separated-value (CSV) files containing pollution monitoring data for fine particulate matter (PM) air pollution at 332 locations in the United States. Each file contains data from a single monitor and the ID number for each monitor is contained in the file name. For example, data for monitor 200 is contained in the file &quot;200.csv&quot;. Each file contains three variables:&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Date&lt;&#x2F;strong&gt;: the date of the observation in &lt;code&gt;YYYY-MM-DD&lt;&#x2F;code&gt; format (year-month-day)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;sulfate&lt;&#x2F;strong&gt;: the level of sulfate PM in the air on that date (measured in micrograms per cubic meter)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;nitrate&lt;&#x2F;strong&gt;: the level of nitrate PM in the air on that date (measured in micrograms per cubic meter)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;For this programming assignment you will need to unzip this file and create the directory &#x27;specdata&#x27;. Once you have unzipped the zip file, do not make any modifications to the files in the &#x27;specdata&#x27; directory. In each file you&#x27;ll notice that there are many days where either sulfate or nitrate (or both) are missing (coded as NA). This is common with air pollution monitoring data in the United States.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;part-i&quot;&gt;Part I&lt;&#x2F;h1&gt;
&lt;p&gt;Problem 1:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write a function named &#x27;pollutantmean&#x27; that calculates the mean of a pollutant (sulfate or nitrate) across a specified list of monitors. The function &#x27;pollutantmean&#x27; takes three arguments: &#x27;directory&#x27;, &#x27;pollutant&#x27;, and &#x27;id&#x27;. Given a vector monitor ID numbers, &#x27;pollutantmean&#x27; reads that monitors&#x27; particulate matter data from the directory specified in the &#x27;directory&#x27; argument and returns the mean of the pollutant across all of the monitors, ignoring any missing values coded as NA. A prototype of the function is as follows&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt; pollutantmean &amp;lt;- function(directory, pollutant, id = 1:332){
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;directory&amp;#39; is a character vector of length 1 indicating
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## the location of the CSV files
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;pollutant&amp;#39; is a character vector of length 1 indicating
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## the name of the pollutant for which we will calculate the 
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## mean; either &amp;quot;sulfate&amp;quot; or &amp;quot;nitrate&amp;quot;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;id&amp;#39; is an integer vector indicating the monitor ID numbers
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## to be used
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## Return the mean of the pollutant across all monitors list
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## in the &amp;#39;id&amp;#39; vector (ignoring NA values)
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## NOTE: Do not round the result!
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Before we tackle the function, I believe the best approach is to first solve the problem in a regular script. This problem has four clear steps:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Identify files in the directory&lt;&#x2F;li&gt;
&lt;li&gt;Subset files based on provided ID&lt;&#x2F;li&gt;
&lt;li&gt;Read the files&lt;&#x2F;li&gt;
&lt;li&gt;Calculate and return the mean on the desired column&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;This problem gives us a directory of files from which we need to read in the data based on the provided IDs. For the sake of this walk through we will randomly sample 10 values within the range designated in the problem statement (332).&lt;&#x2F;p&gt;
&lt;p&gt;We will first generate random IDs, then identify all of the files within the specified directory and obtain their file paths using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&quot;&gt;&lt;code&gt;list.files()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function. After this we will subset our file list based on the IDs, then iterate over our file list and read in each file as a csv using &lt;code&gt;purrr:map_df()&lt;&#x2F;code&gt; combined with &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Fortunately &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; returns a nice and pretty data frame which lets us avoid having to explicitly bind each unique data frame.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;identify-files&quot;&gt;Identify Files&lt;&#x2F;h4&gt;
&lt;p&gt;Here we create 10 random IDs and store them in the &lt;code&gt;ids&lt;&#x2F;code&gt; variable. Next we use &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&quot;&gt;&lt;code&gt;list.files()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to look within the &lt;code&gt;specdata&lt;&#x2F;code&gt; folder that we downloaded above. Everyone&#x27;s path will most likely be different. Be sure to obtain the correct file path---help for &lt;a href=&quot;http:&#x2F;&#x2F;osxdaily.com&#x2F;2013&#x2F;06&#x2F;19&#x2F;copy-file-folder-path-mac-os-x&#x2F;&quot;&gt;Mac&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Next we identify the files we need based on the sampled &lt;code&gt;ids&lt;&#x2F;code&gt; and store the subset in the &lt;code&gt;files_filtered&lt;&#x2F;code&gt; variable. We use the values of the &lt;code&gt;ids&lt;&#x2F;code&gt; to locate the file paths positionally. For example, ID number 1 is the first file, number 10 is the tenth, etc.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Load our handy dandy functions&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# 10 random IDs in ID range&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;ids&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;10&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# Identify all files within the directory&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# Subset the data&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ids&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# View the files to verify&lt;&#x2F;span&gt;
&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;paste.html&#x27;&gt;paste&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ids&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h4 id=&quot;reading-the-files&quot;&gt;Reading the Files&lt;&#x2F;h4&gt;
&lt;p&gt;Now that we have identified the files that we are going to read in, we can use &lt;code&gt;purrr:map_df()&lt;&#x2F;code&gt; to apply the &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;readr::read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function to each value of &lt;code&gt;files_filtered&lt;&#x2F;code&gt; and return a data frame (hence the &lt;code&gt;_df()&lt;&#x2F;code&gt; suffix). We supply additional arguments to &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to ensure that every column is read in properly.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Read in the subset of the data. Notice the brackets after files[]&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;, 
                   col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                     &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                   &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;pillar.r-lib.org&#x2F;reference&#x2F;glimpse.html&#x27;&gt;glimpse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Next, we get to utilize some &lt;code&gt;dplyr&lt;&#x2F;code&gt; magic. Here we take the &lt;code&gt;specdata&lt;&#x2F;code&gt; object we created from reading in our files, deselct the &lt;code&gt;Date&lt;&#x2F;code&gt; column, then utilize &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&quot;&gt;&lt;code&gt;summarise_if()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to apply the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;mean.html&quot;&gt;&lt;code&gt;mean()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function to our data. &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&quot;&gt;&lt;code&gt;summarise_if()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; requires that we provide a logical statement as the first argument. &lt;em&gt;If&lt;&#x2F;em&gt; (hence the &lt;code&gt;_if()&lt;&#x2F;code&gt; suffix) the logical statement evaluates to &lt;code&gt;TRUE&lt;&#x2F;code&gt; on a column then it will apply a list of functions to those columns where the statement evaluated to &lt;code&gt;TRUE&lt;&#x2F;code&gt;. We can also specify additional arguments to the functions. Here we specify &lt;code&gt;na.rm = TRUE&lt;&#x2F;code&gt; for handling missing values.&lt;&#x2F;p&gt;
&lt;p&gt;In this case, we are checking to see if our columns are of the data type &lt;code&gt;double&lt;&#x2F;code&gt; using the &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;double.html&quot;&gt;&lt;code&gt;is.double()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function. If you&#x27;re wondering why we didn&#x27;t use &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;numeric.html&quot;&gt;&lt;code&gt;is.numeric()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, it&#x27;s because the &lt;code&gt;ID&lt;&#x2F;code&gt; column is an integer which is considered numeric.&lt;&#x2F;p&gt;
&lt;p&gt;If we wanted to take the underlying vector of one of the columns, we can also, use &lt;code&gt;dplyr::pull(col_name)&lt;&#x2F;code&gt;. This will be helpful later when we want to obtain the mean of just one column.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Obtain mean nitrate&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;Date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&#x27;&gt;summarise_if&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;is.double&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;mean&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# Pull just the sulfate column&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sulfate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;Date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&#x27;&gt;summarise_if&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;is.double&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;mean&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;c&#x27;&gt;# Pull just the nitrate column&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;nitrate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we have all of the tools, we can put this together into a single function, which I will call &lt;code&gt;pollutant_mean()&lt;&#x2F;code&gt; to somewhat adhere---functions should take the name of verbs---to the tidyverse style guide.&lt;&#x2F;p&gt;
&lt;p&gt;Here we have three arguments:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;directory&lt;&#x2F;code&gt;: Where to look for the files&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;pollutant&lt;&#x2F;code&gt;: Which pollutant (nitrate or sulfate) to evaluate
&lt;ul&gt;
&lt;li&gt;This needs to be a character value unless we want to get into &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;articles&#x2F;programming.html&quot;&gt;tidyeval&lt;&#x2F;a&gt;, which frankly I will leave to the professionals. But I will provide an alternative solution at the end that doesn&#x27;t require quoted &lt;code&gt;pollutant&lt;&#x2F;code&gt; names.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;id&lt;&#x2F;code&gt;: Which monitoring stations we should look at&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Within the function we take everything we did in the above steps but generalize it to a function. We identify the files in the directory provided (&lt;code&gt;specdata&lt;&#x2F;code&gt;), subset the files positionally based on the provided &lt;code&gt;id&lt;&#x2F;code&gt; vector, and then iterate over the file names and read them in with &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map_df()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;read_delim.html&quot;&gt;&lt;code&gt;read_csv()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Next we take our data and calculate the mean on both &lt;code&gt;sulfate&lt;&#x2F;code&gt; and &lt;code&gt;nitrate&lt;&#x2F;code&gt; columns. We then &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&quot;&gt;&lt;code&gt;pull()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; the specified column from the &lt;code&gt;pollutant&lt;&#x2F;code&gt; argument and then &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&quot;&gt;&lt;code&gt;return()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; that value.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;
&lt;span class=&#x27;nv&#x27;&gt;pollutant_mean&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;pollutant&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files_filtered&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;, 
                     col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;Date&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise_all.html&#x27;&gt;summarise_if&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;is.double&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;mean&lt;&#x2F;span&gt;, na.rm &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;pull.html&#x27;&gt;pull&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;pollutant&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Here we can test out the function with both types of pollutants and different &lt;code&gt;id&lt;&#x2F;code&gt; values.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;pollutant_mean&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;directory &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, pollutant &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;sulfate&quot;&lt;&#x2F;span&gt;, id &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#pollutant_mean(&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;, &quot;nitrate&quot;, 2)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;part-ii&quot;&gt;Part II:&lt;&#x2F;h1&gt;
&lt;p&gt;Let us continue to the second problem in the problem set.&lt;&#x2F;p&gt;
&lt;p&gt;Problem 2:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write a function that reads a directory full of files and reports the number of completely observed cases in each data file. The function should return a data frame where the first column is the name of the file and the second column is the number of complete cases.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;The assignment provides an example function format, but I think it to be a bit misleading. So I will go about this in the way I think is best. We will work on creating a function called &lt;code&gt;complete_spec_cases()&lt;&#x2F;code&gt; which will take only two arguments, &lt;code&gt;directory&lt;&#x2F;code&gt;, and &lt;code&gt;id&lt;&#x2F;code&gt;. &lt;code&gt;directory&lt;&#x2F;code&gt; and &lt;code&gt;id&lt;&#x2F;code&gt; will be used in the the same way as the previous problem.&lt;&#x2F;p&gt;
&lt;p&gt;For this problem our goal is to identify how many complete cases there are by provided ID. This should be exceptionally simple. We will have to identify our files, subset them, and read them in the same way as before. Next we can identify complete cases by piping our &lt;code&gt;specdata&lt;&#x2F;code&gt; object to &lt;a href=&quot;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&quot;&gt;&lt;code&gt;na.omit()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which will remove any row with a missing value. Next, we have to group by the &lt;code&gt;ID&lt;&#x2F;code&gt; column and pipe our grouped data frame to &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;count.html&quot;&gt;&lt;code&gt;count()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; which will count how many observations there are by group. We will then return this data frame to the user.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;complete_spec_cases&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;

  &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;[&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;]&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;,
                     col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;complete_specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;summarise.html&#x27;&gt;summarise&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;nobs &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;context.html&#x27;&gt;n&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;complete_specdata&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;complete_spec_cases&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, id &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;sample.html&#x27;&gt;sample&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;:&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;332&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;20&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;part-iii&quot;&gt;Part III:&lt;&#x2F;h1&gt;
&lt;p&gt;This final problem is probably the most complicated, but with the method we just used above and with a bit more help from the &lt;code&gt;purrr&lt;&#x2F;code&gt; and &lt;code&gt;dplyr&lt;&#x2F;code&gt; packages, we can do this no problem.&lt;&#x2F;p&gt;
&lt;p&gt;Problem 3:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write a function that takes a directory of data files and a threshold for complete cases and calculates the correlation between sulfate and nitrate for monitor locations where the &lt;em&gt;number of completely observed cases&lt;&#x2F;em&gt; (on all variables) is greater than the threshold. The function should return a vector of correlations for the monitors that meet the threshold requirement. If no monitors meet the threshold requirement, then the function should return a numeric vector of length 0. A prototype of this function follows:&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;pre class=&quot;z-code&quot;&gt;&lt;code&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;Correct &amp;lt;- function(directory, threshold = 0){
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;directory&amp;#39; is a character vector of length 1 indicating
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## the location of the CSV files
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## &amp;#39;threshold&amp;#39; is a numeric vector of length 1 indicating the
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## number of completely observed observations (on all
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## variables) required to compute the correlation between
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## nitrate and sulfate; the default is 0
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## Return a numeric vector of correlations
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;    ## NOTE: Do not round the result!
&lt;&#x2F;span&gt;&lt;span class=&quot;z-text z-plain&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Let keep this simple. The above statement essentially is asking that we find the correlation between &lt;code&gt;nitrate&lt;&#x2F;code&gt; and &lt;code&gt;sulfate&lt;&#x2F;code&gt; for each monitoring station (ID). But there is a catch! Each ID must meet a specified threshold of complete cases, and if none of the monitors meet the requirement the function must return a &lt;code&gt;numeric(0)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The way we will structure this function will be to first read in the data---as we have done twice now, except this time there will be no subsetting of IDs. Then we need to identify the number of complete cases by ID---as we did in problem 2---and identify the stations that meet the threshold requirement. At this point we will use an &lt;code&gt;if&lt;&#x2F;code&gt; statement to check if we have at least 1 monitoring station that meets our threshold, if we do not, we return the &lt;code&gt;numeric(0)&lt;&#x2F;code&gt;---there is most likely a more tidy way to do this, but I am not aware. If we have at least 1 monitoring station that meets the specified threshold we will use an &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&quot;&gt;&lt;code&gt;inner_join()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to make sure that &lt;code&gt;specdata&lt;&#x2F;code&gt; contains only those IDs that meet the requirement.&lt;&#x2F;p&gt;
&lt;p&gt;For the sake of this example, we will continue to use the &lt;code&gt;specdata&lt;&#x2F;code&gt; object we created in previous examples, and we will set our threshold to &lt;code&gt;100.&lt;&#x2F;code&gt; Once we identify the stations with the proper number of counts (&lt;code&gt;&amp;gt; 100&lt;&#x2F;code&gt;), we will store that data frame in an object called &lt;code&gt;id_counts&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;
&lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;count.html&#x27;&gt;count&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;100&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; 
  
  &lt;span class=&#x27;kr&#x27;&gt;if&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;nrow&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;numeric.html&#x27;&gt;numeric&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;else&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;print.html&#x27;&gt;print&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;All is well.&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;

  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&#x27;&gt;inner_join&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;ID&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; 
  
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This is where it gets kind of funky. Once we have filtered down our data set, we need to calculate the correlations for each ID. The way that we do this is by nesting our data frame on the &lt;code&gt;ID&lt;&#x2F;code&gt; column. Calling &lt;code&gt;nest(-ID)&lt;&#x2F;code&gt; allows us to, for each value of ID, create a data frame for just those rows where the &lt;code&gt;ID&lt;&#x2F;code&gt; is the same. We will then have a new list type column where each value is actually a data frame. Let&#x27;s check out what this looks like before we hop into the function.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;nest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we know how to nest our data, we need to calculate the correlations for each row (ID value). We will do this by combining &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&quot;&gt;&lt;code&gt;mutate()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&quot;&gt;&lt;code&gt;map()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. Here &lt;code&gt;.x&lt;&#x2F;code&gt; references the data that is within each nested tibble. To learn more about &lt;code&gt;purrr&lt;&#x2F;code&gt; I recommend the &lt;a href=&quot;http:&#x2F;&#x2F;r4ds.had.co.nz&#x2F;iteration.html&quot;&gt;chapter&lt;&#x2F;a&gt; on iteration from &lt;em&gt;R For Data Science&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;After we have done our calculations we undo our nesting using &lt;a href=&quot;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&quot;&gt;&lt;code&gt;unnest()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; on the new column we created, and deselect the &lt;code&gt;data&lt;&#x2F;code&gt; column.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;nest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;correlation &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;data&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;cor.html&#x27;&gt;cor&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sulfate&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;nitrate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;unnest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;correlation&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;data&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can now place these above examples within a new function called &lt;code&gt;pollutant_cor()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;pollutant_cor&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;threshold&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.files.html&#x27;&gt;list.files&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;directory&lt;&#x2F;span&gt;, full.names &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;TRUE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map_df&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;files&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;read_csv&lt;&#x2F;span&gt;, 
                     col_types &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;list.html&#x27;&gt;list&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_datetime.html&#x27;&gt;col_date&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_double&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
                       &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;readr.tidyverse.org&#x2F;reference&#x2F;parse_atomic.html&#x27;&gt;col_integer&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
                     &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;na.fail.html&#x27;&gt;na.omit&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;group_by.html&#x27;&gt;group_by&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;count.html&#x27;&gt;count&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;n&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;gt;&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;threshold&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; 
  
  &lt;span class=&#x27;kr&#x27;&gt;if&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;nrow.html&#x27;&gt;nrow&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;&lt;&#x2F;span&gt; &lt;span class=&#x27;m&#x27;&gt;1&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;numeric.html&#x27;&gt;numeric&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;m&#x27;&gt;0&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  &lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;nv&#x27;&gt;correlations&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;id_counts&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate-joins.html&#x27;&gt;inner_join&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;specdata&lt;&#x2F;span&gt;, by &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;ID&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;nest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;ID&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;correlation &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;data&lt;&#x2F;span&gt;, &lt;span class=&#x27;o&#x27;&gt;~&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;stats&#x2F;cor.html&#x27;&gt;cor&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;sulfate&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;.x&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;nitrate&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;unnest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;correlation&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
  
  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;correlations&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

  
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We can now test our function against two different thresholds to see how it reacts.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;pollutant_cor&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;100&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;If we set the threshold to 100,000, we should expect a &lt;code&gt;numeric(0)&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;pollutant_cor&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;..&#x2F;..&#x2F;data&#x2F;specdata&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;100000&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;It all works!&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Introducing geniusR</title>
        <published>2018-01-27T00:00:00+00:00</published>
        <updated>2018-01-27T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://josiah.rs/posts/introducing-geniusr/"/>
        <id>https://josiah.rs/posts/introducing-geniusr/</id>
        
        <content type="html" xml:base="https://josiah.rs/posts/introducing-geniusr/">&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;knitr&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;pkg&#x2F;knitr&#x2F;man&#x2F;opts_chunk.html&#x27;&gt;opts_chunk&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;set&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;eval&lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt;&lt;span class=&#x27;kc&#x27;&gt;FALSE&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h1 id=&quot;introducing-geniusr&quot;&gt;Introducing geniusR&lt;&#x2F;h1&gt;
&lt;p&gt;&lt;code&gt;geniusR&lt;&#x2F;code&gt; enables quick and easy download of song lyrics. The intent behind the package is to be able to perform text based analyses on songs in a tidy[text] format.&lt;&#x2F;p&gt;
&lt;p&gt;This package was inspired by the release of Kendrick Lamar&#x27;s most recent album, &lt;strong&gt;DAMN.&lt;&#x2F;strong&gt;. As most programmers do, I spent way too long to simplify a task, that being accessing song lyrics. Genius (formerly Rap Genius) is the most widly accessible platform for lyrics.&lt;&#x2F;p&gt;
&lt;p&gt;The functions in this package enable easy access of individual song lyrics, album tracklists, and lyrics to whole albums.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;install-and-load-the-package&quot;&gt;Install and load the package&lt;&#x2F;h2&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;devtools&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;::&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;devtools.r-lib.org&#x2F;reference&#x2F;remote-reexports.html&#x27;&gt;install_github&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;josiahparry&#x2F;geniusR&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Load the package:&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;geniusR&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;library.html&#x27;&gt;library&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyverse.tidyverse.org&#x27;&gt;tidyverse&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# For manipulation&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h1 id=&quot;getting-lyrics&quot;&gt;Getting Lyrics&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;whole-albums&quot;&gt;Whole Albums&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;code&gt;genius_album()&lt;&#x2F;code&gt; allows you to download the lyrics for an entire album in a &lt;code&gt;tidy&lt;&#x2F;code&gt; format. There are two arguments &lt;code&gt;artists&lt;&#x2F;code&gt; and &lt;code&gt;album&lt;&#x2F;code&gt;. Supply the quoted name of artist and the album (if it gives you issues check that you have the album name and artists as specified on &lt;a href=&quot;https:&#x2F;&#x2F;genius.com&quot;&gt;Genius&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;This returns a tidy data frame with three columns:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;title&lt;&#x2F;code&gt;: track name&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;track_n&lt;&#x2F;code&gt;: track number&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;text&lt;&#x2F;code&gt;: lyrics&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;emotions_math&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;genius_album&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;artist &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Margaret Glaspy&quot;&lt;&#x2F;span&gt;, album &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Emotions and Math&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;emotions_math&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;multiple-albums&quot;&gt;Multiple Albums&lt;&#x2F;h2&gt;
&lt;p&gt;If you wish to download multiple albums from multiple artists, try and keep it tidy and avoid binding rows if you can. We can achieve this in a tidy workflow by creating a tibble with two columns: &lt;code&gt;artist&lt;&#x2F;code&gt; and &lt;code&gt;album&lt;&#x2F;code&gt; where each row is an artist and their album. We can then iterate over those columns with &lt;code&gt;purrr:map2()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;In this example I will extract 3 albums from Kendrick Lamar and Sara Bareilles (two of my favotire musicians). The first step is to create the tibble with artists and album titles.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;albums&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt;  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tibble.tidyverse.org&#x2F;reference&#x2F;tibble.html&#x27;&gt;tibble&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
  artist &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;rep.html&#x27;&gt;rep&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;Kendrick Lamar&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;3&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;, 
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;rep.html&#x27;&gt;rep&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;Sara Bareilles&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;m&#x27;&gt;3&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
    &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;,
  album &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;c.html&#x27;&gt;c&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;
    &lt;span class=&#x27;s&#x27;&gt;&quot;Section 80&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Good Kid, M.A.A.D City&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;DAMN.&quot;&lt;&#x2F;span&gt;,
    &lt;span class=&#x27;s&#x27;&gt;&quot;The Blessed Unrest&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Kaleidoscope Heart&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Little Voice&quot;&lt;&#x2F;span&gt;
    &lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;albums&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;No we can iterate over each row using the &lt;code&gt;map2&lt;&#x2F;code&gt; function. This allows us to feed each value from the &lt;code&gt;artist&lt;&#x2F;code&gt; and &lt;code&gt;album&lt;&#x2F;code&gt; columns to the &lt;code&gt;genius_album()&lt;&#x2F;code&gt; function. Utilizing a &lt;code&gt;map&lt;&#x2F;code&gt; call within a &lt;a href=&quot;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&quot;&gt;&lt;code&gt;dplyr::mutate()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; function creates a list column where each value is a &lt;code&gt;tibble&lt;&#x2F;code&gt; with the data frame from &lt;code&gt;genius_album()&lt;&#x2F;code&gt;. We will later unnest this.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;## We will have an additional artist column that will have to be dropped&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;album_lyrics&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;albums&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;tracks &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map2.html&#x27;&gt;map2&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;album&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;genius_album&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;album_lyrics&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now when you view this you will see that each value within the &lt;code&gt;tracks&lt;&#x2F;code&gt; column is &lt;code&gt;&amp;lt;tibble&amp;gt;&lt;&#x2F;code&gt;. This means that that value is infact another &lt;code&gt;tibble&lt;&#x2F;code&gt;. We expand this using &lt;a href=&quot;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&quot;&gt;&lt;code&gt;tidyr::unnest()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Unnest the lyrics to expand &lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;lyrics&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;album_lyrics&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;unnest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;tracks&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;    &lt;span class=&#x27;c&#x27;&gt;# Expanding the lyrics &lt;&#x2F;span&gt;
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;arrange.html&#x27;&gt;arrange&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;desc.html&#x27;&gt;desc&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;c&#x27;&gt;# Arranging by artist name &lt;&#x2F;span&gt;

&lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;utils&#x2F;head.html&#x27;&gt;head&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;lyrics&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;song-lyrics&quot;&gt;Song Lyrics&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;genius-lyrics&quot;&gt;&lt;code&gt;genius_lyrics()&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;Getting lyrics to a single song is pretty easy. Let&#x27;s get in our &lt;strong&gt;ELEMENT.&lt;&#x2F;strong&gt; and checkout &lt;strong&gt;DNA.&lt;&#x2F;strong&gt; by &lt;em&gt;Kendrick Lamar&lt;&#x2F;em&gt;. But first, note that the &lt;code&gt;genius_lyrics()&lt;&#x2F;code&gt; function takes two main arguments, &lt;code&gt;artist&lt;&#x2F;code&gt; and &lt;code&gt;song&lt;&#x2F;code&gt;. Be sure to spell the name of the artist and the song correctly.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;DNA&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;genius_lyrics&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;artist &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Kendrick Lamar&quot;&lt;&#x2F;span&gt;, song &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;DNA.&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;DNA&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This returns a &lt;code&gt;tibble&lt;&#x2F;code&gt; with three columns &lt;code&gt;title&lt;&#x2F;code&gt;, &lt;code&gt;text&lt;&#x2F;code&gt;, and &lt;code&gt;line&lt;&#x2F;code&gt;. However, you can specifiy additional arguments to control the amount of information to be returned using the &lt;code&gt;info&lt;&#x2F;code&gt; argument.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;info = &quot;title&quot;&lt;&#x2F;code&gt; (default): Return the lyrics, line number, and song title.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;info = &quot;simple&quot;&lt;&#x2F;code&gt;: Return just the lyrics and line number.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;info = &quot;artist&quot;&lt;&#x2F;code&gt;: Return the lyrics, line number, and artist.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;info = &quot;all&quot;&lt;&#x2F;code&gt;: Return lyrics, line number, song title, artist.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;tracklists&quot;&gt;Tracklists&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;code&gt;genius_tracklist()&lt;&#x2F;code&gt;, given an &lt;code&gt;artist&lt;&#x2F;code&gt; and an &lt;code&gt;album&lt;&#x2F;code&gt; will return a barebones &lt;code&gt;tibble&lt;&#x2F;code&gt; with the track title, track number, and the url to the lyrics.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;genius_tracklist&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;artist &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Basement&quot;&lt;&#x2F;span&gt;, album &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;Colourmeinkindness&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h2 id=&quot;nitty-gritty&quot;&gt;Nitty Gritty&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;code&gt;genius_lyrics()&lt;&#x2F;code&gt; generates a url to Genius which is fed to &lt;code&gt;genius_url()&lt;&#x2F;code&gt;, the function that does the heavy lifting of actually fetching lyrics.&lt;&#x2F;p&gt;
&lt;p&gt;I have not figured out all of the patterns that are used for generating the Genius.com urls, so errors are bound to happen. If &lt;code&gt;genius_lyrics()&lt;&#x2F;code&gt; returns an error. Try utilizing &lt;code&gt;genius_tracklist()&lt;&#x2F;code&gt; and &lt;code&gt;genius_url()&lt;&#x2F;code&gt; together to get the song lyrics.&lt;&#x2F;p&gt;
&lt;p&gt;For example, say &quot;(No One Knows Me) Like the Piano&quot; by &lt;em&gt;Sampha&lt;&#x2F;em&gt; wasn&#x27;t working in a standard &lt;code&gt;genius_lyrics()&lt;&#x2F;code&gt; call.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;piano&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;genius_lyrics&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;Sampha&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;(No One Knows Me) Like the Piano&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;We could grab the tracklist for the album &lt;em&gt;Process&lt;&#x2F;em&gt; which the song is from. We could then isolate the url for &lt;em&gt;(No One Knows Me) Like the Piano&lt;&#x2F;em&gt; and feed that into `genius_url().&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;c&#x27;&gt;# Get the tracklist for &lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;process&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;genius_tracklist&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;Sampha&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Process&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# Filter down to find the individual song&lt;&#x2F;span&gt;
&lt;span class=&#x27;nv&#x27;&gt;piano_info&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;process&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt; 
  &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;filter.html&#x27;&gt;filter&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;title&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;==&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;(No One Knows Me) Like the Piano&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;

&lt;span class=&#x27;c&#x27;&gt;# Filter song using string detection&lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;# process %&amp;gt;% &lt;&#x2F;span&gt;
&lt;span class=&#x27;c&#x27;&gt;#  filter(stringr::str_detect(title, coll(&quot;Like the piano&quot;, ignore_case = TRUE)))&lt;&#x2F;span&gt;

&lt;span class=&#x27;nv&#x27;&gt;piano_url&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nv&#x27;&gt;piano_info&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;$&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;track_url&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Now that we have the url, feed it into &lt;code&gt;genius_url()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;genius_url&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;piano_url&lt;&#x2F;span&gt;, info &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;simple&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;hr &#x2F;&gt;
&lt;h1 id=&quot;on-the-internals&quot;&gt;On the Internals&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;generative-functions&quot;&gt;Generative functions&lt;&#x2F;h2&gt;
&lt;p&gt;This package works almost entirely on pattern detection. The urls from &lt;em&gt;Genius&lt;&#x2F;em&gt; are (mostly) easily reproducible (shout out to &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;CivicAngela&quot;&gt;Angela Li&lt;&#x2F;a&gt; for pointing this out).&lt;&#x2F;p&gt;
&lt;p&gt;The two functions that generate urls are &lt;code&gt;gen_song_url()&lt;&#x2F;code&gt; and &lt;code&gt;gen_album_url()&lt;&#x2F;code&gt;. To see how the functions work, try feeding an artist and song title to &lt;code&gt;gen_song_url()&lt;&#x2F;code&gt; and an artist and album title to &lt;code&gt;gen_album_url()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;gen_song_url&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;Laura Marling&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Soothing&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nf&#x27;&gt;gen_album_url&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;s&#x27;&gt;&quot;Daniel Caesar&quot;&lt;&#x2F;span&gt;, &lt;span class=&#x27;s&#x27;&gt;&quot;Freudian&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;&lt;code&gt;genius_lyrics()&lt;&#x2F;code&gt; calls &lt;code&gt;gen_song_url()&lt;&#x2F;code&gt; and feeds the output to &lt;code&gt;genius_url()&lt;&#x2F;code&gt; which preforms the scraping.&lt;&#x2F;p&gt;
&lt;p&gt;Getting lyrics for albums is slightly more involved. It first calls &lt;code&gt;genius_tracklist()&lt;&#x2F;code&gt; which first calls &lt;code&gt;gen_album_url()&lt;&#x2F;code&gt; then using the handy package &lt;code&gt;rvest&lt;&#x2F;code&gt; scrapes the song titles, track numbers, and song lyric urls. Next, the song urls from the output are iterated over and fed to &lt;code&gt;genius_url()&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;To make this more clear, take a look inside of &lt;code&gt;genius_album()&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre class=&#x27;chroma&#x27;&gt;&lt;code class=&#x27;language-r&#x27; data-lang=&#x27;r&#x27;&gt;&lt;span class=&#x27;nv&#x27;&gt;genius_album&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;kr&#x27;&gt;function&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;NULL&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;album&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;kc&#x27;&gt;NULL&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;info&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;s&#x27;&gt;&quot;simple&quot;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;#123;&lt;&#x2F;span&gt;

  &lt;span class=&#x27;c&#x27;&gt;# Obtain tracklist from genius_tracklist&lt;&#x2F;span&gt;
  &lt;span class=&#x27;nv&#x27;&gt;album&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&amp;lt;-&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;genius_tracklist&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;artist&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;album&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;

    &lt;span class=&#x27;c&#x27;&gt;# Iterate over the url to the song title&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;mutate.html&#x27;&gt;mutate&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;lyrics &lt;span class=&#x27;o&#x27;&gt;=&lt;&#x2F;span&gt; &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;purrr.tidyverse.org&#x2F;reference&#x2F;map.html&#x27;&gt;map&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;track_url&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;genius_url&lt;&#x2F;span&gt;, &lt;span class=&#x27;nv&#x27;&gt;info&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;

    &lt;span class=&#x27;c&#x27;&gt;# Unnest the tibble with lyrics&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;tidyr.tidyverse.org&#x2F;reference&#x2F;nest.html&#x27;&gt;unnest&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;lyrics&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt; &lt;span class=&#x27;o&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;magrittr.tidyverse.org&#x2F;reference&#x2F;pipe.html&#x27;&gt;%&amp;gt;%&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;
    
    &lt;span class=&#x27;c&#x27;&gt;# Deselect the track url&lt;&#x2F;span&gt;
    &lt;span class=&#x27;nf&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;dplyr.tidyverse.org&#x2F;reference&#x2F;select.html&#x27;&gt;select&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;-&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;track_url&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;


  &lt;span class=&#x27;kr&#x27;&gt;&lt;a href=&#x27;https:&#x2F;&#x2F;rdrr.io&#x2F;r&#x2F;base&#x2F;function.html&#x27;&gt;return&lt;&#x2F;a&gt;&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;(&lt;&#x2F;span&gt;&lt;span class=&#x27;nv&#x27;&gt;album&lt;&#x2F;span&gt;&lt;span class=&#x27;o&#x27;&gt;)&lt;&#x2F;span&gt;
&lt;span class=&#x27;o&#x27;&gt;&amp;#125;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;notes&quot;&gt;Notes:&lt;&#x2F;h3&gt;
&lt;p&gt;As this is my first &lt;em&gt;&quot;package&quot;&lt;&#x2F;em&gt; there will be many issues. Please submit an issue and I will do my best to attend to it.&lt;&#x2F;p&gt;
&lt;p&gt;There are already issues of which I am present (the lack of error handling). If you would like to take those on, please go ahead and make a pull request. Please contact me on &lt;a href=&quot;https:&#x2F;&#x2F;josiah.rs&#x2F;posts&#x2F;introducing-geniusr&#x2F;twitter.com&#x2F;josiahparry&quot;&gt;Twitter&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
